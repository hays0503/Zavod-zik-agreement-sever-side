(this.webpackJsonpdocrecyler=this.webpackJsonpdocrecyler||[]).push([[0],{177:function(e,t,n){"use strict";var s=n(422),a=n(55),i=n(50),c=(n(1),n(0));t.a=function(){return Object(c.jsx)(s.a,{status:"404",title:"404",subTitle:"\u0423\u043f\u0441, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430.",extra:Object(c.jsx)(a.a,{type:"primary",children:Object(c.jsx)(i.c,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})}},232:function(e,t,n){"use strict";t.a=n.p+"static/media/duck.dcaac10b.jpg"},306:function(e,t,n){},384:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w,C,k,S,T,I,E,P,F,R,D,L,U,$,M,J,z,K,q,A,H,B,G,Q,W,Y,X,Z,ee,te,ne,se,ae,ie,ce,oe,le,re,de,ue,me,je,be,pe,_e,Oe,he,fe,xe,ve,ge,ye,Ve,Ne,we,Ce,ke,Se,Te,Ie,Ee,Pe,Fe,Re,De,Le,Ue,$e,Me,Je,ze,Ke,qe,Ae,He,Be,Ge,Qe,We,Ye,Xe,Ze,et,tt,nt,st,at,it,ct,ot,lt,rt,dt,ut,mt,jt,bt,pt,_t,Ot,ht,ft,xt,vt,gt,yt,Vt,Nt,wt,Ct,kt,St,Tt,It,Et,Pt,Ft,Rt,Dt,Lt,Ut,$t,Mt,Jt,zt,Kt,qt,At,Ht,Bt,Gt,Qt,Wt,Yt,Xt,Zt,en,tn,nn,sn,an,cn,on,ln,rn,dn,un,mn,jn,bn,pn,_n,On,hn,fn,xn,vn,gn,yn,Vn,Nn,wn,Cn,kn,Sn,Tn,In,En,Pn,Fn,Rn,Dn,Ln,Un,$n,Mn,Jn,zn,Kn,qn,An,Hn,Bn,Gn,Qn,Wn,Yn,Xn,Zn,es,ts,ns,ss=n(3),as=n(1),is=n.n(as),cs=(n(220),n(58)),os=n.n(cs),ls=(n(306),{debug:!1,port:8445,host:window.SERVER_DATA,graphql:{path:"/graphql"}}),rs=ls,ds=n(439),us=n(447),ms=n(449),js=n(475),bs=n(476),ps=n(218),_s=n(470),Os=n(116),hs=n(280),fs=n(448),xs=n(438),vs=n(117),gs=n(278),ys=n(281),Vs=n(429),Ns=n(151),ws=n(431),Cs=n(65),ks=n(55),Ss=n(430),Ts=n(21),Is=n(282),Es=n.n(Is),Ps=n(50),Fs=n(35),Rs=n(8),Ds=n(10),Ls=n(294),Us=n(459),$s=n(460),Ms=n(461),Js=n(462),zs=n(247),Ks=n(453),qs=n(286),As=n(456),Hs=n(144),Bs=n(64),Gs=n(0),Qs=["title","user"],Ws=Vs.a.Header,Ys=zs.a.useBreakpoint,Xs=is.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Ds.a)(e,Qs),Ys()),a=Object(Fs.useHistory)(),i=Object(Fs.useLocation)().pathname;return Object(Gs.jsx)("div",{children:Object(Gs.jsx)(Ws,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(Gs.jsxs)(Ss.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(Gs.jsx)(ws.a,{flex:"auto",style:{color:"c40c46"},children:Object(Gs.jsx)(Ks.a,{className:"site-page-header",backIcon:Object(Gs.jsx)(Ls.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(Gs.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(Gs.jsx)(ws.a,{flex:"auto",children:Object(Gs.jsx)("h1",{style:{color:"white"},children:t})}):Object(Gs.jsx)(Gs.Fragment,{}),Object(Gs.jsx)(ws.a,{children:Object(Gs.jsx)(qs.a,{shape:"square",size:"small",icon:Object(Gs.jsx)(Us.a,{})})}),Object(Gs.jsx)(ws.a,{flex:"70px",style:{marginRight:"30px"},children:Object(Gs.jsx)(As.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(Gs.jsx)(Hs.a,{overlay:Object(Gs.jsxs)(Bs.a,{children:[n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(Gs.jsx)($s.a,{}),"ADMIN"]}),n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(Gs.jsx)(Ms.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(Gs.jsx)(Ms.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(Gs.jsx)(Us.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(Gs.jsx)(Js.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(Gs.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),Zs=Xs,ea=n(177),ta=n(2),na=n(11),sa=n(444),aa=n(288),ia=n(463),ca=n(296),oa=(n(383),n(240)),la=n(477),ra=(n(384),Object(oa.a)(s||(s=Object(na.a)(["\n    mutation login($user: JSON) {\n        login(user: $user){\n            username\n        }\n    }"])))),da=function(){var e=Object(as.useState)(),t=Object(ta.a)(e,2),n=t[0],s=t[1],a=Object(Rs.g)(Object(la.a)(ra))(),i=Object(ta.a)(a,2),c=i[0],o=i[1],l=o.loading,r=o.data;Object(as.useEffect)((function(){n&&c({variables:{user:n}})}),[n]),Object(as.useEffect)((function(){if(r){var e={method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(n)};fetch("https://"+rs.host+":"+rs.port+"/login",e).then((function(e){e.url!=window.location.href?window.location.href=e.url:console.log(e)}))}}),[r]);var d=sa.a.useForm(),u=Object(ta.a)(d,1)[0];return Object(Gs.jsx)(Ss.a,{justify:"center",align:"middle",style:{height:"95vh"},children:Object(Gs.jsx)(ws.a,{children:Object(Gs.jsx)(sa.a,{form:u,name:"basic",onFinish:s,onFinishFailed:function(e){console.log("Failed:",e)},children:Object(Gs.jsx)(Ss.a,{gutter:16,children:Object(Gs.jsxs)(ws.a,{children:[Object(Gs.jsx)("div",{className:"authorizationHeader",children:"\u0410\u0412\u0422\u041e\u0420\u0418\u0417\u0410\u0426\u0418\u042f"}),Object(Gs.jsx)(sa.a.Item,{name:"username",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{className:"loginFormName",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"password",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.Password,{className:"loginFormPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(Gs.jsx)(ia.a,{style:{color:"#fff"},className:"loginIcons"}):Object(Gs.jsx)(ca.a,{style:{color:"#fff"},className:"loginIcons"})}})}),Object(Gs.jsx)(sa.a.Item,{className:"loginFormItem",children:Object(Gs.jsx)(ks.a,{htmlType:"submit",loading:l,className:"login_btn",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})})})},ua=n(469),ma=n(437),ja=n(19),ba=n(9),pa=n(295),_a=n(217),Oa=n(292),ha=n(436),fa=n(97),xa=n(452),va=n(102),ga=n(443),ya=n(464),Va=n(450),Na=["GQL","InsertForm"],wa=is.a.memo((function(e){var t=e.GQL,n=e.InsertForm,s=Object(Ds.a)(e,Na),a=sa.a.useForm(),i=Object(ta.a)(a,1)[0],c=Object(as.useState)(!1),o=Object(ta.a)(c,2),l=o[0],r=o[1],d=Object(Rs.g)(Object(la.a)(t.insert),(function(){r(!1),i.resetFields()}))(),u=Object(ta.a)(d,2),m=u[0],j=u[1].loading;return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",onClick:function(){r(!0)},children:[Object(Gs.jsx)(ya.a,{}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]}),Object(Gs.jsx)(Va.a,{title:s.title,visible:l,onOk:function(){i.submit()},onCancel:function(){r(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",centered:!0,width:s.width?s.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:j||!1,children:Object(Gs.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,m({variables:n})},setVisible:r,save:function(){i.submit()}})})]})})),Ca=wa,ka=n(216),Sa=n(272),Ta=["GQL","UpdateForm"],Ia=is.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Ds.a)(e,Ta),a=sa.a.useForm(),i=Object(ta.a)(a,1)[0],c=Object(ta.a)(s.visibleModalUpdate,2),o=c[0],l=c[1],r=Object(as.useState)(!0),d=Object(ta.a)(r,2),u=d[0],m=d[1],j={};j[t.table]={global:{id:"= ".concat(s.selectedRowKeys[0])}};var b=Object(Rs.h)(t,"one",{variables:j})(),p=b.loading,_=b.data,O=b.refetch;Object(as.useEffect)((function(){_&&i.resetFields()}),[_]),Object(as.useEffect)((function(){o&&O()}),[o]),window.setVisible=l;var h=Object(Rs.g)(Object(la.a)(t.update),(function(){l(!1),m(!0)}))(),f=Object(ta.a)(h,2),x=f[0],v=f[1].loading;return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",disabled:1!==s.selectedRowKeys.length,onClick:function(){l(!0)},children:[Object(Gs.jsx)(ka.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Gs.jsx)(Va.a,{title:s.title,visible:o,centered:!0,width:s.width?s.width:450,onOk:function(){i.submit()},onCancel:function(){l(!1),m(!0)},maskClosable:!1,destroyOnClose:!0,footer:[Object(Gs.jsx)(ks.a,{onClick:function(){l(!1),m(!0)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),u?s.update&&Object(Gs.jsx)(ks.a,{type:"primary",onClick:function(){m(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"setViewMode"):Object(Gs.jsx)(ks.a,{type:"primary",loading:v,onClick:function(){i.submit()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"update")],children:Object(Gs.jsx)(Sa.a,{spinning:p,children:Object(Gs.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,x({variables:n})},initialValues:_,disabled:u,setVisible:l,setViewMode:m,save:function(){i.submit()}})})})]})})),Ea=Ia,Pa=is.a.memo((function(e){var t=e.buttons?e.buttons.map((function(e,t){return Object(Gs.jsx)(ws.a,{children:e},"button".concat(t))})):[];return Object(Gs.jsxs)(Ss.a,{justify:"end",align:"middle",gutter:[8,8],children:[Object(Gs.jsx)(ws.a,{flex:"auto",children:Object(Gs.jsx)("h1",{style:{margin:"0 0 0 30px"},children:e.title})}),t]})})),Fa=Pa,Ra=n(440),Da=is.a.memo((function(e){var t=Object(as.useState)([]),n=Object(ta.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(as.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key])},onDoubleClick:function(t){e.visibleModalUpdate[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){return e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":"ant-table-row ant-table-row-level-0"}})})})),La=Da,Ua=n(147),$a=n(205),Ma=n.n($a),Ja=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(Gs.jsxs)("div",{style:{padding:8},children:[Object(Gs.jsx)(aa.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ks.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(Gs.jsx)(Ua.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(Gs.jsx)(ks.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(Gs.jsx)(Ua.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(Gs.jsx)(Ma.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},za=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],Ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Gs.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Gs.jsx)(Cs.a,{title:t,color:"grey",children:Object(Gs.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},Aa=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Ds.a)(e,za);if(d)return Object(ss.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=Ka;return r&&(m=qa),Object(ss.a)(Object(ss.a)({title:Ka(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return Ja(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},Ha={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(a||(a=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(oa.a)(i||(i=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(c||(c=Object(na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},insert:Object(oa.a)(o||(o=Object(na.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(oa.a)(l||(l=Object(na.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(oa.a)(r||(r=Object(na.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},Ba={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(d||(d=Object(na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(oa.a)(u||(u=Object(na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(m||(m=Object(na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(oa.a)(j||(j=Object(na.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(oa.a)(b||(b=Object(na.a)(["\n        mutation updatetPosition($positions: JSON) {\n            updatetPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(oa.a)(p||(p=Object(na.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},Ga=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)(!1),s=Object(Rs.g)(Object(la.a)(Ha.delete))(),a=Object(ta.a)(s,2),i=a[0],c=a[1].loading,o=Object(Rs.h)(Ha,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(as.useEffect)((function(){d()}),[]);var u=Object(Rs.h)(Ba,"all")(),m=(u.loading,u.data),j=u.refetch;Object(as.useEffect)((function(){j()}),[]);var b=r&&null!=r.users?r.users.map((function(e){return{id:e.id,key:e.id,username:e.username,access:e.admin?"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c",positions:e.positions,fio:e.fio,email:e.email,positionName:m.positions.filter((function(t){return t.id==e.positions})).map((function(e){return e.name}))[0]}})):[],p=Aa([{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",width:100,tooltip:!0},{title:"\u0420\u043e\u043b\u044c",dataIndex:"access",align:"center",width:100,render:function(e,t){switch(t.access){case"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":return Object(Gs.jsx)(Oa.a,{color:"green",children:e});case"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c":return Object(Gs.jsx)(Oa.a,{color:"geekblue",children:e});default:return e}}},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",dataIndex:"positionName",width:150,tooltip:!0}]);return Object(Gs.jsx)(La,{data:{dict:p,records:b},loading:l,title:function(e){return Object(Gs.jsx)(Fa,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",buttons:[Object(Gs.jsx)(Ca,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",GQL:Ha,InsertForm:Qa,width:650}),Object(Gs.jsx)(Ea,Object(ba.a)({visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",width:650,selectedRowKeys:e.selectedRowKeys,GQL:Ha,UpdateForm:Qa,update:!0},"width",700)),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Ha.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n,bordered:!0})})),Qa=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({username:"",password:"",admin:!1,accesses:[],positions:[],domain_username:"",fio:"",email:"",log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues&&i({id:e.initialValues.users[0].id,username:e.initialValues.users[0].username,password:e.initialValues.users[0].password,admin:e.initialValues.users[0].admin,accesses:e.initialValues.users[0].accesses,positions:e.initialValues.users[0].positions,domain_username:e.initialValues.users[0].domain_username,fio:e.initialValues.users[0].fio,email:e.initialValues.users[0].email,log_username:t.username})}),[e.initialValues]);return Object(Gs.jsx)(sa.a,{form:e.form,name:"WorkersWorkerdForm",onFinish:function(t){e.onFinish(a),console.log(t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:Object(Gs.jsx)(Ss.a,{justify:"center",children:Object(Gs.jsxs)(ws.a,{flex:"auto",children:[Object(Gs.jsx)(sa.a.Item,{name:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"domain_username",label:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"email",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043b\u044f \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u0439",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"fio",label:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Gs.jsx)(sa.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",labelCol:{span:24},rules:[{required:!e.initialValues,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a.Password,{disabled:e.disabled,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"accountInput"})}),Object(Gs.jsx)(sa.a.Item,{name:"admin",valuePropName:"checked",rules:[{type:"boolean"}],shouldUpdate:!0,children:Object(Gs.jsx)(fa.a,{disabled:e.disabled,children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})}),a.admin?null:Object(Gs.jsx)(ma.a,{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"}),Object(Gs.jsx)(sa.a.Item,{name:"positions",rules:[{type:"array",required:!a.admin,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],hidden:a.admin,children:Object(Gs.jsx)(Wa,{disabled:e.disabled})}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0,children:Object(Gs.jsx)(aa.a,{disabled:e.disabled})})]})})})})),Wa=is.a.memo((function(e){var t=Object(Rs.h)(Ba,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(as.useEffect)((function(){a()}),[]);var i=Object(as.useState)([]),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(xa.a,{dataSource:r,showSearch:!0,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(ja.a)(e),Object(ja.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Gs.jsx)(va.a,{image:va.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),Ya=Ga,Xa={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(_||(_=Object(na.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(oa.a)(O||(O=Object(na.a)(["\n            query document_statuses($document_statuses: JSON) {\n                document_statuses(document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(h||(h=Object(na.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(oa.a)(f||(f=Object(na.a)(["\n        mutation insertDocumentStatus($document_statuses: JSON) {\n            insertDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),update:Object(oa.a)(x||(x=Object(na.a)(["\n        mutation updateDocumentStatus($document_statuses: JSON) {\n            updateDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),delete:Object(oa.a)(v||(v=Object(na.a)(["\n        mutation deleteDocumentStatus($document_statuses: JSON) {\n            deleteDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "])))},Za=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)(!1),s=Object(Rs.g)(Object(la.a)(Xa.delete))(),a=Object(ta.a)(s,2),i=a[0],c=a[1].loading,o=Object(Rs.h)(Xa,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(as.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Aa([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Gs.jsx)(La,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Gs.jsx)(Fa,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",buttons:[Object(Gs.jsx)(Ca,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",GQL:Xa,InsertForm:ei}),Object(Gs.jsx)(Ea,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",selectedRowKeys:e.selectedRowKeys,GQL:Xa,UpdateForm:ei,update:!0}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Xa.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),ei=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({isuseforreport:!1,log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues&&i({id:e.initialValues.document_statuses[0].id,name:e.initialValues.document_statuses[0].name,log_username:a.log_username})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentStatusesForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0,children:Object(Gs.jsx)(aa.a,{disabled:e.disabled})})]})})),ti=Za,ni=n(465),si=n(466),ai=n(78),ii=n(164),ci=["query","placeholder","clear"],oi=is.a.memo((function(e){var t=e.query,n=e.placeholder,s=e.clear,a=Object(Ds.a)(e,ci),i=Object(Rs.h)(t,"all")(),c=i.loading,o=i.data,l=i.refetch;return Object(as.useEffect)((function(){l()}),[]),Object(Gs.jsxs)(Ss.a,{justify:"space-between",children:[Object(Gs.jsx)(ws.a,{flex:"auto",children:Object(Gs.jsxs)(ii.a,Object(ss.a)(Object(ss.a)({style:s?{width:"100%"}:null,placeholder:n,loading:c,showSearch:!0,optionFilterProp:"children",filterOption:!0},a),{},{children:[Object(Gs.jsx)(ii.a.Option,{value:null},null),o?o[Object.keys(o)[0]].map((function(e){return Object(Gs.jsx)(ii.a.Option,{value:e.id,children:e[Object.keys(e).filter((function(e){return"id"!==e&&"__typename"!==e}))[0]]},e.id)})):[]]}))}),s?Object(Gs.jsx)(ws.a,{children:Object(Gs.jsx)(ks.a,{style:{padding:5},type:"dashed",onClick:function(){a.onChange(null)},children:Object(Gs.jsx)(ai.a,{})})}):null]})})),li=oi,ri=n(293),di=n(467),ui=n(468),mi={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(g||(g=Object(na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "]))),one:Object(oa.a)(y||(y=Object(na.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(V||(V=Object(na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},insert:Object(oa.a)(N||(N=Object(na.a)(["\n        mutation insertDocumentRoute($document_routes: JSON) {\n            insertDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),update:Object(oa.a)(w||(w=Object(na.a)(["\n        mutation updateDocumentRoute($document_routes: JSON) {\n            updateDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),delete:Object(oa.a)(C||(C=Object(na.a)(["\n        mutation deleteDocumentRoute($document_routes: JSON) {\n            deleteDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "])))},ji={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(oa.a)(k||(k=Object(na.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(S||(S=Object(na.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))}},bi={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(T||(T=Object(na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(oa.a)(I||(I=Object(na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(E||(E=Object(na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},pi=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)(!1),s=Object(Rs.g)(Object(la.a)(mi.delete))(),a=Object(ta.a)(s,2),i=a[0],c=a[1].loading,o=Object(Rs.h)(mi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(as.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Aa([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(La,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Gs.jsx)(Fa,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",buttons:[Object(Gs.jsx)(Ca,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",GQL:mi,InsertForm:_i,width:750}),Object(Gs.jsx)(Ea,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:mi,UpdateForm:_i,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[mi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})})),_i=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useRef)(),s=Object(as.useState)({isuseforreport:!1,log_username:t.username}),a=Object(ta.a)(s,2),i=a[0],c=a[1];Object(as.useEffect)((function(){e.form.setFieldsValue(i),console.log("props top",i)}),[i]),Object(as.useEffect)((function(){e.initialValues&&c({id:e.initialValues.document_routes[0].id,name:e.initialValues.document_routes[0].name,status_in_process:e.initialValues.document_routes[0].status_in_process,status_cancelled:e.initialValues.document_routes[0].status_cancelled,status_finished:e.initialValues.document_routes[0].status_finished,routes:e.initialValues.document_routes[0].routes,log_username:i.log_username})}),[e.initialValues]);return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentRoutesForm",onFinish:function(t){e.onFinish(i)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"status_in_process",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(li,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",query:ji})}),Object(Gs.jsx)(sa.a.Item,{name:"status_cancelled",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(li,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",query:ji})}),Object(Gs.jsx)(sa.a.Item,{name:"status_finished",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(li,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",query:ji})}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0,children:Object(Gs.jsx)(aa.a,{disabled:e.disabled})}),Object(Gs.jsx)(sa.a.List,{name:"routes",children:function(t,s){var a=s.add,i=s.remove;return Object(Gs.jsxs)(Gs.Fragment,{children:[t.map((function(t){return Object(Gs.jsx)(As.b,{style:{display:"flex",marginBottom:40},align:"baseline",children:Object(Gs.jsxs)(Ss.a,{gutter:20,children:[Object(Gs.jsxs)(ws.a,{span:24,children:["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u2116: ",Object(Gs.jsx)("b",{children:t.name+1})]}),Object(Gs.jsxs)(ws.a,{span:12,children:[Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{name:[t.name,"positionId"],fieldKey:[t.fieldKey,"positionId"],children:Object(Gs.jsx)(li,{disabled:e.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:bi,onChange:function(e,n){c((function(e){var s=Object.assign({},e);return console.log("field.fieldKey",t.fieldKey),s.routes[t.name].positionName=n.children,s.routes[t.name].step=t.name+1,s}))}})})),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{name:[t.name,"step"],fieldKey:[t.fieldKey,"step"],hidden:!0})),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{name:[t.name,"positionName"],fieldKey:[t.fieldKey,"positionName"],hidden:!0}))]}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{name:[t.name,"isExecutor"],fieldKey:[t.fieldKey,"isExecutor"],valuePropName:"checked",rules:[{type:"boolean",required:!1}],children:Object(Gs.jsx)(fa.a,{disabled:e.disabled,children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c?"})}))}),Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{label:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b:",name:[t.name,"statuses"],fieldKey:[t.fieldKey,"statuses"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(Gs.jsx)(Oi,{disabled:e.disabled})}))}),Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},t),{},{label:"\u0417\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0446\u0430:",name:[t.name,"substitutes"],fieldKey:[t.fieldKey,"substitutes"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(Gs.jsx)(hi,{disabled:e.disabled})}))}),Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)("i",{children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(Gs.jsx)(ni.a,{onClick:function(){return i(t.name)},disabled:e.disabled,style:{marginLeft:5}})]})]})},t.key)})),Object(Gs.jsx)(sa.a.Item,{children:Object(Gs.jsx)(ks.a,{type:"dashed",onClick:function(){return a()},disabled:e.disabled,block:!0,icon:Object(Gs.jsx)(si.a,{}),ref:n,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})})]})}})]}),Object(Gs.jsx)(Ss.a,{className:"on-approval-from-buttons-wrap",children:Object(Gs.jsxs)(ws.a,{span:24,className:"on-approval-form-buttons-container",children:[Object(Gs.jsx)(ks.a,{disabled:e.disabled,style:{marginRight:"5px"},onClick:function(){n.current.click()},icon:Object(Gs.jsx)(ri.a,{})}),Object(Gs.jsx)("span",{style:{marginRight:"5px"},children:e.setViewMode?Object(Gs.jsx)(ks.a,{onClick:function(){e.setViewMode(!1)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(Gs.jsx)(di.a,{})}):Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){e.save()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),children:Object(Gs.jsx)(ks.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:Object(Gs.jsx)(_a.a,{})})})}),Object(Gs.jsx)("span",{style:{marginRight:"5px"},children:Object(Gs.jsx)(ks.a,{onClick:function(){e.setVisible(!1),e.setViewMode(!0)},title:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:Object(Gs.jsx)(ui.a,{})})})]})})]})})),Oi=is.a.memo((function(e){var t=Object(Rs.h)(ji,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(as.useEffect)((function(){a()}),[]);var i=Object(as.useState)([]),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.document_statuses.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(xa.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(ja.a)(e),Object(ja.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Gs.jsx)(va.a,{image:va.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),hi=is.a.memo((function(e){var t=Object(Rs.h)(bi,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(as.useEffect)((function(){a()}),[]);var i=Object(as.useState)([]),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(xa.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(ja.a)(e),Object(ja.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Gs.jsx)(va.a,{image:va.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"},disabled:e.disabled})})})),fi=pi,xi={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(P||(P=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "]))),one:Object(oa.a)(F||(F=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(R||(R=Object(na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},insert:Object(oa.a)(D||(D=Object(na.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(oa.a)(L||(L=Object(na.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(oa.a)(U||(U=Object(na.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},vi={exemplar:"positions",table:"positions",options:{all:{variables:{positions:{global:{ORDER_BY:["name asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)($||($=Object(na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),one:Object(oa.a)(M||(M=Object(na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(J||(J=Object(na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},insert:Object(oa.a)(z||(z=Object(na.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(oa.a)(K||(K=Object(na.a)(["\n        mutation updatePosition($positions: JSON) {\n            updatePosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(oa.a)(q||(q=Object(na.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},gi=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)(!1),s=Object(Rs.g)(Object(la.a)(vi.delete))(),a=Object(ta.a)(s,2),i=a[0],c=a[1].loading,o=Object(Rs.h)(vi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(as.useEffect)((function(){d()}),[]);var u=Object(Rs.h)(xi,"all")(),m=(u.loading,u.data),j=u.refetch;Object(as.useEffect)((function(){j()}),[]);var b=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){var t;return{id:e.id,key:e.id,name:e.name,accesses:e.accesses,count:null===m||void 0===m||null===(t=m.users)||void 0===t?void 0:t.filter((function(t){return t.positions==e.id})).length}})):[],p=Aa([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0},{title:"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u043b\u044c\u0437.",dataIndex:"count",width:"50px",tooltip:!0}]);return Object(Gs.jsx)(La,{data:{dict:p,records:b},loading:l,title:function(e){return Object(Gs.jsx)(Fa,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",buttons:[Object(Gs.jsx)(Ca,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",GQL:vi,InsertForm:yi}),Object(Gs.jsx)(Ea,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",selectedRowKeys:e.selectedRowKeys,GQL:vi,UpdateForm:yi,update:!0}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[vi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),yi=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues&&i({id:e.initialValues.positions[0].id,name:e.initialValues.positions[0].name,accesses:e.initialValues.positions[0].accesses,log_username:a.log_username})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentPositionsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})}),Object(Gs.jsx)("h3",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:"}),Object(Gs.jsx)(sa.a.Item,{name:"accesses",rules:[{type:"array",required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vi,{disabled:e.disabled})}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0,children:Object(Gs.jsx)(aa.a,{disabled:e.disabled})})]})})),Vi=is.a.memo((function(e){var t=Object(as.useState)(!0),n=Object(ta.a)(t,2),s=n[0],a=n[1],i=Object(as.useState)([]),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ga.a,{checkable:!0,onExpand:function(e){l(e),a(!1)},expandedKeys:o,autoExpandParent:s,onCheck:function(t){e.onChange(t)},checkedKeys:e.value,treeData:[{title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-control-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-control-p/item-status-change"},{title:"\u041c\u043e\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p/orders-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/orders-p/select"}]},{title:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443",key:"/document-control-p/reviseduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/reviseduser-p/select"}]},{title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/approveduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approveduser-p/select"}]},{title:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/rejecteduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejecteduser-p/select"}]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c",key:"/document-control-p/on-approval-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-p/select"}]},{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435",key:"/document-control-p/on-approval-list-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-list-p/select"}]},{title:"\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/for-execution-inbox-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/for-execution-inbox-p/select"}]},{title:"\u0412\u0441\u0435 \u0443\u0442\u0432\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/approved-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approved-p/select"}]},{title:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u0435\u043d\u043d\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/rejected-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejected-p/select"}]}]},{title:"\u041e\u0442\u0447\u0435\u0442\u044b",key:"/document-report-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-report-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-report-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-report-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-report-p/item-status-change"}]},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",key:"/document-hitory-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-hitory-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-hitory-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-hitory-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-hitory-p/item-status-change"}]},{title:"\u041f\u043e\u0438\u0441\u043a",key:"/document-search-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-search-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-search-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-search-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-search-p/item-status-change"}]},{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"/admin-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/admin-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/admin-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/admin-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/admin-p/item-status-change"}]}],disabled:e.disabled})})),Ni=gi,wi={exemplar:"forms",table:"forms",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(A||(A=Object(na.a)(["\n            query forms ($forms: JSON) {\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "]))),one:Object(oa.a)(H||(H=Object(na.a)(["\n            query forms($forms: JSON) {\n                forms(forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(B||(B=Object(na.a)(["\n            subscription forms ($forms: JSON){\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},insert:Object(oa.a)(G||(G=Object(na.a)(["\n        mutation insertForm($forms: JSON) {\n            insertForm(forms: $forms){\n                message\n            }\n        }\n    "]))),update:Object(oa.a)(Q||(Q=Object(na.a)(["\n        mutation updateForm($forms: JSON) {\n            updateForm(forms: $forms){\n                message\n            }\n        }\n    "]))),delete:Object(oa.a)(W||(W=Object(na.a)(["\n        mutation deleteForm($forms: JSON) {\n            deleteForm(forms: $forms){\n                message\n            }\n        }\n    "])))},Ci={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(oa.a)(Y||(Y=Object(na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(X||(X=Object(na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))}},ki=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)(!1),s=Object(Rs.g)(Object(la.a)(wi.delete))(),a=Object(ta.a)(s,2),i=a[0],c=a[1].loading,o=Object(Rs.h)(wi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(as.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Aa([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Gs.jsx)(La,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Gs.jsx)(Fa,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0444\u043e\u0440\u043c",buttons:[Object(Gs.jsx)(Ca,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",GQL:wi,InsertForm:Si}),Object(Gs.jsx)(Ea,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",selectedRowKeys:e.selectedRowKeys,GQL:wi,UpdateForm:Si,update:!0}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[wi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Si=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({isuseforreport:!1,log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues&&i({id:e.initialValues.forms[0].id,name:e.initialValues.forms[0].name,route:e.initialValues.forms[0].route,settings:JSON.stringify(e.initialValues.forms[0].settings),log_username:a.log_username})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"FormSettingsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b"})}),Object(Gs.jsx)(sa.a.Item,{name:"route",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Gs.jsx)(li,{disabled:e.disabled,placeholder:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",title:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",query:Ci})}),Object(Gs.jsx)(sa.a.Item,{name:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0,children:Object(Gs.jsx)(aa.a,{disabled:e.disabled})})]})})),Ti=ki,Ii=Vs.a.Content,Ei=Vs.a.Sider,Pi=Object(Fs.withRouter)((function(e){var t=Object(Fs.useLocation)().pathname,n=Object(Rs.j)(),s=e.location.pathname.split("/").slice(1);if("/admin/"===t||"/admin"===t){if(n.username)return Object(Gs.jsx)(Fs.Redirect,{to:"/admin/registration"});if(n.username)return Object(Gs.jsx)(Fs.Redirect,{to:"/admin/positions-page"});if(n.username)return Object(Gs.jsx)(Fs.Redirect,{to:"/admin/document-statuses-page"});if(n.username)return Object(Gs.jsx)(Fs.Redirect,{to:"/admin/document-routes-page"});if(n.username)return Object(Gs.jsx)(Fs.Redirect,{to:"/admin/forms-settings-page"})}return console.log(s,t),Object(Gs.jsxs)(Vs.a,{className:"main-layout",children:[Object(Gs.jsx)(Zs,{title:"\u041c\u043e\u0434\u0443\u043b\u044c \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",user:n}),Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsx)(Ei,{theme:"dark",breakpoint:"lg",collapsedWidth:"0",className:"ant-layout-sider",children:Object(Gs.jsxs)(Bs.a,{theme:"dark",mode:"inline",defaultSelectedKeys:t,style:{height:"100%"},className:"adminSider",children:[Object(Gs.jsx)(ma.a,{style:{position:"absolute",margin:0,top:0}}),Object(Gs.jsx)(Bs.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Gs.jsx)(ua.a,{}),children:Object(Gs.jsx)(Ps.c,{to:"/admin/registration",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/admin/registration"),Object(Gs.jsx)(ma.a,{style:{margin:0}}),Object(Gs.jsx)(Bs.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Gs.jsx)(ua.a,{}),children:Object(Gs.jsx)(Ps.c,{to:"/admin/positions-page",children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})},"/admin/positions-page"),Object(Gs.jsx)(ma.a,{style:{margin:0}}),Object(Gs.jsx)(Bs.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Gs.jsx)(ua.a,{}),children:Object(Gs.jsx)(Ps.c,{to:"/admin/document-statuses-page",children:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-statuses-page"),Object(Gs.jsx)(ma.a,{style:{margin:0}}),Object(Gs.jsx)(Bs.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Gs.jsx)(ua.a,{}),children:Object(Gs.jsx)(Ps.c,{to:"/admin/document-routes-page",children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-routes-page"),Object(Gs.jsx)(ma.a,{style:{margin:0}}),Object(Gs.jsx)(Bs.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Gs.jsx)(ua.a,{}),children:Object(Gs.jsx)(Ps.c,{to:"/admin/forms-settings-page",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})},"/admin/forms-settings-page"),Object(Gs.jsx)(ma.a,{style:{margin:0}}),Object(Gs.jsx)(ma.a,{style:{position:"absolute",margin:0,bottom:0}})]})}),Object(Gs.jsx)(Vs.a,{className:"content-layout",children:Object(Gs.jsx)(Ii,{children:Object(Gs.jsxs)("div",{className:"site-layout-background",style:{minHeight:360},children:[Object(Gs.jsx)(Fs.Route,{path:"/admin/registration",component:Ya}),Object(Gs.jsx)(Fs.Route,{path:"/admin/positions-page",component:Ni}),Object(Gs.jsx)(Fs.Route,{path:"/admin/document-statuses-page",component:ti}),Object(Gs.jsx)(Fs.Route,{path:"/admin/document-routes-page",component:fi}),Object(Gs.jsx)(Fs.Route,{path:"/admin/forms-settings-page",component:Ti})]})})})]})]})})),Fi=n(299),Ri=n(446),Di=Vs.a.Sider,Li=Vs.a.Content,Ui=Object(oa.a)(Z||(Z=Object(na.a)(["\n  mutation updatePassword(\n    $username: String\n    $password: String\n  ) {\n    updatePassword(username: $username, password: $password) {\n\t  username\n      password\n\t  \n    }\n  }\n"]))),$i=Object(oa.a)(ee||(ee=Object(na.a)(["\n\tquery application($application: JSON){\n  application(application: $application){\n    platform_version,\n    database_version\n  }\n}"]))),Mi=is.a.memo((function(e){var t=Object(as.useState)(),n=Object(ta.a)(t,2),s=n[0],a=n[1],i=Object(as.useState)(),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("1447"),d=Object(ta.a)(r,2),u=(d[0],d[1],Object(as.useState)()),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=Object(Rs.j)(),_=p.username,O=Object(la.a)(Ui,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=x.loading,g=x.error,y=Object(Fi.a)($i),V=(y.loading,y.data);y.refetch;Object(as.useEffect)((function(){v||g&&Ns.a.error({message:function(e){return e},duration:0,placement:"topLeft"})}),[g]),Object(as.useEffect)((function(){v||"0"===j&&(Ns.a.info({message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d",duration:0,placement:"topLeft"}),b("1"),console.log(j))}),[function(e){return e},j]);return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsx)(Zs,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",user:p}),Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsxs)(Di,{theme:"dark",style:{color:"#fff"},children:[Object(Gs.jsx)(ma.a,{style:{margin:"0 0 7px 0",top:0}}),Object(Gs.jsx)("h1",{style:{color:"#fff"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(Gs.jsx)(Ri.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b",value:V&&V.application&&null!=V.application[0]?V.application[0].platform_version:null}),Object(Gs.jsx)(Ri.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0411\u0414",value:V&&V.application&&null!=V.application[0]?V.application[0].database_version:null})]}),Object(Gs.jsx)(Li,{children:Object(Gs.jsxs)(As.b,{direction:"vertical",children:[Object(Gs.jsx)("h1",{children:" \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f "}),Object(Gs.jsx)("h1",{children:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c 2 \u0440\u0430\u0437\u0430 "}),Object(Gs.jsx)(aa.a.Password,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(e){a(e.target.value),console.log(s)},className:"accountInput",iconRender:function(e){return e?Object(Gs.jsx)(ia.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(Gs.jsx)(ca.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})}}),Object(Gs.jsx)(aa.a.Password,{onChange:function(e){l(e.target.value),console.log(o)},value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(Gs.jsx)(ia.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(Gs.jsx)(ca.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})},className:"accountInput"}),Object(Gs.jsx)(ks.a,{onClick:function(){s===o&&s.length>0&&o.length>0?(b("0"),f({variables:{username:_,password:s}})):Ns.a.error({message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0438\u043b\u0438 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u044b",duration:0,placement:"topLeft"})},children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})]})})})),Ji=Mi,zi=n(454),Ki=n(471),qi=n(472),Ai=n(478),Hi=n(119),Bi=Vs.a.Sider,Gi=Bs.a.SubMenu,Qi=function(e){var t=Object(Hi.useLocation)(),n=Object(Rs.j)(),s=t.pathname,a=Object(as.useState)(!1),i=Object(ta.a)(a,2),c=i[0],o=i[1],l=Object(as.useState)({t1:2,t2:3,t3:3}),r=Object(ta.a)(l,2),d=r[0],u=r[1],m=Object(as.useState)({}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=Object(oa.a)(te||(te=Object(na.a)(["\n\tquery document_logs($document_logs: JSON){\n        document_logs(document_logs: $document_logs){\n            id\n            document_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),O=Object(oa.a)(ne||(ne=Object(na.a)(["\n        subscription document_logs ($document_logs: JSON){\n            document_logs(document_logs: $document_logs){\n                id\n                document_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),h=Object(oa.a)(se||(se=Object(na.a)(["\n\tquery document_tasks_logs($document_tasks_logs: JSON){\n        document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n            id\n            task_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),f=Object(oa.a)(ae||(ae=Object(na.a)(["\n        subscription document_tasks_logs ($document_tasks_logs: JSON){\n            document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n                id\n                task_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),x=Object(Fi.a)(_,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){var t={};t.revised=e.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,t.approved=e.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,t.rejected=e.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,t.onaproval=e.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(t)}}),v=(x.loading,x.data,x.refetch,Object(Ai.a)(O,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data,n={};n.revised=t.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,n.approved=t.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,n.rejected=t.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,n.onaproval=t.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(n),(n.revised>0||n.approved>0||n.rejected>0||n.onaproval>0)&&Object(Rs.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));v.data,v.loading;Object(as.useEffect)((function(){e.countF(u),console.log("setCon applied")}),[]);var g=Object(Fi.a)(h,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){console.log("tasks query",e),p(e.document_tasks_logs.length)}}),y=(g.loading,g.data,g.refetch,Object(Ai.a)(f,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data;p(t.document_tasks_logs.length),console.log("tasks sub",t),b>0&&Object(Rs.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));y.data,y.loading;Object(as.useEffect)((function(){switch(s){case"/document-control/orders":e.setHeaderTitle("\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/reviseduser":e.setHeaderTitle("\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443");break;case"/document-control/approveduser":e.setHeaderTitle("\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435");break;case"/document-control/rejecteduser":e.setHeaderTitle("\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/on-approval":e.setHeaderTitle("\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435");break;case"/document-control/on-approval-list":e.setHeaderTitle("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/approved":e.setHeaderTitle("\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b");break;case"/document-control/rejected":e.setHeaderTitle("\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/for-execution-inbox":e.setHeaderTitle("\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435")}}),[s]);return Object(Gs.jsx)(Bi,{theme:"dark",collapsible:!0,collapsed:c,onCollapse:function(e){console.log(e),o(e)},children:Object(Gs.jsxs)(Bs.a,{defaultSelectedKeys:s,className:"siderMenu",mode:"inline",defaultOpenKeys:["User","onApproval","Admin"],children:[Object(Gs.jsxs)(Gi,{icon:Object(Gs.jsx)(_s.a,{}),title:"\u041c\u043e\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",children:[n.documentControl.insert?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsx)(Ps.b,{to:"/document-control/orders",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/orders"):null,n.documentControl.revisedUser.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsxs)(Ps.c,{to:"/document-control/reviseduser",children:["\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 ",Object(Gs.jsx)("sup",{children:Object(Gs.jsx)(zi.a,{count:d.revised})})]})},"/document-control/reviseduser"):null,n.documentControl.approvedUser.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsxs)(Ps.c,{to:"/document-control/approveduser",children:["\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 ",Object(Gs.jsx)("sup",{children:Object(Gs.jsx)(zi.a,{count:d.approved})})]})},"/document-control/approveduser"):null,n.documentControl.rejectedUser.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsxs)(Ps.b,{to:"/document-control/rejecteduser",children:["\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435 ",Object(Gs.jsx)("sup",{children:Object(Gs.jsx)(zi.a,{count:d.rejected})})]})},"/document-control/rejecteduser"):null]},"User"),n.documentControl.onApproval.select||n.documentControl.onApprovalList.select?Object(Gs.jsxs)(Gi,{icon:Object(Gs.jsx)(Ki.a,{}),title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:[n.documentControl.onApproval.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsxs)(Ps.b,{to:"/document-control/on-approval",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(Gs.jsx)("sup",{children:Object(Gs.jsx)(zi.a,{count:d.onaproval})})]})},"/document-control/on-approval"):null,n.documentControl.onApprovalList.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsx)(Ps.b,{to:"/document-control/on-approval-list",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/on-approval-list"):null]},"onApproval"):null,n.documentControl.forExecutionInbox.select?Object(Gs.jsx)(Gi,{icon:Object(Gs.jsx)(Ki.a,{}),title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",children:n.documentControl.forExecutionInbox.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsxs)(Ps.b,{to:"/document-control/for-execution-inbox",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(Gs.jsx)("sup",{children:Object(Gs.jsx)(zi.a,{count:b})})]})},"/document-control/for-execution-inbox"):null},"forExecution"):null,n.documentControl.approved.select||n.documentControl.rejected.select?Object(Gs.jsxs)(Gi,{icon:Object(Gs.jsx)(qi.a,{}),title:"\u0421\u043f\u0438\u0441\u043e\u043a (\u0410\u0434\u043c\u0438\u043d)",children:[n.documentControl.approved.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsx)(Ps.c,{to:"/document-control/approved",children:"\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"})},"/document-control/approved"):null,n.documentControl.rejected.select?Object(Gs.jsx)(Bs.a.Item,{children:Object(Gs.jsx)(Ps.b,{to:"/document-control/rejected",children:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435"})},"/document-control/rejected"):null]},"Admin"):null]})})},Wi=n(7),Yi=n.n(Wi),Xi=n(13),Zi=n(455),ec=["GQL","GQL2","GQL3","GQL4","GQL5","Form1","Form2","Form3","Form4","Form5"],tc={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(ie||(ie=Object(na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "]))),one:Object(oa.a)(ce||(ce=Object(na.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(oe||(oe=Object(na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))}},nc={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(le||(le=Object(na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(oa.a)(re||(re=Object(na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(de||(de=Object(na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},sc=Zi.a.Step,ac=is.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.Form1,o=e.Form2,l=e.Form3,r=e.Form4,d=e.Form5,u=Object(Ds.a)(e,ec),m=Object(as.useState)(!1),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=Object(as.useState)(!1),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=Object(as.useState)(!1),v=Object(ta.a)(x,2),g=v[0],y=v[1],V=Object(as.useState)(!1),N=Object(ta.a)(V,2),w=N[0],C=N[1],k=Object(as.useState)(!1),S=Object(ta.a)(k,2),T=S[0],I=S[1],E=Object(as.useState)(),P=Object(ta.a)(E,2),F=P[0],R=P[1],D=Object(as.useState)({}),L=Object(ta.a)(D,2),U=L[0],$=L[1],M=Object(Rs.j)(),J=sa.a.useForm(),z=Object(ta.a)(J,1)[0],K=Object(as.useState)(!1),q=Object(ta.a)(K,2),A=q[0],H=q[1];Object(as.useEffect)((function(){A&&null!=U.route_id&&(z.resetFields(),$({route_id:null}),ee([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]))}),[A]);var B=function(){p(!1),f(!1),y(!1),C(!1),I(!1)},G=Object(Fi.a)(tc.select.all,{variables:{document_routes:{global:{id:"=".concat(U.route_id)}}}}),Q=(G.loading,G.data),W=G.refetch;Object(as.useEffect)((function(){null!=U.route_id&&(W(),console.log("stateEffect",Q,U))}),[U]);var Y=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),X=Object(ta.a)(Y,2),Z=X[0],ee=X[1];Object(as.useEffect)((function(){Q&&null!=Q[Object.keys(Q)[0]]&&U.route_id>0&&(console.log("dataRoutes",Q),ne.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ae.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ce.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),le.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),de.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ee(void 0!=Q.document_routes[0].routes?Q.document_routes[0].routes.map((function(e){return{positionName:e.positionName}})):[]),R(Q.document_routes[0].routes.filter((function(e){return 1==e.step}))))}),[Q]);var te=sa.a.useForm(),ne=Object(ta.a)(te,1)[0],se=sa.a.useForm(),ae=Object(ta.a)(se,1)[0],ie=sa.a.useForm(),ce=Object(ta.a)(ie,1)[0],oe=sa.a.useForm(),le=Object(ta.a)(oe,1)[0],re=sa.a.useForm(),de=Object(ta.a)(re,1)[0],ue=Object(Rs.g)(Object(la.a)(t.insert),(function(){p(!1),ne.resetFields()}))(),me=Object(ta.a)(ue,2),je=me[0],be=me[1].loading,pe=Object(Rs.g)(Object(la.a)(n.insert),(function(){f(!1),ae.resetFields()}))(),_e=Object(ta.a)(pe,2),Oe=_e[0],he=(_e[1].loading2,Object(Rs.g)(Object(la.a)(s.insert),(function(){y(!1),ce.resetFields()}))()),fe=Object(ta.a)(he,2),xe=fe[0],ve=(fe[1].loading3,Object(Rs.g)(Object(la.a)(a.insert),(function(){C(!1),le.resetFields()}))()),ge=Object(ta.a)(ve,2),ye=ge[0],Ve=(ge[1].loading4,Object(Rs.g)(Object(la.a)(i.insert),(function(){I(!1),de.resetFields()}))()),Ne=Object(ta.a)(Ve,2),we=Ne[0],Ce=(Ne[1].loading5,function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Xi.a)(Yi.a.mark((function n(s){return Yi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ke=Object(as.useRef)("displayNone"),Se=Object(as.useRef)();return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",onClick:function(){H(!0)},children:[Object(Gs.jsx)(ya.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Gs.jsx)(Va.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",onOk:function(){null!=U.route_id?(10==U.route_id&&(H(!1),p(!0)),24==U.route_id&&(H(!1),f(!0)),26==U.route_id&&(H(!1),y(!0)),27==U.route_id&&(H(!1),C(!0)),29==U.route_id&&(z.submit(),H(!1),I(!0))):z.setFields([{name:"route_id",errors:["\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442"]}])},visible:A,onCancel:function(){H(!1)},children:Object(Gs.jsxs)(sa.a,{form:z,name:"Route_select",onFinish:function(e){Se.current=e.routes,console.log("ROUTE 5",e)},onValuesChange:function(e,t){$(Object.assign({},U,Object(ss.a)({},t))),console.log("state",U)},children:[Object(Gs.jsx)(sa.a.Item,{name:"route_id",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442!",whitespace:!0}],children:Object(Gs.jsx)(li,{placeholder:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",query:tc})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"font-form-header marginTop marginBottom",children:Object(Gs.jsx)("label",{children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442:"})}),Object(Gs.jsx)(Zi.a,{size:"small",current:0,direction:"vertical",children:Z.map((function(e){if(4!=Z.length)return ke.current="displayNone",Object(Gs.jsx)(sc,{title:M.admin?e.positionName+" - "+M.username:e.positionName});ke.current="displayBlock"}))}),Object(Gs.jsxs)("div",{className:ke.current,children:[Object(Gs.jsx)("span",{className:"marginBottom displayBlock",children:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435"}),Object(Gs.jsx)(sa.a.List,{name:"routes",children:function(e,t){var n=t.add,s=t.remove;return Object(Gs.jsxs)(Gs.Fragment,{children:[e.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:19,children:Object(Gs.jsxs)("span",{className:"displayFlex",children:[Object(Gs.jsxs)("p",{className:"anotherFormSelectCount",children:[e.name+1,". "]}),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},e),{},{name:[e.name,"positionId"],fieldKey:[e.fieldKey,"positionId"],className:"anotherForm",children:Object(Gs.jsx)(li,{disabled:u.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:nc,onChange:function(t,n){$((function(t){var s=Object.assign({},t);return console.log("field.fieldKey",e.fieldKey),s.routes[e.name].positionName=n.children,s.routes[e.name].step=e.name+1,s.routes[e.name].statuses=["5","4","2","7"],s}))}})}))]})}),Object(Gs.jsxs)(ws.a,{span:5,children:[Object(Gs.jsx)("i",{style:{marginLeft:"20px"},children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(Gs.jsx)(ni.a,{onClick:function(){s(e.name)},disabled:u.disabled,style:{marginLeft:5}})]}),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},e),{},{name:[e.name,"step"],fieldKey:[e.fieldKey,"step"],hidden:!0})),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},e),{},{name:[e.name,"positionName"],fieldKey:[e.fieldKey,"positionName"],hidden:!0})),Object(Gs.jsx)(sa.a.Item,Object(ss.a)(Object(ss.a)({},e),{},{name:[e.name,"statuses"],fieldKey:[e.fieldKey,"statuses"],hidden:!0}))]})})})),Object(Gs.jsx)(ks.a,{type:"dashed",onClick:function(){n()},disabled:u.disabled,block:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})]})}})]})]})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:b,onOk:function(){ne.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Gs.jsx)(c,{form:ne,onFinish:function(){var e=Object(Xi.a)(Yi.a.mark((function e(n){var s,a,i;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,Ce(n.files.fileList).then((function(e){i=e}));case 5:n.docs=i||[],n.user_id=M.id,n.username=M.username,n.position=M.position_names[0],n.is_read=!1,n.fio=M.fio,n.positionId=F[0].positionId,console.log("TEST",a),a[t.exemplar]=n,je({variables:a});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:h,onOk:function(){ae.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Gs.jsx)(o,{form2:ae,onFinish2:function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var s,a;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},a=[],e.next=4,Ce(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",s),s[n.exemplar]=t,Oe({variables:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:g,onOk:function(){ce.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Gs.jsx)(l,{form3:ce,onFinish3:function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,a;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=[],e.next=4,Ce(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[s.exemplar]=t,xe({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:w,onOk:function(){le.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Gs.jsx)(r,{form4:le,onFinish4:function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,Ce(t.files.fileList).then((function(e){s=e}));case 4:t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[a.exemplar]=t,ye({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:T,onOk:function(){de.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Gs.jsx)(d,{form5:de,onFinish5:function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,Ce(t.files.fileList).then((function(e){s=e}));case 4:t.route_data=Se.current,t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[i.exemplar]=t,we({variables:n});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),ic=ac,cc=n(287),oc=(n(228),n(276),["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"]),lc=Object(oa.a)(ue||(ue=Object(na.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),rc=Object(oa.a)(me||(me=Object(na.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),dc=Object(oa.a)(je||(je=Object(na.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),uc=Object(oa.a)(be||(be=Object(na.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),mc=Object(oa.a)(pe||(pe=Object(na.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),jc=Object(oa.a)(_e||(_e=Object(na.a)(["\n        query document_tasks($document_tasks: JSON){\n            document_tasks(document_tasks:$document_tasks){\n                id\n                document_id\n                status\n                is_cancelled\n                note\n                deadline\n                date_created\n                user_id_created\n                fio_created\n                user_id_receiver\n                fio_receiver\n                route_id\n                document_options\n                document_tasks_files{\n                    id\n                    filename\n                    data_file\n                    task_id\n                }\n                document_tasks_logs{\n                    id\n                    task_id\n                    is_read\n                    type\n                    user_id\n                }\n                task_statuses{\n                    id\n                    name\n                }\n            }\n        }\n"]))),bc=is.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Ds.a)(e,oc),m=sa.a.useForm(),j=Object(ta.a)(m,1)[0],b=sa.a.useForm(),p=Object(ta.a)(b,1)[0],_=sa.a.useForm(),O=Object(ta.a)(_,1)[0],h=sa.a.useForm(),f=Object(ta.a)(h,1)[0],x=sa.a.useForm(),v=Object(ta.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(ta.a)(g,2),V=y[0],N=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],C=Object(ta.a)(w,2),k=C[0],S=C[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(ta.a)(T,2),E=I[0],P=I[1],F=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(ta.a)(F,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(ta.a)(U,2),M=$[0],J=$[1],z=Object(as.useState)(!0),K=Object(ta.a)(z,2),q=K[0],A=K[1],H=Object(Rs.j)(),B=function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)},G=function(){A(!1)};Va.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Rs.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Rs.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Rs.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Rs.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Rs.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(as.useEffect)((function(){te&&j.resetFields()}),[te]),Object(as.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(as.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(as.useEffect)((function(){de&&f.resetFields()}),[de]),Object(as.useEffect)((function(){je&&v.resetFields()}),[je]),Object(as.useEffect)((function(){V&&ne(Q)}),[V]),Object(as.useEffect)((function(){k&&ie(W)}),[k]),Object(as.useEffect)((function(){E&&le(Y)}),[E]),Object(as.useEffect)((function(){D&&ue(X)}),[D]),Object(as.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Rs.g)(Object(la.a)(t.update),(function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)}))(),_e=Object(ta.a)(pe,2),Oe=_e[0],he=(_e[1].loading,{variables:{document_tasks:{global:{document_id:"=".concat(u.selectedRowKeys[0]),user_id_created:"=".concat(null===H||void 0===H?void 0:H.id)}}}}),fe=Object(Fi.a)(jc,he),xe=(fe.loading,fe.data),ve=fe.refetch;Object(as.useEffect)((function(){V&&ve(he)}),[null===u||void 0===u?void 0:u.selectedRowKeys[0]]);var ge=xe&&null!=xe[Object.keys(xe)[0]]?xe[Object.keys(xe)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id?e.document_id:"",status:e.status?e.status:"",is_cancelled:e.is_cancelled?e.is_cancelled:"",note:e.note?e.note:"",deadline:e.deadline?e.deadline:"",date_created:e.date_created?e.date_created:"",user_id_created:e.user_id_created?e.user_id_created:"",fio_created:e.fio_created?e.fio_created:"",user_id_receiver:e.user_id_receiver?e.user_id_receiver:"",fio_receiver:e.fio_receiver?e.fio_receiver:"",route_id:e.route_id?e.route_id:"",task_statuses:e.task_statuses.name?e.task_statuses.name:"",document_tasks_files:0!=e.document_tasks_files.length?e.document_tasks_files:[],document_tasks_logs:e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==H.id}))]}})):[],ye=Object(as.useState)(),Ve=Object(ta.a)(ye,2),Ne=Ve[0],we=Ve[1],Ce=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},ke=Object(Fi.a)(mc,Ce),Se=(ke.loading,ke.data),Te=ke.refetch;Object(as.useEffect)((function(){V&&Te(Ce)}),[V]);var Ie=Se&&null!=Se[Object.keys(Se)[0]]?Se[Object.keys(Se)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ee=Object(la.a)(lc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Pe=Object(ta.a)(Ee,2),Fe=Pe[0],Re=Pe[1],De=(Re.loading,Re.error,function(e){Fe({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:Ne}}}),Te(Ce),e.resetFields(["comments"])}),Le=function(e,t){e.target.value.length>0&&we(e.target.value)},Ue=Object(as.useState)(),$e=Object(ta.a)(Ue,2),Me=$e[0],Je=$e[1],ze=Object(as.useState)(),Ke=Object(ta.a)(ze,2),qe=Ke[0],Ae=Ke[1],He=Object(as.useState)(),Be=Object(ta.a)(He,2),Ge=Be[0],Qe=Be[1],We=Object(la.a)(rc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ye=Object(ta.a)(We,2),Xe=Ye[0],Ze=Ye[1],et=(Ze.loading,Ze.error,Object(la.a)(dc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),tt=Object(ta.a)(et,2),nt=(tt[0],tt[1]),st=(nt.loading,nt.error,function(){cc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),at=function(){Ae(7)},it=function(){Ae(2)},ct=function(e){console.log("CLIIIICK",e),rt({variables:{document_files:{id:e.id}}})},ot=Object(la.a)(uc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),lt=Object(ta.a)(ot,2),rt=lt[0],dt=lt[1],ut=(dt.loading,dt.error,Object(as.useRef)());return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){N(!0)},children:[Object(Gs.jsx)(ka.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Gs.jsx)(Va.a,{title:u.title,visible:V,centered:!0,width:950,onOk:function(){j.submit()},onCancel:function(){N(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)("div",{id:"testId",ref:ut,children:Object(Gs.jsx)(c,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},handleStatusCancelled:it,HandleDeleteFile:ct,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:q})})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:k,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(o,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){P(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(l,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(r,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(d,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&Je(e)},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:q})})]})})),pc=bc,_c=is.a.memo((function(e){var t=Object(as.useState)([]),n=Object(ta.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(as.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id])},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),Oc=_c,hc=n(442),fc=n(473),xc=hc.a.Dragger,vc=function(e){return Object(Gs.jsxs)(xc,Object(ss.a)(Object(ss.a)({},e),{},{beforeUpload:function(e,t){return console.log("beforeUpload file",e),console.log("beforeUpload fileList",t),e.size>55e5&&cc.b.error({key:"msgKeyFileError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u0440\u0430\u0437\u043c\u0435\u0440 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439."),duration:30,className:"custom-class",style:{marginTop:"20vh"},onClick:function(){return cc.b.destroy("msgKeyFileError")}}),"image/png"!==e.type&&"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"application/msword"!==e.type&&"application/vnd.ms-excel"!==e.type&&cc.b.error({key:"msgKeyFileTypeError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430."),duration:30,onClick:function(){return cc.b.destroy("msgKeyFileTypeError")}}),e.size<55e5&&"image/png"===e.type||e.size<55e5&&"image/jpg"===e.type||e.size<55e5&&"image/jpeg"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||e.size<55e5&&"application/pdf"===e.type||e.size<55e5&&"application/msword"===e.type||e.size<55e5&&"application/vnd.ms-excel"===e.type||hc.a.LIST_IGNORE},children:[Object(Gs.jsx)("p",{className:"ant-upload-drag-icon",children:Object(Gs.jsx)(fc.a,{})}),Object(Gs.jsx)("p",{className:"ant-upload-text",children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043c\u044b\u0448\u044c\u044e \u0442\u0443\u0442 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043d\u0430 \u044d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 "}),Object(Gs.jsx)("p",{className:"ant-upload-hint",children:"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0437\u0430 \u0440\u0430\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432"})]}))},gc=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues&&i({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:a.log_username})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),yc=gc,Vc=n(209),Nc=is.a.memo((function(e){var t=Object(Rs.j)(),n=/^\d+$/,s=Object(as.useState)({log_username:t.username}),a=Object(ta.a)(s,2),i=a[0],c=a[1];Object(as.useEffect)((function(){e.form2.setFieldsValue(i)}),[i]),Object(as.useEffect)((function(){e.initialValues&&c({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_agreement_list[0].price,subject:e.initialValues.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:i.log_username})}),[e.initialValues]);var o=Object(as.useState)(1),l=Object(ta.a)(o,2),r=l[0],d=l[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(i),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0420\u0415\u0410\u041b\u0418\u0417\u0410\u0426\u0418\u042e \u0413\u041e\u0422\u041e\u0412\u041e\u0419 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){d(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:r})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),wc=Nc,Cc=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form3.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues3&&i({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_id:e.initialValues3.documents[0].status_id,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,files:e.initialValues3.documents[0].files,log_username:a.log_username})}),[e.initialValues3]);var c=Object(as.useState)(1),o=Object(ta.a)(c,2),l=o[0],r=o[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),kc=Cc,Sc=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form4.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues4&&i({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_id:e.initialValues4.documents[0].status_id,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,files:e.initialValues4.documents[0].files,log_username:a.log_username})}),[e.initialValues4]);var c=Object(as.useState)(1),o=Object(ta.a)(c,2),l=o[0],r=o[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u0412\u041d\u0423\u0422\u0420\u0418\u0417\u0410\u0412\u041e\u0414\u0421\u041a\u0418\u0425 \u041d\u0423\u0416\u0414 \u0418 \u041a\u0410\u041f\u0418\u0422\u0410\u041b\u042c\u041d\u042b\u0425 \u0417\u0410\u0422\u0420\u0410\u0422"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Tc=Sc,Ic=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(as.useState)({log_username:t.username}),s=Object(ta.a)(n,2),a=s[0],i=s[1];Object(as.useEffect)((function(){e.form5.setFieldsValue(a)}),[a]),Object(as.useEffect)((function(){e.initialValues5&&i({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,files:e.initialValues5.documents[0].files,log_username:a.log_username})}),[e.initialValues5]);return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Ec=Ic,Pc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Oe||(Oe=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                reason\n                date_modified\n                status_id\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(he||(he=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    reason\n                    date_created\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(fe||(fe=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(xe||(xe=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(ve||(ve=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(ge||(ge=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Fc=Pc,Rc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(ye||(ye=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(Ve||(Ve=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Ne||(Ne=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(we||(we=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(Ce||(Ce=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(ke||(ke=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Dc=Rc,Lc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Se||(Se=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(Te||(Te=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Ie||(Ie=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(Ee||(Ee=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(Pe||(Pe=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(Fe||(Fe=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Uc=Lc,$c={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Re||(Re=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(De||(De=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Le||(Le=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(Ue||(Ue=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)($e||($e=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(Me||(Me=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Mc=$c,Jc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Je||(Je=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(ze||(ze=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Ke||(Ke=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(qe||(qe=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(Ae||(Ae=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(He||(He=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},zc=Jc,Kc=n(445),qc=is.a.memo((function(e){var t,n,s,a,i={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Be||(Be=Object(na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(oa.a)(Ge||(Ge=Object(na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(Qe||(Qe=Object(na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},c=Object(oa.a)(We||(We=Object(na.a)(["\n       mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n"]))),o=Object(Rs.h)(i,"all")(),l=(o.loading,o.data),r=o.refetch;Object(as.useEffect)((function(){r()}),[]);var d=Object(la.a)(c,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(ta.a)(d,2),m=(u[0],u[1]),j=(m.loading,m.error,Object(as.useState)({})),b=Object(ta.a)(j,2),p=b[0],_=b[1];console.log("propsS",e);var O=sa.a.useForm(),h=Object(ta.a)(O,1)[0];return Object(as.useEffect)((function(){h.setFieldsValue(p)}),[p]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Va.a,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",visible:e.visible,centered:!0,width:450,onOk:function(){},onCancel:function(){e.setVisible(!1)},maskClosable:!1,destroyOnClose:!0,footer:[Object(Gs.jsx)(ks.a,{onClick:function(){e.setVisible(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),Object(Gs.jsx)(ha.a,{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",placement:"topLeft",disabled:!p.replacement,onConfirm:Object(Xi.a)(Yi.a.mark((function t(){var n;return Yi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.submit();case 2:n=l.positions.filter((function(e){return e.id==p.replacement}))[0],console.log("form name",n,p),e.setRoutesList((function(t){var s=Object.assign({},t),a=s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId);return console.log("tmpIndex",n.id,a),-1===s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId)&&s[0].substitutes.push(n.id),s[0].positionName=n.name,s[0].positionId=n.id,console.log("step old",s),s})),e.form.submit(),console.log("test"),e.setVisible(!1);case 8:case"end":return t.stop()}}),t)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:!p.replacement,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Gs.jsx)(sa.a,{form:h,name:"ReplacementSelectForm",onFinish:function(e){console.log(e)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ss.a)({},t)))},children:Object(Gs.jsx)(sa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0435\u0433\u043e",labelAlign:"left",name:"replacement",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsxs)(ii.a,Object(ss.a)(Object(ss.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{children:[Object(Gs.jsx)(ii.a.Option,{value:null},null),l&&(null===(t=l.positions)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e?void 0:e.routeData)&&(null===e||void 0===e||null===(n=e.stepCount)||void 0===n?void 0:n.step)&&null!=l[Object.keys(l)[0]]&&(null===e||void 0===e||null===(s=e.routeData[e.stepCount.step-1])||void 0===s||null===(a=s.substitutes)||void 0===a?void 0:a.length)>0?e.routeData[e.stepCount.step-1].substitutes.map((function(t,n){var s,a;if(t!=(null===(s=e.routeData.filter((function(e){return e.id==t}))[0])||void 0===s?void 0:s.positionId))return Object(Gs.jsx)(ii.a.Option,{value:t,children:null===(a=l.positions.filter((function(e){return console.log("map",t,n,l.positions.filter((function(e){return e.id==t}))),e.id==t}))[0])||void 0===a?void 0:a.name},t)})):null]}))})})})})})),Ac=qc,Hc=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Zi.a.Step,m=Object(as.useState)(!1),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=Object(as.useState)({step:"0"}),v=Object(ta.a)(x,2),g=v[0],y=v[1],V=Object(as.useState)({log_username:r.username}),N=Object(ta.a)(V,2),w=N[0],C=N[1],k=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(w)}),[w]),Object(as.useEffect)((function(){e.initialValues&&(C({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,log_username:w.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var S=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(w),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){C(Object.assign({},w,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:w.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:w.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:w.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:w.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){k(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Ac,{visible:b,setVisible:p,setRoutesList:f,routesList:h,stepCount:g,routeData:null===e||void 0===e||null===(s=e.initialValues)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues.documents[0].step==n+1&&p(!0)},subTitle:n==g.step-1&&(null===w||void 0===w||null===(s=w.signatures)||void 0===s?void 0:s.length)>0||1==g.step?function(){var e;if(1==g.step&&0==n){var t=Object(Rs.f)(new Date(w.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===w||void 0===w||null===(e=w.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Rs.f)(new Date(w.signatures[w.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(Ss.a,{children:Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Bc=Hc,Gc=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Rs.j)(),j=(Kc.a.Title,Kc.a.Link),b=Zi.a.Step,p=Object(as.useState)(!1),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ta.a)(f,2),v=x[0],g=x[1],y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=V[0],w=V[1],C=Object(as.useState)({log_username:m.username}),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(S)}),[S]),Object(as.useEffect)((function(){e.initialValues2&&(console.log("props.initialValues 22222",e.initialValues2),T({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 2",e.initialValues2),w({step:e.initialValues2.documents[0].step}),g(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var E=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),F=Object(ta.a)(P,2);F[0],F[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(j,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Ac,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues2.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Rs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Rs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues2)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Qc=Gc,Wc=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Rs.j)(),j=(Kc.a.Title,Kc.a.Link),b=Zi.a.Step,p=Object(as.useState)(!1),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ta.a)(f,2),v=x[0],g=x[1],y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=V[0],w=V[1],C=Object(as.useState)({log_username:m.username}),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(S)}),[S]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(console.log("props.initialValues 33333",e.initialValues3),T({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 3",e.initialValues3),w({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var E=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),F=Object(ta.a)(P,2);F[0],F[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(j,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Ac,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues3.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Rs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Rs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Yc=Wc,Xc=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Rs.j)(),j=(Kc.a.Title,Kc.a.Link),b=Zi.a.Step,p=Object(as.useState)(!1),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ta.a)(f,2),v=x[0],g=x[1],y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=V[0],w=V[1],C=Object(as.useState)({log_username:m.username}),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(S)}),[S]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(T({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:S.log_username}),console.log("props.initialValues4",e.initialValues4),w({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var E=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),F=Object(ta.a)(P,2);F[0],F[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:S.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(j,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Ac,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues4.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Rs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Rs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Zc=Xc,eo=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Zi.a.Step,m=Object(as.useRef)("vertical");Object(as.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(as.useState)(!1),b=Object(ta.a)(j,2),p=b[0],_=b[1],O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=Object(as.useState)({step:"0"}),g=Object(ta.a)(v,2),y=g[0],V=g[1],N=Object(as.useState)({log_username:r.username}),w=Object(ta.a)(N,2),C=w[0],k=w[1],S=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(C)}),[C]),Object(as.useEffect)((function(){e.initialValues5&&(k({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:C.log_username}),V({step:e.initialValues5.documents[0].step}),x(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(C),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){k(Object.assign({},C,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:C.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:C.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:C.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){S(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Ac,{visible:p,setVisible:_,setRoutesList:x,routesList:f,stepCount:y,routeData:null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:y.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues5.documents[0].step==n+1&&_(!0)},subTitle:n==y.step-1&&(null===C||void 0===C||null===(s=C.signatures)||void 0===s?void 0:s.length)>0||1==y.step?function(){var e;if(1==y.step&&0==n){var t=Object(Rs.f)(new Date(C.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===C||void 0===C||null===(e=C.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Rs.f)(new Date(C.signatures[C.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),to=eo,no=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.positions.toString(),s=t.id,a={documents:{global:{user_id:"=".concat(s),ORDER_BY:["date_created desc"]}}};Fc.options.all.variables=a,Dc.options.all.variables=a,Uc.options.all.variables=a,Mc.options.all.variables=a,zc.options.all.variables=a,t.admin&&(a={});var i=Object(as.useState)(!1),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(Rs.g)(Object(la.a)(Fc.delete))(),u=Object(ta.a)(d,2),m=u[0],j=u[1].loading,b=Object(Rs.h)(Fc,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(as.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var t,s,a,i;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(t=e.document_statuses)||void 0===t?void 0:t.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:""}})):[],f=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Oc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(ic,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",GQL:Fc,Form1:yc,GQL2:Dc,Form2:wc,GQL3:Uc,Form3:kc,GQL4:Mc,Form4:Tc,GQL5:zc,Form5:Ec,width:750}),Object(Gs.jsx)(pc,{visibleModalUpdate:i,GQL:Fc,UpdateForm:Bc,visibleModalUpdate2:c,GQL2:Dc,UpdateForm2:Qc,visibleModalUpdate3:o,GQL3:Uc,UpdateForm3:Yc,visibleModalUpdate4:l,GQL4:Mc,UpdateForm4:Zc,visibleModalUpdate5:r,GQL5:zc,UpdateForm5:to,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Fc.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r})})})),so=no,ao=["GQL"],io=is.a.memo((function(e){var t=e.GQL,n=Object(Ds.a)(e,ao),s=(Object(Hi.useLocation)().pathname,Object(as.useState)([])),a=Object(ta.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(la.a)(t.setIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(ta.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(as.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",loading:n.loading,style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,bordered:n.bordered,onRow:function(e,t){return{onClick:function(t){c([e.key,e.route_id])},onDoubleClick:function(t){var s;0==(null===e||void 0===e||null===(s=e.document_logs)||void 0===s?void 0:s.is_read)?(d({variables:{document:{id:e.document_logs.id,is_read:!0}}}),10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0)):(10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),co=io,oo=["reasonText","dataProps","setState","user"],lo=is.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Ds.a)(e,oo),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ta.a)(n,2),a=s[0];s[1];return Object(Gs.jsx)(ha.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove(),t.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ro=lo,uo=["item","reasonText","dataProps","setState","user"],mo=is.a.memo((function(e){var t=e.item,n=(e.reasonText,e.dataProps),s=e.setState,a=(e.user,Object(Ds.a)(e,uo),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b?")),i=Object(ta.a)(a,2),c=i[0];i[1];return Object(Gs.jsx)(ha.a,{title:c,placement:"topLeft",disabled:n.disabled,onConfirm:function(){n.HandleDeleteFile(t),s((function(e){console.log("item",t);var n=Object.assign({},e),s=n.files.findIndex((function(e){return e.id==t.id}));return n.files.splice(s,1),console.log("OOOLLLLDDDDD+++++++++",s,n.files),n})),console.log("ITEM",t)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",icon:Object(Gs.jsx)(_a.a,{})})})})),jo=mo,bo=(Kc.a.Title,Kc.a.Link),po=Zi.a.Step,_o=/^\d+$/,Oo=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=p[0],O=p[1],h=Object(as.useState)({step:"0"}),f=Object(ta.a)(h,2),x=f[0],v=f[1];Object(as.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),v({step:e.initialValues.documents[0].step}),O(e.initialValues.documents[0].route_data))}),[e.initialValues]);var g=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:_o,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(bo,{children:Object(Gs.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})}),Object(Gs.jsx)(jo,{item:t,dataProps:e,setState:m,user:l}),Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Gs.jsx)(po,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ro,{dataProps:e,setState:m,user:l})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),ho=Oo,fo=["reasonText","dataProps","setState","user"],xo=is.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Ds.a)(e,fo),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ta.a)(n,2),a=s[0];s[1];return Object(Gs.jsx)(ha.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove2(),t.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),vo=xo,go=(Kc.a.Title,Kc.a.Link),yo=Zi.a.Step,Vo=/^\d+$/,No=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Rs.j)(),m=Object(as.useState)({log_username:u.username}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=Object(as.useState)({step:"0"}),g=Object(ta.a)(v,2),y=g[0],V=g[1];Object(as.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),V({step:e.initialValues2.documents[0].step}),x(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var N=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),C=Object(ta.a)(w,2),k=C[0],S=C[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){S(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:k})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Vo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(t){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(go,{children:Object(Gs.jsx)("a",{"data-fileid":t.id,onClick:N,children:t.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){_(t)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})}),Object(Gs.jsx)(jo,{item:t,dataProps:e,setState:p,user:u}),Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Gs.jsx)(yo,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(vo,{dataProps:e,setState:p,user:u}),Object(Gs.jsx)(ma.a,{type:"vertical"})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),wo=No,Co=["reasonText","dataProps","setState","user"],ko=is.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Ds.a)(e,Co),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ta.a)(n,2),a=s[0];s[1];return Object(Gs.jsx)(ha.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove3(),t.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),So=ko,To=(Kc.a.Title,Kc.a.Link),Io=Zi.a.Step,Eo=/^\d+$/,Po=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=p[0],O=p[1],h=Object(as.useState)({step:"0"}),f=Object(ta.a)(h,2),x=f[0],v=f[1];Object(as.useEffect)((function(){e.initialValues3&&(m({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:u.log_username}),v({step:e.initialValues3.documents[0].step}),O(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var g=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(as.useState)(1),V=Object(ta.a)(y,2),N=V[0],w=V[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues3)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues3)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:N})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Eo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues3)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(To,{children:Object(Gs.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})}),Object(Gs.jsx)(jo,{item:t,dataProps:e,setState:m,user:l}),Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Gs.jsx)(Io,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(So,{dataProps:e,setState:m,user:l})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Fo=Po,Ro=["reasonText","dataProps","setState","user"],Do=is.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Ds.a)(e,Ro),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ta.a)(n,2),a=s[0];s[1];return Object(Gs.jsx)(ha.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove4(),t.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Lo=Do,Uo=(Kc.a.Title,Kc.a.Link),$o=Zi.a.Step,Mo=/^\d+$/,Jo=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=p[0],O=p[1],h=Object(as.useState)({step:"0"}),f=Object(ta.a)(h,2),x=f[0],v=f[1];Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,j,b;e.initialValues4&&(m({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(j=e.initialValues4.documents[0])||void 0===j||null===(b=j.data_agreement_list_internal_needs[0])||void 0===b?void 0:b.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:u.log_username}),v({step:e.initialValues4.documents[0].step}),O(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var g=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(as.useState)(1),V=Object(ta.a)(y,2),N=V[0],w=V[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues4)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues4)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:N})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Mo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues4)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(Uo,{children:Object(Gs.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})}),Object(Gs.jsx)(jo,{item:t,dataProps:e,setState:m,user:l}),Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Gs.jsx)($o,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Lo,{dataProps:e,setState:m,user:l})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),zo=Jo,Ko=["reasonText","dataProps","setState","user"],qo=is.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Ds.a)(e,Ko),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ta.a)(n,2),a=s[0];s[1];return Object(Gs.jsx)(ha.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove5(),t.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Ao=qo,Ho=(Kc.a.Title,Kc.a.Link),Bo=Zi.a.Step,Go=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useRef)("vertical");Object(as.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(r.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var d=Object(as.useState)({log_username:l.username}),u=Object(ta.a)(d,2),m=u[0],j=u[1],b=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(m)}),[m]);var p=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=Object(as.useState)({step:"0"}),x=Object(ta.a)(f,2),v=x[0],g=x[1];Object(as.useEffect)((function(){e.initialValues5&&(j({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:m.log_username}),g({step:e.initialValues5.documents[0].step}),h(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var y=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(as.useState)(1),N=Object(ta.a)(V,2);N[0],N[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(m),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){j(Object.assign({},m,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"form-input-label",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues5)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(Ho,{children:Object(Gs.jsx)("a",{"data-fileid":t.id,onClick:y,children:t.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){b(t)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})}),Object(Gs.jsx)(jo,{item:t,dataProps:e,setState:j,user:l}),Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",direction:r.current,responsive:!0,current:v.step-1,className:"steps-form-update",children:O.map((function(e){return Object(Gs.jsx)(Bo,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Ao,{dataProps:e,setState:j,user:l})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Qo=Go,Wo=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Ye||(Ye=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(Xe||(Xe=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Ze||(Ze=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                files{\n                    id\n                    filename\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(et||(et=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(tt||(tt=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(nt||(nt=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(st||(st=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(as.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(as.useState)(!1),u=Object(Rs.g)(Object(la.a)(a.delete))(),m=Object(ta.a)(u,2),j=m[0],b=m[1].loading,p=Object(Rs.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(as.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 7==e.status_id}));window.localStorage.rows_approved=x.length;var v=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(co,{data:{dict:v,records:x},loading:_,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:c,GQL:a,UpdateForm:ho,visibleModalUpdate2:o,GQL2:a,UpdateForm2:wo,visibleModalUpdate3:l,GQL3:a,UpdateForm3:Fo,visibleModalUpdate4:r,GQL4:a,UpdateForm4:zo,visibleModalUpdate5:d,GQL5:a,UpdateForm5:Qo,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})),Yo=Wo,Xo=(Kc.a.Title,Kc.a.Link),Zo=(Zi.a.Step,is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=(p[0],p[1]),O=Object(as.useState)({step:"0"}),h=Object(ta.a)(O,2),f=(h[0],h[1]);Object(as.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(Xo,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){j(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})}))),el=Zo,tl=(Kc.a.Title,Kc.a.Link),nl=(Zi.a.Step,is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Rs.j)(),m=Object(as.useState)({log_username:u.username}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=(h[0],h[1]),x=Object(as.useState)({step:"0"}),v=Object(ta.a)(x,2),g=(v[0],v[1]);Object(as.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(ta.a)(V,2);N[0],N[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(tl,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})}))),sl=nl,al=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),il=al,cl=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),ol=cl,ll=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),rl=ll,dl=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(at||(at=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(it||(it=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(ct||(ct=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(ot||(ot=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(lt||(lt=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(rt||(rt=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(dt||(dt=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(as.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(as.useRef)(0),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(as.useState)(!1),u=Object(as.useState)(!1),m=Object(Rs.g)(Object(la.a)(a.delete))(),j=Object(ta.a)(m,2),b=j[0],p=j[1].loading,_=Object(Rs.h)(a,"all")(),O=_.loading,h=_.data,f=_.refetch;Object(as.useEffect)((function(){f()}),[]);var x=(h&&null!=h[Object.keys(h)[0]]?h[Object.keys(h)[0]].map((function(e){var n,a,i,o;return c.current=h.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=x.length;var v=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(co,{data:{dict:v,records:x},loading:O,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:o,GQL:a,UpdateForm:el,visibleModalUpdate2:l,GQL2:a,UpdateForm2:sl,visibleModalUpdate3:r,GQL3:a,UpdateForm3:il,visibleModalUpdate4:d,GQL4:a,UpdateForm4:ol,visibleModalUpdate5:u,GQL5:a,UpdateForm5:rl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},b({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:p,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:o,visibleModalUpdate2:l,visibleModalUpdate3:r,visibleModalUpdate4:d,visibleModalUpdate5:u,GQL:a})})),ul=dl,ml=(Kc.a.Title,Kc.a.Link),jl=(Zi.a.Step,is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=(p[0],p[1]),O=Object(as.useState)({step:"0"}),h=Object(ta.a)(O,2),f=(h[0],h[1]);Object(as.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:u.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(ml,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){j(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})}))),bl=jl,pl=(Kc.a.Title,Kc.a.Link),_l=(Zi.a.Step,is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Rs.j)(),m=Object(as.useState)({log_username:u.username}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]);var O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=(h[0],h[1]),x=Object(as.useState)({step:"0"}),v=Object(ta.a)(x,2),g=(v[0],v[1]);console.log("PROPS UPDATE DOC 2",e),Object(as.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(ta.a)(V,2);N[0],N[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(pl,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})}))),Ol=_l,hl=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),fl=hl,xl=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),vl=xl,gl=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Object(as.useState)({log_username:r.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(as.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(ta.a)(O,2);h[0],h[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),yl=gl,Vl=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(ut||(ut=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                reason\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(mt||(mt=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(jt||(jt=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(bt||(bt=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(pt||(pt=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(_t||(_t=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(Ot||(Ot=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=Object(as.useRef)(0),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(as.useState)(!1),u=Object(Rs.g)(Object(la.a)(a.delete))(),m=Object(ta.a)(u,2),j=m[0],b=m[1].loading,p=Object(Rs.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(as.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,c,o;return i.current=O.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 2==e.status_id}));window.localStorage.rows_rejected=x.length;var v=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(co,{data:{dict:v,records:x},loading:_,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:c,GQL:a,UpdateForm:bl,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Ol,visibleModalUpdate3:l,GQL3:a,UpdateForm3:fl,visibleModalUpdate4:r,GQL4:a,UpdateForm4:vl,visibleModalUpdate5:d,GQL5:a,UpdateForm5:yl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})})),Nl=Vl,wl=n(451),Cl=["reasonText","dataProps","setState","user"],kl=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Cl),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Sl=kl,Tl=["reasonText","dataProps","setState","user"],Il=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Tl),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),El=Il,Pl=["reasonText","dataProps","setState","user"],Fl=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Pl),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Rl=Fl,Dl=["reasonText","dataProps","setState","user"],Ll=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Dl),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Ul=Ll,$l=(n(229),is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O=Object(Rs.j)(),h=Kc.a.Link,f=Object(as.useState)({log_username:O.username}),x=Object(ta.a)(f,2),v=x[0],g=x[1],y=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(O.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=null===v||void 0===v||null===(t=v.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),N=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===V||void 0===V?void 0:V.includes(e.id)})),w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(v)}),[v]),Object(as.useEffect)((function(){e.initialValues&&g({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:v.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:v.fio_created})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:v.note})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===v||void 0===v||null===(c=v.document_options)||void 0===c?void 0:c.title)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===v||void 0===v||null===(l=v.document_options)||void 0===l?void 0:l.supllier)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===v||void 0===v||null===(u=v.document_options)||void 0===u?void 0:u.subject)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===v||void 0===v||null===(b=v.document_options)||void 0===b?void 0:b.price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===N||void 0===N?void 0:N.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(h,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){y(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})})),2==v.status?Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),v.report?v.report:"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{className:"font-form-header",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:v.document_tasks_files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:24,className:"document-view-wrap",children:[Object(Gs.jsx)(h,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){y(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})]})]}):"",1==(null===v||void 0===v?void 0:v.status)&&(null===v||void 0===v?void 0:v.user_id_created)!=O.id?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})}))),Ml=$l,Jl=n(441),zl=n(458),Kl=(n(226),n(125)),ql=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p=Object(Rs.j)(),_={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(ht||(ht=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(oa.a)(ft||(ft=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)(xt||(xt=Object(na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},O={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(vt||(vt=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(oa.a)(gt||(gt=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(yt||(yt=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(oa.a)(Vt||(Vt=Object(na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},h=Kc.a.Link,f=Object(Rs.g)(Object(la.a)(O.insert))(),x=Object(ta.a)(f,2),v=x[0],g=(x[1].loading,Object(Rs.h)(_,"all")()),y=(g.loading,g.data),V=g.refetch,N=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(p.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){V()}),[]);var C=Object(as.useState)({}),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=sa.a.useForm(),E=Object(ta.a)(I,1)[0];Object(as.useEffect)((function(){E.setFieldsValue(S)}),[S]);var P=fa.a.Group,F=Object(as.useState)(!1),R=Object(ta.a)(F,2),D=(R[0],R[1]);return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Gs.jsx)(ya.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Gs.jsx)(Va.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:550,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),D(!1)},onCancel:function(){D(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Gs.jsx)(ha.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!S.recepient,onConfirm:Object(Xi.a)(Yi.a.mark((function e(){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Gs.jsxs)(sa.a,{form:E,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Rs.e)(t.deadline._d),user_id_created:"".concat(p.id),fio_created:p.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,supllier:void 0!=t.supllier&&t.supllier,price:void 0!=t.price&&t.price},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};v(n),e.setVisible(!1),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsxs)(ii.a,Object(ss.a)(Object(ss.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Gs.jsx)(ii.a.Option,{value:null},null),null===y||void 0===y||null===(t=y.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Gs.jsx)(ii.a.Option,{value:e.id,children:null===y||void 0===y||null===(n=y.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Gs.jsx)(sa.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Jl.a,{locale:Kl.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Gs.jsx)(sa.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:5})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop marginBottom",children:Object(Gs.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423:"})}),Object(Gs.jsx)(ws.a,{span:13,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"title",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})}),Object(Gs.jsx)(ws.a,{span:13,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_one[0])||void 0===c?void 0:c.supllier}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"supllier",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(Gs.jsx)(ws.a,{span:13,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_one[0])||void 0===r?void 0:r.subject}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"subject",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: "})}),Object(Gs.jsx)(ws.a,{span:13,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_one[0])||void 0===m?void 0:m.price}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"price",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:15,children:Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Gs.jsx)(ws.a,{span:9,children:Object(Gs.jsx)(ks.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));E.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Gs.jsx)(sa.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Gs.jsx)(P,{children:Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b?void 0:b.files.map((function(e){return Object(Gs.jsxs)(is.a.Fragment,{children:[Object(Gs.jsxs)(ws.a,{span:21,children:[Object(Gs.jsx)(h,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){N(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})]}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(fa.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),Al=ql,Hl=["GQL"],Bl=is.a.memo((function(e){var t=e.GQL,n=Object(Ds.a)(e,Hl),s=(Object(Hi.useLocation)().pathname,Object(as.useState)([])),a=Object(ta.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(la.a)(t.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(ta.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(as.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,onRow:function(e,t){return{onClick:function(t){c([e.key,e.document_id,e.route_id])},onDoubleClick:function(t){void 0==e.document_tasks_logs?(console.log("record IF----",e),n.visibleModalUpdate[1](!0)):(console.log("record ELSE---",e),n.visibleModalUpdate[1](!0),d({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}))}}},pagination:{simple:!0,pageSize:10,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),Gl=Bl,Ql=["GQL","UpdateForm"],Wl=is.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Ds.a)(e,Ql),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Nt||(Nt=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(wt||(wt=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Ct||(Ct=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(kt||(kt=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(St||(St=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(Tt||(Tt=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(It||(It=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},i=sa.a.useForm(),c=Object(ta.a)(i,1)[0],o=Object(as.useState)(!0),l=Object(ta.a)(o,2),r=(l[0],l[1]),d=s.visibleModalUpdate?s.visibleModalUpdate:[],u=Object(ta.a)(d,2),m=u[0],j=u[1],b={};b[t.table]=t.table?{global:{id:"= ".concat(s.selectedRowKeys[0])}}:{};var p=Object(Rs.h)(t,"one",{variables1:b})(),_=(p.loading,p.data),O=p.refetch;Object(as.useEffect)((function(){m&&O(b)}),[m]);var h={documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},f=Object(Rs.h)(a,"one",{variables1:b})(),x=(f.loading,f.data),v=f.refetch;Object(as.useEffect)((function(){m&&v(h)}),[m]);var g=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Xi.a)(Yi.a.mark((function n(s){return Yi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("documentData",x),Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",disabled:3!==s.selectedRowKeys.length,onClick:function(){j(!0)},children:[Object(Gs.jsx)(ka.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Gs.jsx)(Va.a,{title:s.title,visible:m,width:600,onCancel:function(){j(!1),r(!0)},footer:null,children:Object(Gs.jsx)(n,{document:null===x||void 0===x?void 0:x.documents[0],initialValues:_,form:c,onFinish:function(){var e=Object(Xi.a)(Yi.a.mark((function e(n){var a,i,c;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},c=[],!(null===n||void 0===n||null===(a=n.files)||void 0===a?void 0:a.fileList)){e.next=5;break}return e.next=5,g(n.files.fileList).then((function(e){c=e}));case 5:n.docs=c||[],i[t.exemplar]={id:s.selectedRowKeys[0],status:2,user_id:n.user_id_created},console.log("values-------",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),Yl=Wl,Xl=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Et||(Et=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(oa.a)(Pt||(Pt=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(Ft||(Ft=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(oa.a)(Rt||(Rt=Object(na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(oa.a)(Dt||(Dt=Object(na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},u=Object(Rs.j)(),m=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=Object(as.useState)({step:"0"}),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=Object(as.useState)(!1),v=(Kc.a.Title,Kc.a.Link),g=Zi.a.Step,y=wl.a.Panel,V=Object(as.useRef)("vertical");Object(as.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(V.current=(null===e||void 0===e||null===(a=e.initialValues)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var N=Object(as.useState)(!1),w=Object(ta.a)(N,2),C=w[0],k=w[1],S=Object(as.useState)({log_username:u.username}),T=Object(ta.a)(S,2),I=T[0],E=T[1],P=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(I)}),[I]),Object(as.useEffect)((function(){e.initialValues&&(E({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:I.log_username}),f({step:e.initialValues.documents[0].step}),p(e.initialValues.documents[0].route_data))}),[e.initialValues]);var F=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(ta.a)(R,2),L=D[0],U=D[1];function $(e){}return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(I)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){E(Object.assign({},I,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsxs)(ws.a,{span:8,children:[" ",Object(Gs.jsx)("b",{children:"\u041e\u0442: "})]})," ",Object(Gs.jsx)(ws.a,{span:16,children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio}),Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position}),Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:I.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:I.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:I.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:I.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Gs.jsx)(wl.a,{defaultActiveKey:["2"],onChange:$,children:Object(Gs.jsx)(y,{header:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:12,className:"document-view-wrap",children:[Object(Gs.jsx)(v,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})},"2")})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",direction:V.current,responsive:!0,current:h.step-1,className:"steps-form-update",children:b.map((function(e){return Object(Gs.jsx)(g,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Sl,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Ul,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Gs.jsx)(Rl,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(El,{reasonText:L,dataProps:e,setState:E,user:u})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(wl.a,{defaultActiveKey:["1"],onChange:$,children:Object(Gs.jsx)(y,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Gs.jsx)(Gl,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:x,GQL:d,title:function(t){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(Yl,{visibleModalUpdate:x,UpdateForm:Ml,GQL:d,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(Al,{visible:C,setVisible:k,document:e.initialValues})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Zl=Xl,er=["reasonText","dataProps","setState","user"],tr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,er),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),nr=tr,sr=["reasonText","dataProps","setState","user"],ar=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,sr),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),ir=ar,cr=["reasonText","dataProps","setState","user"],or=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,cr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),lr=or,rr=["reasonText","dataProps","setState","user"],dr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,rr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),ur=dr,mr=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y=Object(Rs.j)(),V={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Lt||(Lt=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(oa.a)(Ut||(Ut=Object(na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(oa.a)($t||($t=Object(na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},N={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Mt||(Mt=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(oa.a)(Jt||(Jt=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(zt||(zt=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(oa.a)(Kt||(Kt=Object(na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},w=Kc.a.Link,C=Object(Rs.g)(Object(la.a)(N.insert))(),k=Object(ta.a)(C,2),S=k[0],T=(k[1].loading,Object(Rs.h)(V,"all")()),I=(T.loading,T.data),E=T.refetch,P=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(y.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){E()}),[]);var R=Object(as.useState)({}),D=Object(ta.a)(R,2),L=D[0],U=D[1],$=sa.a.useForm(),M=Object(ta.a)($,1)[0];Object(as.useEffect)((function(){M.setFieldsValue(L)}),[L]);var J=fa.a.Group,z=Object(as.useState)(!1),K=Object(ta.a)(z,2),q=(K[0],K[1]);return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Gs.jsx)(ya.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Gs.jsx)(Va.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Gs.jsx)(ha.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!L.recepient,onConfirm:Object(Xi.a)(Yi.a.mark((function e(){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Gs.jsxs)(sa.a,{form:M,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Rs.e)(t.deadline._d),user_id_created:"".concat(y.id),fio_created:y.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency_price:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,sider_signatures_date:void 0!=t.sider_signatures_date&&t.sider_signatures_date,received_from_counteragent_date:void 0!=t.received_from_counteragent_date&&t.received_from_counteragent_date},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};S(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){U(Object.assign({},L,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsxs)(ii.a,Object(ss.a)(Object(ss.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Gs.jsx)(ii.a.Option,{value:null},null),null===I||void 0===I||null===(t=I.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Gs.jsx)(ii.a.Option,{value:e.id,children:null===I||void 0===I||null===(n=I.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Gs.jsx)(sa.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Jl.a,{locale:Kl.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Gs.jsx)(sa.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a.TextArea,{rows:5})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop marginBottom",children:Object(Gs.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"title",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i?void 0:i.subject}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"subject",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(c=e.document)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list[0])||void 0===l?void 0:l.price}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"price",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.data_agreement_list[0])||void 0===u?void 0:u.currency_price}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"currency_price",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.documents[0])||void 0===j||null===(b=j.data_agreement_list[0])||void 0===b?void 0:b.executor_name_division}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.documents[0])||void 0===_||null===(O=_.data_agreement_list[0])||void 0===O?void 0:O.sider_signatures_date}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"sider_signatures_date",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:13,children:Object(Gs.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Gs.jsx)(ws.a,{span:8,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list[0])||void 0===x?void 0:x.received_from_counteragent_date}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(sa.a.Item,{name:"received_from_counteragent_date",children:Object(Gs.jsx)(zl.a,{defaultChecked:!1})})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:18,children:Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Gs.jsx)(ws.a,{span:5,children:Object(Gs.jsx)(ks.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));M.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Gs.jsx)(sa.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Gs.jsx)(J,{children:Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.documents[0])||void 0===g?void 0:g.files.map((function(e){return Object(Gs.jsxs)(is.a.Fragment,{children:[Object(Gs.jsxs)(ws.a,{span:21,children:[Object(Gs.jsx)(w,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})}),Object(Gs.jsx)(ks.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})]}),Object(Gs.jsx)(ws.a,{span:1,children:Object(Gs.jsx)(fa.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),jr=mr,br=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w=Object(Rs.j)(),C=Kc.a.Link,k=Object(as.useState)({log_username:w.username}),S=Object(ta.a)(k,2),T=S[0],I=S[1],E=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),F=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===P||void 0===P?void 0:P.includes(e.id)})),R=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(as.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:T.fio_created})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:T.note})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency_price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list[0])||void 0===N?void 0:N.received_from_counteragent_date})]})}):"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===F||void 0===F?void 0:F.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(C,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})})),2==T.status?Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{className:"font-form-header",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:24,className:"document-view-wrap",children:[Object(Gs.jsx)(C,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),pr=br,_r=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(qt||(qt=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(oa.a)(At||(At=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(Ht||(Ht=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(oa.a)(Bt||(Bt=Object(na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(oa.a)(Gt||(Gt=Object(na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Rs.j)(),p=(Kc.a.Title,Kc.a.Link),_=Zi.a.Step,O=wl.a.Panel,h=Object(as.useState)({log_username:b.username}),f=Object(ta.a)(h,2),x=f[0],v=f[1],g=Object(as.useState)(!1),y=Object(as.useState)(!1),V=Object(ta.a)(y,2),N=V[0],w=V[1],C=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(x)}),[x]);var k=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),S=Object(ta.a)(k,2),T=S[0],I=S[1],E=Object(as.useState)({step:"0"}),P=Object(ta.a)(E,2),F=P[0],R=P[1];Object(as.useEffect)((function(){e.initialValues2&&(v({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:x.log_username}),R({step:e.initialValues2.documents[0].step}),I(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var D=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){}var U=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),$=Object(ta.a)(U,2),M=$[0],J=$[1],z=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),K=Object(ta.a)(z,2);K[0],K[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(x),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){v(Object.assign({},x,Object(ss.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:x.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Gs.jsx)(wl.a,{defaultActiveKey:["2"],onChange:L,children:Object(Gs.jsx)(O,{header:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:12,className:"document-view-wrap",children:[Object(Gs.jsx)(p,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:D,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){C(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})},"2")})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:F.step-1,className:"steps-form-update",children:T.map((function(e){return Object(Gs.jsx)(_,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(nr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ur,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Gs.jsx)(lr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ir,{reasonText:M,dataProps:e,setState:v,user:b})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,J(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(wl.a,{defaultActiveKey:["1"],onChange:L,children:Object(Gs.jsx)(O,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Gs.jsx)(Gl,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:g,GQL:j,title:function(t){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(Yl,{visibleModalUpdate:g,UpdateForm:pr,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(jr,{visible:N,setVisible:w,document:e.initialValues2})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Or=_r,hr=["reasonText","dataProps","setState","user"],fr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,hr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),xr=fr,vr=["reasonText","dataProps","setState","user"],gr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,vr),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),yr=gr,Vr=["reasonText","dataProps","setState","user"],Nr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Vr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),wr=Nr,Cr=["reasonText","dataProps","setState","user"],kr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Cr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Sr=kr,Tr=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(xr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Sr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(wr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(yr,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Ir=Tr,Er=["reasonText","dataProps","setState","user"],Pr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Er),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Fr=Pr,Rr=["reasonText","dataProps","setState","user"],Dr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Rr),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Lr=Dr,Ur=["reasonText","dataProps","setState","user"],$r=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Ur),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Mr=$r,Jr=["reasonText","dataProps","setState","user"],zr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Jr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Kr=zr,qr=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position}),Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:Object(Gs.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Fr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Kr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(Mr,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Lr,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Ar=qr,Hr=["reasonText","dataProps","setState","user"],Br=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Hr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Gr=Br,Qr=["reasonText","dataProps","setState","user"],Wr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Qr),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Yr=Wr,Xr=["reasonText","dataProps","setState","user"],Zr=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Xr),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),ed=Zr,td=["reasonText","dataProps","setState","user"],nd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,td),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),sd=nd,ad=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=Zi.a.Step,_=Object(as.useRef)("vertical");Object(as.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(_.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var O=Object(as.useState)({log_username:j.username}),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(f)}),[f]);var g=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(ta.a)(g,2),V=y[0],N=y[1],w=Object(as.useState)({step:"0"}),C=Object(ta.a)(w,2),k=C[0],S=C[1];Object(as.useEffect)((function(){e.initialValues5&&(x({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:f.log_username}),S({step:e.initialValues5.documents[0].step}),N(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(ta.a)(I,2),P=E[0],F=E[1],R=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),D=Object(ta.a)(R,2);D[0],D[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(f)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ss.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio}),Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position}),Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:"\u0414\u0440\u0443\u0433\u043e\u0439"})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:f.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:f.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:8,children:Object(Gs.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(Gs.jsx)(ws.a,{span:16,children:f.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){v(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",direction:_.current,responsive:!0,current:k.step-1,className:"steps-form-update",children:V.map((function(e){return Object(Gs.jsx)(p,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Gr,{reasonText:P,dataProps:e,setState:x,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(sd,{reasonText:P,dataProps:e,setState:x,user:j}),Object(Gs.jsx)(ed,{reasonText:P,dataProps:e,setState:x,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Yr,{reasonText:P,dataProps:e,setState:x,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,F(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),id=ad,cd=(Kc.a.Title,Kc.a.Link,Zi.a.Step,is.a.memo((function(e){var t=Object(Rs.j)(),n=(t.id,t.positions.toString()),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,status_id:"=5",ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Qt||(Qt=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(oa.a)(Wt||(Wt=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        \n                        \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Yt||(Yt=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(Xt||(Xt=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(Zt||(Zt=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(en||(en=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(tn||(tn=Object(na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a={exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_created:"=".concat(t.id)}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(nn||(nn=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                }\n            "]))),one:Object(oa.a)(sn||(sn=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(an||(an=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(oa.a)(cn||(cn=Object(na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "])))},i=Object(as.useRef)(0),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(as.useState)(!1),u=Object(Rs.g)(Object(la.a)(s.delete))(),m=Object(ta.a)(u,2),j=m[0],b=m[1].loading,p=Object(Rs.h)(s,"all")(),_=p.loading,O=p.data,h=p.refetch,f=Object(Rs.h)(a,"all")(),x=(f.loading,f.data),v=f.refetch;Object(as.useEffect)((function(){v()}),[]),Object(as.useEffect)((function(){h()}),[]);var g=(O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var s,a,c,o,l,r;i.current=O.documents.length;var d=null===x||void 0===x||null===(s=x.document_tasks)||void 0===s?void 0:s.filter((function(t){return t.document_id==e.id})),u=null===x||void 0===x||null===(a=x.document_tasks)||void 0===a?void 0:a.filter((function(t){return t.document_id==e.id&&2==t.status}));return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(c=e.document_statuses)||void 0===c?void 0:c.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(o=e.route_id)||void 0===o?void 0:o.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(l=e.route_data)||void 0===l?void 0:l.length),step_name:(null===(r=e.route_data)||void 0===r?void 0:r.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],tasks_count:"".concat(null===u||void 0===u?void 0:u.length," \u0438\u0437 ").concat(null===d||void 0===d?void 0:d.length)}})):[]).filter((function(e){return e.step==e.route_step&&4!=e.status_id}));window.localStorage.rows_onaproval=g.length;var y=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"180px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"},{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u0434\u0430\u0447",dataIndex:"tasks_count",width:"90px"}]);return Object(Gs.jsx)(co,{data:{dict:y,records:g},loading:_,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:c,GQL:s,UpdateForm:Zl,visibleModalUpdate2:o,GQL2:s,UpdateForm2:Or,visibleModalUpdate3:l,GQL3:s,UpdateForm3:Ir,visibleModalUpdate4:r,GQL4:s,UpdateForm4:Ar,visibleModalUpdate5:d,GQL5:s,UpdateForm5:id,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:s,setCountManager:e.setCountManager})}))),od=cd,ld=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=(Kc.a.Title,Kc.a.Link),d=Zi.a.Step,u=Object(as.useState)({log_username:l.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(j)}),[j]);var _=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=Object(as.useState)({step:"0"}),v=Object(ta.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC",e),Object(as.useEffect)((function(){e.initialValues&&(b({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var V=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(r,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(Gs.jsx)(d,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),rd=ld,dd=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=(Kc.a.Title,Kc.a.Link),d=Zi.a.Step,u=Object(as.useState)({log_username:l.username}),m=Object(ta.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(j),console.log("state2 form",j)}),[j]);var _=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=Object(as.useState)({step:"0"}),v=Object(ta.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC 2",e),Object(as.useEffect)((function(){e.initialValues2&&(b({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues2",e.initialValues2),y({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var V=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ss.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:j.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues2)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(r,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(Gs.jsx)(d,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues2)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),ud=dd,md=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Zi.a.Step,m=Object(as.useState)({log_username:r.username}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(b)}),[b]);var O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=Object(as.useState)({step:"0"}),g=Object(ta.a)(v,2),y=g[0],V=g[1];Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(p({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:b.log_username}),V({step:e.initialValues3.documents[0].step}),x(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var N=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),C=Object(ta.a)(w,2);C[0],C[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Gs.jsx)(u,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),jd=md,bd=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Zi.a.Step,m=Object(as.useState)({log_username:r.username}),j=Object(ta.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(b)}),[b]);var O=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=Object(as.useState)({step:"0"}),g=Object(ta.a)(v,2),y=g[0],V=g[1];Object(as.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(p({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:b.log_username}),V({step:e.initialValues4.documents[0].step}),x(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var N=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),C=Object(ta.a)(w,2);C[0],C[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:b.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Gs.jsx)(u,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),pd=bd,_d=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Rs.j)(),d=(Kc.a.Title,Kc.a.Link),u=Zi.a.Step,m=Object(as.useRef)("vertical");Object(as.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(as.useState)({log_username:r.username}),b=Object(ta.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(p)}),[p]);var h=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(ta.a)(h,2),x=f[0],v=f[1],g=Object(as.useState)({step:"0"}),y=Object(ta.a)(g,2),V=y[0],N=y[1];Object(as.useEffect)((function(){e.initialValues5&&(_({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:p.log_username}),N({step:e.initialValues5.documents[0].step}),v(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),k=Object(ta.a)(C,2);k[0],k[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ss.a)({},t)))},children:[Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(d,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(Gs.jsx)(u,{title:e.positionName})}))})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Gs.jsx)(ks.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Od=_d,hd=(Kc.a.Title,Kc.a.Link,Zi.a.Step,is.a.memo((function(e){var t=Object(Rs.j)(),n=t.positions.toString(),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{approved_by_me:t.id,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(on||(on=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(ln||(ln=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    reason\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(rn||(rn=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(dn||(dn=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(un||(un=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(mn||(mn=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(jn||(jn=Object(na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(as.useState)(!1),i=Object(as.useState)(!1),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(Rs.g)(Object(la.a)(s.delete))(),d=Object(ta.a)(r,2),u=d[0],m=d[1].loading,j=Object(Rs.h)(s,"all")(),b=j.loading,p=j.data,_=j.refetch;Object(as.useEffect)((function(){_()}),[]);var O=p&&null!=p[Object.keys(p)[0]]?p[Object.keys(p)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],h=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(co,{data:{dict:h,records:O},loading:b,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:a,GQL:s,UpdateForm:rd,visibleModalUpdate2:i,GQL2:s,UpdateForm2:ud,visibleModalUpdate3:c,GQL3:s,UpdateForm3:jd,visibleModalUpdate4:o,GQL4:s,UpdateForm4:pd,visibleModalUpdate5:l,GQL5:s,UpdateForm5:Od,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},u({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:m,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})}))),fd=hd,xd=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],vd=is.a.memo((function(e){var t=e.GQL,n=(e.GQL2,e.GQL3,e.GQL4,e.GQL5,e.UpdateForm),s=e.UpdateForm2,a=(e.UpdateForm3,e.UpdateForm4,e.UpdateForm5,Object(Ds.a)(e,xd)),i={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(a.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(bn||(bn=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(pn||(pn=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(_n||(_n=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(On||(On=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(hn||(hn=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(fn||(fn=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)(xn||(xn=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},c=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Xi.a)(Yi.a.mark((function n(s){return Yi.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=sa.a.useForm(),l=Object(ta.a)(o,1)[0],r=sa.a.useForm(),d=Object(ta.a)(r,1)[0],u=Object(as.useState)(!0),m=Object(ta.a)(u,2),j=(m[0],m[1]),b=a.visibleModalUpdate?a.visibleModalUpdate:[],p=Object(ta.a)(b,2),_=p[0],O=p[1],h=a.visibleModalUpdate2?a.visibleModalUpdate2:[],f=Object(ta.a)(h,2),x=f[0],v=f[1],g={};g[t.table]=t.table?{global:{id:"= ".concat(a.selectedRowKeys[0])}}:{};var y=Object(Rs.h)(t,"one",{variables1:g})(),V=(y.loading,y.data),N=y.refetch,w=Object(Rs.h)(t,"one",{variables1:g})(),C=(w.loading,w.data),k=w.refetch;Object(as.useEffect)((function(){_&&N(g)}),[_]),Object(as.useEffect)((function(){x&&k(g)}),[x]);var S={documents:{global:{id:"=".concat(a.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},T=Object(Rs.h)(i,"one",{variables1:g})(),I=(T.loading,T.data),E=T.refetch,P=Object(Rs.h)(i,"one",{variables1:g})(),F=(P.loading,P.data),R=P.refetch;Object(as.useEffect)((function(){_&&E(S)}),[_]),Object(as.useEffect)((function(){x&&R(S)}),[x]),console.log(a.selectedRowKeys),console.log("documentData",I),console.log("data",V),console.log("propsMODAL",a);var D=Object(Rs.g)(Object(la.a)(t.update),(function(){O(!1)}))(),L=Object(ta.a)(D,2),U=L[0];L[1].loading;return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",disabled:2!==a.selectedRowKeys.length,onClick:function(){O(!0)},children:[Object(Gs.jsx)(ka.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Gs.jsx)(Va.a,{title:a.title,visible:_,width:600,onCancel:function(){O(!1),j(!0)},footer:null,children:Object(Gs.jsx)(n,{document:null===I||void 0===I?void 0:I.documents[0],initialValues:V,form:l,onFinish:function(){var e=Object(Xi.a)(Yi.a.mark((function e(n){var s,i,o;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},o=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,c(n.files.fileList).then((function(e){o=e}));case 5:i[t.exemplar]={id:a.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:o||[],report:n.report},console.log("variables-------123",i),U({variables:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Gs.jsx)(Va.a,{title:a.title,visible:x,width:600,onCancel:function(){v(!1),j(!0)},footer:null,children:Object(Gs.jsx)(s,{document:null===F||void 0===F?void 0:F.documents[0],initialValues:C,form:d,onFinish:function(){var e=Object(Xi.a)(Yi.a.mark((function e(n){var s,i,o;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},o=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,c(n.files.fileList).then((function(e){o=e}));case 5:i[t.exemplar]={id:a.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:o||[],report:n.report},console.log("variables-------123",i),U({variables:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),gd=vd,yd=["GQL"],Vd=is.a.memo((function(e){var t,n,s=e.GQL,a=Object(Ds.a)(e,yd),i=Object(as.useState)([]),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=[];a.loading||(r=a.data.records.map((function(e){return e.id})));var d=Object(la.a)(s.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(ta.a)(d,2),m=u[0],j=u[1];j.loading,j.error;return Object(as.useEffect)((function(){l(o.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return!0;return!1})))}),[a.data]),Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",style:{minHeight:168},loading:a.loading,columns:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.dict,dataSource:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:a.title?function(){return a.title({selectedRowKeys:o})}:null,bordered:a.bordered,onRow:function(e,t){return{onClick:function(t){l([e.key,e.document_id]),console.log("record",e)},onDoubleClick:function(t){var n;0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)?(m({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}),10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0)):(10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===o[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})),Nd=Vd,wd=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f=Object(Rs.j)(),x=Kc.a.Link,v=Object(as.useState)({log_username:f.username}),g=Object(ta.a)(v,2),y=g[0],V=g[1],N=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(f.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===y||void 0===y||null===(t=y.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),C=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===w||void 0===w?void 0:w.includes(e.id)})),k=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(y)}),[y]),Object(as.useEffect)((function(){e.initialValues&&V({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:y.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=y.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:y.fio_created})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:y.note})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===y||void 0===y||null===(c=y.document_options)||void 0===c?void 0:c.title)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===y||void 0===y||null===(l=y.document_options)||void 0===l?void 0:l.supllier)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===y||void 0===y||null===(u=y.document_options)||void 0===u?void 0:u.subject)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===y||void 0===y||null===(b=y.document_options)||void 0===b?void 0:b.price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===C||void 0===C?void 0:C.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(x,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){N(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),2!=y.status?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(sa.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(aa.a.TextArea,{})}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),y.report?y.report:"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{className:"font-form-header",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(O=e.initialValues)||void 0===O||null===(h=O.document_tasks[0])||void 0===h?void 0:h.document_tasks_files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:24,className:"document-view-wrap",children:[Object(Gs.jsx)(x,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){N(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})]})]}),1==(null===y||void 0===y?void 0:y.status)?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Cd=wd,kd=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w,C,k=Object(Rs.j)(),S=Kc.a.Link,T=Object(as.useState)({log_username:k.username}),I=Object(ta.a)(T,2),E=I[0],P=I[1],F=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(k.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(as.useEffect)((function(){e.initialValues&&P({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:E.fio_created})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:E.note})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency_price)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list[0])||void 0===N?void 0:N.received_from_counteragent_date})]})}):"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("h3",{className:"marginTop",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(S,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){F(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})})),Object(Gs.jsx)(ma.a,{type:"horizontal"}),2!=E.status?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(sa.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(aa.a.TextArea,{})}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Gs.jsx)(vc,{showUploadList:!0,action:"https://"+rs.host+":"+rs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?cc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&cc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{children:Object(Gs.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)("h3",{className:"font-form-header",children:Object(Gs.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Gs.jsx)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(C=w.document_tasks[0])||void 0===C?void 0:C.document_tasks_files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)(ws.a,{span:24,className:"document-view-wrap",children:[Object(Gs.jsx)(S,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){F(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Sd=kd,Td=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.id,s=(t.positions.toString(),Object(oa.a)(vn||(vn=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                \n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                \n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(oa.a)(gn||(gn=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "]))),Object(oa.a)(yn||(yn=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(oa.a)(Vn||(Vn=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(oa.a)(Nn||(Nn=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(oa.a)(wn||(wn=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(oa.a)(Cn||(Cn=Object(na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"]))),{exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_receiver:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(kn||(kn=Object(na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        task_statuses{\n                            id\n                            name\n                        }\n                        document_tasks_logs{\n                            id\n                            task_id\n                            is_read\n                            type\n                            user_id\n                        }\n                        report\n                    }\n                }\n            "]))),one:Object(oa.a)(Sn||(Sn=Object(na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                    report\n                }\n            }\n            "])))},subscription:{all:Object(oa.a)(Tn||(Tn=Object(na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    report\n                }\n            }\n        "])))},update:Object(oa.a)(In||(In=Object(na.a)(["\n        mutation updateDocumentTasks($document_tasks: JSON) {\n            updateDocumentTasks(document_tasks: $document_tasks) {\n            type\n            message\n        }\n        }\n        "]))),setTaskIsReadTrue:Object(oa.a)(En||(En=Object(na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))}),a=Object(as.useState)(!1),i=Object(as.useState)(!1),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(Rs.h)(s,"all")(),d=r.loading,u=r.data,m=r.refetch;Object(as.useEffect)((function(){m()}),[]);var j=u&&null!=u[Object.keys(u)[0]]?u[Object.keys(u)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id,status:e.status,is_cancelled:e.is_cancelled,note:e.note,deadline:e.deadline,date_created:e.date_created,user_id_created:e.user_id_created,fio_created:e.fio_created,user_id_receiver:e.user_id_receiver,fio_receiver:e.fio_receiver,route_id:e.route_id?e.route_id:10,document_options:e.document_options,task_files:e.task_files?e.task_files:{},task_statuses:e.task_statuses.name,document_tasks_logs:e.document_tasks_logs?e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==t.id}))]:[]}})):[],b=j.filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=b.length;var p=Aa([{title:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f",dataIndex:"fio_created",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.fio_created.localeCompare(t.fio_created)}},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"300px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e",dataIndex:"deadline",width:"214px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.deadline)-new Date(t.deadline)})),{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",width:"114px",tooltip:!0},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",width:"214px"}]);return Object(Gs.jsx)(Nd,{data:{dict:p,records:j},loading:d,title:function(e){return console.log("tableProps",e),Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(gd,{visibleModalUpdate:a,UpdateForm:Cd,visibleModalUpdate2:i,UpdateForm2:Sd,GQL:s,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u043d\u0438\u044f",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})),Id=Td,Ed=["reasonText","dataProps","setState","user"],Pd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Ed),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Fd=Pd,Rd=["reasonText","dataProps","setState","user"],Dd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Rd),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Ld=Dd,Ud=["reasonText","dataProps","setState","user"],$d=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Ud),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Md=$d,Jd=["reasonText","dataProps","setState","user"],zd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Jd),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Kd=zd,qd=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(Rs.j)(),u=(Kc.a.Title,Kc.a.Link),m=Zi.a.Step,j=Object(as.useState)({log_username:d.username}),b=Object(ta.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(p)}),[p]);var h=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(ta.a)(h,2),x=f[0],v=f[1],g=Object(as.useState)({step:"0"}),y=Object(ta.a)(g,2),V=y[0],N=y[1];console.log("PROPS UPDATE DOC",e),Object(as.useEffect)((function(){e.initialValues&&(_({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:p.log_username}),console.log("props.initialValues",e.initialValues),N({step:e.initialValues.documents[0].step}),v(e.initialValues.documents[0].route_data))}),[e.initialValues]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1];return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:p.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(u,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(Gs.jsx)(m,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Fd,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Kd,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Gs.jsx)(Md,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Ld,{reasonText:S,dataProps:e,setState:_,user:d})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Ad=qd,Hd=["reasonText","dataProps","setState","user"],Bd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Hd),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Gd=Bd,Qd=["reasonText","dataProps","setState","user"],Wd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Qd),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Yd=Wd,Xd=["reasonText","dataProps","setState","user"],Zd=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Xd),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),eu=["reasonText","dataProps","setState","user"],tu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,eu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return console.log("dataProps FORM2222",n),Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),nu=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=Zi.a.Step,_=Object(as.useState)({log_username:j.username}),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ta.a)(v,2),y=g[0],V=g[1],N=Object(as.useState)({step:"0"}),w=Object(ta.a)(N,2),C=w[0],k=w[1];Object(as.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),k({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ta.a)(T,2),E=I[0],P=I[1],F=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),R=Object(ta.a)(F,2);R[0],R[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ss.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Gs.jsx)(p,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Gd,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(tu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Gs.jsx)(Zd,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Yd,{reasonText:E,dataProps:e,setState:f,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,P(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),su=nu,au=["reasonText","dataProps","setState","user"],iu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,au),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),cu=["reasonText","dataProps","setState","user"],ou=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,cu),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),lu=["reasonText","dataProps","setState","user"],ru=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,lu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),du=["reasonText","dataProps","setState","user"],uu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,du),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),mu=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(iu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(uu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ru,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ou,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),ju=mu,bu=["reasonText","dataProps","setState","user"],pu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,bu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),_u=["reasonText","dataProps","setState","user"],Ou=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,_u),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),hu=["reasonText","dataProps","setState","user"],fu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,hu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),xu=["reasonText","dataProps","setState","user"],vu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,xu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),gu=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(pu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(vu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(fu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Ou,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),yu=gu,Vu=["reasonText","dataProps","setState","user"],Nu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Vu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),wu=["reasonText","dataProps","setState","user"],Cu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,wu),Object(as.useState)(!1)),c=Object(ta.a)(i,2),o=c[0],l=c[1],r=Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ta.a)(r,2),u=d[0],m=d[1];return Object(Gs.jsx)(ha.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),cc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),ku=["reasonText","dataProps","setState","user"],Su=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,ku),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Tu=["reasonText","dataProps","setState","user"],Iu=is.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Ds.a)(e,Tu),Object(as.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ta.a)(i,2),o=c[0],l=c[1];return Object(Gs.jsx)(ha.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Gs.jsx)(ks.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Eu=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues5&&(h({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:O.log_username}),N({step:e.initialValues5.documents[0].step}),g(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=k[0],T=k[1],I=Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(Nu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Iu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(Su,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(Cu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsxs)("div",{children:[Object(Gs.jsx)(aa.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Pu=Eu,Fu=(Kc.a.Title,Kc.a.Link,Zi.a.Step,is.a.memo((function(e){var t=Object(Rs.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Pn||(Pn=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(oa.a)(Fn||(Fn=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(Rn||(Rn=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(Dn||(Dn=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(Ln||(Ln=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(Un||(Un=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(oa.a)($n||($n=Object(na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(as.useRef)(0),i=Object(as.useState)(!1),c=Object(as.useState)(!1),o=Object(as.useState)(!1),l=Object(as.useState)(!1),r=Object(as.useState)(!1),d=Object(Rs.g)(Object(la.a)(s.delete))(),u=Object(ta.a)(d,2),m=u[0],j=u[1].loading,b=Object(Rs.h)(s,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(as.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var s,i,c,o;return a.current=_.documents.length,{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(i=e.route_id)||void 0===i?void 0:i.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],f=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(Oc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:i,GQL:s,UpdateForm:Ad,visibleModalUpdate2:c,GQL2:s,UpdateForm2:su,visibleModalUpdate3:o,GQL3:s,UpdateForm3:ju,visibleModalUpdate4:l,GQL4:s,UpdateForm4:yu,visibleModalUpdate5:r,GQL5:s,UpdateForm5:Pu,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r,GQL:s})}))),Ru=n(474),Du=(Kc.a.Title,Kc.a.Link),Lu=Zi.a.Step,Uu=is.a.memo((function(e){var t=Object(Rs.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Mn||(Mn=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                description\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(Jn||(Jn=Object(na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    description\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(oa.a)(zn||(zn=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(Kn||(Kn=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(qn||(qn=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(An||(An=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(as.useState)(!1),i=Object(as.useState)(!1),c=Object(Rs.g)(Object(la.a)(s.delete))(),o=Object(ta.a)(c,2),l=o[0],r=o[1].loading,d=Object(Rs.h)(s,"all")(),u=d.loading,m=d.data,j=d.refetch;Object(as.useEffect)((function(){j()}),[]);var b=(m&&null!=m[Object.keys(m)[0]]?m[Object.keys(m)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 2==e.status_id})),p=Aa([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:!0},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:!0},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Gs.jsx)(Oc,{data:{dict:p,records:b},loading:u,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(pc,{visibleModalUpdate:a,visibleModalUpdate2:i,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:s,GQL2:s,UpdateForm:Mu,UpdateForm2:Ju,update:!0,width:750}),Object(Gs.jsx)(ha.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},l({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Gs.jsx)(pa.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Gs.jsxs)(ks.a,{type:"dashed",danger:!0,loading:r,disabled:1!==e.selectedRowKeys.length,children:[Object(Gs.jsx)(_a.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,GQL:s})})),$u=/^\d+$/,Mu=is.a.memo((function(e){var t,n,s=Object(Rs.j)(),a=Object(as.useState)({log_username:s.username}),i=Object(ta.a)(a,2),c=i[0],o=i[1],l=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(c)}),[c]);var r=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=Object(as.useState)({step:"0"}),b=Object(ta.a)(j,2),p=b[0],_=b[1];Object(as.useEffect)((function(){e.initialValues&&(o({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].price,supllier:e.initialValues.documents[0].supllier,subject:e.initialValues.documents[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:c.log_username}),console.log("props.initialValues",e.initialValues),_({step:e.initialValues.documents[0].step}),m(e.initialValues.documents[0].route_data))}),[e.initialValues]);var O=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(c),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){o(Object.assign({},c,Object(ss.a)({},t)))},children:[Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:'"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:'"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:$u,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(Du,{children:Object(Gs.jsxs)("a",{"data-fileid":e.id,onClick:O,children:[e.filename," ",Object(Gs.jsx)(Ru.a,{})]})})," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)(ks.a,{onClick:function(){l(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:p.step-1,className:"steps-form-update",children:u.map((function(e){return Object(Gs.jsx)(Lu,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Ju=is.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Rs.j)(),r=Object(as.useState)({log_username:l.username}),d=Object(ta.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(u)}),[u]);var b=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ta.a)(b,2),_=p[0],O=p[1],h=Object(as.useState)({step:"0"}),f=Object(ta.a)(h,2),x=f[0],v=f[1];console.log("PROPS UPDATE DOC 2",e),Object(as.useEffect)((function(){e.initialValues2&&(m({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:u.log_username}),v({step:e.initialValues2.documents[0].step}),O(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var g=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),V=Object(ta.a)(y,2),N=V[0],w=V[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(Vc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"1"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"2"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"3"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"4"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"5"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"6"}],className:"form-radio",value:N})}),Object(Gs.jsx)(sa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:$u,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Gs.jsx)(sa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Gs.jsx)(sa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(sa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Gs.jsx)(aa.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(Du,{children:Object(Gs.jsxs)("a",{"data-fileid":e.id,onClick:g,children:[e.filename," ",Object(Gs.jsx)(Ru.a,{})]})})," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)(ks.a,{onClick:function(){j(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Gs.jsx)(Lu,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsxs)(ws.a,{span:24,children:[Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward2,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward2,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(Gs.jsxs)(ws.a,{span:24,className:"marginTop",children:[Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Gs.jsx)(ma.a,{type:"vertical"}),Object(Gs.jsx)(ks.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Gs.jsx)(aa.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Gs.jsx)(ks.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),zu=Uu,Ku=Vs.a.Content,qu=Object(Fs.withRouter)((function(e){var t=Object(Fs.useLocation)().pathname,n=Object(Rs.j)(),s=Object(as.useState)("Test"),a=Object(ta.a)(s,2),i=a[0],c=a[1],o=Object(as.useState)({revised:"0",approved:"0",rejected:"0",onaproval:"0",type:"count"}),l=Object(ta.a)(o,2),r=l[0],d=l[1],u=Object(as.useState)(null),m=Object(ta.a)(u,2),j=m[0],b=m[1];if(Object(as.useEffect)((function(){console.log("dc effect",j)}),[j]),Object(as.useEffect)((function(){console.log("dc2 effect",r),(null===j||void 0===j?void 0:j.setValue)&&"function"==typeof j.setValue&&j.setValue((function(e){var t=Object.assign({},e);return t.revised=e.revised-r.revised,t.approved=e.approved-r.approved,t.rejected=e.rejected-r.rejected,t.onaproval=e.onaproval-r.onaproval,t}))}),[r]),("/document-control/"===t||"/document-control"===t)&&n.documentControl.orders.select)return Object(Gs.jsx)(Fs.Redirect,{to:"/document-control/orders"});return Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsx)(Zs,{title:i,user:n}),Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsx)(Qi,{setHeaderTitle:c,setCountManager:d,countF:function e(t){console.log("Setter",t),console.log("Setter2",e);b({setValue:function(e){t(e)},stateSetter:t})}}),Object(Gs.jsx)(Vs.a,{className:"content-layout",children:Object(Gs.jsxs)(Ku,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(Gs.jsx)(Fs.Route,{path:"/document-control/orders",component:Object(Rs.a)(so)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/reviseduser",component:Object(Rs.a)(Yo)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/approveduser",component:Object(Rs.a)(ul)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/rejecteduser",component:Object(Rs.a)(Nl)}),Object(Gs.jsx)(Fs.Route,{exact:!0,path:"/document-control/on-approval",render:function(e){return Object(Gs.jsx)(od,Object(ss.a)(Object(ss.a)({},e),{},{title:"Props through render"}))},setCountManager:d}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/on-approval-list",component:Object(Rs.a)(fd)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/approved",component:Object(Rs.a)(Fu)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/rejected",component:Object(Rs.a)(zu)}),Object(Gs.jsx)(Fs.Route,{path:"/document-control/for-execution-inbox",component:Object(Rs.a)(Id)})]})})]})]})})),Au=["title","user"],Hu=Vs.a.Header,Bu=zs.a.useBreakpoint,Gu=is.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Ds.a)(e,Au),Bu()),a=Object(Fs.useHistory)(),i=Object(Fs.useLocation)().pathname;return Object(Gs.jsx)("div",{children:Object(Gs.jsx)(Hu,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(Gs.jsxs)(Ss.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(Gs.jsx)(ws.a,{flex:"auto",style:{color:"c40c46"},children:Object(Gs.jsx)(Ks.a,{className:"site-page-header",backIcon:Object(Gs.jsx)(Ls.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(Gs.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(Gs.jsx)(ws.a,{flex:"auto",children:Object(Gs.jsx)("h1",{style:{color:"white"},children:t})}):Object(Gs.jsx)(Gs.Fragment,{}),Object(Gs.jsx)(ws.a,{children:Object(Gs.jsx)(qs.a,{shape:"square",size:"small",icon:Object(Gs.jsx)(Us.a,{})})}),Object(Gs.jsx)(ws.a,{flex:"70px",style:{marginRight:"30px"},children:Object(Gs.jsx)(As.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(Gs.jsx)(Hs.a,{overlay:Object(Gs.jsxs)(Bs.a,{children:[n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(Gs.jsx)($s.a,{}),"ADMIN"]}),n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(Gs.jsx)(Ms.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(Gs.jsx)(Ms.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(Gs.jsx)(Us.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(Gs.jsxs)(Bs.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(Gs.jsx)(Js.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(Gs.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),Qu=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],Wu=Object(oa.a)(Hn||(Hn=Object(na.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),Yu=Object(oa.a)(Bn||(Bn=Object(na.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Xu=Object(oa.a)(Gn||(Gn=Object(na.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Zu=Object(oa.a)(Qn||(Qn=Object(na.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),em=Object(oa.a)(Wn||(Wn=Object(na.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),tm=is.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Ds.a)(e,Qu),m=sa.a.useForm(),j=Object(ta.a)(m,1)[0],b=sa.a.useForm(),p=Object(ta.a)(b,1)[0],_=sa.a.useForm(),O=Object(ta.a)(_,1)[0],h=sa.a.useForm(),f=Object(ta.a)(h,1)[0],x=sa.a.useForm(),v=Object(ta.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(ta.a)(g,2),V=y[0],N=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],C=Object(ta.a)(w,2),k=C[0],S=C[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(ta.a)(T,2),E=I[0],P=I[1],F=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(ta.a)(F,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(ta.a)(U,2),M=$[0],J=$[1],z=Object(as.useState)(!0),K=Object(ta.a)(z,2),q=K[0],A=K[1],H=Object(Rs.j)(),B=function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)},G=function(){A(!1)};Va.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Rs.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Rs.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Rs.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Rs.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Rs.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(as.useEffect)((function(){te&&j.resetFields()}),[te]),Object(as.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(as.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(as.useEffect)((function(){de&&f.resetFields()}),[de]),Object(as.useEffect)((function(){je&&v.resetFields()}),[je]),Object(as.useEffect)((function(){V&&ne(Q)}),[V]),Object(as.useEffect)((function(){k&&ie(W)}),[k]),Object(as.useEffect)((function(){E&&le(Y)}),[E]),Object(as.useEffect)((function(){D&&ue(X)}),[D]),Object(as.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Rs.g)(Object(la.a)(t.update),(function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)}))(),_e=Object(ta.a)(pe,2),Oe=_e[0],he=(_e[1].loading,Object(as.useState)()),fe=Object(ta.a)(he,2),xe=fe[0],ve=fe[1],ge=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},ye=Object(Fi.a)(em,ge),Ve=(ye.loading,ye.data),Ne=ye.refetch;Object(as.useEffect)((function(){V&&Ne(ge)}),[V]);var we=Ve&&null!=Ve[Object.keys(Ve)[0]]?Ve[Object.keys(Ve)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ce=Object(la.a)(Wu,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),ke=Object(ta.a)(Ce,2),Se=ke[0],Te=ke[1],Ie=(Te.loading,Te.error,function(e){Se({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:xe}}}),Ne(ge),e.resetFields(["comments"])}),Ee=function(e,t){e.target.value.length>0&&ve(e.target.value)},Pe=Object(as.useState)(),Fe=Object(ta.a)(Pe,2),Re=Fe[0],De=Fe[1],Le=Object(as.useState)(),Ue=Object(ta.a)(Le,2),$e=Ue[0],Me=Ue[1],Je=Object(as.useState)(),ze=Object(ta.a)(Je,2),Ke=ze[0],qe=ze[1],Ae=Object(la.a)(Yu,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),He=Object(ta.a)(Ae,2),Be=He[0],Ge=He[1],Qe=(Ge.loading,Ge.error,Object(la.a)(Xu,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),We=Object(ta.a)(Qe,2),Ye=(We[0],We[1]),Xe=(Ye.loading,Ye.error,function(){cc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),Ze=function(){Me(7)},et=function(){Me(2)};console.log("route_data",Ke),console.log("data",te);var tt=function(e){console.log("CLIIIICK",e),at({variables:{document_files:{id:e.id}}})},nt=Object(la.a)(Zu,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),st=Object(ta.a)(nt,2),at=st[0],it=st[1];it.loading,it.error;return Object(Gs.jsxs)(Gs.Fragment,{children:[Object(Gs.jsxs)(ks.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){N(!0)},children:[Object(Gs.jsx)(ka.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Gs.jsx)(Va.a,{title:u.title,visible:V,centered:!0,width:900,onOk:function(){j.submit()},onCancel:function(){N(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(c,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,HandleDeleteFile:tt,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:k,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(o,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,HandleDeleteFile:tt,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){P(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(l,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(r,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:q})}),Object(Gs.jsx)(Va.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Gs.jsx)(d,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&De(e)},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:q})})]})})),nm=is.a.memo((function(e){var t=Object(as.useState)([]),n=Object(ta.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(as.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsx)(Ra.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onChange:e.onChange,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id]),console.log("SelectedRowKeys",s)},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),sm=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(Gs.jsxs)("div",{style:{padding:8},children:[Object(Gs.jsx)(aa.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(Gs.jsxs)(As.b,{children:[Object(Gs.jsx)(ks.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(Gs.jsx)(Ua.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(Gs.jsx)(ks.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(Gs.jsx)(Ua.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(Gs.jsx)(Ma.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},am=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],im=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Gs.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},cm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Gs.jsx)(Cs.a,{title:t,color:"grey",children:Object(Gs.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},om=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Ds.a)(e,am);if(d)return Object(ss.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=im;return r&&(m=cm),Object(ss.a)(Object(ss.a)({title:im(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return sm(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},lm=(n(93),n(237)),rm={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(oa.a)(Yn||(Yn=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(oa.a)(Xn||(Xn=Object(na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                files{\n                    id\n                    filename\n                }\n                signatures{\n                    id\n                    document_id\n                    user_id\n                    username\n                    date_signature\n                    position\n                    fio\n                }\n                step\n                route_data\n            }\n        }\n        "])))},subscription:{all:[Object(oa.a)(Zn||(Zn=Object(na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(oa.a)(es||(es=Object(na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(oa.a)(ts||(ts=Object(na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(oa.a)(ns||(ns=Object(na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},dm=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b=Object(Rs.j)(),p=(Kc.a.Title,Kc.a.Link),_=Zi.a.Step,O=Object(as.useState)({log_username:b.username}),h=Object(ta.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form.setFieldsValue(f)}),[f]);var g=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(ta.a)(g,2),V=y[0],N=y[1],w=Object(as.useState)({step:"0"}),C=Object(ta.a)(w,2),k=C[0],S=C[1];console.log("PROPS UPDATE DOC",e),Object(as.useEffect)((function(){e.initialValues&&(x({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:f.log_username}),console.log("props.initialValues",e.initialValues),S({step:e.initialValues.documents[0].step}),N(e.initialValues.documents[0].route_data))}),[e.initialValues]);var T=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(ta.a)(I,2);E[0],E[1];return Object(Gs.jsxs)(sa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:f.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:f.supllier})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Gs.jsx)(ws.a,{span:12,children:f.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:f.price})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.files)||void 0===o?void 0:o.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(p,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){v(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(l=e.initialValues)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.signatures)||void 0===d?void 0:d.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:V.map((function(e){return Object(Gs.jsx)(_,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ma.a,{type:"horizontal"})}),Object(Gs.jsx)(ws.a,{span:24,className:"marginTop",children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(u=e.initialValues)||void 0===u||null===(m=u.documents[0])||void 0===m||null===(j=m.reason)||void 0===j?void 0:j.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),um=dm,mm=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=Zi.a.Step,_=Object(as.useState)({log_username:j.username}),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ta.a)(v,2),y=g[0],V=g[1],N=Object(as.useState)({step:"0"}),w=Object(ta.a)(N,2),C=w[0],k=w[1];Object(as.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),k({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ta.a)(T,2),E=(I[0],I[1],Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject)),P=Object(ta.a)(E,2);P[0],P[1];return Object(Gs.jsxs)(sa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ss.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.currency_price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.sider_signatures_date})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Gs.jsx)(p,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ma.a,{type:"horizontal"})}),Object(Gs.jsx)(ws.a,{span:24,className:"marginTop",children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),jm=mm,bm=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=(k[0],k[1],Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject)),T=Object(ta.a)(S,2);T[0],T[1];return Object(Gs.jsxs)(sa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ma.a,{type:"horizontal"})}),Object(Gs.jsx)(ws.a,{span:24,className:"marginTop",children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),pm=bm,_m=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=(Zi.a.Step,Object(as.useState)({log_username:j.username})),_=Object(ta.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ta.a)(x,2),g=(v[0],v[1]),y=Object(as.useState)({step:"0"}),V=Object(ta.a)(y,2),N=(V[0],V[1]);Object(as.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),k=Object(ta.a)(C,2),S=(k[0],k[1],Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject)),T=Object(ta.a)(S,2);T[0],T[1];return Object(Gs.jsxs)(sa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ss.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.subject})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.price})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.currency})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_name_division})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.executor_phone_number})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})}))}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ma.a,{type:"horizontal"})}),Object(Gs.jsx)(ws.a,{span:24,className:"marginTop",children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),Om=_m,hm=is.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Rs.j)(),b=(Kc.a.Title,Kc.a.Link),p=Zi.a.Step,_=Object(as.useState)({log_username:j.username}),O=Object(ta.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(as.useEffect)((function(){e.form5.setFieldsValue(h)}),[h]);var v=Object(as.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ta.a)(v,2),y=g[0],V=g[1],N=Object(as.useState)({step:"0"}),w=Object(ta.a)(N,2),C=w[0],k=w[1];Object(as.useEffect)((function(){e.initialValues5&&(f({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:h.log_username}),k({step:e.initialValues5.documents[0].step}),V(e.initialValues5.documents[0].route_data),console.log("----------------------------------",e))}),[e.initialValues5]);var S=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(as.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ta.a)(T,2),E=(I[0],I[1],Object(as.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject)),P=Object(ta.a)(E,2);P[0],P[1];return Object(Gs.jsxs)(sa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(h)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ss.a)({},t)))},children:[Object(Gs.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(Gs.jsx)("br",{}),Object(Gs.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(Gs.jsxs)("h4",{children:[Object(Gs.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.title})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.remark})]})}),Object(Gs.jsx)("div",{className:"form-item-wrap",children:Object(Gs.jsxs)(Ss.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Gs.jsx)(ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Gs.jsx)(ws.a,{span:12,children:h.subject})]})}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"document-view-wrap",children:[Object(Gs.jsx)(b,{children:Object(Gs.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Gs.jsx)(ks.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Gs.jsx)(ka.a,{})})," ",Object(Gs.jsx)("br",{})]})})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsxs)(sa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Gs.jsx)(Gs.Fragment,{children:Object(Gs.jsxs)("div",{className:"signature-view-wrap",children:[Object(Gs.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Gs.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Gs.jsx)("span",{className:"signature-view-date",children:Object(Rs.c)(e.date_signature)})]})})})),Object(Gs.jsx)(Zi.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Gs.jsx)(p,{title:e.positionName})}))})]}),Object(Gs.jsxs)(Ss.a,{children:[Object(Gs.jsx)(ws.a,{span:24,children:Object(Gs.jsx)(ma.a,{type:"horizontal"})}),Object(Gs.jsx)(ws.a,{span:24,className:"marginTop",children:Object(Gs.jsx)(ks.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Gs.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Gs.jsx)("br",{})]})}))}),Object(Gs.jsx)(ma.a,{type:"horizontal"}),Object(Gs.jsx)(sa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Gs.jsx)("div",{className:"comments",children:Object(Gs.jsxs)("li",{className:"comment-item",children:[Object(Gs.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Gs.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Gs.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Gs.jsx)("br",{}),Object(Gs.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Gs.jsx)(sa.a.Item,{name:"date_created",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"route_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"status_id",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"step",hidden:!0}),Object(Gs.jsx)(sa.a.Item,{name:"log_username",hidden:!0})]})})),fm=hm,xm=ii.a.Option,vm=is.a.memo((function(e){var t=Object(Rs.j)().positions.toString(),n=(Jl.a.RangePicker,sa.a.useForm(),Object(as.useState)(!1)),s=Object(as.useState)(!1),a=Object(as.useState)(!1),i=Object(as.useState)(!1),c=Object(as.useState)(!1),o=Object(as.useState)(),l=Object(ta.a)(o,2),r=l[0],d=l[1],u=Object(as.useState)([]),m=Object(ta.a)(u,2),j=(m[0],m[1]),b=Object(as.useState)(),p=Object(ta.a)(b,2),_=p[0],O=p[1],h=Object(Rs.h)(rm,"all",{variables:r})(),f=h.loading,x=h.data,v=h.refetch,g=x&&null!=x[Object.keys(x)[0]]?x[Object.keys(x)[0]].map((function(e){var n,s,a,i,c=0,o="-",l="-";return 0!=e.data_one.length&&(c=e.data_one[0].price,o=e.title,l=e.data_one[0].supllier),0!=e.data_agreement_list.length&&(c=e.data_agreement_list[0].price,l=e.title),0!=e.data_agreement_list_production.length&&(c=e.data_agreement_list_production[0].price,l=e.title),0!=e.data_agreement_list_internal_needs.length&&(c=e.data_agreement_list_internal_needs[0].price,l=e.title),0!=e.data_custom.length&&(o=e.title),{id:e.id,key:e.id,title:o,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==t}))+1:[],step:e.step,route_id:e.route_id.id,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:"",price:c,counteragent_name:l}})):[],y=Object(as.useState)(),V=Object(ta.a)(y,2),N=V[0],w=V[1],C=function(){var e=Object(Xi.a)(Yi.a.mark((function e(t){var n,s;return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),void 0==t.dateFrom&&void 0==t.dateTo?console.log("undefined"):void 0!=t.dateFrom&&void 0!=t.dateTo&&(n=t.dateFrom._d,s=t.dateTo._d,d({documents:{global:{date_created:"::date<= date'".concat(Object(lm.a)(s,"dd-MM-yyyy"),"' and date_created::date>=date'").concat(Object(lm.a)(n,"dd-MM-yyyy"),"'"),ORDER_BY:["date_created desc"]}}})),v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=om([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"134px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},{title:"\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"counteragent_name",width:"130px",type:"search",tooltip:!0,sorter:function(e,t){return e.counteragent_name.localeCompare(t.counteragent_name)},sortDirections:["ascend","descend"]},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",width:"55px",tooltip:!0,sorter:function(e,t){return e.price-t.price},sortDirections:["ascend","descend"]},Object(ba.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(ba.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]),S=function(){console.log("currentTableData Excel //////////",_),fetch("/api/tabledata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentTableData:_})}),Object(Xi.a)(Yi.a.mark((function e(){return Yi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Rs.b)("/api/tabledata","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432 "+Object(Rs.d)(new Date)+".xlsx");case 2:case"end":return e.stop()}}),e)})))()},T="YYYY-MM-DD HH:mm:ss";return Object(Gs.jsxs)("span",{children:[Object(Gs.jsx)(sa.a,{onFinish:C,name:"filterForm",onValuesChange:function(e,t){w(Object.assign({},N,Object(ss.a)({},t)))},children:Object(Gs.jsxs)(Ss.a,{style:{paddingLeft:"10px",paddingRight:"10px",marginBottom:"15px",marginTop:"15px"},children:[Object(Gs.jsxs)(ws.a,{span:2,style:{marginRight:"25px"},children:["\u041e\u0442:",Object(Gs.jsx)(sa.a.Item,{name:"dateFrom",children:Object(Gs.jsx)(Jl.a,{format:T,locale:Kl.a,style:{width:"100%"}})})]}),Object(Gs.jsxs)(ws.a,{span:2,style:{marginRight:"25px"},children:["\u0414\u043e:",Object(Gs.jsx)(sa.a.Item,{name:"dateTo",children:Object(Gs.jsx)(Jl.a,{format:T,locale:Kl.a,style:{width:"100%"}})})]}),Object(Gs.jsxs)(ws.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(Gs.jsx)(sa.a.Item,{name:"documentType",children:Object(Gs.jsxs)(ii.a,{style:{width:"100%"},children:[Object(Gs.jsx)(xm,{value:10,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"}),Object(Gs.jsx)(xm,{value:24,children:"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(Gs.jsx)(xm,{value:26,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(Gs.jsx)(xm,{value:27,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"}),Object(Gs.jsx)(xm,{value:29,children:"\u0414\u0440\u0443\u0433\u043e\u0439"}),Object(Gs.jsx)(xm,{value:void 0})]})})]}),Object(Gs.jsxs)(ws.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(Gs.jsx)(sa.a.Item,{name:"documentStatus",children:Object(Gs.jsxs)(ii.a,{style:{width:"100%"},children:[Object(Gs.jsx)(xm,{value:5,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(Gs.jsx)(xm,{value:4,children:"\u0423\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d"}),Object(Gs.jsx)(xm,{value:2,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d"}),Object(Gs.jsx)(xm,{value:7,children:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0435"}),Object(Gs.jsx)(xm,{value:void 0})]})})]}),Object(Gs.jsxs)(ws.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u043e\u0442:",Object(Gs.jsx)(sa.a.Item,{name:"priceFrom",children:Object(Gs.jsx)(aa.a,{})})]}),Object(Gs.jsxs)(ws.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u0434\u043e:",Object(Gs.jsx)(sa.a.Item,{name:"priceTo",children:Object(Gs.jsx)(aa.a,{})})]}),Object(Gs.jsx)(ws.a,{span:2,style:{marginRight:"25px",marginTop:"20px"},children:Object(Gs.jsx)(ks.a,{type:"primary",htmlType:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})})]})}),Object(Gs.jsx)(nm,{data:{dict:k,records:g},loading:f||!1,title:function(e){return Object(Gs.jsx)(Fa,{buttons:[Object(Gs.jsx)(ks.a,{onClick:S,children:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 Excel"}),Object(Gs.jsx)(tm,{visibleModalUpdate:n,GQL:rm,UpdateForm:um,visibleModalUpdate2:s,GQL2:rm,UpdateForm2:jm,visibleModalUpdate3:a,GQL3:rm,UpdateForm3:pm,visibleModalUpdate4:i,GQL4:rm,UpdateForm4:Om,visibleModalUpdate5:c,GQL5:rm,UpdateForm5:fm,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},onChange:function(e,t,n,s){O(s.currentDataSource),j(t)},visibleModalUpdate:n,visibleModalUpdate2:s,visibleModalUpdate3:a,visibleModalUpdate4:i,visibleModalUpdate5:c})]})})),gm=vm,ym=(Vs.a.Header,Vs.a.Content),Vm=is.a.memo((function(e){var t=Object(Rs.j)(),n=Object(Fs.useLocation)().pathname,s=Object(as.useState)("\u041f\u043e\u0438\u0441\u043a"),a=Object(ta.a)(s,2),i=a[0];a[1];return"/document-search/"!==n&&"/document-search"!==n||!t.documentSearch.search.select?Object(Gs.jsxs)(Vs.a,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(Gs.jsx)(Gu,{title:i,user:t}),Object(Gs.jsx)(Vs.a,{children:Object(Gs.jsx)(Vs.a,{className:"content-layout",children:Object(Gs.jsx)(ym,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(Gs.jsx)(Fs.Route,{path:"/document-search/search",component:Object(Rs.a)(gm)})})})})]}):Object(Gs.jsx)(Fs.Redirect,{to:"/document-search/search"})})),Nm=Object(Fs.withRouter)(Vm),wm=rs.port,Cm=rs.graphql;console.log("Starting SD Client. Host is "+window.SERVER_DATA);var km=new fs.a({uri:"https://"+window.SERVER_DATA+":".concat(wm).concat(Cm.path)}),Sm=new gs.a({uri:"wss://"+window.SERVER_DATA+":".concat(wm).concat(Cm.path),options:{reconnect:!0}}),Tm=(Vs.a.Header,Vs.a.Content),Im=(Vs.a.Sider,Object(hs.a)((function(e){var t=e.graphQLErrors,n=e.networkError,s=e.operation;e.response;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(JSON.stringify(n),", Path: ").concat(a,". \n"),"[Details]: operation: ".concat(JSON.stringify(s.variables),". \n"),"[Details]: operationName: ".concat(JSON.stringify(s.operationName),". \n"))})),n&&(console.log("[Network error]: ".concat(JSON.stringify(n))),Ns.a.info({message:Object(Gs.jsxs)("div",{id:"ant_notification",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c ZiK-\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430.",Object(Gs.jsx)("br",{}),"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u043d\u0438\u043b\u0430\u0441\u044c \u0447\u0435\u0440\u0435\u0437 5 \u043c\u0438\u043d\u0443\u0442, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0432\u0430\u0448\u0435\u0439 \u0441\u043b\u0443\u0436\u0431\u043e\u0439 IT."]}),duration:10,placement:"bottomRight"}))}))),Em=Object(ys.a)((function(e,t){var n=t.headers,s=localStorage.getItem("token");return{headers:Object(ss.a)(Object(ss.a)({},n),{},{authorization:s?"Bearer ".concat(s):""})}})),Pm=Object(xs.a)((function(e){var t=e.query,n=Object(vs.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Sm,Em.concat(km)),Fm=new us.a({link:Os.a.from([Im,Pm]),cache:new ms.a}),Rm=Object(Gs.jsx)(ws.a,{className:"main-menu-col",children:Object(Gs.jsx)(Cs.a,{placement:"rightTop",title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0431\u043e\u0440\u043e\u0442",children:Object(Gs.jsx)(ks.a,{type:"solid",className:"main-menu-button",children:Object(Gs.jsxs)(Ps.c,{to:"document-control",style:{fontSize:"25px"},children:[" ",Object(Gs.jsx)(js.a,{style:{marginRight:7}})," \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 ",Object(Gs.jsx)("p",{className:"page-desc",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})]})})})}),Dm=Object(Gs.jsx)(ws.a,{className:"main-menu-col",children:Object(Gs.jsx)(Cs.a,{placement:"rightTop",title:"\u041e\u0442\u0447\u0435\u0442\u044b",children:Object(Gs.jsx)(ks.a,{type:"solid",className:"main-menu-button",children:Object(Gs.jsxs)(Ps.c,{to:"document-report",style:{fontSize:"25px"},children:[" ",Object(Gs.jsx)(bs.a,{style:{marginRight:7}})," \u041e\u0442\u0447\u0435\u0442\u044b ",Object(Gs.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c"})]})})})}),Lm=Object(Gs.jsx)(ws.a,{className:"main-menu-col",children:Object(Gs.jsx)(Cs.a,{placement:"rightTop",title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438",children:Object(Gs.jsx)(ks.a,{type:"solid",className:"main-menu-button",children:Object(Gs.jsxs)(Ps.c,{to:"document-history",style:{fontSize:"25px"},children:[" ",Object(Gs.jsx)(ps.a,{style:{marginRight:7}}),"  \u0418\u0441\u0442\u043e\u0440\u0438\u044f ",Object(Gs.jsx)("p",{className:"page-desc",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})]})})})}),Um=Object(Gs.jsx)(ws.a,{className:"main-menu-col",children:Object(Gs.jsx)(Cs.a,{placement:"rightTop",title:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c",children:Object(Gs.jsx)(ks.a,{type:"solid",className:"main-menu-button",children:Object(Gs.jsxs)(Ps.c,{to:"document-search",style:{fontSize:"25px"},children:[Object(Gs.jsx)(_s.a,{style:{marginRight:7}})," \u041f\u043e\u0438\u0441\u043a ",Object(Gs.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c"})]})})})}),$m=is.a.memo((function(){Object(Fs.useLocation)().pathname;var e=Object(Rs.j)();return console.log("user",e),Object(Gs.jsxs)(Vs.a,{children:[Object(Gs.jsx)(Zs,{title:"",user:e}),Object(Gs.jsx)(Vs.a,{children:Object(Gs.jsx)(Vs.a,{className:"content-layout",children:Object(Gs.jsx)(Tm,{className:"site-layout-background",style:{padding:0,margin:0,minHeight:280},children:Object(Gs.jsx)("div",{style:{paddingTop:50},children:Object(Gs.jsxs)(Ss.a,{justify:"center",style:{margin:"0",top:"50%",transform:"translate(0,-50%)",position:"absolute",width:"99%"},children:[e.documentControl.select?Rm:null,e.documentReport.select?Dm:null,e.documentHistory.select?Lm:null,e.documentSearch.select?Um:null]})})})})})]})})),Mm=function(){return Object(Gs.jsxs)(Fs.Switch,{children:[Object(Gs.jsx)(Fs.Route,{path:"/login",component:da}),Object(Gs.jsx)(Fs.Route,{path:"/logout",component:function(){return Object(Gs.jsx)(Gs.Fragment,{})}}),Object(Gs.jsx)(Fs.Route,{path:"/",exact:!0,component:$m}),Object(Gs.jsx)(Fs.Route,{path:"/document-control",component:Object(Rs.a)(qu)}),Object(Gs.jsx)(Fs.Route,{path:"/document-search",component:Object(Rs.a)(Nm)}),Object(Gs.jsx)(Fs.Route,{path:"/admin",component:Object(Rs.a)(Pi)}),Object(Gs.jsx)(Fs.Route,{path:"/account",component:Object(Rs.a)(Ji)}),Object(Gs.jsx)(Fs.Route,{component:ea.a})]})};os.a.render(Object(Gs.jsx)(Ps.a,{children:Object(Gs.jsx)(ds.a,{client:Fm,children:Object(Gs.jsx)(Ts.b,{locale:Es.a,children:Object(Gs.jsx)(Mm,{})})})}),document.getElementById("root"))},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return handlerQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return handlerMutation})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useUser})),__webpack_require__.d(__webpack_exports__,"a",(function(){return accessRedirect})),__webpack_require__.d(__webpack_exports__,"b",(function(){return download})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDDMMYYY})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDDMMYYYHHmm})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatDate})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDiffHours})),__webpack_require__.d(__webpack_exports__,"i",(function(){return notifyMe}));var G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(151),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_apollo_client__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(299),_apollo_client__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(240),react_router_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(35),_modules_Error404__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(177),_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(232),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__),_templateObject,_templateObject2,_templateObject3,MergeRecursive=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var s in n)try{n[s].constructor===Object?t[s]=e(t[s],n[s]):t[s]=n[s]}catch(a){t[s]=n[s]}return t},checkObject=function checkObject(object,data){var request="";try{request=eval("object.".concat(data))}catch(e){return request}return void 0===request?"":request},handlerQuery=function(e,t,n,s){return function(){var a=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),i=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(a,2),c=i[0],o=i[1],l=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(e.select[t],Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)));return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){l.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:l.error.message,duration:0,placement:"bottomRight"})}),[l.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(e.subscription[t]&&l.data&&!c){if(e.subscription[t][0])for(var a in e.subscription[t])l.subscribeToMore({document:e.subscription[t][a],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});else l.subscribeToMore({document:e.subscription[t],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});o(!0)}}),[l.data]),l}},handlerMutation=function(e){var t=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(e,2),n=t[0],s=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){s.loading||s.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:s.error.message,duration:0,placement:"bottomRight"})}),[s.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(s.data){var e=s.data[Object.keys(s.data)[0]];"warning"==e.type?antd__WEBPACK_IMPORTED_MODULE_5__.a.warning({message:e.message,duration:0,placement:"bottomRight"}):antd__WEBPACK_IMPORTED_MODULE_5__.a.success({message:e.message,duration:10,placement:"bottomRight"}),a()}}),[s.data]),[n,s]}},isAccessed=function(e,t){return!!e.admin||t.some((function(t){return e.accesses.includes(t)}))},authMe={options:{},select:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject||(_templateObject=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                    position_accesses\n                }\n            }\n        "])))},subscription:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject2||(_templateObject2=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            subscription authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                }\n            }\n\n        "])))}},positions=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject3||(_templateObject3=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),useUser=function(){var e=handlerQuery(authMe,"one",{variables:{}},"auth")(),t=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(positions),n=(t.loading,t.data),s=(t.refetch,e.data?e.data.authMe[0]:void 0),a=s?e.data.authMe[0].position_names:[],i=(s&&s.positions&&(null===n||void 0===n||n.positions.filter((function(e){return e.id==s.positions[0]}))),s?e.data.authMe[0].position_accesses:[]),c=s?s.admin:void 0;return{query:e,id:s?s.id:void 0,username:s?s.username:void 0,domain_username:s?s.domain_username:void 0,fio:s?s.fio:void 0,email:s?s.email:void 0,admin:s?s.admin:void 0,role_id:s?s.role_id:void 0,positions:c?[1,2,3,4,5,6]:null===s||void 0===s?void 0:s.positions,position_names:a,documentControl:{select:!!c||i.includes("/document-control-p/select"),insert:!!c||i.includes("/document-control-p/insert"),update:!!c||i.includes("/document-control-p/update"),delete:!!c||i.includes("/document-control-p/delete"),orders:{select:!!c||i.includes("/document-control-p/orders-p/select")},revisedUser:{select:!!c||i.includes("/document-control-p/reviseduser-p/select")},approvedUser:{select:!!c||i.includes("/document-control-p/approveduser-p/select")},rejectedUser:{select:!!c||i.includes("/document-control-p/rejecteduser-p/select")},onApproval:{select:!!c||i.includes("/document-control-p/on-approval-p/select")},onApprovalList:{select:!!c||i.includes("/document-control-p/on-approval-list-p/select")},forExecutionInbox:{select:!!c||i.includes("/document-control-p/for-execution-inbox-p/select")},approved:{select:!!c||i.includes("/document-control-p/approved-p/select")},rejected:{select:!!c||i.includes("/document-control-p/rejected-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-control-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-control-p/item-status-change")},documentReport:{select:!!c||i.includes("/document-report-p/select"),insert:!!c||i.includes("/document-report-p/insert"),update:!!c||i.includes("/document-report-p/update"),delete:!!c||i.includes("/document-report-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-report-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-report-p/item-status-change")},documentHistory:{select:!!c||i.includes("/document-history-p/select"),insert:!!c||i.includes("/document-history-p/insert"),update:!!c||i.includes("/document-history-p/update"),delete:!!c||i.includes("/document-history-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-history-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-history-p/item-status-change")},documentSearch:{select:!!c||i.includes("/document-search-p/select"),insert:!!c||i.includes("/document-search-p/insert"),update:!!c||i.includes("/document-search-p/update"),delete:!!c||i.includes("/document-search-p/delete"),search:{select:!!c||i.includes("/document-search-p/search-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-search-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-search-p/item-status-change")},adminDepartment:{select:!!c||i.includes("/admin-p/select"),insert:!!c||i.includes("/admin-p/insert"),update:!!c||i.includes("/admin-p/update"),delete:!!c||i.includes("/admin-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/admin-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/admin-p/item-status-change")}}},accessRedirect=function(e){var t=function(t){var n=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useLocation)().pathname,s=useUser();n.split("/");if(s.query.loading)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:"Loading..."});switch(n){case"/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/login"});break;case"/login":case"/login/":if(s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/logout":case"/logout/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/account":case"/account/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/account"});break;case"/admin":case"/admin/":case"/graphql":case"/graphql/":case"/admin/registration":case"/admin/registration/":case"/admin/positions-page":case"/admin/positions-page/":case"/admin/document-statuses-page":case"/admin/document-statuses-page/":case"/admin/document-routes-page":case"/admin/document-routes-page/":case"/admin/forms-settings-page":case"/admin/forms-settings-page/":if(!s.admin)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control":case"/document-control/":if(!s.documentControl.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/orders":case"/document-control/orders/":if(!s.documentControl.orders.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/reviseduser":case"/document-control/reviseduser/":case"/document-control/approveduser":case"/document-control/approveduser/":if(!s.documentControl.approvedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejecteduser":case"/document-control/rejecteduser/":if(!s.documentControl.rejectedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval":case"/document-control/on-approval/":if(!s.documentControl.onApproval.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval-list":case"/document-control/on-approval-list/":if(!s.documentControl.onApprovalList.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/for-execution-inbox":case"/document-control/for-execution-inbox/":if(!s.documentControl.forExecutionInbox.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/approved":case"/document-control/approved/":if(!s.documentControl.approved.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejected":case"/document-control/rejected/":if(!s.documentControl.rejected.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-report":case"/document-report/":if(!s.documentReport.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-history":case"/document-history/":if(!s.documentHistory.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search":case"/document-search/":if(!s.documentSearch.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search/search":case"/document-search/search/":if(!s.documentSearch.search.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;default:return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_modules_Error404__WEBPACK_IMPORTED_MODULE_10__.a,{})}return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},t))};return t},download=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t,n){var s,a,i;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"no-cors"});case 2:return s=e.sent,e.prev=3,e.next=6,s.blob();case 6:a=e.sent,(i=document.createElement("a")).href=URL.createObjectURL(a),i.setAttribute("download",n),i.click(),i.remove(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),getDDMMYYY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear();return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a},getDDMMYYYHHmm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear(),i=t.getHours(),c=t.getMinutes();function o(e){return String(e).padStart(2,"0")}return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a+" "+o(i)+":"+o(c)},getFirstMonthDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3),s=n;return s.setHours(0,0,0,0),s.setMonth(s.getMonth()+1,0),s.setDate(1),s},formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.split(/[^\d]+/);return t=t[2]+"-"+t[1]+"-"+t[0]+" "+t[3]+":"+t[4]+":"+t[5]},getDiffHours=function(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,console.log("diff",n),n<1?"\u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434":n<12&&n>=1?Math.abs(Math.round(n))+" \u0447. \u043d\u0430\u0437\u0430\u0434":n>12&&n<24?"\u0412\u0447\u0435\u0440\u0430":n>24?Math.abs(Math.round(n/24))+" \u0434. \u043d\u0430\u0437\u0430\u0434":void 0},notifyMe=function(e){if(window.Notification){if(e)if("granted"===Notification.permission){var t=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){t.close()}),3e3)}else Notification.requestPermission().then((function(t){if("granted"===t){var n=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){n.close()}),3e3)}else console.log("User blocked notifications.")})).catch((function(e){console.error(e)}))}else console.log("Browser does not support notifications.")},sendAgentNotification=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t){var n;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},[[421,1,2]]]);
//# sourceMappingURL=main.9f34a403.chunk.js.map