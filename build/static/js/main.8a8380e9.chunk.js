(this.webpackJsonpdocrecyler=this.webpackJsonpdocrecyler||[]).push([[0],{182:function(e,t,n){"use strict";var s=n(457),a=n(55),i=n(50),c=(n(1),n(0));t.a=function(){return Object(c.jsx)(s.a,{status:"404",title:"404",subTitle:"\u0423\u043f\u0441, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430.",extra:Object(c.jsx)(a.a,{type:"primary",children:Object(c.jsx)(i.c,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})}},236:function(e,t,n){"use strict";t.a=n.p+"static/media/duck.dcaac10b.jpg"},268:function(e,t,n){},316:function(e,t,n){},394:function(e,t,n){},411:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},435:function(e,t,n){},456:function(e,t,n){"use strict";n.r(t);var s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C,S,T,I,E,F,P,R,D,L,U,$,M,J,z,K,A,q,B,H,G,Q,W,Y,X,Z,ee,te,ne,se,ae,ie,ce,oe,le,re,de,ue,me,je,be,pe,_e,Oe,he,fe,xe,ve,ge,ye,Ve,ke,we,Ne,Ce,Se,Te,Ie,Ee,Fe,Pe,Re,De,Le,Ue,$e,Me,Je,ze,Ke,Ae,qe,Be,He,Ge,Qe,We,Ye,Xe,Ze,et,tt,nt,st,at=n(3),it=n(1),ct=n.n(it),ot=(n(106),n(57)),lt=n.n(ot),rt=(n(316),{debug:!1,port:8445,host:window.SERVER_DATA,graphql:{path:"/graphql"}}),dt=rt,ut=n(474),mt=n(482),jt=n(484),bt=n(510),pt=n(511),_t=n(223),Ot=n(505),ht=n(119),ft=n(290),xt=n(483),vt=n(473),gt=n(120),yt=n(288),Vt=n(291),kt=n(464),wt=n(156),Nt=n(466),Ct=n(65),St=n(55),Tt=n(465),It=n(21),Et=n(292),Ft=n.n(Et),Pt=n(50),Rt=n(36),Dt=n(8),Lt=n(11),Ut=n(304),$t=n(494),Mt=n(495),Jt=n(496),zt=n(497),Kt=n(252),At=n(488),qt=n(296),Bt=n(491),Ht=n(149),Gt=n(64),Qt=n(0),Wt=["title","user"],Yt=kt.a.Header,Xt=Kt.a.useBreakpoint,Zt=ct.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Lt.a)(e,Wt),Xt()),a=Object(Rt.useHistory)(),i=Object(Rt.useLocation)().pathname;return Object(Qt.jsx)("div",{children:Object(Qt.jsx)(Yt,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(Qt.jsxs)(Tt.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(Qt.jsx)(Nt.a,{flex:"auto",style:{color:"c40c46"},children:Object(Qt.jsx)(At.a,{className:"site-page-header",backIcon:Object(Qt.jsx)(Ut.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(Qt.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(Qt.jsx)(Nt.a,{flex:"auto",children:Object(Qt.jsx)("h1",{style:{color:"white"},children:t})}):Object(Qt.jsx)(Qt.Fragment,{}),Object(Qt.jsx)(Nt.a,{children:Object(Qt.jsx)(qt.a,{shape:"square",size:"small",icon:Object(Qt.jsx)($t.a,{})})}),Object(Qt.jsx)(Nt.a,{flex:"70px",style:{marginRight:"30px"},children:Object(Qt.jsx)(Bt.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(Qt.jsx)(Ht.a,{overlay:Object(Qt.jsxs)(Gt.a,{children:[n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(Qt.jsx)(Mt.a,{}),"ADMIN"]}),n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(Qt.jsx)(Jt.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(Qt.jsx)(Jt.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(Qt.jsx)($t.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(Qt.jsx)(zt.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(Qt.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),en=Zt,tn=n(182),nn=n(2),sn=n(9),an=n(479),cn=n(298),on=n(498),ln=n(306),rn=(n(393),n(245)),dn=n(512),un=(n(394),Object(rn.a)(s||(s=Object(sn.a)(["\n    mutation login($user: JSON) {\n        login(user: $user){\n            username\n        }\n    }"])))),mn=function(){var e=Object(it.useState)(),t=Object(nn.a)(e,2),n=t[0],s=t[1],a=Object(Dt.g)(Object(dn.a)(un))(),i=Object(nn.a)(a,2),c=i[0],o=i[1],l=o.loading,r=o.data;Object(it.useEffect)((function(){n&&c({variables:{user:n}})}),[n]),Object(it.useEffect)((function(){if(r){var e={method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(n)};fetch("https://"+dt.host+":"+dt.port+"/login",e).then((function(e){e.url!=window.location.href?window.location.href=e.url:console.log(e)}))}}),[r]);var d=an.a.useForm(),u=Object(nn.a)(d,1)[0];return Object(Qt.jsx)(Tt.a,{justify:"center",align:"middle",style:{height:"95vh"},children:Object(Qt.jsx)(Nt.a,{children:Object(Qt.jsx)(an.a,{form:u,name:"basic",onFinish:s,onFinishFailed:function(e){console.log("Failed:",e)},children:Object(Qt.jsx)(Tt.a,{gutter:16,children:Object(Qt.jsxs)(Nt.a,{children:[Object(Qt.jsx)("div",{className:"authorizationHeader",children:"\u0410\u0412\u0422\u041e\u0420\u0418\u0417\u0410\u0426\u0418\u042f"}),Object(Qt.jsx)(an.a.Item,{name:"username",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{className:"loginFormName",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"password",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.Password,{className:"loginFormPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(Qt.jsx)(on.a,{style:{color:"#fff"},className:"loginIcons"}):Object(Qt.jsx)(ln.a,{style:{color:"#fff"},className:"loginIcons"})}})}),Object(Qt.jsx)(an.a.Item,{className:"loginFormItem",children:Object(Qt.jsx)(St.a,{htmlType:"submit",loading:l,className:"login_btn",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})})})},jn=n(504),bn=n(472),pn=n(19),_n=n(10),On=n(305),hn=n(222),fn=n(302),xn=n(471),vn=n(99),gn=n(487),yn=n(104),Vn=n(478),kn=n(499),wn=n(485),Nn=["GQL","InsertForm"],Cn=ct.a.memo((function(e){var t=e.GQL,n=e.InsertForm,s=Object(Lt.a)(e,Nn),a=an.a.useForm(),i=Object(nn.a)(a,1)[0],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(Dt.g)(Object(dn.a)(t.insert),(function(){r(!1),i.resetFields()}))(),u=Object(nn.a)(d,2),m=u[0],j=u[1].loading;return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){r(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:s.title,visible:l,onOk:function(){i.submit()},onCancel:function(){r(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",centered:!0,width:s.width?s.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:j||!1,children:Object(Qt.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,m({variables:n})},setVisible:r,save:function(){i.submit()}})})]})})),Sn=Cn,Tn=n(221),In=n(282),En=["GQL","UpdateForm"],Fn=ct.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Lt.a)(e,En),a=an.a.useForm(),i=Object(nn.a)(a,1)[0],c=Object(nn.a)(s.visibleModalUpdate,2),o=c[0],l=c[1],r=Object(it.useState)(!0),d=Object(nn.a)(r,2),u=d[0],m=d[1],j={};j[t.table]={global:{id:"= ".concat(s.selectedRowKeys[0])}};var b=Object(Dt.h)(t,"one",{variables:j})(),p=b.loading,_=b.data,O=b.refetch;Object(it.useEffect)((function(){_&&i.resetFields()}),[_]),Object(it.useEffect)((function(){o&&O()}),[o]),window.setVisible=l;var h=Object(Dt.g)(Object(dn.a)(t.update),(function(){l(!1),m(!0)}))(),f=Object(nn.a)(h,2),x=f[0],v=f[1].loading;return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",disabled:1!==s.selectedRowKeys.length,onClick:function(){l(!0)},children:[Object(Qt.jsx)(Tn.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Qt.jsx)(wn.a,{title:s.title,visible:o,centered:!0,width:s.width?s.width:450,onOk:function(){i.submit()},onCancel:function(){l(!1),m(!0)},maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(St.a,{onClick:function(){l(!1),m(!0)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),u?s.update&&Object(Qt.jsx)(St.a,{type:"primary",onClick:function(){m(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"setViewMode"):Object(Qt.jsx)(St.a,{type:"primary",loading:v,onClick:function(){i.submit()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"update")],children:Object(Qt.jsx)(In.a,{spinning:p,children:Object(Qt.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,x({variables:n})},initialValues:_,disabled:u,setVisible:l,setViewMode:m,save:function(){i.submit()}})})})]})})),Pn=Fn,Rn=ct.a.memo((function(e){var t=e.buttons?e.buttons.map((function(e,t){return Object(Qt.jsx)(Nt.a,{children:e},"button".concat(t))})):[];return Object(Qt.jsxs)(Tt.a,{justify:"end",align:"middle",gutter:[8,8],children:[Object(Qt.jsx)(Nt.a,{flex:"auto",children:Object(Qt.jsx)("h1",{style:{margin:"0 0 0 30px"},children:e.title})}),t]})})),Dn=Rn,Ln=n(475),Un=ct.a.memo((function(e){var t=Object(it.useState)([]),n=Object(nn.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(it.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key])},onDoubleClick:function(t){e.visibleModalUpdate[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){return e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":"ant-table-row ant-table-row-level-0"}})})})),$n=Un,Mn=n(152),Jn=n(210),zn=n.n(Jn),Kn=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(Qt.jsxs)("div",{style:{padding:8},children:[Object(Qt.jsx)(cn.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(St.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(Qt.jsx)(Mn.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(Qt.jsx)(St.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(Qt.jsx)(Mn.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(Qt.jsx)(zn.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},An=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Qt.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Qt.jsx)(Ct.a,{title:t,color:"grey",children:Object(Qt.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},Hn=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Lt.a)(e,An);if(d)return Object(at.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=qn;return r&&(m=Bn),Object(at.a)(Object(at.a)({title:qn(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return Kn(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},Gn={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(a||(a=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(i||(i=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(c||(c=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},insert:Object(rn.a)(o||(o=Object(sn.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(rn.a)(l||(l=Object(sn.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(rn.a)(r||(r=Object(sn.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},Qn={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(d||(d=Object(sn.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(rn.a)(u||(u=Object(sn.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(m||(m=Object(sn.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(rn.a)(j||(j=Object(sn.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(rn.a)(b||(b=Object(sn.a)(["\n        mutation updatetPosition($positions: JSON) {\n            updatetPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(rn.a)(p||(p=Object(sn.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},Wn=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)(!1),s=Object(Dt.g)(Object(dn.a)(Gn.delete))(),a=Object(nn.a)(s,2),i=a[0],c=a[1].loading,o=Object(Dt.h)(Gn,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(it.useEffect)((function(){d()}),[]);var u=Object(Dt.h)(Qn,"all")(),m=(u.loading,u.data),j=u.refetch;Object(it.useEffect)((function(){j()}),[]);var b=r&&null!=r.users?r.users.map((function(e){return{id:e.id,key:e.id,username:e.username,access:e.admin?"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c",positions:e.positions,fio:e.fio,email:e.email,positionName:m.positions.filter((function(t){return t.id==e.positions})).map((function(e){return e.name}))[0]}})):[],p=Hn([{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",width:100,tooltip:!0},{title:"\u0420\u043e\u043b\u044c",dataIndex:"access",align:"center",width:100,render:function(e,t){switch(t.access){case"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":return Object(Qt.jsx)(fn.a,{color:"green",children:e});case"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c":return Object(Qt.jsx)(fn.a,{color:"geekblue",children:e});default:return e}}},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",dataIndex:"positionName",width:150,tooltip:!0}]);return Object(Qt.jsx)($n,{data:{dict:p,records:b},loading:l,title:function(e){return Object(Qt.jsx)(Dn,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",buttons:[Object(Qt.jsx)(Sn,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",GQL:Gn,InsertForm:Yn,width:650}),Object(Qt.jsx)(Pn,Object(_n.a)({visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",width:650,selectedRowKeys:e.selectedRowKeys,GQL:Gn,UpdateForm:Yn,update:!0},"width",700)),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Gn.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n,bordered:!0})})),Yn=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({username:"",password:"",admin:!1,accesses:[],positions:[],domain_username:"",fio:"",email:"",log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues&&i({id:e.initialValues.users[0].id,username:e.initialValues.users[0].username,password:e.initialValues.users[0].password,admin:e.initialValues.users[0].admin,accesses:e.initialValues.users[0].accesses,positions:e.initialValues.users[0].positions,domain_username:e.initialValues.users[0].domain_username,fio:e.initialValues.users[0].fio,email:e.initialValues.users[0].email,log_username:t.username})}),[e.initialValues]);return Object(Qt.jsx)(an.a,{form:e.form,name:"WorkersWorkerdForm",onFinish:function(t){e.onFinish(a),console.log(t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:Object(Qt.jsx)(Tt.a,{justify:"center",children:Object(Qt.jsxs)(Nt.a,{flex:"auto",children:[Object(Qt.jsx)(an.a.Item,{name:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"domain_username",label:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"email",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043b\u044f \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u0439",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"fio",label:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)(an.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",labelCol:{span:24},rules:[{required:!e.initialValues,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a.Password,{disabled:e.disabled,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"accountInput"})}),Object(Qt.jsx)(an.a.Item,{name:"admin",valuePropName:"checked",rules:[{type:"boolean"}],shouldUpdate:!0,children:Object(Qt.jsx)(vn.a,{disabled:e.disabled,children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})}),a.admin?null:Object(Qt.jsx)(bn.a,{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"}),Object(Qt.jsx)(an.a.Item,{name:"positions",rules:[{type:"array",required:!a.admin,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],hidden:a.admin,children:Object(Qt.jsx)(Xn,{disabled:e.disabled})}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0,children:Object(Qt.jsx)(cn.a,{disabled:e.disabled})})]})})})})),Xn=ct.a.memo((function(e){var t=Object(Dt.h)(Qn,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(it.useEffect)((function(){a()}),[]);var i=Object(it.useState)([]),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(gn.a,{dataSource:r,showSearch:!0,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(pn.a)(e),Object(pn.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Qt.jsx)(yn.a,{image:yn.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),Zn=Wn,es={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(_||(_=Object(sn.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(rn.a)(O||(O=Object(sn.a)(["\n            query document_statuses($document_statuses: JSON) {\n                document_statuses(document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(h||(h=Object(sn.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(rn.a)(f||(f=Object(sn.a)(["\n        mutation insertDocumentStatus($document_statuses: JSON) {\n            insertDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),update:Object(rn.a)(x||(x=Object(sn.a)(["\n        mutation updateDocumentStatus($document_statuses: JSON) {\n            updateDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),delete:Object(rn.a)(v||(v=Object(sn.a)(["\n        mutation deleteDocumentStatus($document_statuses: JSON) {\n            deleteDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "])))},ts=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)(!1),s=Object(Dt.g)(Object(dn.a)(es.delete))(),a=Object(nn.a)(s,2),i=a[0],c=a[1].loading,o=Object(Dt.h)(es,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(it.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Hn([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Qt.jsx)($n,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Qt.jsx)(Dn,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",buttons:[Object(Qt.jsx)(Sn,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",GQL:es,InsertForm:ns}),Object(Qt.jsx)(Pn,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",selectedRowKeys:e.selectedRowKeys,GQL:es,UpdateForm:ns,update:!0}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[es.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),ns=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({isuseforreport:!1,log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues&&i({id:e.initialValues.document_statuses[0].id,name:e.initialValues.document_statuses[0].name,log_username:a.log_username})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentStatusesForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0,children:Object(Qt.jsx)(cn.a,{disabled:e.disabled})})]})})),ss=ts,as=n(500),is=n(501),cs=n(79),os=n(169),ls=["query","placeholder","clear"],rs=ct.a.memo((function(e){var t=e.query,n=e.placeholder,s=e.clear,a=Object(Lt.a)(e,ls),i=Object(Dt.h)(t,"all")(),c=i.loading,o=i.data,l=i.refetch;return Object(it.useEffect)((function(){l()}),[]),Object(Qt.jsxs)(Tt.a,{justify:"space-between",children:[Object(Qt.jsx)(Nt.a,{flex:"auto",children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:s?{width:"100%"}:null,placeholder:n,loading:c,showSearch:!0,optionFilterProp:"children",filterOption:!0},a),{},{children:[Object(Qt.jsx)(os.a.Option,{value:null},null),o?o[Object.keys(o)[0]].map((function(e){return Object(Qt.jsx)(os.a.Option,{value:e.id,children:e[Object.keys(e).filter((function(e){return"id"!==e&&"__typename"!==e}))[0]]},e.id)})):[]]}))}),s?Object(Qt.jsx)(Nt.a,{children:Object(Qt.jsx)(St.a,{style:{padding:5},type:"dashed",onClick:function(){a.onChange(null)},children:Object(Qt.jsx)(cs.a,{})})}):null]})})),ds=rs,us=n(303),ms=n(502),js=n(503),bs={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(g||(g=Object(sn.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "]))),one:Object(rn.a)(y||(y=Object(sn.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(V||(V=Object(sn.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},insert:Object(rn.a)(k||(k=Object(sn.a)(["\n        mutation insertDocumentRoute($document_routes: JSON) {\n            insertDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),update:Object(rn.a)(w||(w=Object(sn.a)(["\n        mutation updateDocumentRoute($document_routes: JSON) {\n            updateDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),delete:Object(rn.a)(N||(N=Object(sn.a)(["\n        mutation deleteDocumentRoute($document_routes: JSON) {\n            deleteDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "])))},ps={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(rn.a)(C||(C=Object(sn.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(S||(S=Object(sn.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))}},_s={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(T||(T=Object(sn.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(rn.a)(I||(I=Object(sn.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(E||(E=Object(sn.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},Os=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)(!1),s=Object(Dt.g)(Object(dn.a)(bs.delete))(),a=Object(nn.a)(s,2),i=a[0],c=a[1].loading,o=Object(Dt.h)(bs,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(it.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Hn([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)($n,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Qt.jsx)(Dn,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",buttons:[Object(Qt.jsx)(Sn,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",GQL:bs,InsertForm:hs,width:750}),Object(Qt.jsx)(Pn,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:bs,UpdateForm:hs,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[bs.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})})),hs=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useRef)(),s=Object(it.useState)({isuseforreport:!1,log_username:t.username}),a=Object(nn.a)(s,2),i=a[0],c=a[1];Object(it.useEffect)((function(){e.form.setFieldsValue(i),console.log("props top",i)}),[i]),Object(it.useEffect)((function(){e.initialValues&&c({id:e.initialValues.document_routes[0].id,name:e.initialValues.document_routes[0].name,status_in_process:e.initialValues.document_routes[0].status_in_process,status_cancelled:e.initialValues.document_routes[0].status_cancelled,status_finished:e.initialValues.document_routes[0].status_finished,routes:e.initialValues.document_routes[0].routes,log_username:i.log_username})}),[e.initialValues]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentRoutesForm",onFinish:function(t){e.onFinish(i)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"status_in_process",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(ds,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",query:ps})}),Object(Qt.jsx)(an.a.Item,{name:"status_cancelled",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(ds,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",query:ps})}),Object(Qt.jsx)(an.a.Item,{name:"status_finished",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(ds,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",query:ps})}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0,children:Object(Qt.jsx)(cn.a,{disabled:e.disabled})}),Object(Qt.jsx)(an.a.List,{name:"routes",children:function(t,s){var a=s.add,i=s.remove;return Object(Qt.jsxs)(Qt.Fragment,{children:[t.map((function(t){return Object(Qt.jsx)(Bt.b,{style:{display:"flex",marginBottom:40},align:"baseline",children:Object(Qt.jsxs)(Tt.a,{gutter:20,children:[Object(Qt.jsxs)(Nt.a,{span:24,children:["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u2116: ",Object(Qt.jsx)("b",{children:t.name+1})]}),Object(Qt.jsxs)(Nt.a,{span:12,children:[Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{name:[t.name,"positionId"],fieldKey:[t.fieldKey,"positionId"],children:Object(Qt.jsx)(ds,{disabled:e.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:_s,onChange:function(e,n){c((function(e){var s=Object.assign({},e);return console.log("field.fieldKey",t.fieldKey),s.routes[t.name].positionName=n.children,s.routes[t.name].step=t.name+1,s}))}})})),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{name:[t.name,"step"],fieldKey:[t.fieldKey,"step"],hidden:!0})),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{name:[t.name,"positionName"],fieldKey:[t.fieldKey,"positionName"],hidden:!0}))]}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{name:[t.name,"isExecutor"],fieldKey:[t.fieldKey,"isExecutor"],valuePropName:"checked",rules:[{type:"boolean",required:!1}],children:Object(Qt.jsx)(vn.a,{disabled:e.disabled,children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c?"})}))}),Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{label:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b:",name:[t.name,"statuses"],fieldKey:[t.fieldKey,"statuses"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(Qt.jsx)(fs,{disabled:e.disabled})}))}),Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},t),{},{label:"\u0417\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0446\u0430:",name:[t.name,"substitutes"],fieldKey:[t.fieldKey,"substitutes"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(Qt.jsx)(xs,{disabled:e.disabled})}))}),Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)("i",{children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(Qt.jsx)(as.a,{onClick:function(){return i(t.name)},disabled:e.disabled,style:{marginLeft:5}})]})]})},t.key)})),Object(Qt.jsx)(an.a.Item,{children:Object(Qt.jsx)(St.a,{type:"dashed",onClick:function(){return a()},disabled:e.disabled,block:!0,icon:Object(Qt.jsx)(is.a,{}),ref:n,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})})]})}})]}),Object(Qt.jsx)(Tt.a,{className:"on-approval-from-buttons-wrap",children:Object(Qt.jsxs)(Nt.a,{span:24,className:"on-approval-form-buttons-container",children:[Object(Qt.jsx)(St.a,{disabled:e.disabled,style:{marginRight:"5px"},onClick:function(){n.current.click()},icon:Object(Qt.jsx)(us.a,{})}),Object(Qt.jsx)("span",{style:{marginRight:"5px"},children:e.setViewMode?Object(Qt.jsx)(St.a,{onClick:function(){e.setViewMode(!1)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(Qt.jsx)(ms.a,{})}):Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){e.save()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),children:Object(Qt.jsx)(St.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:Object(Qt.jsx)(hn.a,{})})})}),Object(Qt.jsx)("span",{style:{marginRight:"5px"},children:Object(Qt.jsx)(St.a,{onClick:function(){e.setVisible(!1),e.setViewMode(!0)},title:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:Object(Qt.jsx)(js.a,{})})})]})})]})})),fs=ct.a.memo((function(e){var t=Object(Dt.h)(ps,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(it.useEffect)((function(){a()}),[]);var i=Object(it.useState)([]),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.document_statuses.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(gn.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(pn.a)(e),Object(pn.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Qt.jsx)(yn.a,{image:yn.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),xs=ct.a.memo((function(e){var t=Object(Dt.h)(_s,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(it.useEffect)((function(){a()}),[]);var i=Object(it.useState)([]),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(gn.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(pn.a)(e),Object(pn.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(Qt.jsx)(yn.a,{image:yn.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"},disabled:e.disabled})})})),vs=Os,gs={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(F||(F=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "]))),one:Object(rn.a)(P||(P=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(R||(R=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},insert:Object(rn.a)(D||(D=Object(sn.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(rn.a)(L||(L=Object(sn.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(rn.a)(U||(U=Object(sn.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},ys={exemplar:"positions",table:"positions",options:{all:{variables:{positions:{global:{ORDER_BY:["name asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)($||($=Object(sn.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),one:Object(rn.a)(M||(M=Object(sn.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(J||(J=Object(sn.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},insert:Object(rn.a)(z||(z=Object(sn.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(rn.a)(K||(K=Object(sn.a)(["\n        mutation updatePosition($positions: JSON) {\n            updatePosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(rn.a)(A||(A=Object(sn.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},Vs=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)(!1),s=Object(Dt.g)(Object(dn.a)(ys.delete))(),a=Object(nn.a)(s,2),i=a[0],c=a[1].loading,o=Object(Dt.h)(ys,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(it.useEffect)((function(){d()}),[]);var u=Object(Dt.h)(gs,"all")(),m=(u.loading,u.data),j=u.refetch;Object(it.useEffect)((function(){j()}),[]);var b=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){var t;return{id:e.id,key:e.id,name:e.name,accesses:e.accesses,count:null===m||void 0===m||null===(t=m.users)||void 0===t?void 0:t.filter((function(t){return t.positions==e.id})).length}})):[],p=Hn([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0},{title:"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u043b\u044c\u0437.",dataIndex:"count",width:"50px",tooltip:!0}]);return Object(Qt.jsx)($n,{data:{dict:p,records:b},loading:l,title:function(e){return Object(Qt.jsx)(Dn,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",buttons:[Object(Qt.jsx)(Sn,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",GQL:ys,InsertForm:ks}),Object(Qt.jsx)(Pn,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",selectedRowKeys:e.selectedRowKeys,GQL:ys,UpdateForm:ks,update:!0}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[ys.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),ks=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues&&i({id:e.initialValues.positions[0].id,name:e.initialValues.positions[0].name,accesses:e.initialValues.positions[0].accesses,log_username:a.log_username})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentPositionsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})}),Object(Qt.jsx)("h3",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:"}),Object(Qt.jsx)(an.a.Item,{name:"accesses",rules:[{type:"array",required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ws,{disabled:e.disabled})}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0,children:Object(Qt.jsx)(cn.a,{disabled:e.disabled})})]})})),ws=ct.a.memo((function(e){var t=Object(it.useState)(!0),n=Object(nn.a)(t,2),s=n[0],a=n[1],i=Object(it.useState)([]),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(Vn.a,{checkable:!0,onExpand:function(e){l(e),a(!1)},expandedKeys:o,autoExpandParent:s,onCheck:function(t){e.onChange(t)},checkedKeys:e.value,treeData:[{title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-control-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-control-p/item-status-change"},{title:"\u041c\u043e\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p/orders-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/orders-p/select"}]},{title:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443",key:"/document-control-p/reviseduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/reviseduser-p/select"}]},{title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/approveduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approveduser-p/select"}]},{title:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/rejecteduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejecteduser-p/select"}]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c",key:"/document-control-p/on-approval-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-p/select"}]},{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435",key:"/document-control-p/on-approval-list-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-list-p/select"}]},{title:"\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/for-execution-inbox-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/for-execution-inbox-p/select"}]},{title:"\u0412\u0441\u0435 \u0443\u0442\u0432\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/approved-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approved-p/select"}]},{title:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u0435\u043d\u043d\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/rejected-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejected-p/select"}]}]},{title:"\u041e\u0442\u0447\u0435\u0442\u044b",key:"/document-report-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-report-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-report-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-report-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-report-p/item-status-change"}]},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",key:"/document-hitory-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-hitory-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-hitory-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-hitory-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-hitory-p/item-status-change"}]},{title:"\u041f\u043e\u0438\u0441\u043a",key:"/document-search-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-search-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-search-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-search-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-search-p/item-status-change"}]},{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"/admin-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/admin-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/admin-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/admin-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/admin-p/item-status-change"}]}],disabled:e.disabled})})),Ns=Vs,Cs={exemplar:"forms",table:"forms",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(q||(q=Object(sn.a)(["\n            query forms ($forms: JSON) {\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "]))),one:Object(rn.a)(B||(B=Object(sn.a)(["\n            query forms($forms: JSON) {\n                forms(forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(H||(H=Object(sn.a)(["\n            subscription forms ($forms: JSON){\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},insert:Object(rn.a)(G||(G=Object(sn.a)(["\n        mutation insertForm($forms: JSON) {\n            insertForm(forms: $forms){\n                message\n            }\n        }\n    "]))),update:Object(rn.a)(Q||(Q=Object(sn.a)(["\n        mutation updateForm($forms: JSON) {\n            updateForm(forms: $forms){\n                message\n            }\n        }\n    "]))),delete:Object(rn.a)(W||(W=Object(sn.a)(["\n        mutation deleteForm($forms: JSON) {\n            deleteForm(forms: $forms){\n                message\n            }\n        }\n    "])))},Ss={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(rn.a)(Y||(Y=Object(sn.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(X||(X=Object(sn.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))}},Ts=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)(!1),s=Object(Dt.g)(Object(dn.a)(Cs.delete))(),a=Object(nn.a)(s,2),i=a[0],c=a[1].loading,o=Object(Dt.h)(Cs,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(it.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=Hn([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(Qt.jsx)($n,{data:{dict:m,records:u},loading:l,title:function(e){return Object(Qt.jsx)(Dn,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0444\u043e\u0440\u043c",buttons:[Object(Qt.jsx)(Sn,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",GQL:Cs,InsertForm:Is}),Object(Qt.jsx)(Pn,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",selectedRowKeys:e.selectedRowKeys,GQL:Cs,UpdateForm:Is,update:!0}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Cs.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Is=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({isuseforreport:!1,log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues&&i({id:e.initialValues.forms[0].id,name:e.initialValues.forms[0].name,route:e.initialValues.forms[0].route,settings:JSON.stringify(e.initialValues.forms[0].settings),log_username:a.log_username})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"FormSettingsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b"})}),Object(Qt.jsx)(an.a.Item,{name:"route",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(Qt.jsx)(ds,{disabled:e.disabled,placeholder:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",title:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",query:Ss})}),Object(Qt.jsx)(an.a.Item,{name:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0,children:Object(Qt.jsx)(cn.a,{disabled:e.disabled})})]})})),Es=Ts,Fs=kt.a.Content,Ps=kt.a.Sider,Rs=Object(Rt.withRouter)((function(e){var t=Object(Rt.useLocation)().pathname,n=Object(Dt.j)(),s=e.location.pathname.split("/").slice(1);if("/admin/"===t||"/admin"===t){if(n.username)return Object(Qt.jsx)(Rt.Redirect,{to:"/admin/registration"});if(n.username)return Object(Qt.jsx)(Rt.Redirect,{to:"/admin/positions-page"});if(n.username)return Object(Qt.jsx)(Rt.Redirect,{to:"/admin/document-statuses-page"});if(n.username)return Object(Qt.jsx)(Rt.Redirect,{to:"/admin/document-routes-page"});if(n.username)return Object(Qt.jsx)(Rt.Redirect,{to:"/admin/forms-settings-page"})}return console.log(s,t),Object(Qt.jsxs)(kt.a,{className:"main-layout",children:[Object(Qt.jsx)(en,{title:"\u041c\u043e\u0434\u0443\u043b\u044c \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",user:n}),Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsx)(Ps,{theme:"dark",breakpoint:"lg",collapsedWidth:"0",className:"ant-layout-sider",children:Object(Qt.jsxs)(Gt.a,{theme:"dark",mode:"inline",defaultSelectedKeys:t,style:{height:"100%"},className:"adminSider",children:[Object(Qt.jsx)(bn.a,{style:{position:"absolute",margin:0,top:0}}),Object(Qt.jsx)(Gt.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Qt.jsx)(jn.a,{}),children:Object(Qt.jsx)(Pt.c,{to:"/admin/registration",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/admin/registration"),Object(Qt.jsx)(bn.a,{style:{margin:0}}),Object(Qt.jsx)(Gt.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Qt.jsx)(jn.a,{}),children:Object(Qt.jsx)(Pt.c,{to:"/admin/positions-page",children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})},"/admin/positions-page"),Object(Qt.jsx)(bn.a,{style:{margin:0}}),Object(Qt.jsx)(Gt.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Qt.jsx)(jn.a,{}),children:Object(Qt.jsx)(Pt.c,{to:"/admin/document-statuses-page",children:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-statuses-page"),Object(Qt.jsx)(bn.a,{style:{margin:0}}),Object(Qt.jsx)(Gt.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Qt.jsx)(jn.a,{}),children:Object(Qt.jsx)(Pt.c,{to:"/admin/document-routes-page",children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-routes-page"),Object(Qt.jsx)(bn.a,{style:{margin:0}}),Object(Qt.jsx)(Gt.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(Qt.jsx)(jn.a,{}),children:Object(Qt.jsx)(Pt.c,{to:"/admin/forms-settings-page",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})},"/admin/forms-settings-page"),Object(Qt.jsx)(bn.a,{style:{margin:0}}),Object(Qt.jsx)(bn.a,{style:{position:"absolute",margin:0,bottom:0}})]})}),Object(Qt.jsx)(kt.a,{className:"content-layout",children:Object(Qt.jsx)(Fs,{children:Object(Qt.jsxs)("div",{className:"site-layout-background",style:{minHeight:360},children:[Object(Qt.jsx)(Rt.Route,{path:"/admin/registration",component:Zn}),Object(Qt.jsx)(Rt.Route,{path:"/admin/positions-page",component:Ns}),Object(Qt.jsx)(Rt.Route,{path:"/admin/document-statuses-page",component:ss}),Object(Qt.jsx)(Rt.Route,{path:"/admin/document-routes-page",component:vs}),Object(Qt.jsx)(Rt.Route,{path:"/admin/forms-settings-page",component:Es})]})})})]})]})})),Ds=n(309),Ls=n(481),Us=kt.a.Sider,$s=kt.a.Content,Ms=Object(rn.a)(Z||(Z=Object(sn.a)(["\n  mutation updatePassword(\n    $username: String\n    $password: String\n  ) {\n    updatePassword(username: $username, password: $password) {\n\t  username\n      password\n\t  \n    }\n  }\n"]))),Js=Object(rn.a)(ee||(ee=Object(sn.a)(["\n\tquery application($application: JSON){\n  application(application: $application){\n    platform_version,\n    database_version\n  }\n}"]))),zs=ct.a.memo((function(e){var t=Object(it.useState)(),n=Object(nn.a)(t,2),s=n[0],a=n[1],i=Object(it.useState)(),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("1447"),d=Object(nn.a)(r,2),u=(d[0],d[1],Object(it.useState)()),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=Object(Dt.j)(),_=p.username,O=Object(dn.a)(Ms,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=x.loading,g=x.error,y=Object(Ds.a)(Js),V=(y.loading,y.data);y.refetch;Object(it.useEffect)((function(){v||g&&wt.a.error({message:function(e){return e},duration:0,placement:"topLeft"})}),[g]),Object(it.useEffect)((function(){v||"0"===j&&(wt.a.info({message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d",duration:0,placement:"topLeft"}),b("1"),console.log(j))}),[function(e){return e},j]);return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsx)(en,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",user:p}),Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsxs)(Us,{theme:"dark",style:{color:"#fff"},children:[Object(Qt.jsx)(bn.a,{style:{margin:"0 0 7px 0",top:0}}),Object(Qt.jsx)("h1",{style:{color:"#fff"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(Qt.jsx)(Ls.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b",value:V&&V.application&&null!=V.application[0]?V.application[0].platform_version:null}),Object(Qt.jsx)(Ls.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0411\u0414",value:V&&V.application&&null!=V.application[0]?V.application[0].database_version:null})]}),Object(Qt.jsx)($s,{children:Object(Qt.jsxs)(Bt.b,{direction:"vertical",children:[Object(Qt.jsx)("h1",{children:" \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f "}),Object(Qt.jsx)("h1",{children:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c 2 \u0440\u0430\u0437\u0430 "}),Object(Qt.jsx)(cn.a.Password,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(e){a(e.target.value),console.log(s)},className:"accountInput",iconRender:function(e){return e?Object(Qt.jsx)(on.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(Qt.jsx)(ln.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})}}),Object(Qt.jsx)(cn.a.Password,{onChange:function(e){l(e.target.value),console.log(o)},value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(Qt.jsx)(on.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(Qt.jsx)(ln.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})},className:"accountInput"}),Object(Qt.jsx)(St.a,{onClick:function(){s===o&&s.length>0&&o.length>0?(b("0"),f({variables:{username:_,password:s}})):wt.a.error({message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0438\u043b\u0438 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u044b",duration:0,placement:"topLeft"})},children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})]})})})),Ks=n(489),As=n(506),qs=n(507),Bs=n(513),Hs=n(124),Gs=kt.a.Sider,Qs=Gt.a.SubMenu,Ws=function(e){var t=Object(Hs.useLocation)(),n=Object(Dt.j)(),s=t.pathname,a=Object(it.useState)(!1),i=Object(nn.a)(a,2),c=i[0],o=i[1],l=Object(it.useState)({t1:2,t2:3,t3:3}),r=Object(nn.a)(l,2),d=r[0],u=r[1],m=Object(it.useState)({}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=Object(rn.a)(te||(te=Object(sn.a)(["\n\tquery document_logs($document_logs: JSON){\n        document_logs(document_logs: $document_logs){\n            id\n            document_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),O=Object(rn.a)(ne||(ne=Object(sn.a)(["\n        subscription document_logs ($document_logs: JSON){\n            document_logs(document_logs: $document_logs){\n                id\n                document_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),h=Object(rn.a)(se||(se=Object(sn.a)(["\n\tquery document_tasks_logs($document_tasks_logs: JSON){\n        document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n            id\n            task_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),f=Object(rn.a)(ae||(ae=Object(sn.a)(["\n        subscription document_tasks_logs ($document_tasks_logs: JSON){\n            document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n                id\n                task_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),x=Object(Ds.a)(_,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){var t={};t.revised=e.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,t.approved=e.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,t.rejected=e.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,t.onaproval=e.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(t)}}),v=(x.loading,x.data,x.refetch,Object(Bs.a)(O,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data,n={};n.revised=t.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,n.approved=t.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,n.rejected=t.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,n.onaproval=t.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(n),(n.revised>0||n.approved>0||n.rejected>0||n.onaproval>0)&&Object(Dt.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));v.data,v.loading;Object(it.useEffect)((function(){e.countF(u),console.log("setCon applied")}),[]);var g=Object(Ds.a)(h,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){console.log("tasks query",e),p(e.document_tasks_logs.length)}}),y=(g.loading,g.data,g.refetch,Object(Bs.a)(f,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data;p(t.document_tasks_logs.length),console.log("tasks sub",t),b>0&&Object(Dt.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));y.data,y.loading;Object(it.useEffect)((function(){switch(s){case"/document-control/orders":e.setHeaderTitle("\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/reviseduser":e.setHeaderTitle("\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443");break;case"/document-control/approveduser":e.setHeaderTitle("\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435");break;case"/document-control/rejecteduser":e.setHeaderTitle("\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/on-approval":e.setHeaderTitle("\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435");break;case"/document-control/on-approval-list":e.setHeaderTitle("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/approved":e.setHeaderTitle("\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b");break;case"/document-control/rejected":e.setHeaderTitle("\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/for-execution-inbox":e.setHeaderTitle("\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435")}}),[s]);return Object(Qt.jsx)(Gs,{theme:"dark",collapsible:!0,collapsed:c,onCollapse:function(e){console.log(e),o(e)},children:Object(Qt.jsxs)(Gt.a,{defaultSelectedKeys:s,className:"siderMenu",mode:"inline",defaultOpenKeys:["User","onApproval","Admin"],children:[Object(Qt.jsxs)(Qs,{icon:Object(Qt.jsx)(Ot.a,{}),title:"\u041c\u043e\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",children:[n.documentControl.insert?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsx)(Pt.b,{to:"/document-control/orders",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/orders"):null,n.documentControl.revisedUser.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsxs)(Pt.c,{to:"/document-control/reviseduser",children:["\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 ",Object(Qt.jsx)("sup",{children:Object(Qt.jsx)(Ks.a,{count:d.revised})})]})},"/document-control/reviseduser"):null,n.documentControl.approvedUser.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsxs)(Pt.c,{to:"/document-control/approveduser",children:["\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 ",Object(Qt.jsx)("sup",{children:Object(Qt.jsx)(Ks.a,{count:d.approved})})]})},"/document-control/approveduser"):null,n.documentControl.rejectedUser.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsxs)(Pt.b,{to:"/document-control/rejecteduser",children:["\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435 ",Object(Qt.jsx)("sup",{children:Object(Qt.jsx)(Ks.a,{count:d.rejected})})]})},"/document-control/rejecteduser"):null]},"User"),n.documentControl.onApproval.select||n.documentControl.onApprovalList.select?Object(Qt.jsxs)(Qs,{icon:Object(Qt.jsx)(As.a,{}),title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:[n.documentControl.onApproval.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsxs)(Pt.b,{to:"/document-control/on-approval",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(Qt.jsx)("sup",{children:Object(Qt.jsx)(Ks.a,{count:d.onaproval})})]})},"/document-control/on-approval"):null,n.documentControl.onApprovalList.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsx)(Pt.b,{to:"/document-control/on-approval-list",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/on-approval-list"):null]},"onApproval"):null,n.documentControl.forExecutionInbox.select?Object(Qt.jsx)(Qs,{icon:Object(Qt.jsx)(As.a,{}),title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",children:n.documentControl.forExecutionInbox.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsxs)(Pt.b,{to:"/document-control/for-execution-inbox",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(Qt.jsx)("sup",{children:Object(Qt.jsx)(Ks.a,{count:b})})]})},"/document-control/for-execution-inbox"):null},"forExecution"):null,n.documentControl.approved.select||n.documentControl.rejected.select?Object(Qt.jsxs)(Qs,{icon:Object(Qt.jsx)(qs.a,{}),title:"\u0421\u043f\u0438\u0441\u043e\u043a (\u0410\u0434\u043c\u0438\u043d)",children:[n.documentControl.approved.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsx)(Pt.c,{to:"/document-control/approved",children:"\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"})},"/document-control/approved"):null,n.documentControl.rejected.select?Object(Qt.jsx)(Gt.a.Item,{children:Object(Qt.jsx)(Pt.b,{to:"/document-control/rejected",children:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435"})},"/document-control/rejected"):null]},"Admin"):null]})})},Ys=n(6),Xs=n.n(Ys),Zs=n(13),ea=n(490),ta=["GQL","GQL2","GQL3","GQL4","GQL5","Form1","Form2","Form3","Form4","Form5"],na={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(ie||(ie=Object(sn.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "]))),one:Object(rn.a)(ce||(ce=Object(sn.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(oe||(oe=Object(sn.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))}},sa={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(le||(le=Object(sn.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(rn.a)(re||(re=Object(sn.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(de||(de=Object(sn.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},aa=ea.a.Step,ia=ct.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.Form1,o=e.Form2,l=e.Form3,r=e.Form4,d=e.Form5,u=Object(Lt.a)(e,ta),m=Object(it.useState)(!1),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=Object(it.useState)(!1),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=Object(it.useState)(!1),v=Object(nn.a)(x,2),g=v[0],y=v[1],V=Object(it.useState)(!1),k=Object(nn.a)(V,2),w=k[0],N=k[1],C=Object(it.useState)(!1),S=Object(nn.a)(C,2),T=S[0],I=S[1],E=Object(it.useState)(),F=Object(nn.a)(E,2),P=F[0],R=F[1],D=Object(it.useState)({}),L=Object(nn.a)(D,2),U=L[0],$=L[1],M=Object(Dt.j)(),J=an.a.useForm(),z=Object(nn.a)(J,1)[0],K=Object(it.useState)(!1),A=Object(nn.a)(K,2),q=A[0],B=A[1];Object(it.useEffect)((function(){q&&null!=U.route_id&&(z.resetFields(),$({route_id:null}),ee([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]))}),[q]);var H=function(){p(!1),f(!1),y(!1),N(!1),I(!1)},G=Object(Ds.a)(na.select.all,{variables:{document_routes:{global:{id:"=".concat(U.route_id)}}}}),Q=(G.loading,G.data),W=G.refetch;Object(it.useEffect)((function(){null!=U.route_id&&(W(),console.log("stateEffect",Q,U))}),[U]);var Y=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),X=Object(nn.a)(Y,2),Z=X[0],ee=X[1];Object(it.useEffect)((function(){Q&&null!=Q[Object.keys(Q)[0]]&&U.route_id>0&&(console.log("dataRoutes",Q),ne.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ae.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ce.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),le.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),de.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ee(void 0!=Q.document_routes[0].routes?Q.document_routes[0].routes.map((function(e){return{positionName:e.positionName}})):[]),R(Q.document_routes[0].routes.filter((function(e){return 1==e.step}))))}),[Q]);var te=an.a.useForm(),ne=Object(nn.a)(te,1)[0],se=an.a.useForm(),ae=Object(nn.a)(se,1)[0],ie=an.a.useForm(),ce=Object(nn.a)(ie,1)[0],oe=an.a.useForm(),le=Object(nn.a)(oe,1)[0],re=an.a.useForm(),de=Object(nn.a)(re,1)[0],ue=Object(Dt.g)(Object(dn.a)(t.insert),(function(){p(!1),ne.resetFields()}))(),me=Object(nn.a)(ue,2),je=me[0],be=me[1].loading,pe=Object(Dt.g)(Object(dn.a)(n.insert),(function(){f(!1),ae.resetFields()}))(),_e=Object(nn.a)(pe,2),Oe=_e[0],he=(_e[1].loading2,Object(Dt.g)(Object(dn.a)(s.insert),(function(){y(!1),ce.resetFields()}))()),fe=Object(nn.a)(he,2),xe=fe[0],ve=(fe[1].loading3,Object(Dt.g)(Object(dn.a)(a.insert),(function(){N(!1),le.resetFields()}))()),ge=Object(nn.a)(ve,2),ye=ge[0],Ve=(ge[1].loading4,Object(Dt.g)(Object(dn.a)(i.insert),(function(){I(!1),de.resetFields()}))()),ke=Object(nn.a)(Ve,2),we=ke[0],Ne=(ke[1].loading5,function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Zs.a)(Xs.a.mark((function n(s){return Xs.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(it.useRef)("displayNone"),Se=Object(it.useRef)();return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){B(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",onOk:function(){null!=U.route_id?(10==U.route_id&&(B(!1),p(!0)),24==U.route_id&&(B(!1),f(!0)),26==U.route_id&&(B(!1),y(!0)),27==U.route_id&&(B(!1),N(!0)),29==U.route_id&&(z.submit(),B(!1),I(!0))):z.setFields([{name:"route_id",errors:["\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442"]}])},visible:q,onCancel:function(){B(!1)},children:Object(Qt.jsxs)(an.a,{form:z,name:"Route_select",onFinish:function(e){Se.current=e.routes,console.log("ROUTE 5",e)},onValuesChange:function(e,t){$(Object.assign({},U,Object(at.a)({},t))),console.log("state",U)},children:[Object(Qt.jsx)(an.a.Item,{name:"route_id",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442!",whitespace:!0}],children:Object(Qt.jsx)(ds,{placeholder:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",query:na})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"font-form-header marginTop marginBottom",children:Object(Qt.jsx)("label",{children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442:"})}),Object(Qt.jsx)(ea.a,{size:"small",current:0,direction:"vertical",children:Z.map((function(e){if(4!=Z.length)return Ce.current="displayNone",Object(Qt.jsx)(aa,{title:M.admin?e.positionName+" - "+M.username:e.positionName});Ce.current="displayBlock"}))}),Object(Qt.jsxs)("div",{className:Ce.current,children:[Object(Qt.jsx)("span",{className:"marginBottom displayBlock",children:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435"}),Object(Qt.jsx)(an.a.List,{name:"routes",children:function(e,t){var n=t.add,s=t.remove;return Object(Qt.jsxs)(Qt.Fragment,{children:[e.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:19,children:Object(Qt.jsxs)("span",{className:"displayFlex",children:[Object(Qt.jsxs)("p",{className:"anotherFormSelectCount",children:[e.name+1,". "]}),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},e),{},{name:[e.name,"positionId"],fieldKey:[e.fieldKey,"positionId"],className:"anotherForm",children:Object(Qt.jsx)(ds,{disabled:u.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:sa,onChange:function(t,n){$((function(t){var s=Object.assign({},t);return console.log("field.fieldKey",e.fieldKey),s.routes[e.name].positionName=n.children,s.routes[e.name].step=e.name+1,s.routes[e.name].statuses=["5","4","2","7"],s}))}})}))]})}),Object(Qt.jsxs)(Nt.a,{span:5,children:[Object(Qt.jsx)("i",{style:{marginLeft:"20px"},children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(Qt.jsx)(as.a,{onClick:function(){s(e.name)},disabled:u.disabled,style:{marginLeft:5}})]}),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},e),{},{name:[e.name,"step"],fieldKey:[e.fieldKey,"step"],hidden:!0})),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},e),{},{name:[e.name,"positionName"],fieldKey:[e.fieldKey,"positionName"],hidden:!0})),Object(Qt.jsx)(an.a.Item,Object(at.a)(Object(at.a)({},e),{},{name:[e.name,"statuses"],fieldKey:[e.fieldKey,"statuses"],hidden:!0}))]})})})),Object(Qt.jsx)(St.a,{type:"dashed",onClick:function(){n()},disabled:u.disabled,block:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})]})}})]})]})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:b,onOk:function(){ne.submit()},onCancel:H,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Qt.jsx)(c,{form:ne,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,Ne(n.files.fileList).then((function(e){i=e}));case 5:n.docs=i||[],n.user_id=M.id,n.username=M.username,n.position=M.position_names[0],n.is_read=!1,n.fio=M.fio,n.positionId=P[0].positionId,console.log("TEST",a),a[t.exemplar]=n,je({variables:a});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:h,onOk:function(){ae.submit()},onCancel:H,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Qt.jsx)(o,{form2:ae,onFinish2:function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var s,a;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},a=[],e.next=4,Ne(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",s),s[n.exemplar]=t,Oe({variables:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:g,onOk:function(){ce.submit()},onCancel:H,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Qt.jsx)(l,{form3:ce,onFinish3:function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,a;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=[],e.next=4,Ne(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[s.exemplar]=t,xe({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:w,onOk:function(){le.submit()},onCancel:H,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Qt.jsx)(r,{form4:le,onFinish4:function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,Ne(t.files.fileList).then((function(e){s=e}));case 4:t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[a.exemplar]=t,ye({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:T,onOk:function(){de.submit()},onCancel:H,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(Qt.jsx)(d,{form5:de,onFinish5:function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,Ne(t.files.fileList).then((function(e){s=e}));case 4:t.route_data=Se.current,t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[i.exemplar]=t,we({variables:n});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),ca=ia,oa=n(297),la=(n(232),n(286),["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"]),ra=Object(rn.a)(ue||(ue=Object(sn.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),da=Object(rn.a)(me||(me=Object(sn.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),ua=Object(rn.a)(je||(je=Object(sn.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),ma=Object(rn.a)(be||(be=Object(sn.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),ja=Object(rn.a)(pe||(pe=Object(sn.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),ba=Object(rn.a)(_e||(_e=Object(sn.a)(["\n        query document_tasks($document_tasks: JSON){\n            document_tasks(document_tasks:$document_tasks){\n                id\n                document_id\n                status\n                is_cancelled\n                note\n                deadline\n                date_created\n                user_id_created\n                fio_created\n                user_id_receiver\n                fio_receiver\n                route_id\n                document_options\n                document_tasks_files{\n                    id\n                    filename\n                    data_file\n                    task_id\n                }\n                document_tasks_logs{\n                    id\n                    task_id\n                    is_read\n                    type\n                    user_id\n                }\n                task_statuses{\n                    id\n                    name\n                }\n            }\n        }\n"]))),pa=ct.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Lt.a)(e,la),m=an.a.useForm(),j=Object(nn.a)(m,1)[0],b=an.a.useForm(),p=Object(nn.a)(b,1)[0],_=an.a.useForm(),O=Object(nn.a)(_,1)[0],h=an.a.useForm(),f=Object(nn.a)(h,1)[0],x=an.a.useForm(),v=Object(nn.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(nn.a)(g,2),V=y[0],k=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],N=Object(nn.a)(w,2),C=N[0],S=N[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(nn.a)(T,2),E=I[0],F=I[1],P=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(nn.a)(P,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(nn.a)(U,2),M=$[0],J=$[1],z=Object(it.useState)(!0),K=Object(nn.a)(z,2),A=K[0],q=K[1],B=Object(Dt.j)(),H=function(){k(!1),S(!1),F(!1),L(!1),J(!1),q(!0)},G=function(){q(!1)};wn.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Dt.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Dt.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Dt.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Dt.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Dt.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(it.useEffect)((function(){te&&j.resetFields()}),[te]),Object(it.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(it.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(it.useEffect)((function(){de&&f.resetFields()}),[de]),Object(it.useEffect)((function(){je&&v.resetFields()}),[je]),Object(it.useEffect)((function(){V&&ne(Q)}),[V]),Object(it.useEffect)((function(){C&&ie(W)}),[C]),Object(it.useEffect)((function(){E&&le(Y)}),[E]),Object(it.useEffect)((function(){D&&ue(X)}),[D]),Object(it.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Dt.g)(Object(dn.a)(t.update),(function(){k(!1),S(!1),F(!1),L(!1),J(!1),q(!0)}))(),_e=Object(nn.a)(pe,2),Oe=_e[0],he=(_e[1].loading,{variables:{document_tasks:{global:{document_id:"=".concat(u.selectedRowKeys[0]),user_id_created:"=".concat(null===B||void 0===B?void 0:B.id)}}}}),fe=Object(Ds.a)(ba,he),xe=(fe.loading,fe.data),ve=fe.refetch;Object(it.useEffect)((function(){V&&ve(he)}),[null===u||void 0===u?void 0:u.selectedRowKeys[0]]);var ge=xe&&null!=xe[Object.keys(xe)[0]]?xe[Object.keys(xe)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id?e.document_id:"",status:e.status?e.status:"",is_cancelled:e.is_cancelled?e.is_cancelled:"",note:e.note?e.note:"",deadline:e.deadline?e.deadline:"",date_created:e.date_created?e.date_created:"",user_id_created:e.user_id_created?e.user_id_created:"",fio_created:e.fio_created?e.fio_created:"",user_id_receiver:e.user_id_receiver?e.user_id_receiver:"",fio_receiver:e.fio_receiver?e.fio_receiver:"",route_id:e.route_id?e.route_id:"",task_statuses:e.task_statuses.name?e.task_statuses.name:"",document_tasks_files:0!=e.document_tasks_files.length?e.document_tasks_files:[],document_tasks_logs:e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==B.id}))]}})):[],ye=Object(it.useState)(),Ve=Object(nn.a)(ye,2),ke=Ve[0],we=Ve[1],Ne=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},Ce=Object(Ds.a)(ja,Ne),Se=(Ce.loading,Ce.data),Te=Ce.refetch;Object(it.useEffect)((function(){V&&Te(Ne)}),[V]);var Ie=Se&&null!=Se[Object.keys(Se)[0]]?Se[Object.keys(Se)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ee=Object(dn.a)(ra,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Fe=Object(nn.a)(Ee,2),Pe=Fe[0],Re=Fe[1],De=(Re.loading,Re.error,function(e){Pe({variables:{comment:{user_id:B.id,username:B.username,fio:B.fio,document_id:u.selectedRowKeys[0],position:B.position_names[0],comment:ke}}}),Te(Ne),e.resetFields(["comments"])}),Le=function(e,t){e.target.value.length>0&&we(e.target.value)},Ue=Object(it.useState)(),$e=Object(nn.a)(Ue,2),Me=$e[0],Je=$e[1],ze=Object(it.useState)(),Ke=Object(nn.a)(ze,2),Ae=Ke[0],qe=Ke[1],Be=Object(it.useState)(),He=Object(nn.a)(Be,2),Ge=He[0],Qe=He[1],We=Object(dn.a)(da,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ye=Object(nn.a)(We,2),Xe=Ye[0],Ze=Ye[1],et=(Ze.loading,Ze.error,Object(dn.a)(ua,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),tt=Object(nn.a)(et,2),nt=(tt[0],tt[1]),st=(nt.loading,nt.error,function(){oa.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),at=function(){qe(7)},ct=function(){qe(2)},ot=function(e){console.log("CLIIIICK",e),dt({variables:{document_files:{id:e.id}}})},lt=Object(dn.a)(ma,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),rt=Object(nn.a)(lt,2),dt=rt[0],ut=rt[1],mt=(ut.loading,ut.error,Object(it.useRef)());return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){k(!0)},children:[Object(Qt.jsx)(Tn.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Qt.jsx)(wn.a,{title:u.title,visible:V,centered:!0,width:950,onOk:function(){j.submit()},onCancel:function(){k(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)("div",{id:"testId",ref:mt,children:Object(Qt.jsx)(c,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},handleStatusCancelled:ct,HandleDeleteFile:ot,modalCancelHandler:H,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:A})})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(o,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ot,handleStatusCancelled:ct,modalCancelHandler:H,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){F(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(l,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ot,handleStatusCancelled:ct,modalCancelHandler:H,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(r,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ot,handleStatusCancelled:ct,modalCancelHandler:H,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(d,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&Xe({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&Je(e)},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ot,handleStatusCancelled:ct,modalCancelHandler:H,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:A})})]})})),_a=ct.a.memo((function(e){var t=Object(it.useState)([]),n=Object(nn.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(it.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id])},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),Oa=n(477),ha=n(508),fa=Oa.a.Dragger,xa=function(e){return Object(Qt.jsxs)(fa,Object(at.a)(Object(at.a)({},e),{},{beforeUpload:function(e,t){return console.log("beforeUpload file",e),console.log("beforeUpload fileList",t),e.size>55e5&&oa.b.error({key:"msgKeyFileError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u0440\u0430\u0437\u043c\u0435\u0440 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439."),duration:30,className:"custom-class",style:{marginTop:"20vh"},onClick:function(){return oa.b.destroy("msgKeyFileError")}}),"image/png"!==e.type&&"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"application/msword"!==e.type&&"application/vnd.ms-excel"!==e.type&&oa.b.error({key:"msgKeyFileTypeError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430."),duration:30,onClick:function(){return oa.b.destroy("msgKeyFileTypeError")}}),e.size<55e5&&"image/png"===e.type||e.size<55e5&&"image/jpg"===e.type||e.size<55e5&&"image/jpeg"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||e.size<55e5&&"application/pdf"===e.type||e.size<55e5&&"application/msword"===e.type||e.size<55e5&&"application/vnd.ms-excel"===e.type||Oa.a.LIST_IGNORE},children:[Object(Qt.jsx)("p",{className:"ant-upload-drag-icon",children:Object(Qt.jsx)(ha.a,{})}),Object(Qt.jsx)("p",{className:"ant-upload-text",children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043c\u044b\u0448\u044c\u044e \u0442\u0443\u0442 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043d\u0430 \u044d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 "}),Object(Qt.jsx)("p",{className:"ant-upload-hint",children:"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0437\u0430 \u0440\u0430\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432"})]}))},va=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues&&i({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:a.log_username})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ga=n(214),ya=ct.a.memo((function(e){var t=Object(Dt.j)(),n=/^\d+$/,s=Object(it.useState)({log_username:t.username}),a=Object(nn.a)(s,2),i=a[0],c=a[1];Object(it.useEffect)((function(){e.form2.setFieldsValue(i)}),[i]),Object(it.useEffect)((function(){e.initialValues&&c({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_agreement_list[0].price,subject:e.initialValues.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:i.log_username})}),[e.initialValues]);var o=Object(it.useState)(1),l=Object(nn.a)(o,2),r=l[0],d=l[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(i),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(at.a)({},t)))},children:[Object(Qt.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0420\u0415\u0410\u041b\u0418\u0417\u0410\u0426\u0418\u042e \u0413\u041e\u0422\u041e\u0412\u041e\u0419 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){d(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:r})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Va=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form3.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues3&&i({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_id:e.initialValues3.documents[0].status_id,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,files:e.initialValues3.documents[0].files,log_username:a.log_username})}),[e.initialValues3]);var c=Object(it.useState)(1),o=Object(nn.a)(c,2),l=o[0],r=o[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ka=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form4.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues4&&i({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_id:e.initialValues4.documents[0].status_id,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,files:e.initialValues4.documents[0].files,log_username:a.log_username})}),[e.initialValues4]);var c=Object(it.useState)(1),o=Object(nn.a)(c,2),l=o[0],r=o[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u0412\u041d\u0423\u0422\u0420\u0418\u0417\u0410\u0412\u041e\u0414\u0421\u041a\u0418\u0425 \u041d\u0423\u0416\u0414 \u0418 \u041a\u0410\u041f\u0418\u0422\u0410\u041b\u042c\u041d\u042b\u0425 \u0417\u0410\u0422\u0420\u0410\u0422"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),wa=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(it.useState)({log_username:t.username}),s=Object(nn.a)(n,2),a=s[0],i=s[1];Object(it.useEffect)((function(){e.form5.setFieldsValue(a)}),[a]),Object(it.useEffect)((function(){e.initialValues5&&i({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,files:e.initialValues5.documents[0].files,log_username:a.log_username})}),[e.initialValues5]);return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Na={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Oe||(Oe=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                reason\n                date_modified\n                status_id\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(he||(he=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    reason\n                    date_created\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(fe||(fe=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(xe||(xe=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(ve||(ve=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(ge||(ge=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Ca={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(ye||(ye=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Ve||(Ve=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(ke||(ke=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(we||(we=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(Ne||(Ne=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Ce||(Ce=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Sa={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Se||(Se=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Te||(Te=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Ie||(Ie=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Ee||(Ee=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(Fe||(Fe=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Pe||(Pe=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Ta={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Re||(Re=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(De||(De=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Le||(Le=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Ue||(Ue=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)($e||($e=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Me||(Me=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Ia={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Je||(Je=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(ze||(ze=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Ke||(Ke=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Ae||(Ae=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(qe||(qe=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Be||(Be=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Ea=n(480),Fa=ct.a.memo((function(e){var t,n,s,a,i={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(He||(He=Object(sn.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(rn.a)(Ge||(Ge=Object(sn.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(Qe||(Qe=Object(sn.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},c=Object(rn.a)(We||(We=Object(sn.a)(["\n       mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n"]))),o=Object(Dt.h)(i,"all")(),l=(o.loading,o.data),r=o.refetch;Object(it.useEffect)((function(){r()}),[]);var d=Object(dn.a)(c,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(nn.a)(d,2),m=(u[0],u[1]),j=(m.loading,m.error,Object(it.useState)({})),b=Object(nn.a)(j,2),p=b[0],_=b[1];console.log("propsS",e);var O=an.a.useForm(),h=Object(nn.a)(O,1)[0];return Object(it.useEffect)((function(){h.setFieldsValue(p)}),[p]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(wn.a,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",visible:e.visible,centered:!0,width:450,onOk:function(){},onCancel:function(){e.setVisible(!1)},maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(St.a,{onClick:function(){e.setVisible(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),Object(Qt.jsx)(xn.a,{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",placement:"topLeft",disabled:!p.replacement,onConfirm:Object(Zs.a)(Xs.a.mark((function t(){var n;return Xs.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.submit();case 2:n=l.positions.filter((function(e){return e.id==p.replacement}))[0],console.log("form name",n,p),e.setRoutesList((function(t){var s=Object.assign({},t),a=s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId);return console.log("tmpIndex",n.id,a),-1===s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId)&&s[0].substitutes.push(n.id),s[0].positionName=n.name,s[0].positionId=n.id,console.log("step old",s),s})),e.form.submit(),console.log("test"),e.setVisible(!1);case 8:case"end":return t.stop()}}),t)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:!p.replacement,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsx)(an.a,{form:h,name:"ReplacementSelectForm",onFinish:function(e){console.log(e)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(at.a)({},t)))},children:Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0435\u0433\u043e",labelAlign:"left",name:"replacement",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{children:[Object(Qt.jsx)(os.a.Option,{value:null},null),l&&(null===(t=l.positions)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e?void 0:e.routeData)&&(null===e||void 0===e||null===(n=e.stepCount)||void 0===n?void 0:n.step)&&null!=l[Object.keys(l)[0]]&&(null===e||void 0===e||null===(s=e.routeData[e.stepCount.step-1])||void 0===s||null===(a=s.substitutes)||void 0===a?void 0:a.length)>0?e.routeData[e.stepCount.step-1].substitutes.map((function(t,n){var s,a;if(t!=(null===(s=e.routeData.filter((function(e){return e.id==t}))[0])||void 0===s?void 0:s.positionId))return Object(Qt.jsx)(os.a.Option,{value:t,children:null===(a=l.positions.filter((function(e){return console.log("map",t,n,l.positions.filter((function(e){return e.id==t}))),e.id==t}))[0])||void 0===a?void 0:a.name},t)})):null]}))})})})})})),Pa=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=ea.a.Step,m=Object(it.useState)(!1),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=Object(it.useState)({step:"0"}),v=Object(nn.a)(x,2),g=v[0],y=v[1],V=Object(it.useState)({log_username:r.username}),k=Object(nn.a)(V,2),w=k[0],N=k[1],C=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(w)}),[w]),Object(it.useEffect)((function(){e.initialValues&&(N({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,log_username:w.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var S=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(w),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){N(Object.assign({},w,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:w.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:w.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:w.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:w.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){C(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(Fa,{visible:b,setVisible:p,setRoutesList:f,routesList:h,stepCount:g,routeData:null===e||void 0===e||null===(s=e.initialValues)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues.documents[0].step==n+1&&p(!0)},subTitle:n==g.step-1&&(null===w||void 0===w||null===(s=w.signatures)||void 0===s?void 0:s.length)>0||1==g.step?function(){var e;if(1==g.step&&0==n){var t=Object(Dt.f)(new Date(w.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===w||void 0===w||null===(e=w.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Dt.f)(new Date(w.signatures[w.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(Tt.a,{children:Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ra=Pa,Da=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Dt.j)(),j=(Ea.a.Title,Ea.a.Link),b=ea.a.Step,p=Object(it.useState)(!1),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(nn.a)(f,2),v=x[0],g=x[1],y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=V[0],w=V[1],N=Object(it.useState)({log_username:m.username}),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(S)}),[S]),Object(it.useEffect)((function(){e.initialValues2&&(console.log("props.initialValues 22222",e.initialValues2),T({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 2",e.initialValues2),w({step:e.initialValues2.documents[0].step}),g(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),P=Object(nn.a)(F,2);P[0],P[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(j,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(Fa,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:k,routeData:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues2.documents[0].step==n+1&&h(!0)},subTitle:n==k.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==k.step?function(){var e;if(1==k.step&&0==n){var t=Object(Dt.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Dt.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues2)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),La=Da,Ua=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Dt.j)(),j=(Ea.a.Title,Ea.a.Link),b=ea.a.Step,p=Object(it.useState)(!1),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(nn.a)(f,2),v=x[0],g=x[1],y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=V[0],w=V[1],N=Object(it.useState)({log_username:m.username}),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(S)}),[S]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(console.log("props.initialValues 33333",e.initialValues3),T({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 3",e.initialValues3),w({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),P=Object(nn.a)(F,2);P[0],P[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(j,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(Fa,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:k,routeData:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues3.documents[0].step==n+1&&h(!0)},subTitle:n==k.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==k.step?function(){var e;if(1==k.step&&0==n){var t=Object(Dt.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Dt.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),$a=Ua,Ma=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Dt.j)(),j=(Ea.a.Title,Ea.a.Link),b=ea.a.Step,p=Object(it.useState)(!1),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(nn.a)(f,2),v=x[0],g=x[1],y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=V[0],w=V[1],N=Object(it.useState)({log_username:m.username}),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(S)}),[S]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(T({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:S.log_username}),console.log("props.initialValues4",e.initialValues4),w({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),P=Object(nn.a)(F,2);P[0],P[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:S.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(j,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){I(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(Fa,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:k,routeData:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues4.documents[0].step==n+1&&h(!0)},subTitle:n==k.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==k.step?function(){var e;if(1==k.step&&0==n){var t=Object(Dt.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Dt.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ja=Ma,za=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=ea.a.Step,m=Object(it.useRef)("vertical");Object(it.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(it.useState)(!1),b=Object(nn.a)(j,2),p=b[0],_=b[1],O=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)({step:"0"}),g=Object(nn.a)(v,2),y=g[0],V=g[1],k=Object(it.useState)({log_username:r.username}),w=Object(nn.a)(k,2),N=w[0],C=w[1],S=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(N)}),[N]),Object(it.useEffect)((function(){e.initialValues5&&(C({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:N.log_username}),V({step:e.initialValues5.documents[0].step}),x(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(N),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){C(Object.assign({},N,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:N.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:N.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:N.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){S(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(Fa,{visible:p,setVisible:_,setRoutesList:x,routesList:f,stepCount:y,routeData:null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:y.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues5.documents[0].step==n+1&&_(!0)},subTitle:n==y.step-1&&(null===N||void 0===N||null===(s=N.signatures)||void 0===s?void 0:s.length)>0||1==y.step?function(){var e;if(1==y.step&&0==n){var t=Object(Dt.f)(new Date(N.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===N||void 0===N||null===(e=N.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Dt.f)(new Date(N.signatures[N.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ka=za,Aa=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.positions.toString(),s=t.id,a={documents:{global:{user_id:"=".concat(s),ORDER_BY:["date_created desc"]}}};Na.options.all.variables=a,Ca.options.all.variables=a,Sa.options.all.variables=a,Ta.options.all.variables=a,Ia.options.all.variables=a,t.admin&&(a={});var i=Object(it.useState)(!1),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(Dt.g)(Object(dn.a)(Na.delete))(),u=Object(nn.a)(d,2),m=u[0],j=u[1].loading,b=Object(Dt.h)(Na,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(it.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var t,s,a,i;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(t=e.document_statuses)||void 0===t?void 0:t.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:""}})):[],f=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(_a,{data:{dict:f,records:h},loading:p,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(ca,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",GQL:Na,Form1:va,GQL2:Ca,Form2:ya,GQL3:Sa,Form3:Va,GQL4:Ta,Form4:ka,GQL5:Ia,Form5:wa,width:750}),Object(Qt.jsx)(pa,{visibleModalUpdate:i,GQL:Na,UpdateForm:Ra,visibleModalUpdate2:c,GQL2:Ca,UpdateForm2:La,visibleModalUpdate3:o,GQL3:Sa,UpdateForm3:$a,visibleModalUpdate4:l,GQL4:Ta,UpdateForm4:Ja,visibleModalUpdate5:r,GQL5:Ia,UpdateForm5:Ka,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Na.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r})})})),qa=["GQL"],Ba=ct.a.memo((function(e){var t=e.GQL,n=Object(Lt.a)(e,qa),s=(Object(Hs.useLocation)().pathname,Object(it.useState)([])),a=Object(nn.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(dn.a)(t.setIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(nn.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(it.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",loading:n.loading,style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,bordered:n.bordered,onRow:function(e,t){return{onClick:function(t){c([e.key,e.route_id])},onDoubleClick:function(t){var s;0==(null===e||void 0===e||null===(s=e.document_logs)||void 0===s?void 0:s.is_read)?(d({variables:{document:{id:e.document_logs.id,is_read:!0}}}),10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0)):(10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),Ha=["reasonText","dataProps","setState","user"],Ga=ct.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Lt.a)(e,Ha),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(nn.a)(n,2),a=s[0];s[1];return Object(Qt.jsx)(xn.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove(),t.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Qa=["item","reasonText","dataProps","setState","user"],Wa=ct.a.memo((function(e){var t=e.item,n=(e.reasonText,e.dataProps),s=e.setState,a=(e.user,Object(Lt.a)(e,Qa),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b?")),i=Object(nn.a)(a,2),c=i[0];i[1];return Object(Qt.jsx)(xn.a,{title:c,placement:"topLeft",disabled:n.disabled,onConfirm:function(){n.HandleDeleteFile(t),s((function(e){console.log("item",t);var n=Object.assign({},e),s=n.files.findIndex((function(e){return e.id==t.id}));return n.files.splice(s,1),console.log("OOOLLLLDDDDD+++++++++",s,n.files),n})),console.log("ITEM",t)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",icon:Object(Qt.jsx)(hn.a,{})})})})),Ya=(Ea.a.Title,Ea.a.Link),Xa=ea.a.Step,Za=/^\d+$/,ei=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useState)({log_username:l.username}),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=Object(it.useState)({step:"0"}),f=Object(nn.a)(h,2),x=f[0],v=f[1];Object(it.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),v({step:e.initialValues.documents[0].step}),O(e.initialValues.documents[0].route_data))}),[e.initialValues]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Za,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(Ya,{children:Object(Qt.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})}),Object(Qt.jsx)(Wa,{item:t,dataProps:e,setState:m,user:l}),Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Qt.jsx)(Xa,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Ga,{dataProps:e,setState:m,user:l})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ti=ei,ni=["reasonText","dataProps","setState","user"],si=ct.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Lt.a)(e,ni),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(nn.a)(n,2),a=s[0];s[1];return Object(Qt.jsx)(xn.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove2(),t.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ai=(Ea.a.Title,Ea.a.Link),ii=ea.a.Step,ci=/^\d+$/,oi=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Dt.j)(),m=Object(it.useState)({log_username:u.username}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)({step:"0"}),g=Object(nn.a)(v,2),y=g[0],V=g[1];Object(it.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),V({step:e.initialValues2.documents[0].step}),x(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(nn.a)(w,2),C=N[0],S=N[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){S(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:C})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:ci,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(t){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(ai,{children:Object(Qt.jsx)("a",{"data-fileid":t.id,onClick:k,children:t.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){_(t)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})}),Object(Qt.jsx)(Wa,{item:t,dataProps:e,setState:p,user:u}),Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Qt.jsx)(ii,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(si,{dataProps:e,setState:p,user:u}),Object(Qt.jsx)(bn.a,{type:"vertical"})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),li=oi,ri=["reasonText","dataProps","setState","user"],di=ct.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Lt.a)(e,ri),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(nn.a)(n,2),a=s[0];s[1];return Object(Qt.jsx)(xn.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove3(),t.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ui=(Ea.a.Title,Ea.a.Link),mi=ea.a.Step,ji=/^\d+$/,bi=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useState)({log_username:l.username}),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(u)}),[u]);var b=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=Object(it.useState)({step:"0"}),f=Object(nn.a)(h,2),x=f[0],v=f[1];Object(it.useEffect)((function(){e.initialValues3&&(m({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:u.log_username}),v({step:e.initialValues3.documents[0].step}),O(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(it.useState)(1),V=Object(nn.a)(y,2),k=V[0],w=V[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues3)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues3)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:k})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:ji,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues3)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(ui,{children:Object(Qt.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})}),Object(Qt.jsx)(Wa,{item:t,dataProps:e,setState:m,user:l}),Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Qt.jsx)(mi,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(di,{dataProps:e,setState:m,user:l})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),pi=bi,_i=["reasonText","dataProps","setState","user"],Oi=ct.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Lt.a)(e,_i),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(nn.a)(n,2),a=s[0];s[1];return Object(Qt.jsx)(xn.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove4(),t.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),hi=(Ea.a.Title,Ea.a.Link),fi=ea.a.Step,xi=/^\d+$/,vi=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useState)({log_username:l.username}),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(u)}),[u]);var b=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=Object(it.useState)({step:"0"}),f=Object(nn.a)(h,2),x=f[0],v=f[1];Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,j,b;e.initialValues4&&(m({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(j=e.initialValues4.documents[0])||void 0===j||null===(b=j.data_agreement_list_internal_needs[0])||void 0===b?void 0:b.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:u.log_username}),v({step:e.initialValues4.documents[0].step}),O(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(it.useState)(1),V=Object(nn.a)(y,2),k=V[0],w=V[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues4)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues4)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:k})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:xi,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues4)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(hi,{children:Object(Qt.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){j(t)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})}),Object(Qt.jsx)(Wa,{item:t,dataProps:e,setState:m,user:l}),Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Qt.jsx)(fi,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Oi,{dataProps:e,setState:m,user:l})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),gi=vi,yi=["reasonText","dataProps","setState","user"],Vi=ct.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Lt.a)(e,yi),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(nn.a)(n,2),a=s[0];s[1];return Object(Qt.jsx)(xn.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove5(),t.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ki=(Ea.a.Title,Ea.a.Link),wi=ea.a.Step,Ni=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useRef)("vertical");Object(it.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(r.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var d=Object(it.useState)({log_username:l.username}),u=Object(nn.a)(d,2),m=u[0],j=u[1],b=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(m)}),[m]);var p=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=Object(it.useState)({step:"0"}),x=Object(nn.a)(f,2),v=x[0],g=x[1];Object(it.useEffect)((function(){e.initialValues5&&(j({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:m.log_username}),g({step:e.initialValues5.documents[0].step}),h(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var y=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(it.useState)(1),k=Object(nn.a)(V,2);k[0],k[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(m),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){j(Object.assign({},m,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"form-input-label",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues5)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(ki,{children:Object(Qt.jsx)("a",{"data-fileid":t.id,onClick:y,children:t.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){b(t)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})}),Object(Qt.jsx)(Wa,{item:t,dataProps:e,setState:j,user:l}),Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",direction:r.current,responsive:!0,current:v.step-1,className:"steps-form-update",children:O.map((function(e){return Object(Qt.jsx)(wi,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Vi,{dataProps:e,setState:j,user:l})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ci=Ni,Si=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Ye||(Ye=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Xe||(Xe=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Ze||(Ze=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                files{\n                    id\n                    filename\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(et||(et=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(tt||(tt=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(nt||(nt=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(st||(st=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(it.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(it.useState)(!1),u=Object(Dt.g)(Object(dn.a)(a.delete))(),m=Object(nn.a)(u,2),j=m[0],b=m[1].loading,p=Object(Dt.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(it.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 7==e.status_id}));window.localStorage.rows_approved=x.length;var v=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(Ba,{data:{dict:v,records:x},loading:_,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:c,GQL:a,UpdateForm:ti,visibleModalUpdate2:o,GQL2:a,UpdateForm2:li,visibleModalUpdate3:l,GQL3:a,UpdateForm3:pi,visibleModalUpdate4:r,GQL4:a,UpdateForm4:gi,visibleModalUpdate5:d,GQL5:a,UpdateForm5:Ci,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})),Ti=n(90),Ii=(n(268),ct.a.forwardRef((function(e,t){var n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k;return Object(Qt.jsx)("div",{ref:t,style:{margin:20},children:Object(Qt.jsxs)("div",{style:{paddingLeft:"25px",paddingRight:"30px"},children:[Object(Qt.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(Qt.jsx)("h2",{children:Object(Qt.jsx)("b",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f"})}),Object(Qt.jsx)("b",{children:"\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443 No_____________ \u043e\u0442 ____________ 2022\u0433."})]}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423:"})," ",null===e||void 0===e||null===(n=e.printData)||void 0===n||null===(s=n.documentData)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_one[0])||void 0===i?void 0:i.supllier]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423:"})," ",null===e||void 0===e||null===(c=e.printData)||void 0===c||null===(o=c.documentData)||void 0===o||null===(l=o.documents[0])||void 0===l?void 0:l.title]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",null===e||void 0===e||null===(r=e.printData)||void 0===r||null===(d=r.documentData)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_one[0])||void 0===m?void 0:m.subject]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(j=e.printData)||void 0===j||null===(b=j.documentData)||void 0===b||null===(p=b.documents[0])||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price]})]}),Object(Qt.jsxs)("div",{className:"subpagepage",children:[Object(Qt.jsx)(Tt.a,{style:{marginTop:"30px"},gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Qt.jsxs)("table",{border:"1",children:[Object(Qt.jsxs)("tr",{children:[Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 (\u043f\u043e\u0434-\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f)"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"-\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e; - \u043d\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430-\u043d\u043e; - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f\u043c\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),null===e||void 0===e||null===(O=e.printData)||void 0===O||null===(h=O.documentData)||void 0===h||null===(f=h.documents[0].signatures)||void 0===f?void 0:f.map((function(e){var t=e.date_signature.match(/.{10}/)[0];return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("tr",{style:{textAlign:"center"},children:[Object(Qt.jsx)("td",{children:e.position}),Object(Qt.jsx)("td",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),Object(Qt.jsx)("td",{children:e.fio}),Object(Qt.jsx)("td",{children:t})]})})}))]})}),Object(Qt.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(Qt.jsx)("b",{children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c:"})," ",null===e||void 0===e||null===(x=e.printData)||void 0===x||null===(v=x.documentData)||void 0===v||null===(g=v.documents[0])||void 0===g?void 0:g.position,", ",null===e||void 0===e||null===(y=e.printData)||void 0===y||null===(V=y.documentData)||void 0===V||null===(k=V.documents[0])||void 0===k?void 0:k.fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," _________________ ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d:"})," _________________"]})]})]})})})));var Ei=function(e){var t=Object(it.useRef)(),n=Object(it.useState)(!1),s=Object(nn.a)(n,2),a=s[0],i=s[1],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(it.useRef)();console.log("documentData",e);var u=Object(Ti.useReactToPrint)({content:function(){var e=t.current.cloneNode(!0),n=document.createElement("div");return n.appendChild(e),n},onBeforeGetContent:function(){return new Promise((function(t){setTimeout((function(){i(e),d.current=t,r(!0)}),100)}))}});return Object(it.useEffect)((function(){l&&(d.current(),r(!1))}),[l,d]),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("span",{style:{display:"none"},children:Object(Qt.jsx)(Ii,{ref:t,printData:a})}),Object(Qt.jsx)(St.a,{onClick:u,children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})},Fi=(Ea.a.Title,Ea.a.Link),Pi=(ea.a.Step,ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(Dt.j)(),u=Object(it.useState)({log_username:d.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(j)}),[j]);var _=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(nn.a)(_,2),h=(O[0],O[1]),f=Object(it.useState)({step:"0"}),x=Object(nn.a)(f,2),v=(x[0],x[1]);Object(it.useEffect)((function(){e.initialValues&&(b({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:j.log_username}),console.log("props.initialValues",e.initialValues),v({step:e.initialValues.documents[0].step}),h(e.initialValues.documents[0].route_data))}),[e.initialValues]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(Fi,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:g,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0}),Object(Qt.jsx)(Ei,{printData:null===e||void 0===e||null===(l=e.initialValues)||void 0===l||null===(r=l.documents[0])||void 0===r?void 0:r.id,documentData:null===e||void 0===e?void 0:e.initialValues})]})}))),Ri=Pi,Di=(n(411),n(240)),Li=n.n(Di),Ui=ct.a.forwardRef((function(e,t){var n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C,S,T,I,E,F,P,R,D,L;return function(){var e={errorCorrectionLevel:"M",type:"image/png",quality:.92,margin:1},t=Li.a.toDataURL(n,e);console.log("qr-----",t);var n="asd";Qt.Fragment,Li.a.toDataURL(n,e)}(),Object(Qt.jsxs)("div",{ref:t,style:{margin:20},children:[Object(Qt.jsxs)("div",{style:{paddingLeft:"25px",paddingRight:"30px"},children:[Object(Qt.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(Qt.jsx)("h2",{children:Object(Qt.jsx)("b",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f"})}),Object(Qt.jsx)("b",{children:"\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443 No_____________ \u043e\u0442 ____________ 2022\u0433."})]}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(n=e.printData)||void 0===n||null===(s=n.documentData)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.title]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(i=e.printData)||void 0===i||null===(c=i.documentData)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list[0])||void 0===l?void 0:l.subject]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(r=e.printData)||void 0===r||null===(d=r.documentData)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list[0])||void 0===m?void 0:m.price]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",null===e||void 0===e||null===(j=e.printData)||void 0===j||null===(b=j.documentData)||void 0===b||null===(p=b.documents[0])||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",null===e||void 0===e||null===(O=e.printData)||void 0===O||null===(h=O.documentData)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list[0])||void 0===x?void 0:x.executor_name_division]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(v=e.printData)||void 0===v||null===(g=v.documentData)||void 0===g||null===(y=g.documents[0])||void 0===y||null===(V=y.data_agreement_list[0])||void 0===V?void 0:V.sider_signatures_date]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(k=e.printData)||void 0===k||null===(w=k.documentData)||void 0===w||null===(N=w.documents[0])||void 0===N||null===(C=N.data_agreement_list[0])||void 0===C?void 0:C.received_from_counteragent_date]})]}),Object(Qt.jsxs)("div",{className:"subpagepage",children:[Object(Qt.jsx)(Tt.a,{style:{marginTop:"30px"},gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Qt.jsxs)("table",{border:"1",children:[Object(Qt.jsxs)("tr",{children:[Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 (\u043f\u043e\u0434-\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f)"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"-\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e; - \u043d\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430-\u043d\u043e; - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f\u043c\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),null===e||void 0===e||null===(S=e.printData)||void 0===S||null===(T=S.documentData)||void 0===T||null===(I=T.documents[0].signatures)||void 0===I?void 0:I.map((function(e){var t=e.date_signature.match(/.{10}/)[0];return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("tr",{style:{textAlign:"center"},children:[Object(Qt.jsx)("td",{children:e.position}),Object(Qt.jsx)("td",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),Object(Qt.jsx)("td",{children:e.fio}),Object(Qt.jsx)("td",{children:t})]})})}))]})}),Object(Qt.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(Qt.jsx)("b",{children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c:"})," ",null===e||void 0===e||null===(E=e.printData)||void 0===E||null===(F=E.documentData)||void 0===F||null===(P=F.documents[0])||void 0===P?void 0:P.position,", ",null===e||void 0===e||null===(R=e.printData)||void 0===R||null===(D=R.documentData)||void 0===D||null===(L=D.documents[0])||void 0===L?void 0:L.fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," _________________ ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d:"})," _________________"]})]})]}),Object(Qt.jsx)("div",{children:Object(Qt.jsx)("generateQRCode",{})})]})}));var $i=function(e){var t=Object(it.useRef)(),n=Object(it.useState)(!1),s=Object(nn.a)(n,2),a=s[0],i=s[1],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(it.useRef)(),u=Object(Ti.useReactToPrint)({content:function(){var e=t.current.cloneNode(!0),n=document.createElement("div");return n.appendChild(e),n},onBeforeGetContent:function(){return new Promise((function(t){setTimeout((function(){i(e),d.current=t,r(!0)}),100)}))}});return Object(it.useEffect)((function(){l&&(d.current(),r(!1))}),[l,d]),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("span",{style:{display:"none"},children:Object(Qt.jsx)(Ui,{ref:t,printData:a})}),Object(Qt.jsx)(St.a,{onClick:u,children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})},Mi=(Ea.a.Title,Ea.a.Link),Ji=(ea.a.Step,ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=Object(it.useState)({log_username:j.username}),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(_)}),[_]);var f=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(nn.a)(f,2),v=(x[0],x[1]),g=Object(it.useState)({step:"0"}),y=Object(nn.a)(g,2),V=(y[0],y[1]);Object(it.useEffect)((function(){e.initialValues2&&(O({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:_.log_username}),console.log("props.initialValues2",e.initialValues2),V({step:e.initialValues2.documents[0].step}),v(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(nn.a)(w,2);N[0],N[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(_),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){O(Object.assign({},_,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:_.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(Mi,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){h(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0}),Object(Qt.jsx)($i,{printData:null===e||void 0===e||null===(u=e.initialValues2)||void 0===u||null===(m=u.documents[0])||void 0===m?void 0:m.id,documentData:null===e||void 0===e?void 0:e.initialValues2})]})}))),zi=Ji,Ki=(n(433),ct.a.forwardRef((function(e,t){var n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C,S,T,I,E,F,P,R,D,L;return Object(Qt.jsx)("div",{ref:t,style:{margin:20},children:Object(Qt.jsxs)("div",{style:{paddingLeft:"25px",paddingRight:"30px"},children:[Object(Qt.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(Qt.jsx)("h2",{children:Object(Qt.jsx)("b",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f"})}),Object(Qt.jsx)("b",{children:"\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443 No_____________ \u043e\u0442 ____________ 2022\u0433."})]}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(n=e.printData)||void 0===n||null===(s=n.documentData)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.title]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(i=e.printData)||void 0===i||null===(c=i.documentData)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.subject]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(r=e.printData)||void 0===r||null===(d=r.documentData)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.price]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",null===e||void 0===e||null===(j=e.printData)||void 0===j||null===(b=j.documentData)||void 0===b||null===(p=b.documents[0])||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",null===e||void 0===e||null===(O=e.printData)||void 0===O||null===(h=O.documentData)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list_production[0])||void 0===x?void 0:x.executor_name_division]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",null===e||void 0===e||null===(v=e.printData)||void 0===v||null===(g=v.documentData)||void 0===g||null===(y=g.documents[0])||void 0===y||null===(V=y.data_agreement_list_production[0])||void 0===V?void 0:V.executor_phone_number]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(k=e.printData)||void 0===k||null===(w=k.documentData)||void 0===w||null===(N=w.documents[0])||void 0===N||null===(C=N.data_agreement_list_production[0])||void 0===C?void 0:C.counteragent_contacts]})]}),Object(Qt.jsxs)("div",{className:"subpagepage",children:[Object(Qt.jsx)(Tt.a,{style:{marginTop:"30px"},gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Qt.jsxs)("table",{border:"1",children:[Object(Qt.jsxs)("tr",{children:[Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 (\u043f\u043e\u0434-\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f)"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"-\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e; - \u043d\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430-\u043d\u043e; - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f\u043c\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),null===e||void 0===e||null===(S=e.printData)||void 0===S||null===(T=S.documentData)||void 0===T||null===(I=T.documents[0].signatures)||void 0===I?void 0:I.map((function(e){var t=e.date_signature.match(/.{10}/)[0];return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("tr",{style:{textAlign:"center"},children:[Object(Qt.jsx)("td",{children:e.position}),Object(Qt.jsx)("td",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),Object(Qt.jsx)("td",{children:e.fio}),Object(Qt.jsx)("td",{children:t})]})})}))]})}),Object(Qt.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(Qt.jsx)("b",{children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c:"})," ",null===e||void 0===e||null===(E=e.printData)||void 0===E||null===(F=E.documentData)||void 0===F||null===(P=F.documents[0])||void 0===P?void 0:P.position,", ",null===e||void 0===e||null===(R=e.printData)||void 0===R||null===(D=R.documentData)||void 0===D||null===(L=D.documents[0])||void 0===L?void 0:L.fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," _________________ ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d:"})," _________________"]})]})]})})})));var Ai=function(e){var t=Object(it.useRef)(),n=Object(it.useState)(!1),s=Object(nn.a)(n,2),a=s[0],i=s[1],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(it.useRef)();console.log("documentData",e);var u=Object(Ti.useReactToPrint)({content:function(){var e=t.current.cloneNode(!0),n=document.createElement("div");return n.appendChild(e),n},onBeforeGetContent:function(){return new Promise((function(t){setTimeout((function(){i(e),d.current=t,r(!0)}),100)}))}});return Object(it.useEffect)((function(){l&&(d.current(),r(!1))}),[l,d]),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("span",{style:{display:"none"},children:Object(Qt.jsx)(Ki,{ref:t,printData:a})}),Object(Qt.jsx)(St.a,{onClick:u,children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})},qi=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Dt.j)(),m=(Ea.a.Title,Ea.a.Link),j=Object(it.useState)({log_username:u.username}),b=Object(nn.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(p)}),[p]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&_({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:p.log_username})}),[e.initialValues3]);var h=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),x=Object(nn.a)(f,2);x[0],x[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(m,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:h,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0}),Object(Qt.jsx)(Ai,{printData:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r||null===(d=r.documents[0])||void 0===d?void 0:d.id,documentData:null===e||void 0===e?void 0:e.initialValues3})]})})),Bi=qi,Hi=(n(434),ct.a.forwardRef((function(e,t){var n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C,S,T,I,E,F,P,R,D,L;return Object(Qt.jsx)("div",{ref:t,style:{margin:20},children:Object(Qt.jsxs)("div",{style:{paddingLeft:"25px",paddingRight:"30px"},children:[Object(Qt.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(Qt.jsx)("h2",{children:Object(Qt.jsx)("b",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f"})}),Object(Qt.jsx)("b",{children:"\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443 No_____________ \u043e\u0442 ____________ 2022\u0433."})]}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(n=e.printData)||void 0===n||null===(s=n.documentData)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.title]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(i=e.printData)||void 0===i||null===(c=i.documentData)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.subject]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",null===e||void 0===e||null===(r=e.printData)||void 0===r||null===(d=r.documentData)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.price]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",null===e||void 0===e||null===(j=e.printData)||void 0===j||null===(b=j.documentData)||void 0===b||null===(p=b.documents[0])||void 0===p||null===(_=p.data_agreement_list_internal_needs[0])||void 0===_?void 0:_.currency]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",null===e||void 0===e||null===(O=e.printData)||void 0===O||null===(h=O.documentData)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list_internal_needs[0])||void 0===x?void 0:x.executor_name_division]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",null===e||void 0===e||null===(v=e.printData)||void 0===v||null===(g=v.documentData)||void 0===g||null===(y=g.documents[0])||void 0===y||null===(V=y.data_agreement_list_internal_needs[0])||void 0===V?void 0:V.executor_phone_number]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",null===e||void 0===e||null===(k=e.printData)||void 0===k||null===(w=k.documentData)||void 0===w||null===(N=w.documents[0])||void 0===N||null===(C=N.data_agreement_list_internal_needs[0])||void 0===C?void 0:C.counteragent_contacts]})]}),Object(Qt.jsxs)("div",{className:"subpagepage",children:[Object(Qt.jsx)(Tt.a,{style:{marginTop:"30px"},gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Qt.jsxs)("table",{border:"1",children:[Object(Qt.jsxs)("tr",{children:[Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 (\u043f\u043e\u0434-\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f)"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"-\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e; - \u043d\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430-\u043d\u043e; - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f\u043c\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),null===e||void 0===e||null===(S=e.printData)||void 0===S||null===(T=S.documentData)||void 0===T||null===(I=T.documents[0].signatures)||void 0===I?void 0:I.map((function(e){var t=e.date_signature.match(/.{10}/)[0];return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("tr",{style:{textAlign:"center"},children:[Object(Qt.jsx)("td",{children:e.position}),Object(Qt.jsx)("td",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),Object(Qt.jsx)("td",{children:e.fio}),Object(Qt.jsx)("td",{children:t})]})})}))]})}),Object(Qt.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(Qt.jsx)("b",{children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c:"})," ",null===e||void 0===e||null===(E=e.printData)||void 0===E||null===(F=E.documentData)||void 0===F||null===(P=F.documents[0])||void 0===P?void 0:P.position,", ",null===e||void 0===e||null===(R=e.printData)||void 0===R||null===(D=R.documentData)||void 0===D||null===(L=D.documents[0])||void 0===L?void 0:L.fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," _________________ ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d:"})," _________________"]})]})]})})})));var Gi=function(e){var t=Object(it.useRef)(),n=Object(it.useState)(!1),s=Object(nn.a)(n,2),a=s[0],i=s[1],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(it.useRef)();console.log("documentData",e);var u=Object(Ti.useReactToPrint)({content:function(){var e=t.current.cloneNode(!0),n=document.createElement("div");return n.appendChild(e),n},onBeforeGetContent:function(){return new Promise((function(t){setTimeout((function(){i(e),d.current=t,r(!0)}),100)}))}});return Object(it.useEffect)((function(){l&&(d.current(),r(!1))}),[l,d]),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("span",{style:{display:"none"},children:Object(Qt.jsx)(Hi,{ref:t,printData:a})}),Object(Qt.jsx)(St.a,{onClick:u,children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})},Qi=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Dt.j)(),m=(Ea.a.Title,Ea.a.Link),j=Object(it.useState)({log_username:u.username}),b=Object(nn.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(p)}),[p]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&_({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:p.log_username})}),[e.initialValues4]);var h=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),x=Object(nn.a)(f,2);x[0],x[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(m,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:h,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0}),Object(Qt.jsx)(Gi,{printData:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r||null===(d=r.documents[0])||void 0===d?void 0:d.id,documentData:null===e||void 0===e?void 0:e.initialValues4})]})})),Wi=Qi,Yi=(n(435),ct.a.forwardRef((function(e,t){var n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v;return Object(Qt.jsx)("div",{ref:t,style:{margin:20},children:Object(Qt.jsxs)("div",{style:{paddingLeft:"25px",paddingRight:"30px"},children:[Object(Qt.jsxs)("div",{style:{textAlign:"center",marginBottom:"10px"},children:[Object(Qt.jsx)("h2",{children:Object(Qt.jsx)("b",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f"})}),Object(Qt.jsx)("b",{children:"\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443 No_____________ \u043e\u0442 ____________ 2022\u0433."})]}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",null===e||void 0===e||null===(n=e.printData)||void 0===n||null===(s=n.documentData)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.title]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",null===e||void 0===e||null===(i=e.printData)||void 0===i||null===(c=i.documentData)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_custom[0])||void 0===l?void 0:l.remark]}),Object(Qt.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",null===e||void 0===e||null===(r=e.printData)||void 0===r||null===(d=r.documentData)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_custom[0])||void 0===m?void 0:m.subject]})]}),Object(Qt.jsxs)("div",{className:"subpagepage",children:[Object(Qt.jsx)(Tt.a,{style:{marginTop:"30px"},gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Qt.jsxs)("table",{border:"1",children:[Object(Qt.jsxs)("tr",{children:[Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 (\u043f\u043e\u0434-\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f)"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"-\u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e; - \u043d\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430-\u043d\u043e; - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u044f\u043c\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(Qt.jsx)("th",{children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),null===e||void 0===e||null===(j=e.printData)||void 0===j||null===(b=j.documentData)||void 0===b||null===(p=b.documents[0].signatures)||void 0===p?void 0:p.map((function(e){var t=e.date_signature.match(/.{10}/)[0];return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("tr",{style:{textAlign:"center"},children:[Object(Qt.jsx)("td",{children:e.position}),Object(Qt.jsx)("td",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"}),Object(Qt.jsx)("td",{children:e.fio}),Object(Qt.jsx)("td",{children:t})]})})}))]})}),Object(Qt.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(Qt.jsx)("b",{children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c:"})," ",null===e||void 0===e||null===(_=e.printData)||void 0===_||null===(O=_.documentData)||void 0===O||null===(h=O.documents[0])||void 0===h?void 0:h.position,", ",null===e||void 0===e||null===(f=e.printData)||void 0===f||null===(x=f.documentData)||void 0===x||null===(v=x.documents[0])||void 0===v?void 0:v.fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u044b \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," _________________ ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d:"})," _________________"]})]})]})})})));var Xi,Zi,ec,tc,nc,sc,ac,ic,cc,oc,lc,rc,dc,uc,mc,jc,bc,pc,_c,Oc,hc,fc,xc,vc,gc,yc,Vc,kc,wc,Nc,Cc,Sc,Tc,Ic,Ec,Fc,Pc,Rc,Dc,Lc,Uc,$c,Mc,Jc,zc,Kc,Ac,qc,Bc,Hc,Gc,Qc,Wc,Yc,Xc,Zc,eo,to,no,so,ao,io,co,oo,lo,ro,uo,mo,jo,bo,po,_o,Oo,ho,fo,xo,vo,go,yo,Vo,ko,wo,No,Co,So,To,Io,Eo,Fo,Po,Ro,Do,Lo,Uo,$o,Mo,Jo,zo,Ko,Ao,qo,Bo,Ho,Go,Qo,Wo,Yo,Xo,Zo,el,tl,nl,sl,al,il,cl,ol,ll,rl,dl,ul,ml,jl,bl,pl,_l,Ol,hl,fl,xl,vl,gl,yl,Vl,kl,wl,Nl,Cl,Sl,Tl,Il,El,Fl=function(e){var t=Object(it.useRef)(),n=Object(it.useState)(!1),s=Object(nn.a)(n,2),a=s[0],i=s[1],c=Object(it.useState)(!1),o=Object(nn.a)(c,2),l=o[0],r=o[1],d=Object(it.useRef)();console.log("documentData",e);var u=Object(Ti.useReactToPrint)({content:function(){var e=t.current.cloneNode(!0),n=document.createElement("div");return n.appendChild(e),n},onBeforeGetContent:function(){return new Promise((function(t){setTimeout((function(){i(e),d.current=t,r(!0)}),100)}))}});return Object(it.useEffect)((function(){l&&(d.current(),r(!1))}),[l,d]),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("span",{style:{display:"none"},children:Object(Qt.jsx)(Yi,{ref:t,printData:a})}),Object(Qt.jsx)(St.a,{onClick:u,children:"\u041f\u0435\u0447\u0430\u0442\u044c"})]})},Pl=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(Dt.j)(),u=(Ea.a.Title,Ea.a.Link),m=Object(it.useState)({log_username:d.username}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(b)}),[b]),Object(it.useEffect)((function(){e.initialValues5&&p({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:b.log_username})}),[e.initialValues5]);var O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),f=Object(nn.a)(h,2);f[0],f[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish4(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(u,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:O,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0}),Object(Qt.jsx)(Fl,{printData:null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].id,documentData:null===e||void 0===e?void 0:e.initialValues5})]})})),Rl=Pl,Dl=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Xi||(Xi=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Zi||(Zi=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(ec||(ec=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(tc||(tc=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(nc||(nc=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(sc||(sc=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(ac||(ac=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){document.visibilityState,document.visibilityState};Object(it.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(it.useRef)(0),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(it.useState)(!1),u=Object(it.useState)(!1),m=Object(Dt.g)(Object(dn.a)(a.delete))(),j=Object(nn.a)(m,2),b=j[0],p=j[1].loading,_=Object(Dt.h)(a,"all")(),O=_.loading,h=_.data,f=_.refetch;Object(it.useEffect)((function(){f()}),[]);var x=(h&&null!=h[Object.keys(h)[0]]?h[Object.keys(h)[0]].map((function(e){var n,a,i,o;return c.current=h.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=x.length;var v=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(Ba,{data:{dict:v,records:x},loading:O,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:o,GQL:a,UpdateForm:Ri,visibleModalUpdate2:l,GQL2:a,UpdateForm2:zi,visibleModalUpdate3:r,GQL3:a,UpdateForm3:Bi,visibleModalUpdate4:d,GQL4:a,UpdateForm4:Wi,visibleModalUpdate5:u,GQL5:a,UpdateForm5:Rl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},b({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:p,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:o,visibleModalUpdate2:l,visibleModalUpdate3:r,visibleModalUpdate4:d,visibleModalUpdate5:u,GQL:a})})),Ll=Dl,Ul=(Ea.a.Title,Ea.a.Link),$l=(ea.a.Step,ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useState)({log_username:l.username}),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(nn.a)(b,2),_=(p[0],p[1]),O=Object(it.useState)({step:"0"}),h=Object(nn.a)(O,2),f=(h[0],h[1]);Object(it.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:u.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:u.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:u.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:u.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(Ul,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){j(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})}))),Ml=$l,Jl=(Ea.a.Title,Ea.a.Link),zl=(ea.a.Step,ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Dt.j)(),m=Object(it.useState)({log_username:u.username}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]);var O=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(nn.a)(O,2),f=(h[0],h[1]),x=Object(it.useState)({step:"0"}),v=Object(nn.a)(x,2),g=(v[0],v[1]);console.log("PROPS UPDATE DOC 2",e),Object(it.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),k=Object(nn.a)(V,2);k[0],k[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(Jl,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})}))),Kl=zl,Al=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=Object(it.useState)({log_username:r.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(nn.a)(O,2);h[0],h[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ql=Al,Bl=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=Object(it.useState)({log_username:r.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(nn.a)(O,2);h[0],h[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Hl=Bl,Gl=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=Object(it.useState)({log_username:r.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(it.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(nn.a)(O,2);h[0],h[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ql=Gl,Wl=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(ic||(ic=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                reason\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(cc||(cc=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(oc||(oc=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(lc||(lc=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(rc||(rc=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(dc||(dc=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(uc||(uc=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=Object(it.useRef)(0),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(it.useState)(!1),u=Object(Dt.g)(Object(dn.a)(a.delete))(),m=Object(nn.a)(u,2),j=m[0],b=m[1].loading,p=Object(Dt.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(it.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,c,o;return i.current=O.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 2==e.status_id}));window.localStorage.rows_rejected=x.length;var v=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ba,{data:{dict:v,records:x},loading:_,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:c,GQL:a,UpdateForm:Ml,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Kl,visibleModalUpdate3:l,GQL3:a,UpdateForm3:ql,visibleModalUpdate4:r,GQL4:a,UpdateForm4:Hl,visibleModalUpdate5:d,GQL5:a,UpdateForm5:Ql,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})})),Yl=Wl,Xl=n(486),Zl=["reasonText","dataProps","setState","user"],er=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Zl),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),tr=er,nr=["reasonText","dataProps","setState","user"],sr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,nr),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),ar=sr,ir=["reasonText","dataProps","setState","user"],cr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,ir),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),or=cr,lr=["reasonText","dataProps","setState","user"],rr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,lr),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),dr=rr,ur=(n(233),ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O=Object(Dt.j)(),h=Ea.a.Link,f=Object(it.useState)({log_username:O.username}),x=Object(nn.a)(f,2),v=x[0],g=x[1],y=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(O.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=null===v||void 0===v||null===(t=v.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),k=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===V||void 0===V?void 0:V.includes(e.id)})),w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(v)}),[v]),Object(it.useEffect)((function(){e.initialValues&&g({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:v.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:v.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:v.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===v||void 0===v||null===(c=v.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===v||void 0===v||null===(l=v.document_options)||void 0===l?void 0:l.supllier)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===v||void 0===v||null===(u=v.document_options)||void 0===u?void 0:u.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===v||void 0===v||null===(b=v.document_options)||void 0===b?void 0:b.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===k||void 0===k?void 0:k.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(h,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){y(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),2==v.status?Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),v.report?v.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:v.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(h,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){y(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}):"",1==(null===v||void 0===v?void 0:v.status)&&(null===v||void 0===v?void 0:v.user_id_created)!=O.id?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})}))),mr=ur,jr=n(476),br=n(493),pr=(n(138),n(76)),_r=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p=Object(Dt.j)(),_={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(mc||(mc=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(jc||(jc=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(bc||(bc=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},O={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(pc||(pc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(rn.a)(_c||(_c=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Oc||(Oc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(rn.a)(hc||(hc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},h=Ea.a.Link,f=Object(Dt.g)(Object(dn.a)(O.insert))(),x=Object(nn.a)(f,2),v=x[0],g=(x[1].loading,Object(Dt.h)(_,"all")()),y=(g.loading,g.data),V=g.refetch,k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(p.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){V()}),[]);var N=Object(it.useState)({}),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=an.a.useForm(),E=Object(nn.a)(I,1)[0];Object(it.useEffect)((function(){E.setFieldsValue(S)}),[S]);var F=vn.a.Group,P=Object(it.useState)(!1),R=Object(nn.a)(P,2),D=(R[0],R[1]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:550,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),D(!1)},onCancel:function(){D(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Qt.jsx)(xn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!S.recepient,onConfirm:Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsxs)(an.a,{form:E,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Dt.e)(t.deadline._d),user_id_created:"".concat(p.id),fio_created:p.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,supllier:void 0!=t.supllier&&t.supllier,price:void 0!=t.price&&t.price},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};v(n),e.setVisible(!1),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Qt.jsx)(os.a.Option,{value:null},null),null===y||void 0===y||null===(t=y.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Qt.jsx)(os.a.Option,{value:e.id,children:null===y||void 0===y||null===(n=y.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Qt.jsx)(an.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(jr.a,{locale:pr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Qt.jsx)(an.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:5})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop marginBottom",children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423:"})}),Object(Qt.jsx)(Nt.a,{span:13,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"title",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})}),Object(Qt.jsx)(Nt.a,{span:13,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_one[0])||void 0===c?void 0:c.supllier}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"supllier",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(Qt.jsx)(Nt.a,{span:13,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_one[0])||void 0===r?void 0:r.subject}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"subject",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: "})}),Object(Qt.jsx)(Nt.a,{span:13,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_one[0])||void 0===m?void 0:m.price}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"price",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:15,children:Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Qt.jsx)(Nt.a,{span:9,children:Object(Qt.jsx)(St.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));E.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Qt.jsx)(an.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Qt.jsx)(F,{children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b?void 0:b.files.map((function(e){return Object(Qt.jsxs)(ct.a.Fragment,{children:[Object(Qt.jsxs)(Nt.a,{span:21,children:[Object(Qt.jsx)(h,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){k(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(vn.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),Or=_r,hr=["GQL"],fr=ct.a.memo((function(e){var t=e.GQL,n=Object(Lt.a)(e,hr),s=(Object(Hs.useLocation)().pathname,Object(it.useState)([])),a=Object(nn.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(dn.a)(t.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(nn.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(it.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,onRow:function(e,t){return{onClick:function(t){c([e.key,e.document_id,e.route_id])},onDoubleClick:function(t){void 0==e.document_tasks_logs?n.visibleModalUpdate[1](!0):(n.visibleModalUpdate[1](!0),d({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}))}}},pagination:{simple:!0,pageSize:10,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),xr=fr,vr=["GQL","UpdateForm"],gr=ct.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Lt.a)(e,vr),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(fc||(fc=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(xc||(xc=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(vc||(vc=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(gc||(gc=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(yc||(yc=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Vc||(Vc=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(kc||(kc=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},i=an.a.useForm(),c=Object(nn.a)(i,1)[0],o=Object(it.useState)(!0),l=Object(nn.a)(o,2),r=(l[0],l[1]),d=s.visibleModalUpdate?s.visibleModalUpdate:[],u=Object(nn.a)(d,2),m=u[0],j=u[1],b={};b[t.table]=t.table?{global:{id:"= ".concat(s.selectedRowKeys[0])}}:{};var p=Object(Dt.h)(t,"one",{variables1:b})(),_=(p.loading,p.data),O=p.refetch;Object(it.useEffect)((function(){m&&O(b)}),[m]);var h={documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},f=Object(Dt.h)(a,"one",{variables1:b})(),x=(f.loading,f.data),v=f.refetch;Object(it.useEffect)((function(){m&&v(h)}),[m]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Zs.a)(Xs.a.mark((function n(s){return Xs.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",disabled:3!==s.selectedRowKeys.length,onClick:function(){j(!0)},children:[Object(Qt.jsx)(Tn.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Qt.jsx)(wn.a,{title:s.title,visible:m,width:900,onCancel:function(){j(!1),r(!0)},footer:null,children:Object(Qt.jsx)(n,{document:null===x||void 0===x?void 0:x.documents[0],initialValues:_,form:c,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var a,i,c;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},c=[],!(null===n||void 0===n||null===(a=n.files)||void 0===a?void 0:a.fileList)){e.next=5;break}return e.next=5,g(n.files.fileList).then((function(e){c=e}));case 5:n.docs=c||[],i[t.exemplar]={id:s.selectedRowKeys[0],status:2,user_id:n.user_id_created},console.log("values-------",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),yr=gr,Vr=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(wc||(wc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(rn.a)(Nc||(Nc=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Cc||(Cc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(Sc||(Sc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(Tc||(Tc=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},u=Object(Dt.j)(),m=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=Object(it.useState)({step:"0"}),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=Object(it.useState)(!1),v=(Ea.a.Title,Ea.a.Link),g=ea.a.Step,y=Xl.a.Panel,V=Object(it.useRef)("vertical");Object(it.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(V.current=(null===e||void 0===e||null===(a=e.initialValues)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var k=Object(it.useState)(!1),w=Object(nn.a)(k,2),N=w[0],C=w[1],S=Object(it.useState)({log_username:u.username}),T=Object(nn.a)(S,2),I=T[0],E=T[1],F=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(I)}),[I]),Object(it.useEffect)((function(){e.initialValues&&(E({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:I.log_username}),f({step:e.initialValues.documents[0].step}),p(e.initialValues.documents[0].route_data))}),[e.initialValues]);var P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(nn.a)(R,2),L=D[0],U=D[1];function $(e){}return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(I)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){E(Object.assign({},I,Object(at.a)({},t)))},children:[Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsxs)(Nt.a,{span:8,children:[" ",Object(Qt.jsx)("b",{children:"\u041e\u0442: "})]})," ",Object(Qt.jsx)(Nt.a,{span:16,children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio}),Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position}),Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:I.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:I.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:I.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:I.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Qt.jsx)(Xl.a,{defaultActiveKey:["2"],onChange:$,children:Object(Qt.jsx)(y,{header:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:12,className:"document-view-wrap",children:[Object(Qt.jsx)(v,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:P,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){F(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})},"2")})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",direction:V.current,responsive:!0,current:h.step-1,className:"steps-form-update",children:b.map((function(e){return Object(Qt.jsx)(g,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(tr,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(dr,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Qt.jsx)(or,{reasonText:L,dataProps:e,setState:E,user:u}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(ar,{reasonText:L,dataProps:e,setState:E,user:u})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Xl.a,{defaultActiveKey:["1"],onChange:$,children:Object(Qt.jsx)(y,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Qt.jsx)(xr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:x,GQL:d,title:function(t){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(yr,{visibleModalUpdate:x,UpdateForm:mr,GQL:d,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(Or,{visible:N,setVisible:C,document:e.initialValues})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),kr=Vr,wr=["reasonText","dataProps","setState","user"],Nr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,wr),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Cr=Nr,Sr=["reasonText","dataProps","setState","user"],Tr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Sr),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Ir=Tr,Er=["reasonText","dataProps","setState","user"],Fr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Er),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Pr=Fr,Rr=["reasonText","dataProps","setState","user"],Dr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Rr),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Lr=Dr,Ur=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y=Object(Dt.j)(),V={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Ic||(Ic=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(Ec||(Ec=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(Fc||(Fc=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},k={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Pc||(Pc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(rn.a)(Rc||(Rc=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Dc||(Dc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(rn.a)(Lc||(Lc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},w=Ea.a.Link,N=Object(Dt.g)(Object(dn.a)(k.insert))(),C=Object(nn.a)(N,2),S=C[0],T=(C[1].loading,Object(Dt.h)(V,"all")()),I=(T.loading,T.data),E=T.refetch,F=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(y.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){E()}),[]);var R=Object(it.useState)({}),D=Object(nn.a)(R,2),L=D[0],U=D[1],$=an.a.useForm(),M=Object(nn.a)($,1)[0];Object(it.useEffect)((function(){M.setFieldsValue(L)}),[L]);var J=vn.a.Group,z=Object(it.useState)(!1),K=Object(nn.a)(z,2),A=(K[0],K[1]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),A(!1)},onCancel:function(){A(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Qt.jsx)(xn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!L.recepient,onConfirm:Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsxs)(an.a,{form:M,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Dt.e)(t.deadline._d),user_id_created:"".concat(y.id),fio_created:y.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency_price:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,sider_signatures_date:void 0!=t.sider_signatures_date&&t.sider_signatures_date,received_from_counteragent_date:void 0!=t.received_from_counteragent_date&&t.received_from_counteragent_date},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};S(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){U(Object.assign({},L,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Qt.jsx)(os.a.Option,{value:null},null),null===I||void 0===I||null===(t=I.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Qt.jsx)(os.a.Option,{value:e.id,children:null===I||void 0===I||null===(n=I.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Qt.jsx)(an.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(jr.a,{locale:pr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Qt.jsx)(an.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:5})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop marginBottom",children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"title",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i?void 0:i.subject}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"subject",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(c=e.document)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list[0])||void 0===l?void 0:l.price}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"price",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.data_agreement_list[0])||void 0===u?void 0:u.currency_price}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"currency_price",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.documents[0])||void 0===j||null===(b=j.data_agreement_list[0])||void 0===b?void 0:b.executor_name_division}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.documents[0])||void 0===_||null===(O=_.data_agreement_list[0])||void 0===O?void 0:O.sider_signatures_date}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"sider_signatures_date",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list[0])||void 0===x?void 0:x.received_from_counteragent_date}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"received_from_counteragent_date",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:18,children:Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Qt.jsx)(Nt.a,{span:5,children:Object(Qt.jsx)(St.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));M.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Qt.jsx)(an.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Qt.jsx)(J,{children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.documents[0])||void 0===g?void 0:g.files.map((function(e){return Object(Qt.jsxs)(ct.a.Fragment,{children:[Object(Qt.jsxs)(Nt.a,{span:21,children:[Object(Qt.jsx)(w,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:P,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){F(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(vn.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),$r=Ur,Mr=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w=Object(Dt.j)(),N=Ea.a.Link,C=Object(it.useState)({log_username:w.username}),S=Object(nn.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(it.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:T.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:T.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency_price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list[0])||void 0===k?void 0:k.received_from_counteragent_date})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),2==T.status?Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Jr=Mr,zr=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Uc||(Uc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(rn.a)($c||($c=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Mc||(Mc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(Jc||(Jc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(zc||(zc=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Dt.j)(),p=(Ea.a.Title,Ea.a.Link),_=ea.a.Step,O=Xl.a.Panel,h=Object(it.useState)({log_username:b.username}),f=Object(nn.a)(h,2),x=f[0],v=f[1],g=Object(it.useState)(!1),y=Object(it.useState)(!1),V=Object(nn.a)(y,2),k=V[0],w=V[1],N=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(x)}),[x]);var C=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),S=Object(nn.a)(C,2),T=S[0],I=S[1],E=Object(it.useState)({step:"0"}),F=Object(nn.a)(E,2),P=F[0],R=F[1];Object(it.useEffect)((function(){e.initialValues2&&(v({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:x.log_username}),R({step:e.initialValues2.documents[0].step}),I(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var D=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){}var U=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),$=Object(nn.a)(U,2),M=$[0],J=$[1],z=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),K=Object(nn.a)(z,2);K[0],K[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(x),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){v(Object.assign({},x,Object(at.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Qt.jsx)(Xl.a,{defaultActiveKey:["2"],onChange:L,children:Object(Qt.jsx)(O,{header:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:12,className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:D,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){N(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})},"2")})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:P.step-1,className:"steps-form-update",children:T.map((function(e){return Object(Qt.jsx)(_,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Cr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Lr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Qt.jsx)(Pr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Ir,{reasonText:M,dataProps:e,setState:v,user:b})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,J(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Xl.a,{defaultActiveKey:["1"],onChange:L,children:Object(Qt.jsx)(O,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Qt.jsx)(xr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:g,GQL:j,title:function(t){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(yr,{visibleModalUpdate:g,UpdateForm:Jr,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)($r,{visible:k,setVisible:w,document:e.initialValues2})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Kr=zr,Ar=["reasonText","dataProps","setState","user"],qr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Ar),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Br=qr,Hr=["reasonText","dataProps","setState","user"],Gr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Hr),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Qr=Gr,Wr=["reasonText","dataProps","setState","user"],Yr=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Wr),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Xr=Yr,Zr=["reasonText","dataProps","setState","user"],ed=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Zr),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),td=ed,nd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V=Object(Dt.j)(),k={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Kc||(Kc=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(Ac||(Ac=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(qc||(qc=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},w={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Bc||(Bc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(rn.a)(Hc||(Hc=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Gc||(Gc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(rn.a)(Qc||(Qc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},N=Ea.a.Link,C=Object(Dt.g)(Object(dn.a)(w.insert))(),S=Object(nn.a)(C,2),T=S[0],I=(S[1].loading,Object(Dt.h)(k,"all")()),E=(I.loading,I.data),F=I.refetch,P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(V.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){F()}),[]);var D=Object(it.useState)({}),L=Object(nn.a)(D,2),U=L[0],$=L[1],M=an.a.useForm(),J=Object(nn.a)(M,1)[0];Object(it.useEffect)((function(){J.setFieldsValue(U)}),[U]);var z=vn.a.Group,K=Object(it.useState)(!1),A=Object(nn.a)(K,2),q=(A[0],A[1]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Qt.jsx)(xn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!U.recepient,onConfirm:Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsxs)(an.a,{form:J,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Dt.e)(t.deadline._d),user_id_created:"".concat(V.id),fio_created:V.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,executor_phone_number:void 0!=t.executor_phone_number&&t.executor_phone_number,counteragent_contacts:void 0!=t.counteragent_contacts&&t.counteragent_contacts},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};T(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){$(Object.assign({},U,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Qt.jsx)(os.a.Option,{value:null},null),null===E||void 0===E||null===(t=E.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Qt.jsx)(os.a.Option,{value:e.id,children:null===E||void 0===E||null===(n=E.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Qt.jsx)(an.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(jr.a,{locale:pr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Qt.jsx)(an.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:5})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop marginBottom",children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"title",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.subject}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"subject",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_agreement_list_production[0])||void 0===r?void 0:r.price}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"price",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.currency}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"currency",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b||null===(p=b.data_agreement_list_production[0])||void 0===p?void 0:p.executor_name_division}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(_=e.document)||void 0===_||null===(O=_.documents[0])||void 0===O||null===(h=O.data_agreement_list_production[0])||void 0===h?void 0:h.executor_phone_number}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(f=e.document)||void 0===f||null===(x=f.documents[0])||void 0===x||null===(v=x.data_agreement_list_production[0])||void 0===v?void 0:v.counteragent_contacts}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:18,children:Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Qt.jsx)(Nt.a,{span:5,children:Object(Qt.jsx)(St.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));J.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Qt.jsx)(an.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Qt.jsx)(z,{children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(g=e.document)||void 0===g||null===(y=g.documents[0])||void 0===y?void 0:y.files.map((function(e){return Object(Qt.jsxs)(ct.a.Fragment,{children:[Object(Qt.jsxs)(Nt.a,{span:21,children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(vn.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),sd=nd,ad=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w=Object(Dt.j)(),N=Ea.a.Link,C=Object(it.useState)({log_username:w.username}),S=Object(nn.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(it.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsxs)(Nt.a,{span:12,children:[T.fio_created," AAAAAAAAA"]})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:T.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list_production[0])||void 0===k?void 0:k.counteragent_contacts})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),2==T.status?Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),id=ad,cd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Wc||(Wc=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(rn.a)(Yc||(Yc=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Xc||(Xc=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(Zc||(Zc=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(eo||(eo=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Dt.j)(),p=(Ea.a.Title,Ea.a.Link),_=(ea.a.Step,Xl.a.Panel),O=Object(it.useState)({log_username:b.username}),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)(!1),g=Object(it.useState)(!1),y=Object(nn.a)(g,2),V=y[0],k=y[1],w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(f)}),[f]);var N=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),C=Object(nn.a)(N,2),S=(C[0],C[1]),T=Object(it.useState)({step:"0"}),I=Object(nn.a)(T,2),E=(I[0],I[1]);Object(it.useEffect)((function(){e.initialValues3&&(x({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:f.log_username}),E({step:e.initialValues3.documents[0].step}),S(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var F=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){}var R=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(nn.a)(R,2),L=D[0],U=D[1],$=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),M=Object(nn.a)($,2);M[0],M[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(at.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Qt.jsx)(Xl.a,{defaultActiveKey:["2"],onChange:P,children:Object(Qt.jsx)(_,{header:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){w(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))},"2")})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Br,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(td,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(Xr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Qr,{reasonText:L,dataProps:e,setState:x,user:b})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Xl.a,{defaultActiveKey:["1"],onChange:P,children:Object(Qt.jsx)(_,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Qt.jsx)(xr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:v,GQL:j,title:function(t){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(yr,{visibleModalUpdate:v,UpdateForm:id,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(sd,{visible:V,setVisible:k,document:e.initialValues3})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),od=cd,ld=["reasonText","dataProps","setState","user"],rd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,ld),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),dd=rd,ud=["reasonText","dataProps","setState","user"],md=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,ud),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),jd=md,bd=["reasonText","dataProps","setState","user"],pd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,bd),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),_d=pd,Od=["reasonText","dataProps","setState","user"],hd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Od),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),fd=hd,xd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V=Object(Dt.j)(),k={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(to||(to=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(no||(no=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(so||(so=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},w={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(ao||(ao=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(rn.a)(io||(io=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(co||(co=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(rn.a)(oo||(oo=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},N=Ea.a.Link,C=Object(Dt.g)(Object(dn.a)(w.insert))(),S=Object(nn.a)(C,2),T=S[0],I=(S[1].loading,Object(Dt.h)(k,"all")()),E=(I.loading,I.data),F=I.refetch,P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(V.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){F()}),[]);var D=Object(it.useState)({}),L=Object(nn.a)(D,2),U=L[0],$=L[1],M=an.a.useForm(),J=Object(nn.a)(M,1)[0];Object(it.useEffect)((function(){J.setFieldsValue(U)}),[U]);var z=vn.a.Group,K=Object(it.useState)(!1),A=Object(nn.a)(K,2),q=(A[0],A[1]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Qt.jsx)(xn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!U.recepient,onConfirm:Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsxs)(an.a,{form:J,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Dt.e)(t.deadline._d),user_id_created:"".concat(V.id),fio_created:V.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,executor_phone_number:void 0!=t.executor_phone_number&&t.executor_phone_number,counteragent_contacts:void 0!=t.counteragent_contacts&&t.counteragent_contacts},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};T(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){$(Object.assign({},U,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Qt.jsx)(os.a.Option,{value:null},null),null===E||void 0===E||null===(t=E.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Qt.jsx)(os.a.Option,{value:e.id,children:null===E||void 0===E||null===(n=E.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Qt.jsx)(an.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(jr.a,{locale:pr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Qt.jsx)(an.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:5})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop marginBottom",children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"title",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.subject}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"subject",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_agreement_list_internal_needs[0])||void 0===r?void 0:r.price}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"price",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.currency}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"currency",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b||null===(p=b.data_agreement_list_internal_needs[0])||void 0===p?void 0:p.executor_name_division}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(_=e.document)||void 0===_||null===(O=_.documents[0])||void 0===O||null===(h=O.data_agreement_list_internal_needs[0])||void 0===h?void 0:h.executor_phone_number}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"executor_phone_number",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(f=e.document)||void 0===f||null===(x=f.documents[0])||void 0===x||null===(v=x.data_agreement_list_internal_needs[0])||void 0===v?void 0:v.counteragent_contacts}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"counteragent_contacts",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:18,children:Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Qt.jsx)(Nt.a,{span:5,children:Object(Qt.jsx)(St.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));J.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Qt.jsx)(an.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Qt.jsx)(z,{children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(g=e.document)||void 0===g||null===(y=g.documents[0])||void 0===y?void 0:y.files.map((function(e){return Object(Qt.jsxs)(ct.a.Fragment,{children:[Object(Qt.jsxs)(Nt.a,{span:21,children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(vn.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),vd=xd,gd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w=Object(Dt.j)(),N=Ea.a.Link,C=Object(it.useState)({log_username:w.username}),S=Object(nn.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(it.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsxs)(Nt.a,{span:12,children:[T.fio_created," AAAAAAAAA"]})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:T.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_internal_needs[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_internal_needs[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_internal_needs[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_internal_needs[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list_internal_needs[0])||void 0===k?void 0:k.counteragent_contacts})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),2==T.status?Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(N,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){E(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),yd=gd,Vd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(lo||(lo=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(rn.a)(ro||(ro=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(uo||(uo=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(mo||(mo=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(jo||(jo=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Dt.j)(),p=(Ea.a.Title,Ea.a.Link),_=(ea.a.Step,Xl.a.Panel),O=Object(it.useState)({log_username:b.username}),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)(!1),g=Object(it.useState)(!1),y=Object(nn.a)(g,2),V=y[0],k=y[1],w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(f)}),[f]);var N=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),C=Object(nn.a)(N,2),S=(C[0],C[1]),T=Object(it.useState)({step:"0"}),I=Object(nn.a)(T,2),E=(I[0],I[1]);Object(it.useEffect)((function(){e.initialValues4&&(x({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:f.log_username}),E({step:e.initialValues4.documents[0].step}),S(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var F=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){}var R=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(nn.a)(R,2),L=D[0],U=D[1],$=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),M=Object(nn.a)($,2);M[0],M[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(f)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(at.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position}),Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:Object(Qt.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Qt.jsx)(Xl.a,{defaultActiveKey:["2"],onChange:P,children:Object(Qt.jsx)(_,{header:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){w(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))},"2")})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(dd,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(fd,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(_d,{reasonText:L,dataProps:e,setState:x,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(jd,{reasonText:L,dataProps:e,setState:x,user:b})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Xl.a,{defaultActiveKey:["1"],onChange:P,children:Object(Qt.jsx)(_,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Qt.jsx)(xr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:v,GQL:j,title:function(t){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(yr,{visibleModalUpdate:v,UpdateForm:yd,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(vd,{visible:V,setVisible:k,document:e.initialValues4})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),kd=Vd,wd=["reasonText","dataProps","setState","user"],Nd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,wd),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Cd=Nd,Sd=["reasonText","dataProps","setState","user"],Td=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Sd),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Id=Td,Ed=["reasonText","dataProps","setState","user"],Fd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Ed),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Pd=Fd,Rd=["reasonText","dataProps","setState","user"],Dd=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Rd),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Ld=Dd,Ud=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Dt.j)(),j={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(bo||(bo=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(rn.a)(po||(po=Object(sn.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(rn.a)(_o||(_o=Object(sn.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},b={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Oo||(Oo=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(rn.a)(ho||(ho=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(fo||(fo=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(rn.a)(xo||(xo=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},p=Ea.a.Link,_=Object(Dt.g)(Object(dn.a)(b.insert))(),O=Object(nn.a)(_,2),h=O[0],f=(O[1].loading,Object(Dt.h)(j,"all")()),x=(f.loading,f.data),v=f.refetch,g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){v()}),[]);var V=Object(it.useState)({}),k=Object(nn.a)(V,2),w=k[0],N=k[1],C=an.a.useForm(),S=Object(nn.a)(C,1)[0];Object(it.useEffect)((function(){S.setFieldsValue(w)}),[w]);var T=vn.a.Group,I=Object(it.useState)(!1),E=Object(nn.a)(I,2),F=(E[0],E[1]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(Qt.jsx)(kn.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(Qt.jsx)(wn.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),F(!1)},onCancel:function(){F(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(Qt.jsx)(xn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!w.recepient,onConfirm:Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(Qt.jsxs)(an.a,{form:S,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Dt.e)(t.deadline._d),user_id_created:"".concat(m.id),fio_created:m.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,remark:void 0!=t.remark&&t.remark},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};h(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){N(Object.assign({},w,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsxs)(os.a,Object(at.a)(Object(at.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(Qt.jsx)(os.a.Option,{value:null},null),null===x||void 0===x||null===(t=x.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(Qt.jsx)(os.a.Option,{value:e.id,children:null===x||void 0===x||null===(n=x.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(Qt.jsx)(an.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(jr.a,{locale:pr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(Qt.jsx)(an.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a.TextArea,{rows:5})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop marginBottom",children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"title",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_custom[0])||void 0===c?void 0:c.subject}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"subject",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:13,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "})}),Object(Qt.jsx)(Nt.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_custom[0])||void 0===r?void 0:r.remark}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(an.a.Item,{name:"remark",children:Object(Qt.jsx)(br.a,{defaultChecked:!1})})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:18,children:Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(Qt.jsx)(Nt.a,{span:5,children:Object(Qt.jsx)(St.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));S.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(Qt.jsx)(an.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(Qt.jsx)(T,{children:Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u?void 0:u.files.map((function(e){return Object(Qt.jsxs)(ct.a.Fragment,{children:[Object(Qt.jsxs)(Nt.a,{span:21,children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){g(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:1,children:Object(Qt.jsx)(vn.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),$d=Ud,Md=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b=Object(Dt.j)(),p=Ea.a.Link,_=Object(it.useState)({log_username:b.username}),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=null===h||void 0===h||null===(t=h.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),g=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===v||void 0===v?void 0:v.includes(e.id)})),y=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(h)}),[h]),Object(it.useEffect)((function(){e.initialValues&&f({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:h.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsxs)(Nt.a,{span:12,children:[h.fio_created," AAAAAAAAA"]})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===h||void 0===h||null===(c=h.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===h||void 0===h||null===(l=h.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_custom[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===h||void 0===h||null===(u=h.document_options)||void 0===u?void 0:u.remark)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_custom[0])||void 0===j?void 0:j.remark})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===g||void 0===g?void 0:g.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),2==h.status?Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),h.report?h.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:h.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}):"",1==(null===h||void 0===h?void 0:h.status)&&(null===h||void 0===h?void 0:h.user_id_created)!=b.id?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Jd=Md,zd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(vo||(vo=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(rn.a)(go||(go=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(yo||(yo=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(Vo||(Vo=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(ko||(ko=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Dt.j)(),p=(Ea.a.Title,Ea.a.Link),_=ea.a.Step,O=Xl.a.Panel,h=Object(it.useRef)("vertical"),f=Object(it.useState)(!1),x=Object(it.useState)(!1),v=Object(nn.a)(x,2),g=v[0],y=v[1];Object(it.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(h.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var V=Object(it.useState)({log_username:b.username}),k=Object(nn.a)(V,2),w=k[0],N=k[1],C=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(w)}),[w]);var S=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),T=Object(nn.a)(S,2),I=T[0],E=T[1],F=Object(it.useState)({step:"0"}),P=Object(nn.a)(F,2),R=P[0],D=P[1];Object(it.useEffect)((function(){e.initialValues5&&(N({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:w.log_username}),D({step:e.initialValues5.documents[0].step}),E(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var L=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(e){}var $=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),M=Object(nn.a)($,2),J=M[0],z=M[1],K=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),A=Object(nn.a)(K,2);A[0],A[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(w)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){N(Object.assign({},w,Object(at.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio}),Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position}),Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(Qt.jsx)(Nt.a,{span:16,children:"\u0414\u0440\u0443\u0433\u043e\u0439"})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(Qt.jsx)(Nt.a,{span:16,children:w.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "})}),Object(Qt.jsx)(Nt.a,{span:16,children:w.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:8,children:Object(Qt.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(Qt.jsx)(Nt.a,{span:16,children:w.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(Qt.jsx)(Xl.a,{defaultActiveKey:["2"],onChange:U,children:Object(Qt.jsx)(O,{header:Object(Qt.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})}),Object(Qt.jsx)(St.a,{onClick:function(){C(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))},"2")})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",direction:h.current,responsive:!0,current:R.step-1,className:"steps-form-update",children:I.map((function(e){return Object(Qt.jsx)(_,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Cd,{reasonText:J,dataProps:e,setState:N,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Ld,{reasonText:J,dataProps:e,setState:N,user:b}),Object(Qt.jsx)(Pd,{reasonText:J,dataProps:e,setState:N,user:b}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Id,{reasonText:J,dataProps:e,setState:N,user:b})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Xl.a,{defaultActiveKey:["1"],onChange:U,children:Object(Qt.jsx)(O,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(Qt.jsx)(xr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:f,GQL:j,title:function(t){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(yr,{visibleModalUpdate:f,UpdateForm:Jd,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)($d,{visible:g,setVisible:y,document:e.initialValues5})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,z(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Kd=zd,Ad=(Ea.a.Title,Ea.a.Link,ea.a.Step,ct.a.memo((function(e){var t=Object(Dt.j)(),n=(t.id,t.positions.toString()),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,status_id:"=5",ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(wo||(wo=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(rn.a)(No||(No=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        \n                        \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Co||(Co=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(So||(So=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(To||(To=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Io||(Io=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(Eo||(Eo=Object(sn.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a={exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_created:"=".concat(t.id)}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Fo||(Fo=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                }\n            "]))),one:Object(rn.a)(Po||(Po=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(Ro||(Ro=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(rn.a)(Do||(Do=Object(sn.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "])))},i=Object(it.useRef)(0),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(it.useState)(!1),u=Object(Dt.g)(Object(dn.a)(s.delete))(),m=Object(nn.a)(u,2),j=m[0],b=m[1].loading,p=Object(Dt.h)(s,"all")(),_=p.loading,O=p.data,h=p.refetch,f=Object(Dt.h)(a,"all")(),x=(f.loading,f.data),v=f.refetch;Object(it.useEffect)((function(){v()}),[]),Object(it.useEffect)((function(){h()}),[]);var g=(O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var s,a,c,o,l,r;i.current=O.documents.length;var d=null===x||void 0===x||null===(s=x.document_tasks)||void 0===s?void 0:s.filter((function(t){return t.document_id==e.id})),u=null===x||void 0===x||null===(a=x.document_tasks)||void 0===a?void 0:a.filter((function(t){return t.document_id==e.id&&2==t.status}));return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(c=e.document_statuses)||void 0===c?void 0:c.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(o=e.route_id)||void 0===o?void 0:o.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(l=e.route_data)||void 0===l?void 0:l.length),step_name:(null===(r=e.route_data)||void 0===r?void 0:r.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],tasks_count:"".concat(null===u||void 0===u?void 0:u.length," \u0438\u0437 ").concat(null===d||void 0===d?void 0:d.length)}})):[]).filter((function(e){return e.step==e.route_step&&4!=e.status_id}));window.localStorage.rows_onaproval=g.length;var y=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"180px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"},{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u0434\u0430\u0447",dataIndex:"tasks_count",width:"90px"}]);return Object(Qt.jsx)(Ba,{data:{dict:y,records:g},loading:_,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:c,GQL:s,UpdateForm:kr,visibleModalUpdate2:o,GQL2:s,UpdateForm2:Kr,visibleModalUpdate3:l,GQL3:s,UpdateForm3:od,visibleModalUpdate4:r,GQL4:s,UpdateForm4:kd,visibleModalUpdate5:d,GQL5:s,UpdateForm5:Kd,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:s,setCountManager:e.setCountManager})}))),qd=Ad,Bd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=(Ea.a.Title,Ea.a.Link),d=ea.a.Step,u=Object(it.useState)({log_username:l.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(j)}),[j]);var _=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=Object(it.useState)({step:"0"}),v=Object(nn.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC",e),Object(it.useEffect)((function(){e.initialValues&&(b({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var V=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(r,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(Qt.jsx)(d,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Hd=Bd,Gd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=(Ea.a.Title,Ea.a.Link),d=ea.a.Step,u=Object(it.useState)({log_username:l.username}),m=Object(nn.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(j),console.log("state2 form",j)}),[j]);var _=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=Object(it.useState)({step:"0"}),v=Object(nn.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC 2",e),Object(it.useEffect)((function(){e.initialValues2&&(b({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues2",e.initialValues2),y({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var V=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(at.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:j.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues2)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(r,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){p(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(Qt.jsx)(d,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues2)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Qd=Gd,Wd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=ea.a.Step,m=Object(it.useState)({log_username:r.username}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(b)}),[b]);var O=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)({step:"0"}),g=Object(nn.a)(v,2),y=g[0],V=g[1];Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(p({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:b.log_username}),V({step:e.initialValues3.documents[0].step}),x(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),N=Object(nn.a)(w,2);N[0],N[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Qt.jsx)(u,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Yd=Wd,Xd=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=ea.a.Step,m=Object(it.useState)({log_username:r.username}),j=Object(nn.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(b)}),[b]);var O=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=Object(it.useState)({step:"0"}),g=Object(nn.a)(v,2),y=g[0],V=g[1];Object(it.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(p({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:b.log_username}),V({step:e.initialValues4.documents[0].step}),x(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),N=Object(nn.a)(w,2);N[0],N[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:b.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){_(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(Qt.jsx)(u,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Zd=Xd,eu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Dt.j)(),d=(Ea.a.Title,Ea.a.Link),u=ea.a.Step,m=Object(it.useRef)("vertical");Object(it.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(it.useState)({log_username:r.username}),b=Object(nn.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(p)}),[p]);var h=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(nn.a)(h,2),x=f[0],v=f[1],g=Object(it.useState)({step:"0"}),y=Object(nn.a)(g,2),V=y[0],k=y[1];Object(it.useEffect)((function(){e.initialValues5&&(_({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:p.log_username}),k({step:e.initialValues5.documents[0].step}),v(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),C=Object(nn.a)(N,2);C[0],C[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(at.a)({},t)))},children:[Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(d,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(Qt.jsx)(u,{title:e.positionName})}))})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(Qt.jsx)(St.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),tu=eu,nu=(Ea.a.Title,Ea.a.Link,ea.a.Step,ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.positions.toString(),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{approved_by_me:t.id,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Lo||(Lo=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Uo||(Uo=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    reason\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)($o||($o=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Mo||(Mo=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(Jo||(Jo=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(zo||(zo=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(Ko||(Ko=Object(sn.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(it.useState)(!1),i=Object(it.useState)(!1),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(Dt.g)(Object(dn.a)(s.delete))(),d=Object(nn.a)(r,2),u=d[0],m=d[1].loading,j=Object(Dt.h)(s,"all")(),b=j.loading,p=j.data,_=j.refetch;Object(it.useEffect)((function(){_()}),[]);var O=p&&null!=p[Object.keys(p)[0]]?p[Object.keys(p)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],h=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ba,{data:{dict:h,records:O},loading:b,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:a,GQL:s,UpdateForm:Hd,visibleModalUpdate2:i,GQL2:s,UpdateForm2:Qd,visibleModalUpdate3:c,GQL3:s,UpdateForm3:Yd,visibleModalUpdate4:o,GQL4:s,UpdateForm4:Zd,visibleModalUpdate5:l,GQL5:s,UpdateForm5:tu,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},u({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:m,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})}))),su=nu,au=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],iu=ct.a.memo((function(e){var t=e.GQL,n=(e.GQL2,e.GQL3,e.GQL4,e.GQL5,e.UpdateForm),s=e.UpdateForm2,a=e.UpdateForm3,i=e.UpdateForm4,c=e.UpdateForm5,o=Object(Lt.a)(e,au),l={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(o.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Ao||(Ao=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(qo||(qo=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(Bo||(Bo=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Ho||(Ho=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(Go||(Go=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(Qo||(Qo=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(Wo||(Wo=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},r=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(Zs.a)(Xs.a.mark((function n(s){return Xs.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=an.a.useForm(),u=Object(nn.a)(d,1)[0],m=an.a.useForm(),j=Object(nn.a)(m,1)[0],b=an.a.useForm(),p=Object(nn.a)(b,1)[0],_=an.a.useForm(),O=Object(nn.a)(_,1)[0],h=an.a.useForm(),f=Object(nn.a)(h,1)[0],x=Object(it.useState)(!0),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=o.visibleModalUpdate?o.visibleModalUpdate:[],V=Object(nn.a)(y,2),k=V[0],w=V[1],N=o.visibleModalUpdate2?o.visibleModalUpdate2:[],C=Object(nn.a)(N,2),S=C[0],T=C[1],I=o.visibleModalUpdate3?o.visibleModalUpdate3:[],E=Object(nn.a)(I,2),F=E[0],P=E[1],R=o.visibleModalUpdate4?o.visibleModalUpdate4:[],D=Object(nn.a)(R,2),L=D[0],U=D[1],$=o.visibleModalUpdate5?o.visibleModalUpdate5:[],M=Object(nn.a)($,2),J=M[0],z=M[1],K={};K[t.table]=t.table?{global:{id:"= ".concat(o.selectedRowKeys[0])}}:{};var A=Object(Dt.h)(t,"one",{variables1:K})(),q=(A.loading,A.data),B=A.refetch,H=Object(Dt.h)(t,"one",{variables1:K})(),G=(H.loading,H.data),Q=H.refetch,W=Object(Dt.h)(t,"one",{variables1:K})(),Y=(W.loading,W.data),X=W.refetch,Z=Object(Dt.h)(t,"one",{variables1:K})(),ee=(Z.loading,Z.data),te=Z.refetch,ne=Object(Dt.h)(t,"one",{variables1:K})(),se=(ne.loading,ne.data),ae=ne.refetch;Object(it.useEffect)((function(){k&&B(K)}),[k]),Object(it.useEffect)((function(){S&&Q(K)}),[S]),Object(it.useEffect)((function(){F&&X(K)}),[F]),Object(it.useEffect)((function(){L&&te(K)}),[L]),Object(it.useEffect)((function(){J&&ae(K)}),[J]);var ie={documents:{global:{id:"=".concat(o.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},ce=Object(Dt.h)(l,"one",{variables1:K})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Dt.h)(l,"one",{variables1:K})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Dt.h)(l,"one",{variables1:K})(),je=(me.loading,me.data),be=me.refetch,pe=Object(Dt.h)(l,"one",{variables1:K})(),_e=(pe.loading,pe.data),Oe=pe.refetch,he=Object(Dt.h)(l,"one",{variables1:K})(),fe=(he.loading,he.data),xe=he.refetch;Object(it.useEffect)((function(){k&&le(ie)}),[k]),Object(it.useEffect)((function(){S&&ue(ie)}),[S]),Object(it.useEffect)((function(){F&&be(ie)}),[F]),Object(it.useEffect)((function(){L&&Oe(ie)}),[L]),Object(it.useEffect)((function(){J&&xe(ie)}),[J]);var ve=Object(Dt.g)(Object(dn.a)(t.update),(function(){w(!1)}))(),ge=Object(nn.a)(ve,2),ye=ge[0];ge[1].loading;return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",disabled:2!==o.selectedRowKeys.length,onClick:function(){w(!0)},children:[Object(Qt.jsx)(Tn.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Qt.jsx)(wn.a,{title:o.title,visible:k,width:600,onCancel:function(){w(!1),g(!0)},footer:null,children:Object(Qt.jsx)(n,{document:null===oe||void 0===oe?void 0:oe.documents[0],initialValues:q,form:u,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,r(n.files.fileList).then((function(e){i=e}));case 5:w(!1),a[t.exemplar]={id:o.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),ye({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:o.title,visible:S,width:600,onCancel:function(){T(!1),g(!0)},footer:null,children:Object(Qt.jsx)(s,{document:null===de||void 0===de?void 0:de.documents[0],initialValues:G,form:j,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,r(n.files.fileList).then((function(e){i=e}));case 5:T(!1),a[t.exemplar]={id:o.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),ye({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:o.title,visible:F,width:900,onCancel:function(){P(!1),g(!0)},footer:null,children:Object(Qt.jsx)(a,{document:null===je||void 0===je?void 0:je.documents[0],initialValues:Y,form:p,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,r(n.files.fileList).then((function(e){i=e}));case 5:P(!1),a[t.exemplar]={id:o.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),ye({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:o.title,visible:L,width:900,onCancel:function(){U(!1),g(!0)},footer:null,children:Object(Qt.jsx)(i,{document:null===_e||void 0===_e?void 0:_e.documents[0],initialValues:ee,form:O,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,r(n.files.fileList).then((function(e){i=e}));case 5:U(!1),a[t.exemplar]={id:o.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),ye({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(Qt.jsx)(wn.a,{title:o.title,visible:J,width:900,onCancel:function(){z(!1),g(!0)},footer:null,children:Object(Qt.jsx)(c,{document:null===fe||void 0===fe?void 0:fe.documents[0],initialValues:se,form:f,onFinish:function(){var e=Object(Zs.a)(Xs.a.mark((function e(n){var s,a,i;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,r(n.files.fileList).then((function(e){i=e}));case 5:z(!1),a[t.exemplar]={id:o.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),ye({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),cu=iu,ou=["GQL"],lu=ct.a.memo((function(e){var t,n,s=e.GQL,a=Object(Lt.a)(e,ou),i=Object(it.useState)([]),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=[];a.loading||(r=a.data.records.map((function(e){return e.id})));var d=Object(dn.a)(s.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(nn.a)(d,2),m=u[0],j=u[1];j.loading,j.error;return Object(it.useEffect)((function(){l(o.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return!0;return!1})))}),[a.data]),Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",style:{minHeight:168},loading:a.loading,columns:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.dict,dataSource:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:a.title?function(){return a.title({selectedRowKeys:o})}:null,bordered:a.bordered,onRow:function(e,t){return{onClick:function(t){l([e.key,e.document_id]),console.log(e.route_id)},onDoubleClick:function(t){var n;0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)?(m({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}),10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0),27==e.route_id&&a.visibleModalUpdate4[1](!0),29==e.route_id&&a.visibleModalUpdate5[1](!0)):(10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0),27==e.route_id&&a.visibleModalUpdate4[1](!0),29==e.route_id&&a.visibleModalUpdate5[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===o[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})),ru=lu,du=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f=Object(Dt.j)(),x=Ea.a.Link,v=Object(it.useState)({log_username:f.username}),g=Object(nn.a)(v,2),y=g[0],V=g[1],k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(f.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===y||void 0===y||null===(t=y.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),N=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===w||void 0===w?void 0:w.includes(e.id)})),C=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(y)}),[y]),Object(it.useEffect)((function(){e.initialValues&&V({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:y.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=y.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:y.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:y.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===y||void 0===y||null===(c=y.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===y||void 0===y||null===(l=y.document_options)||void 0===l?void 0:l.supllier)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===y||void 0===y||null===(u=y.document_options)||void 0===u?void 0:u.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===y||void 0===y||null===(b=y.document_options)||void 0===b?void 0:b.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===N||void 0===N?void 0:N.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(x,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){k(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),2!=y.status?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(an.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(cn.a.TextArea,{})}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),y.report?y.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(O=e.initialValues)||void 0===O||null===(h=O.document_tasks[0])||void 0===h?void 0:h.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(x,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){k(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}),1==(null===y||void 0===y?void 0:y.status)?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),uu=du,mu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C=Object(Dt.j)(),S=Ea.a.Link,T=Object(it.useState)({log_username:C.username}),I=Object(nn.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(it.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency_price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list[0])||void 0===k?void 0:k.received_from_counteragent_date})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),2!=E.status?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(an.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(cn.a.TextArea,{})}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(N=w.document_tasks[0])||void 0===N?void 0:N.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),ju=mu,bu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C=Object(Dt.j)(),S=Ea.a.Link,T=Object(it.useState)({log_username:C.username}),I=Object(nn.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(it.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list_production[0])||void 0===k?void 0:k.counteragent_contacts})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),2!=E.status?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(an.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(cn.a.TextArea,{})}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(N=w.document_tasks[0])||void 0===N?void 0:N.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),pu=bu,_u=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,k,w,N,C=Object(Dt.j)(),S=Ea.a.Link,T=Object(it.useState)({log_username:C.username}),I=Object(nn.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(it.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:E.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_internal_needs[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_internal_needs[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_internal_needs[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_internal_needs[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(k=V.data_agreement_list_internal_needs[0])||void 0===k?void 0:k.counteragent_contacts})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),2!=E.status?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(an.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(cn.a.TextArea,{})}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(N=w.document_tasks[0])||void 0===N?void 0:N.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(S,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){P(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Ou=_u,hu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_=Object(Dt.j)(),O=Ea.a.Link,h=Object(it.useState)({log_username:_.username}),f=Object(nn.a)(h,2),x=f[0],v=f[1],g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(_.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=null===x||void 0===x||null===(t=x.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),V=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===y||void 0===y?void 0:y.includes(e.id)})),k=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(x)}),[x]),Object(it.useEffect)((function(){e.initialValues&&v({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:x.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=x.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.fio_created})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:x.note})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===x||void 0===x||null===(c=x.document_options)||void 0===c?void 0:c.title)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===x||void 0===x||null===(l=x.document_options)||void 0===l?void 0:l.subject)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_custom[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===x||void 0===x||null===(u=x.document_options)||void 0===u?void 0:u.price)?Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "}),Object(Qt.jsx)(Nt.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_custom[0])||void 0===j?void 0:j.remark})]})}):"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("h3",{className:"marginTop",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===V||void 0===V?void 0:V.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(O,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){g(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})})),Object(Qt.jsx)(bn.a,{type:"horizontal"}),2!=x.status?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(an.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(cn.a.TextArea,{})}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(Qt.jsx)(xa,{showUploadList:!0,action:"https://"+dt.host+":"+dt.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?oa.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&oa.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{children:Object(Qt.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),x.report?x.report:"",Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)("h3",{className:"font-form-header",children:Object(Qt.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(Qt.jsx)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(b=e.initialValues)||void 0===b||null===(p=b.document_tasks[0])||void 0===p?void 0:p.document_tasks_files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)(Nt.a,{span:24,className:"document-view-wrap",children:[Object(Qt.jsx)(O,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){g(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))})]})]}),1==(null===x||void 0===x?void 0:x.status)?Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),fu=hu,xu=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.id,s=(t.positions.toString(),Object(rn.a)(Yo||(Yo=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                \n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                \n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(rn.a)(Xo||(Xo=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "]))),Object(rn.a)(Zo||(Zo=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(rn.a)(el||(el=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(rn.a)(tl||(tl=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(rn.a)(nl||(nl=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(rn.a)(sl||(sl=Object(sn.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"]))),{exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_receiver:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(al||(al=Object(sn.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        task_statuses{\n                            id\n                            name\n                        }\n                        document_tasks_logs{\n                            id\n                            task_id\n                            is_read\n                            type\n                            user_id\n                        }\n                        report\n                    }\n                }\n            "]))),one:Object(rn.a)(il||(il=Object(sn.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                    report\n                }\n            }\n            "])))},subscription:{all:Object(rn.a)(cl||(cl=Object(sn.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    report\n                }\n            }\n        "])))},update:Object(rn.a)(ol||(ol=Object(sn.a)(["\n        mutation updateDocumentTasks($document_tasks: JSON) {\n            updateDocumentTasks(document_tasks: $document_tasks) {\n            type\n            message\n        }\n        }\n        "]))),setTaskIsReadTrue:Object(rn.a)(ll||(ll=Object(sn.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))}),a=Object(it.useState)(!1),i=Object(it.useState)(!1),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(Dt.h)(s,"all")(),d=r.loading,u=r.data,m=r.refetch;Object(it.useEffect)((function(){m()}),[]);var j=u&&null!=u[Object.keys(u)[0]]?u[Object.keys(u)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id,status:e.status,is_cancelled:e.is_cancelled,note:e.note,deadline:e.deadline,date_created:e.date_created,user_id_created:e.user_id_created,fio_created:e.fio_created,user_id_receiver:e.user_id_receiver,fio_receiver:e.fio_receiver,route_id:e.route_id?e.route_id:10,document_options:e.document_options,task_files:e.task_files?e.task_files:{},task_statuses:e.task_statuses.name,document_tasks_logs:e.document_tasks_logs?e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==t.id}))]:[]}})):[],b=j.filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=b.length;var p=Hn([{title:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f",dataIndex:"fio_created",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.fio_created.localeCompare(t.fio_created)}},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"300px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e",dataIndex:"deadline",width:"214px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.deadline)-new Date(t.deadline)})),{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",width:"114px",tooltip:!0},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",width:"214px"}]);return Object(Qt.jsx)(ru,{data:{dict:p,records:j},loading:d,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(cu,{visibleModalUpdate:a,UpdateForm:uu,visibleModalUpdate2:i,UpdateForm2:ju,visibleModalUpdate3:c,UpdateForm3:pu,visibleModalUpdate4:o,UpdateForm4:Ou,visibleModalUpdate5:l,UpdateForm5:fu,GQL:s,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u043d\u0438\u044f",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})),vu=xu,gu=["reasonText","dataProps","setState","user"],yu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,gu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Vu=yu,ku=["reasonText","dataProps","setState","user"],wu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,ku),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Nu=wu,Cu=["reasonText","dataProps","setState","user"],Su=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Cu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Tu=Su,Iu=["reasonText","dataProps","setState","user"],Eu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Iu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Fu=Eu,Pu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(Dt.j)(),u=(Ea.a.Title,Ea.a.Link),m=ea.a.Step,j=Object(it.useState)({log_username:d.username}),b=Object(nn.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(p)}),[p]);var h=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(nn.a)(h,2),x=f[0],v=f[1],g=Object(it.useState)({step:"0"}),y=Object(nn.a)(g,2),V=y[0],k=y[1];console.log("PROPS UPDATE DOC",e),Object(it.useEffect)((function(){e.initialValues&&(_({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:p.log_username}),console.log("props.initialValues",e.initialValues),k({step:e.initialValues.documents[0].step}),v(e.initialValues.documents[0].route_data))}),[e.initialValues]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=C[0],T=C[1];return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:p.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(u,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){O(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(Qt.jsx)(m,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Vu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Fu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Qt.jsx)(Tu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Nu,{reasonText:S,dataProps:e,setState:_,user:d})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Ru=Pu,Du=["reasonText","dataProps","setState","user"],Lu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Du),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Uu=Lu,$u=["reasonText","dataProps","setState","user"],Mu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,$u),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Ju=Mu,zu=["reasonText","dataProps","setState","user"],Ku=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,zu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Au=["reasonText","dataProps","setState","user"],qu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Au),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return console.log("dataProps FORM2222",n),Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Bu=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=ea.a.Step,_=Object(it.useState)({log_username:j.username}),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(nn.a)(v,2),y=g[0],V=g[1],k=Object(it.useState)({step:"0"}),w=Object(nn.a)(k,2),N=w[0],C=w[1];Object(it.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(nn.a)(T,2),E=I[0],F=I[1],P=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),R=Object(nn.a)(P,2);R[0],R[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(at.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Qt.jsx)(p,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Uu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(qu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Qt.jsx)(Ku,{reasonText:E,dataProps:e,setState:f,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Ju,{reasonText:E,dataProps:e,setState:f,user:j})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,F(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Hu=Bu,Gu=["reasonText","dataProps","setState","user"],Qu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Gu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Wu=["reasonText","dataProps","setState","user"],Yu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Wu),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Xu=["reasonText","dataProps","setState","user"],Zu=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,Xu),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),em=["reasonText","dataProps","setState","user"],tm=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,em),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),nm=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=(ea.a.Step,Object(it.useState)({log_username:j.username})),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=(V[0],V[1]);Object(it.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),k({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),E=Object(nn.a)(I,2);E[0],E[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(at.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(Qu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(tm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(Zu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Yu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),sm=nm,am=["reasonText","dataProps","setState","user"],im=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,am),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),cm=["reasonText","dataProps","setState","user"],om=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,cm),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),lm=["reasonText","dataProps","setState","user"],rm=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,lm),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),dm=["reasonText","dataProps","setState","user"],um=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,dm),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),mm=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=(ea.a.Step,Object(it.useState)({log_username:j.username})),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=(V[0],V[1]);Object(it.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),k({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),E=Object(nn.a)(I,2);E[0],E[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(at.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(im,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(um,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(rm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(om,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),jm=mm,bm=["reasonText","dataProps","setState","user"],pm=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,bm),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),_m=["reasonText","dataProps","setState","user"],Om=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,_m),Object(it.useState)(!1)),c=Object(nn.a)(i,2),o=c[0],l=c[1],r=Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(nn.a)(r,2),u=d[0],m=d[1];return Object(Qt.jsx)(xn.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),oa.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),hm=["reasonText","dataProps","setState","user"],fm=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,hm),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),xm=["reasonText","dataProps","setState","user"],vm=ct.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Lt.a)(e,xm),Object(it.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(nn.a)(i,2),o=c[0],l=c[1];return Object(Qt.jsx)(xn.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(Qt.jsx)(St.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),gm=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=(ea.a.Step,Object(it.useState)({log_username:j.username})),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(O)}),[O]);var x=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=(V[0],V[1]);Object(it.useEffect)((function(){e.initialValues5&&(h({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:O.log_username}),k({step:e.initialValues5.documents[0].step}),g(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=C[0],T=C[1],I=Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),E=Object(nn.a)(I,2);E[0],E[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(at.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(pm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(vm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(fm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(Om,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsxs)("div",{children:[Object(Qt.jsx)(cn.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ym=gm,Vm=(Ea.a.Title,Ea.a.Link,ea.a.Step,ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(rl||(rl=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(rn.a)(dl||(dl=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(ul||(ul=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(ml||(ml=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(jl||(jl=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(bl||(bl=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(rn.a)(pl||(pl=Object(sn.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(it.useRef)(0),i=Object(it.useState)(!1),c=Object(it.useState)(!1),o=Object(it.useState)(!1),l=Object(it.useState)(!1),r=Object(it.useState)(!1),d=Object(Dt.g)(Object(dn.a)(s.delete))(),u=Object(nn.a)(d,2),m=u[0],j=u[1].loading,b=Object(Dt.h)(s,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(it.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var s,i,c,o;return a.current=_.documents.length,{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(i=e.route_id)||void 0===i?void 0:i.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],f=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(_a,{data:{dict:f,records:h},loading:p,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:i,GQL:s,UpdateForm:Ru,visibleModalUpdate2:c,GQL2:s,UpdateForm2:Hu,visibleModalUpdate3:o,GQL3:s,UpdateForm3:sm,visibleModalUpdate4:l,GQL4:s,UpdateForm4:jm,visibleModalUpdate5:r,GQL5:s,UpdateForm5:ym,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r,GQL:s})}))),km=n(509),wm=(Ea.a.Title,Ea.a.Link),Nm=ea.a.Step,Cm=ct.a.memo((function(e){var t=Object(Dt.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(_l||(_l=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                description\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Ol||(Ol=Object(sn.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    description\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(rn.a)(hl||(hl=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(fl||(fl=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(xl||(xl=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(vl||(vl=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(it.useState)(!1),i=Object(it.useState)(!1),c=Object(Dt.g)(Object(dn.a)(s.delete))(),o=Object(nn.a)(c,2),l=o[0],r=o[1].loading,d=Object(Dt.h)(s,"all")(),u=d.loading,m=d.data,j=d.refetch;Object(it.useEffect)((function(){j()}),[]);var b=(m&&null!=m[Object.keys(m)[0]]?m[Object.keys(m)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 2==e.status_id})),p=Hn([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:!0},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:!0},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(Qt.jsx)(_a,{data:{dict:p,records:b},loading:u,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(pa,{visibleModalUpdate:a,visibleModalUpdate2:i,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:s,GQL2:s,UpdateForm:Tm,UpdateForm2:Im,update:!0,width:750}),Object(Qt.jsx)(xn.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},l({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(Qt.jsx)(On.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(Qt.jsxs)(St.a,{type:"dashed",danger:!0,loading:r,disabled:1!==e.selectedRowKeys.length,children:[Object(Qt.jsx)(hn.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,GQL:s})})),Sm=/^\d+$/,Tm=ct.a.memo((function(e){var t,n,s=Object(Dt.j)(),a=Object(it.useState)({log_username:s.username}),i=Object(nn.a)(a,2),c=i[0],o=i[1],l=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(c)}),[c]);var r=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=Object(it.useState)({step:"0"}),b=Object(nn.a)(j,2),p=b[0],_=b[1];Object(it.useEffect)((function(){e.initialValues&&(o({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].price,supllier:e.initialValues.documents[0].supllier,subject:e.initialValues.documents[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:c.log_username}),console.log("props.initialValues",e.initialValues),_({step:e.initialValues.documents[0].step}),m(e.initialValues.documents[0].route_data))}),[e.initialValues]);var O=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(c),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){o(Object.assign({},c,Object(at.a)({},t)))},children:[Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:'"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:'"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Sm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(wm,{children:Object(Qt.jsxs)("a",{"data-fileid":e.id,onClick:O,children:[e.filename," ",Object(Qt.jsx)(km.a,{})]})})," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)(St.a,{onClick:function(){l(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:p.step-1,className:"steps-form-update",children:u.map((function(e){return Object(Qt.jsx)(Nm,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Im=ct.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Dt.j)(),r=Object(it.useState)({log_username:l.username}),d=Object(nn.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(u)}),[u]);var b=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=Object(it.useState)({step:"0"}),f=Object(nn.a)(h,2),x=f[0],v=f[1];console.log("PROPS UPDATE DOC 2",e),Object(it.useEffect)((function(){e.initialValues2&&(m({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:u.log_username}),v({step:e.initialValues2.documents[0].step}),O(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var g=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),V=Object(nn.a)(y,2),k=V[0],w=V[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(ga.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"1"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"2"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"3"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"4"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"5"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"6"}],className:"form-radio",value:k})}),Object(Qt.jsx)(an.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Sm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(Qt.jsx)(an.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(Qt.jsx)(an.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(an.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(Qt.jsx)(cn.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(wm,{children:Object(Qt.jsxs)("a",{"data-fileid":e.id,onClick:g,children:[e.filename," ",Object(Qt.jsx)(km.a,{})]})})," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)(St.a,{onClick:function(){j(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(Qt.jsx)(Nm,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsxs)(Nt.a,{span:24,children:[Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward2,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward2,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(Qt.jsxs)(Nt.a,{span:24,className:"marginTop",children:[Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Qt.jsx)(bn.a,{type:"vertical"}),Object(Qt.jsx)(St.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(Qt.jsx)(cn.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(Qt.jsx)(St.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),Em=Cm,Fm=kt.a.Content,Pm=Object(Rt.withRouter)((function(e){var t=Object(Rt.useLocation)().pathname,n=Object(Dt.j)(),s=Object(it.useState)("Test"),a=Object(nn.a)(s,2),i=a[0],c=a[1],o=Object(it.useState)({revised:"0",approved:"0",rejected:"0",onaproval:"0",type:"count"}),l=Object(nn.a)(o,2),r=l[0],d=l[1],u=Object(it.useState)(null),m=Object(nn.a)(u,2),j=m[0],b=m[1];if(Object(it.useEffect)((function(){console.log("dc effect",j)}),[j]),Object(it.useEffect)((function(){console.log("dc2 effect",r),(null===j||void 0===j?void 0:j.setValue)&&"function"==typeof j.setValue&&j.setValue((function(e){var t=Object.assign({},e);return t.revised=e.revised-r.revised,t.approved=e.approved-r.approved,t.rejected=e.rejected-r.rejected,t.onaproval=e.onaproval-r.onaproval,t}))}),[r]),("/document-control/"===t||"/document-control"===t)&&n.documentControl.orders.select)return Object(Qt.jsx)(Rt.Redirect,{to:"/document-control/orders"});return Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsx)(en,{title:i,user:n}),Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsx)(Ws,{setHeaderTitle:c,setCountManager:d,countF:function e(t){console.log("Setter",t),console.log("Setter2",e);b({setValue:function(e){t(e)},stateSetter:t})}}),Object(Qt.jsx)(kt.a,{className:"content-layout",children:Object(Qt.jsxs)(Fm,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(Qt.jsx)(Rt.Route,{path:"/document-control/orders",component:Object(Dt.a)(Aa)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/reviseduser",component:Object(Dt.a)(Si)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/approveduser",component:Object(Dt.a)(Ll)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/rejecteduser",component:Object(Dt.a)(Yl)}),Object(Qt.jsx)(Rt.Route,{exact:!0,path:"/document-control/on-approval",render:function(e){return Object(Qt.jsx)(qd,Object(at.a)(Object(at.a)({},e),{},{title:"Props through render"}))},setCountManager:d}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/on-approval-list",component:Object(Dt.a)(su)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/approved",component:Object(Dt.a)(Vm)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/rejected",component:Object(Dt.a)(Em)}),Object(Qt.jsx)(Rt.Route,{path:"/document-control/for-execution-inbox",component:Object(Dt.a)(vu)})]})})]})]})})),Rm=["title","user"],Dm=kt.a.Header,Lm=Kt.a.useBreakpoint,Um=ct.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Lt.a)(e,Rm),Lm()),a=Object(Rt.useHistory)(),i=Object(Rt.useLocation)().pathname;return Object(Qt.jsx)("div",{children:Object(Qt.jsx)(Dm,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(Qt.jsxs)(Tt.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(Qt.jsx)(Nt.a,{flex:"auto",style:{color:"c40c46"},children:Object(Qt.jsx)(At.a,{className:"site-page-header",backIcon:Object(Qt.jsx)(Ut.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(Qt.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(Qt.jsx)(Nt.a,{flex:"auto",children:Object(Qt.jsx)("h1",{style:{color:"white"},children:t})}):Object(Qt.jsx)(Qt.Fragment,{}),Object(Qt.jsx)(Nt.a,{children:Object(Qt.jsx)(qt.a,{shape:"square",size:"small",icon:Object(Qt.jsx)($t.a,{})})}),Object(Qt.jsx)(Nt.a,{flex:"70px",style:{marginRight:"30px"},children:Object(Qt.jsx)(Bt.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(Qt.jsx)(Ht.a,{overlay:Object(Qt.jsxs)(Gt.a,{children:[n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(Qt.jsx)(Mt.a,{}),"ADMIN"]}),n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(Qt.jsx)(Jt.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(Qt.jsx)(Jt.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(Qt.jsx)($t.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(Qt.jsxs)(Gt.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(Qt.jsx)(zt.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(Qt.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),$m=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],Mm=Object(rn.a)(gl||(gl=Object(sn.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),Jm=Object(rn.a)(yl||(yl=Object(sn.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),zm=Object(rn.a)(Vl||(Vl=Object(sn.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Km=Object(rn.a)(kl||(kl=Object(sn.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),Am=Object(rn.a)(wl||(wl=Object(sn.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),qm=ct.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Lt.a)(e,$m),m=an.a.useForm(),j=Object(nn.a)(m,1)[0],b=an.a.useForm(),p=Object(nn.a)(b,1)[0],_=an.a.useForm(),O=Object(nn.a)(_,1)[0],h=an.a.useForm(),f=Object(nn.a)(h,1)[0],x=an.a.useForm(),v=Object(nn.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(nn.a)(g,2),V=y[0],k=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],N=Object(nn.a)(w,2),C=N[0],S=N[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(nn.a)(T,2),E=I[0],F=I[1],P=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(nn.a)(P,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(nn.a)(U,2),M=$[0],J=$[1],z=Object(it.useState)(!0),K=Object(nn.a)(z,2),A=K[0],q=K[1],B=Object(Dt.j)(),H=function(){k(!1),S(!1),F(!1),L(!1),J(!1),q(!0)},G=function(){q(!1)};wn.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Dt.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Dt.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Dt.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Dt.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Dt.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(it.useEffect)((function(){te&&j.resetFields()}),[te]),Object(it.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(it.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(it.useEffect)((function(){de&&f.resetFields()}),[de]),Object(it.useEffect)((function(){je&&v.resetFields()}),[je]),Object(it.useEffect)((function(){V&&ne(Q)}),[V]),Object(it.useEffect)((function(){C&&ie(W)}),[C]),Object(it.useEffect)((function(){E&&le(Y)}),[E]),Object(it.useEffect)((function(){D&&ue(X)}),[D]),Object(it.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Dt.g)(Object(dn.a)(t.update),(function(){k(!1),S(!1),F(!1),L(!1),J(!1),q(!0)}))(),_e=Object(nn.a)(pe,2),Oe=_e[0],he=(_e[1].loading,Object(it.useState)()),fe=Object(nn.a)(he,2),xe=fe[0],ve=fe[1],ge=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},ye=Object(Ds.a)(Am,ge),Ve=(ye.loading,ye.data),ke=ye.refetch;Object(it.useEffect)((function(){V&&ke(ge)}),[V]);var we=Ve&&null!=Ve[Object.keys(Ve)[0]]?Ve[Object.keys(Ve)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ne=Object(dn.a)(Mm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ce=Object(nn.a)(Ne,2),Se=Ce[0],Te=Ce[1],Ie=(Te.loading,Te.error,function(e){Se({variables:{comment:{user_id:B.id,username:B.username,fio:B.fio,document_id:u.selectedRowKeys[0],position:B.position_names[0],comment:xe}}}),ke(ge),e.resetFields(["comments"])}),Ee=function(e,t){e.target.value.length>0&&ve(e.target.value)},Fe=Object(it.useState)(),Pe=Object(nn.a)(Fe,2),Re=Pe[0],De=Pe[1],Le=Object(it.useState)(),Ue=Object(nn.a)(Le,2),$e=Ue[0],Me=Ue[1],Je=Object(it.useState)(),ze=Object(nn.a)(Je,2),Ke=ze[0],Ae=ze[1],qe=Object(dn.a)(Jm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Be=Object(nn.a)(qe,2),He=Be[0],Ge=Be[1],Qe=(Ge.loading,Ge.error,Object(dn.a)(zm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),We=Object(nn.a)(Qe,2),Ye=(We[0],We[1]),Xe=(Ye.loading,Ye.error,function(){oa.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),Ze=function(){Me(7)},et=function(){Me(2)};console.log("route_data",Ke),console.log("data",te);var tt=function(e){console.log("CLIIIICK",e),at({variables:{document_files:{id:e.id}}})},nt=Object(dn.a)(Km,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),st=Object(nn.a)(nt,2),at=st[0],ct=st[1];ct.loading,ct.error;return Object(Qt.jsxs)(Qt.Fragment,{children:[Object(Qt.jsxs)(St.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){k(!0)},children:[Object(Qt.jsx)(Tn.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(Qt.jsx)(wn.a,{title:u.title,visible:V,centered:!0,width:900,onOk:function(){j.submit()},onCancel:function(){k(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(c,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Ae(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Ae(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Ae(te.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,HandleDeleteFile:tt,modalCancelHandler:H,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(o,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Ae(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Ae(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,HandleDeleteFile:tt,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Ae(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:H,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){F(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(l,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Ae(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Ae(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Ae(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:H,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(r,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Ae(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Ae(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Ae(de.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:H,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:A})}),Object(Qt.jsx)(wn.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(Qt.jsx)(d,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Ae(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==B.id})).filter((function(e){return e.user_id==B.id})).length&&He({variables:{signature:{user_id:B.id,username:B.username,position:B.position_names[0],fio:B.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Ae(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&De(e)},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Ae(je.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:H,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:A})})]})})),Bm=ct.a.memo((function(e){var t=Object(it.useState)([]),n=Object(nn.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(it.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsx)(Ln.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onChange:e.onChange,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id]),console.log("SelectedRowKeys",s)},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),Hm=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(Qt.jsxs)("div",{style:{padding:8},children:[Object(Qt.jsx)(cn.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(Qt.jsxs)(Bt.b,{children:[Object(Qt.jsx)(St.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(Qt.jsx)(Mn.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(Qt.jsx)(St.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(Qt.jsx)(Mn.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(Qt.jsx)(zn.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},Gm=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],Qm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Qt.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},Wm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(Qt.jsx)(Ct.a,{title:t,color:"grey",children:Object(Qt.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},Ym=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Lt.a)(e,Gm);if(d)return Object(at.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=Qm;return r&&(m=Wm),Object(at.a)(Object(at.a)({title:Qm(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return Hm(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},Xm=(n(95),n(242)),Zm={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(rn.a)(Nl||(Nl=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(rn.a)(Cl||(Cl=Object(sn.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                files{\n                    id\n                    filename\n                }\n                signatures{\n                    id\n                    document_id\n                    user_id\n                    username\n                    date_signature\n                    position\n                    fio\n                }\n                step\n                route_data\n            }\n        }\n        "])))},subscription:{all:[Object(rn.a)(Sl||(Sl=Object(sn.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(rn.a)(Tl||(Tl=Object(sn.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(rn.a)(Il||(Il=Object(sn.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(rn.a)(El||(El=Object(sn.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},ej=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b=Object(Dt.j)(),p=(Ea.a.Title,Ea.a.Link),_=ea.a.Step,O=Object(it.useState)({log_username:b.username}),h=Object(nn.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form.setFieldsValue(f)}),[f]);var g=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(nn.a)(g,2),V=y[0],k=y[1],w=Object(it.useState)({step:"0"}),N=Object(nn.a)(w,2),C=N[0],S=N[1];console.log("PROPS UPDATE DOC",e),Object(it.useEffect)((function(){e.initialValues&&(x({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:f.log_username}),console.log("props.initialValues",e.initialValues),S({step:e.initialValues.documents[0].step}),k(e.initialValues.documents[0].route_data))}),[e.initialValues]);var T=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(nn.a)(I,2);E[0],E[1];return Object(Qt.jsxs)(an.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.supllier})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:f.price})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.files)||void 0===o?void 0:o.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(p,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){v(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(l=e.initialValues)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.signatures)||void 0===d?void 0:d.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:V.map((function(e){return Object(Qt.jsx)(_,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(bn.a,{type:"horizontal"})}),Object(Qt.jsx)(Nt.a,{span:24,className:"marginTop",children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(u=e.initialValues)||void 0===u||null===(m=u.documents[0])||void 0===m||null===(j=m.reason)||void 0===j?void 0:j.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),tj=ej,nj=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=ea.a.Step,_=Object(it.useState)({log_username:j.username}),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(nn.a)(v,2),y=g[0],V=g[1],k=Object(it.useState)({step:"0"}),w=Object(nn.a)(k,2),N=w[0],C=w[1];Object(it.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(nn.a)(T,2),E=(I[0],I[1],Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject)),F=Object(nn.a)(E,2);F[0],F[1];return Object(Qt.jsxs)(an.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(at.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.currency_price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.sider_signatures_date})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Qt.jsx)(p,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(bn.a,{type:"horizontal"})}),Object(Qt.jsx)(Nt.a,{span:24,className:"marginTop",children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),sj=nj,aj=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=(ea.a.Step,Object(it.useState)({log_username:j.username})),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=(V[0],V[1]);Object(it.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),k({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=(C[0],C[1],Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject)),T=Object(nn.a)(S,2);T[0],T[1];return Object(Qt.jsxs)(an.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(at.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(bn.a,{type:"horizontal"})}),Object(Qt.jsx)(Nt.a,{span:24,className:"marginTop",children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),ij=aj,cj=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=(ea.a.Step,Object(it.useState)({log_username:j.username})),_=Object(nn.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(nn.a)(x,2),g=(v[0],v[1]),y=Object(it.useState)({step:"0"}),V=Object(nn.a)(y,2),k=(V[0],V[1]);Object(it.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),k({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(nn.a)(N,2),S=(C[0],C[1],Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject)),T=Object(nn.a)(S,2);T[0],T[1];return Object(Qt.jsxs)(an.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(at.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.subject})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.price})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.currency})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_name_division})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.executor_phone_number})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:O.counteragent_contacts})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){f(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})}))}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(bn.a,{type:"horizontal"})}),Object(Qt.jsx)(Nt.a,{span:24,className:"marginTop",children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),oj=cj,lj=ct.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Dt.j)(),b=(Ea.a.Title,Ea.a.Link),p=ea.a.Step,_=Object(it.useState)({log_username:j.username}),O=Object(nn.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(it.useEffect)((function(){e.form5.setFieldsValue(h)}),[h]);var v=Object(it.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(nn.a)(v,2),y=g[0],V=g[1],k=Object(it.useState)({step:"0"}),w=Object(nn.a)(k,2),N=w[0],C=w[1];Object(it.useEffect)((function(){e.initialValues5&&(f({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:h.log_username}),C({step:e.initialValues5.documents[0].step}),V(e.initialValues5.documents[0].route_data),console.log("----------------------------------",e))}),[e.initialValues5]);var S=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(it.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(nn.a)(T,2),E=(I[0],I[1],Object(it.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject)),F=Object(nn.a)(E,2);F[0],F[1];return Object(Qt.jsxs)(an.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(h)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(at.a)({},t)))},children:[Object(Qt.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(Qt.jsx)("br",{}),Object(Qt.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(Qt.jsxs)("h4",{children:[Object(Qt.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.title})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.remark})]})}),Object(Qt.jsx)("div",{className:"form-item-wrap",children:Object(Qt.jsxs)(Tt.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Qt.jsx)(Nt.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(Qt.jsx)(Nt.a,{span:12,children:h.subject})]})}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"document-view-wrap",children:[Object(Qt.jsx)(b,{children:Object(Qt.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(Qt.jsx)(St.a,{onClick:function(){x(e)},shape:"circle",icon:Object(Qt.jsx)(Tn.a,{})})," ",Object(Qt.jsx)("br",{})]})})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsxs)(an.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(Qt.jsx)(Qt.Fragment,{children:Object(Qt.jsxs)("div",{className:"signature-view-wrap",children:[Object(Qt.jsx)("span",{className:"signature-view-position",children:e.position}),Object(Qt.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(Qt.jsx)("span",{className:"signature-view-date",children:Object(Dt.c)(e.date_signature)})]})})})),Object(Qt.jsx)(ea.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:y.map((function(e){return Object(Qt.jsx)(p,{title:e.positionName})}))})]}),Object(Qt.jsxs)(Tt.a,{children:[Object(Qt.jsx)(Nt.a,{span:24,children:Object(Qt.jsx)(bn.a,{type:"horizontal"})}),Object(Qt.jsx)(Nt.a,{span:24,className:"marginTop",children:Object(Qt.jsx)(St.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(Qt.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(Qt.jsx)("br",{})]})}))}),Object(Qt.jsx)(bn.a,{type:"horizontal"}),Object(Qt.jsx)(an.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(Qt.jsx)("div",{className:"comments",children:Object(Qt.jsxs)("li",{className:"comment-item",children:[Object(Qt.jsx)("span",{className:"user-position-comment",children:e.position}),Object(Qt.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(Qt.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(Qt.jsx)("br",{}),Object(Qt.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(Qt.jsx)(an.a.Item,{name:"date_created",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"route_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"status_id",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"step",hidden:!0}),Object(Qt.jsx)(an.a.Item,{name:"log_username",hidden:!0})]})})),rj=lj,dj=os.a.Option,uj=ct.a.memo((function(e){var t=Object(Dt.j)().positions.toString(),n=(jr.a.RangePicker,an.a.useForm(),Object(it.useState)(!1)),s=Object(it.useState)(!1),a=Object(it.useState)(!1),i=Object(it.useState)(!1),c=Object(it.useState)(!1),o=Object(it.useState)(),l=Object(nn.a)(o,2),r=l[0],d=l[1],u=Object(it.useState)([]),m=Object(nn.a)(u,2),j=(m[0],m[1]),b=Object(it.useState)(),p=Object(nn.a)(b,2),_=p[0],O=p[1],h=Object(Dt.h)(Zm,"all",{variables:r})(),f=h.loading,x=h.data,v=h.refetch,g=x&&null!=x[Object.keys(x)[0]]?x[Object.keys(x)[0]].map((function(e){var n,s,a,i,c=0,o="-",l="-";return 0!=e.data_one.length&&(c=e.data_one[0].price,o=e.title,l=e.data_one[0].supllier),0!=e.data_agreement_list.length&&(c=e.data_agreement_list[0].price,l=e.title),0!=e.data_agreement_list_production.length&&(c=e.data_agreement_list_production[0].price,l=e.title),0!=e.data_agreement_list_internal_needs.length&&(c=e.data_agreement_list_internal_needs[0].price,l=e.title),0!=e.data_custom.length&&(o=e.title),{id:e.id,key:e.id,title:o,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==t}))+1:[],step:e.step,route_id:e.route_id.id,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:"",price:c,counteragent_name:l}})):[],y=Object(it.useState)(),V=Object(nn.a)(y,2),k=V[0],w=V[1],N=function(){var e=Object(Zs.a)(Xs.a.mark((function e(t){var n,s;return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),void 0==t.dateFrom&&void 0==t.dateTo?console.log("undefined"):void 0!=t.dateFrom&&void 0!=t.dateTo&&(n=t.dateFrom._d,s=t.dateTo._d,d({documents:{global:{date_created:"::date<= date'".concat(Object(Xm.a)(s,"dd-MM-yyyy"),"' and date_created::date>=date'").concat(Object(Xm.a)(n,"dd-MM-yyyy"),"'"),ORDER_BY:["date_created desc"]}}})),v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Ym([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"134px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},{title:"\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"counteragent_name",width:"130px",type:"search",tooltip:!0,sorter:function(e,t){return e.counteragent_name.localeCompare(t.counteragent_name)},sortDirections:["ascend","descend"]},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",width:"55px",tooltip:!0,sorter:function(e,t){return e.price-t.price},sortDirections:["ascend","descend"]},Object(_n.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(_n.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]),S=function(){console.log("currentTableData Excel //////////",_),fetch("/api/tabledata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentTableData:_})}),Object(Zs.a)(Xs.a.mark((function e(){return Xs.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.b)("/api/tabledata","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432 "+Object(Dt.d)(new Date)+".xlsx");case 2:case"end":return e.stop()}}),e)})))()},T="YYYY-MM-DD HH:mm:ss";return Object(Qt.jsxs)("span",{children:[Object(Qt.jsx)(an.a,{onFinish:N,name:"filterForm",onValuesChange:function(e,t){w(Object.assign({},k,Object(at.a)({},t)))},children:Object(Qt.jsxs)(Tt.a,{style:{paddingLeft:"10px",paddingRight:"10px",marginBottom:"15px",marginTop:"15px"},children:[Object(Qt.jsxs)(Nt.a,{span:2,style:{marginRight:"25px"},children:["\u041e\u0442:",Object(Qt.jsx)(an.a.Item,{name:"dateFrom",children:Object(Qt.jsx)(jr.a,{format:T,locale:pr.a,style:{width:"100%"}})})]}),Object(Qt.jsxs)(Nt.a,{span:2,style:{marginRight:"25px"},children:["\u0414\u043e:",Object(Qt.jsx)(an.a.Item,{name:"dateTo",children:Object(Qt.jsx)(jr.a,{format:T,locale:pr.a,style:{width:"100%"}})})]}),Object(Qt.jsxs)(Nt.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(Qt.jsx)(an.a.Item,{name:"documentType",children:Object(Qt.jsxs)(os.a,{style:{width:"100%"},children:[Object(Qt.jsx)(dj,{value:10,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"}),Object(Qt.jsx)(dj,{value:24,children:"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(Qt.jsx)(dj,{value:26,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(Qt.jsx)(dj,{value:27,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"}),Object(Qt.jsx)(dj,{value:29,children:"\u0414\u0440\u0443\u0433\u043e\u0439"}),Object(Qt.jsx)(dj,{value:void 0})]})})]}),Object(Qt.jsxs)(Nt.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(Qt.jsx)(an.a.Item,{name:"documentStatus",children:Object(Qt.jsxs)(os.a,{style:{width:"100%"},children:[Object(Qt.jsx)(dj,{value:5,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(Qt.jsx)(dj,{value:4,children:"\u0423\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d"}),Object(Qt.jsx)(dj,{value:2,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d"}),Object(Qt.jsx)(dj,{value:7,children:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0435"}),Object(Qt.jsx)(dj,{value:void 0})]})})]}),Object(Qt.jsxs)(Nt.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u043e\u0442:",Object(Qt.jsx)(an.a.Item,{name:"priceFrom",children:Object(Qt.jsx)(cn.a,{})})]}),Object(Qt.jsxs)(Nt.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u0434\u043e:",Object(Qt.jsx)(an.a.Item,{name:"priceTo",children:Object(Qt.jsx)(cn.a,{})})]}),Object(Qt.jsx)(Nt.a,{span:2,style:{marginRight:"25px",marginTop:"20px"},children:Object(Qt.jsx)(St.a,{type:"primary",htmlType:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})})]})}),Object(Qt.jsx)(Bm,{data:{dict:C,records:g},loading:f||!1,title:function(e){return Object(Qt.jsx)(Dn,{buttons:[Object(Qt.jsx)(St.a,{onClick:S,children:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 Excel"}),Object(Qt.jsx)(qm,{visibleModalUpdate:n,GQL:Zm,UpdateForm:tj,visibleModalUpdate2:s,GQL2:Zm,UpdateForm2:sj,visibleModalUpdate3:a,GQL3:Zm,UpdateForm3:ij,visibleModalUpdate4:i,GQL4:Zm,UpdateForm4:oj,visibleModalUpdate5:c,GQL5:Zm,UpdateForm5:rj,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},onChange:function(e,t,n,s){O(s.currentDataSource),j(t)},visibleModalUpdate:n,visibleModalUpdate2:s,visibleModalUpdate3:a,visibleModalUpdate4:i,visibleModalUpdate5:c})]})})),mj=uj,jj=(kt.a.Header,kt.a.Content),bj=ct.a.memo((function(e){var t=Object(Dt.j)(),n=Object(Rt.useLocation)().pathname,s=Object(it.useState)("\u041f\u043e\u0438\u0441\u043a"),a=Object(nn.a)(s,2),i=a[0];a[1];return"/document-search/"!==n&&"/document-search"!==n||!t.documentSearch.search.select?Object(Qt.jsxs)(kt.a,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(Qt.jsx)(Um,{title:i,user:t}),Object(Qt.jsx)(kt.a,{children:Object(Qt.jsx)(kt.a,{className:"content-layout",children:Object(Qt.jsx)(jj,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(Qt.jsx)(Rt.Route,{path:"/document-search/search",component:Object(Dt.a)(mj)})})})})]}):Object(Qt.jsx)(Rt.Redirect,{to:"/document-search/search"})})),pj=Object(Rt.withRouter)(bj),_j=dt.port,Oj=dt.graphql;console.log("Starting SD Client. Host is "+window.SERVER_DATA);var hj=new xt.a({uri:"https://"+window.SERVER_DATA+":".concat(_j).concat(Oj.path)}),fj=new yt.a({uri:"wss://"+window.SERVER_DATA+":".concat(_j).concat(Oj.path),options:{reconnect:!0}}),xj=(kt.a.Header,kt.a.Content),vj=(kt.a.Sider,Object(ft.a)((function(e){var t=e.graphQLErrors,n=e.networkError,s=e.operation;e.response;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(JSON.stringify(n),", Path: ").concat(a,". \n"),"[Details]: operation: ".concat(JSON.stringify(s.variables),". \n"),"[Details]: operationName: ".concat(JSON.stringify(s.operationName),". \n"))})),n&&(console.log("[Network error]: ".concat(JSON.stringify(n))),wt.a.info({message:Object(Qt.jsxs)("div",{id:"ant_notification",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c ZiK-\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430.",Object(Qt.jsx)("br",{}),"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u043d\u0438\u043b\u0430\u0441\u044c \u0447\u0435\u0440\u0435\u0437 5 \u043c\u0438\u043d\u0443\u0442, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0432\u0430\u0448\u0435\u0439 \u0441\u043b\u0443\u0436\u0431\u043e\u0439 IT."]}),duration:10,placement:"bottomRight"}))}))),gj=Object(Vt.a)((function(e,t){var n=t.headers,s=localStorage.getItem("token");return{headers:Object(at.a)(Object(at.a)({},n),{},{authorization:s?"Bearer ".concat(s):""})}})),yj=Object(vt.a)((function(e){var t=e.query,n=Object(gt.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),fj,gj.concat(hj)),Vj=new mt.a({link:ht.a.from([vj,yj]),cache:new jt.a}),kj=Object(Qt.jsx)(Nt.a,{className:"main-menu-col",children:Object(Qt.jsx)(Ct.a,{placement:"rightTop",title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0431\u043e\u0440\u043e\u0442",children:Object(Qt.jsx)(St.a,{type:"solid",className:"main-menu-button",children:Object(Qt.jsxs)(Pt.c,{to:"document-control",style:{fontSize:"25px"},children:[" ",Object(Qt.jsx)(bt.a,{style:{marginRight:7}})," \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 ",Object(Qt.jsx)("p",{className:"page-desc",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})]})})})}),wj=Object(Qt.jsx)(Nt.a,{className:"main-menu-col",children:Object(Qt.jsx)(Ct.a,{placement:"rightTop",title:"\u041e\u0442\u0447\u0435\u0442\u044b",children:Object(Qt.jsx)(St.a,{type:"solid",className:"main-menu-button",children:Object(Qt.jsxs)(Pt.c,{to:"document-report",style:{fontSize:"25px"},children:[" ",Object(Qt.jsx)(pt.a,{style:{marginRight:7}})," \u041e\u0442\u0447\u0435\u0442\u044b ",Object(Qt.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c"})]})})})}),Nj=Object(Qt.jsx)(Nt.a,{className:"main-menu-col",children:Object(Qt.jsx)(Ct.a,{placement:"rightTop",title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438",children:Object(Qt.jsx)(St.a,{type:"solid",className:"main-menu-button",children:Object(Qt.jsxs)(Pt.c,{to:"document-history",style:{fontSize:"25px"},children:[" ",Object(Qt.jsx)(_t.a,{style:{marginRight:7}}),"  \u0418\u0441\u0442\u043e\u0440\u0438\u044f ",Object(Qt.jsx)("p",{className:"page-desc",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})]})})})}),Cj=Object(Qt.jsx)(Nt.a,{className:"main-menu-col",children:Object(Qt.jsx)(Ct.a,{placement:"rightTop",title:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c",children:Object(Qt.jsx)(St.a,{type:"solid",className:"main-menu-button",children:Object(Qt.jsxs)(Pt.c,{to:"document-search",style:{fontSize:"25px"},children:[Object(Qt.jsx)(Ot.a,{style:{marginRight:7}})," \u041f\u043e\u0438\u0441\u043a ",Object(Qt.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c"})]})})})}),Sj=ct.a.memo((function(){Object(Rt.useLocation)().pathname;var e=Object(Dt.j)();return console.log("user",e),Object(Qt.jsxs)(kt.a,{children:[Object(Qt.jsx)(en,{title:"",user:e}),Object(Qt.jsx)(kt.a,{children:Object(Qt.jsx)(kt.a,{className:"content-layout",children:Object(Qt.jsx)(xj,{className:"site-layout-background",style:{padding:0,margin:0,minHeight:280},children:Object(Qt.jsx)("div",{style:{paddingTop:50},children:Object(Qt.jsxs)(Tt.a,{justify:"center",style:{margin:"0",top:"50%",transform:"translate(0,-50%)",position:"absolute",width:"99%"},children:[e.documentControl.select?kj:null,e.documentReport.select?wj:null,e.documentHistory.select?Nj:null,e.documentSearch.select?Cj:null]})})})})})]})})),Tj=function(){return Object(Qt.jsxs)(Rt.Switch,{children:[Object(Qt.jsx)(Rt.Route,{path:"/login",component:mn}),Object(Qt.jsx)(Rt.Route,{path:"/logout",component:function(){return Object(Qt.jsx)(Qt.Fragment,{})}}),Object(Qt.jsx)(Rt.Route,{path:"/",exact:!0,component:Sj}),Object(Qt.jsx)(Rt.Route,{path:"/document-control",component:Object(Dt.a)(Pm)}),Object(Qt.jsx)(Rt.Route,{path:"/document-search",component:Object(Dt.a)(pj)}),Object(Qt.jsx)(Rt.Route,{path:"/admin",component:Object(Dt.a)(Rs)}),Object(Qt.jsx)(Rt.Route,{path:"/account",component:Object(Dt.a)(zs)}),Object(Qt.jsx)(Rt.Route,{component:tn.a})]})};lt.a.render(Object(Qt.jsx)(Pt.a,{children:Object(Qt.jsx)(ut.a,{client:Vj,children:Object(Qt.jsx)(It.b,{locale:Ft.a,children:Object(Qt.jsx)(Tj,{})})})}),document.getElementById("root"))},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return handlerQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return handlerMutation})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useUser})),__webpack_require__.d(__webpack_exports__,"a",(function(){return accessRedirect})),__webpack_require__.d(__webpack_exports__,"b",(function(){return download})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDDMMYYY})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDDMMYYYHHmm})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatDate})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDiffHours})),__webpack_require__.d(__webpack_exports__,"i",(function(){return notifyMe}));var G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(156),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_apollo_client__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(309),_apollo_client__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(245),react_router_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(36),_modules_Error404__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(182),_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(236),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__),_templateObject,_templateObject2,_templateObject3,MergeRecursive=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var s in n)try{n[s].constructor===Object?t[s]=e(t[s],n[s]):t[s]=n[s]}catch(a){t[s]=n[s]}return t},checkObject=function checkObject(object,data){var request="";try{request=eval("object.".concat(data))}catch(e){return request}return void 0===request?"":request},handlerQuery=function(e,t,n,s){return function(){var a=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),i=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(a,2),c=i[0],o=i[1],l=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(e.select[t],Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)));return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){l.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:l.error.message,duration:0,placement:"bottomRight"})}),[l.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(e.subscription[t]&&l.data&&!c){if(e.subscription[t][0])for(var a in e.subscription[t])l.subscribeToMore({document:e.subscription[t][a],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});else l.subscribeToMore({document:e.subscription[t],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});o(!0)}}),[l.data]),l}},handlerMutation=function(e){var t=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(e,2),n=t[0],s=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){s.loading||s.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:s.error.message,duration:0,placement:"bottomRight"})}),[s.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(s.data){var e=s.data[Object.keys(s.data)[0]];"warning"==e.type?antd__WEBPACK_IMPORTED_MODULE_5__.a.warning({message:e.message,duration:0,placement:"bottomRight"}):antd__WEBPACK_IMPORTED_MODULE_5__.a.success({message:e.message,duration:10,placement:"bottomRight"}),a()}}),[s.data]),[n,s]}},isAccessed=function(e,t){return!!e.admin||t.some((function(t){return e.accesses.includes(t)}))},authMe={options:{},select:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject||(_templateObject=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                    position_accesses\n                }\n            }\n        "])))},subscription:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject2||(_templateObject2=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            subscription authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                }\n            }\n\n        "])))}},positions=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject3||(_templateObject3=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),useUser=function(){var e=handlerQuery(authMe,"one",{variables:{}},"auth")(),t=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(positions),n=(t.loading,t.data),s=(t.refetch,e.data?e.data.authMe[0]:void 0),a=s?e.data.authMe[0].position_names:[],i=(s&&s.positions&&(null===n||void 0===n||n.positions.filter((function(e){return e.id==s.positions[0]}))),s?e.data.authMe[0].position_accesses:[]),c=s?s.admin:void 0;return{query:e,id:s?s.id:void 0,username:s?s.username:void 0,domain_username:s?s.domain_username:void 0,fio:s?s.fio:void 0,email:s?s.email:void 0,admin:s?s.admin:void 0,role_id:s?s.role_id:void 0,positions:c?[1,2,3,4,5,6]:null===s||void 0===s?void 0:s.positions,position_names:a,documentControl:{select:!!c||i.includes("/document-control-p/select"),insert:!!c||i.includes("/document-control-p/insert"),update:!!c||i.includes("/document-control-p/update"),delete:!!c||i.includes("/document-control-p/delete"),orders:{select:!!c||i.includes("/document-control-p/orders-p/select")},revisedUser:{select:!!c||i.includes("/document-control-p/reviseduser-p/select")},approvedUser:{select:!!c||i.includes("/document-control-p/approveduser-p/select")},rejectedUser:{select:!!c||i.includes("/document-control-p/rejecteduser-p/select")},onApproval:{select:!!c||i.includes("/document-control-p/on-approval-p/select")},onApprovalList:{select:!!c||i.includes("/document-control-p/on-approval-list-p/select")},forExecutionInbox:{select:!!c||i.includes("/document-control-p/for-execution-inbox-p/select")},approved:{select:!!c||i.includes("/document-control-p/approved-p/select")},rejected:{select:!!c||i.includes("/document-control-p/rejected-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-control-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-control-p/item-status-change")},documentReport:{select:!!c||i.includes("/document-report-p/select"),insert:!!c||i.includes("/document-report-p/insert"),update:!!c||i.includes("/document-report-p/update"),delete:!!c||i.includes("/document-report-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-report-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-report-p/item-status-change")},documentHistory:{select:!!c||i.includes("/document-history-p/select"),insert:!!c||i.includes("/document-history-p/insert"),update:!!c||i.includes("/document-history-p/update"),delete:!!c||i.includes("/document-history-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-history-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-history-p/item-status-change")},documentSearch:{select:!!c||i.includes("/document-search-p/select"),insert:!!c||i.includes("/document-search-p/insert"),update:!!c||i.includes("/document-search-p/update"),delete:!!c||i.includes("/document-search-p/delete"),search:{select:!!c||i.includes("/document-search-p/search-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-search-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-search-p/item-status-change")},adminDepartment:{select:!!c||i.includes("/admin-p/select"),insert:!!c||i.includes("/admin-p/insert"),update:!!c||i.includes("/admin-p/update"),delete:!!c||i.includes("/admin-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/admin-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/admin-p/item-status-change")}}},accessRedirect=function(e){var t=function(t){var n=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useLocation)().pathname,s=useUser();n.split("/");if(s.query.loading)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:"Loading..."});switch(n){case"/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/login"});break;case"/login":case"/login/":if(s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/logout":case"/logout/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/account":case"/account/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/account"});break;case"/admin":case"/admin/":case"/graphql":case"/graphql/":case"/admin/registration":case"/admin/registration/":case"/admin/positions-page":case"/admin/positions-page/":case"/admin/document-statuses-page":case"/admin/document-statuses-page/":case"/admin/document-routes-page":case"/admin/document-routes-page/":case"/admin/forms-settings-page":case"/admin/forms-settings-page/":if(!s.admin)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control":case"/document-control/":if(!s.documentControl.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/orders":case"/document-control/orders/":if(!s.documentControl.orders.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/reviseduser":case"/document-control/reviseduser/":case"/document-control/approveduser":case"/document-control/approveduser/":if(!s.documentControl.approvedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejecteduser":case"/document-control/rejecteduser/":if(!s.documentControl.rejectedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval":case"/document-control/on-approval/":if(!s.documentControl.onApproval.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval-list":case"/document-control/on-approval-list/":if(!s.documentControl.onApprovalList.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/for-execution-inbox":case"/document-control/for-execution-inbox/":if(!s.documentControl.forExecutionInbox.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/approved":case"/document-control/approved/":if(!s.documentControl.approved.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejected":case"/document-control/rejected/":if(!s.documentControl.rejected.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-report":case"/document-report/":if(!s.documentReport.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-history":case"/document-history/":if(!s.documentHistory.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search":case"/document-search/":if(!s.documentSearch.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search/search":case"/document-search/search/":if(!s.documentSearch.search.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;default:return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_modules_Error404__WEBPACK_IMPORTED_MODULE_10__.a,{})}return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},t))};return t},download=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t,n){var s,a,i;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"no-cors"});case 2:return s=e.sent,e.prev=3,e.next=6,s.blob();case 6:a=e.sent,(i=document.createElement("a")).href=URL.createObjectURL(a),i.setAttribute("download",n),i.click(),i.remove(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),getDDMMYYY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear();return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a},getDDMMYYYHHmm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear(),i=t.getHours(),c=t.getMinutes();function o(e){return String(e).padStart(2,"0")}return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a+" "+o(i)+":"+o(c)},getFirstMonthDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3),s=n;return s.setHours(0,0,0,0),s.setMonth(s.getMonth()+1,0),s.setDate(1),s},formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.split(/[^\d]+/);return t=t[2]+"-"+t[1]+"-"+t[0]+" "+t[3]+":"+t[4]+":"+t[5]},getDiffHours=function(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,console.log("diff",n),n<1?"\u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434":n<12&&n>=1?Math.abs(Math.round(n))+" \u0447. \u043d\u0430\u0437\u0430\u0434":n>12&&n<24?"\u0412\u0447\u0435\u0440\u0430":n>24?Math.abs(Math.round(n/24))+" \u0434. \u043d\u0430\u0437\u0430\u0434":void 0},notifyMe=function(e){if(window.Notification){if(e)if("granted"===Notification.permission){var t=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){t.close()}),3e3)}else Notification.requestPermission().then((function(t){if("granted"===t){var n=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){n.close()}),3e3)}else console.log("User blocked notifications.")})).catch((function(e){console.error(e)}))}else console.log("Browser does not support notifications.")},sendAgentNotification=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t){var n;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},[[456,1,2]]]);
//# sourceMappingURL=main.8a8380e9.chunk.js.map