(this.webpackJsonpdocrecyler=this.webpackJsonpdocrecyler||[]).push([[0],{178:function(e,t,n){"use strict";var s=n(422),a=n(55),i=n(50),c=(n(1),n(0));t.a=function(){return Object(c.jsx)(s.a,{status:"404",title:"404",subTitle:"\u0423\u043f\u0441, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430.",extra:Object(c.jsx)(a.a,{type:"primary",children:Object(c.jsx)(i.c,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})}},232:function(e,t,n){"use strict";t.a=n.p+"static/media/duck.dcaac10b.jpg"},306:function(e,t,n){},384:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N,k,C,S,T,I,E,F,P,R,D,L,U,$,M,J,z,K,A,q,H,B,G,Q,W,Y,X,Z,ee,te,ne,se,ae,ie,ce,oe,le,re,de,ue,me,je,be,pe,_e,Oe,he,fe,xe,ve,ge,ye,Ve,we,Ne,ke,Ce,Se,Te,Ie,Ee,Fe,Pe,Re,De,Le,Ue,$e,Me,Je,ze,Ke,Ae,qe,He,Be,Ge,Qe,We,Ye,Xe,Ze,et,tt,nt,st,at,it,ct,ot,lt,rt,dt,ut,mt,jt,bt,pt,_t,Ot,ht,ft,xt,vt,gt,yt,Vt,wt,Nt,kt,Ct,St,Tt,It,Et,Ft,Pt,Rt,Dt,Lt,Ut,$t,Mt,Jt,zt,Kt,At,qt,Ht,Bt,Gt,Qt,Wt,Yt,Xt,Zt,en,tn,nn,sn,an,cn,on,ln,rn,dn,un,mn,jn,bn,pn,_n,On,hn,fn,xn,vn,gn,yn,Vn,wn,Nn,kn,Cn,Sn,Tn,In,En,Fn,Pn,Rn,Dn,Ln,Un,$n,Mn,Jn,zn,Kn,An,qn,Hn,Bn,Gn,Qn,Wn,Yn,Xn,Zn,es,ts,ns,ss,as,is,cs,os,ls,rs,ds,us,ms,js,bs,ps,_s,Os,hs,fs,xs,vs,gs,ys,Vs,ws,Ns,ks=n(3),Cs=n(1),Ss=n.n(Cs),Ts=(n(221),n(58)),Is=n.n(Ts),Es=(n(306),{debug:!1,port:8445,host:window.SERVER_DATA,graphql:{path:"/graphql"}}),Fs=Es,Ps=n(439),Rs=n(447),Ds=n(449),Ls=n(475),Us=n(476),$s=n(219),Ms=n(470),Js=n(117),zs=n(280),Ks=n(448),As=n(438),qs=n(118),Hs=n(278),Bs=n(281),Gs=n(429),Qs=n(151),Ws=n(431),Ys=n(65),Xs=n(55),Zs=n(430),ea=n(21),ta=n(282),na=n.n(ta),sa=n(50),aa=n(36),ia=n(8),ca=n(11),oa=n(294),la=n(459),ra=n(460),da=n(461),ua=n(462),ma=n(247),ja=n(453),ba=n(286),pa=n(456),_a=n(144),Oa=n(64),ha=n(0),fa=["title","user"],xa=Gs.a.Header,va=ma.a.useBreakpoint,ga=Ss.a.memo((function(e){var t=e.title,n=e.user,s=(Object(ca.a)(e,fa),va()),a=Object(aa.useHistory)(),i=Object(aa.useLocation)().pathname;return Object(ha.jsx)("div",{children:Object(ha.jsx)(xa,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(ha.jsxs)(Zs.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(ha.jsx)(Ws.a,{flex:"auto",style:{color:"c40c46"},children:Object(ha.jsx)(ja.a,{className:"site-page-header",backIcon:Object(ha.jsx)(oa.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(ha.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(ha.jsx)(Ws.a,{flex:"auto",children:Object(ha.jsx)("h1",{style:{color:"white"},children:t})}):Object(ha.jsx)(ha.Fragment,{}),Object(ha.jsx)(Ws.a,{children:Object(ha.jsx)(ba.a,{shape:"square",size:"small",icon:Object(ha.jsx)(la.a,{})})}),Object(ha.jsx)(Ws.a,{flex:"70px",style:{marginRight:"30px"},children:Object(ha.jsx)(pa.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(ha.jsx)(_a.a,{overlay:Object(ha.jsxs)(Oa.a,{children:[n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(ha.jsx)(ra.a,{}),"ADMIN"]}),n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(ha.jsx)(da.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(ha.jsx)(da.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(ha.jsx)(la.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(ha.jsx)(ua.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(ha.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),ya=ga,Va=n(178),wa=n(2),Na=n(9),ka=n(444),Ca=n(288),Sa=n(463),Ta=n(296),Ia=(n(383),n(240)),Ea=n(477),Fa=(n(384),Object(Ia.a)(s||(s=Object(Na.a)(["\n    mutation login($user: JSON) {\n        login(user: $user){\n            username\n        }\n    }"])))),Pa=function(){var e=Object(Cs.useState)(),t=Object(wa.a)(e,2),n=t[0],s=t[1],a=Object(ia.g)(Object(Ea.a)(Fa))(),i=Object(wa.a)(a,2),c=i[0],o=i[1],l=o.loading,r=o.data;Object(Cs.useEffect)((function(){n&&c({variables:{user:n}})}),[n]),Object(Cs.useEffect)((function(){if(r){var e={method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(n)};fetch("https://"+Fs.host+":"+Fs.port+"/login",e).then((function(e){e.url!=window.location.href?window.location.href=e.url:console.log(e)}))}}),[r]);var d=ka.a.useForm(),u=Object(wa.a)(d,1)[0];return Object(ha.jsx)(Zs.a,{justify:"center",align:"middle",style:{height:"95vh"},children:Object(ha.jsx)(Ws.a,{children:Object(ha.jsx)(ka.a,{form:u,name:"basic",onFinish:s,onFinishFailed:function(e){console.log("Failed:",e)},children:Object(ha.jsx)(Zs.a,{gutter:16,children:Object(ha.jsxs)(Ws.a,{children:[Object(ha.jsx)("div",{className:"authorizationHeader",children:"\u0410\u0412\u0422\u041e\u0420\u0418\u0417\u0410\u0426\u0418\u042f"}),Object(ha.jsx)(ka.a.Item,{name:"username",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{className:"loginFormName",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"password",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.Password,{className:"loginFormPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(ha.jsx)(Sa.a,{style:{color:"#fff"},className:"loginIcons"}):Object(ha.jsx)(Ta.a,{style:{color:"#fff"},className:"loginIcons"})}})}),Object(ha.jsx)(ka.a.Item,{className:"loginFormItem",children:Object(ha.jsx)(Xs.a,{htmlType:"submit",loading:l,className:"login_btn",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})})})},Ra=n(469),Da=n(437),La=n(19),Ua=n(10),$a=n(295),Ma=n(218),Ja=n(292),za=n(436),Ka=n(98),Aa=n(452),qa=n(103),Ha=n(443),Ba=n(464),Ga=n(450),Qa=["GQL","InsertForm"],Wa=Ss.a.memo((function(e){var t=e.GQL,n=e.InsertForm,s=Object(ca.a)(e,Qa),a=ka.a.useForm(),i=Object(wa.a)(a,1)[0],c=Object(Cs.useState)(!1),o=Object(wa.a)(c,2),l=o[0],r=o[1],d=Object(ia.g)(Object(Ea.a)(t.insert),(function(){r(!1),i.resetFields()}))(),u=Object(wa.a)(d,2),m=u[0],j=u[1].loading;return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){r(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:s.title,visible:l,onOk:function(){i.submit()},onCancel:function(){r(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",centered:!0,width:s.width?s.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:j||!1,children:Object(ha.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,m({variables:n})},setVisible:r,save:function(){i.submit()}})})]})})),Ya=Wa,Xa=n(217),Za=n(272),ei=["GQL","UpdateForm"],ti=Ss.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(ca.a)(e,ei),a=ka.a.useForm(),i=Object(wa.a)(a,1)[0],c=Object(wa.a)(s.visibleModalUpdate,2),o=c[0],l=c[1],r=Object(Cs.useState)(!0),d=Object(wa.a)(r,2),u=d[0],m=d[1],j={};j[t.table]={global:{id:"= ".concat(s.selectedRowKeys[0])}};var b=Object(ia.h)(t,"one",{variables:j})(),p=b.loading,_=b.data,O=b.refetch;Object(Cs.useEffect)((function(){_&&i.resetFields()}),[_]),Object(Cs.useEffect)((function(){o&&O()}),[o]),window.setVisible=l;var h=Object(ia.g)(Object(Ea.a)(t.update),(function(){l(!1),m(!0)}))(),f=Object(wa.a)(h,2),x=f[0],v=f[1].loading;return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",disabled:1!==s.selectedRowKeys.length,onClick:function(){l(!0)},children:[Object(ha.jsx)(Xa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ha.jsx)(Ga.a,{title:s.title,visible:o,centered:!0,width:s.width?s.width:450,onOk:function(){i.submit()},onCancel:function(){l(!1),m(!0)},maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(Xs.a,{onClick:function(){l(!1),m(!0)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),u?s.update&&Object(ha.jsx)(Xs.a,{type:"primary",onClick:function(){m(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"setViewMode"):Object(ha.jsx)(Xs.a,{type:"primary",loading:v,onClick:function(){i.submit()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"update")],children:Object(ha.jsx)(Za.a,{spinning:p,children:Object(ha.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,x({variables:n})},initialValues:_,disabled:u,setVisible:l,setViewMode:m,save:function(){i.submit()}})})})]})})),ni=ti,si=Ss.a.memo((function(e){var t=e.buttons?e.buttons.map((function(e,t){return Object(ha.jsx)(Ws.a,{children:e},"button".concat(t))})):[];return Object(ha.jsxs)(Zs.a,{justify:"end",align:"middle",gutter:[8,8],children:[Object(ha.jsx)(Ws.a,{flex:"auto",children:Object(ha.jsx)("h1",{style:{margin:"0 0 0 30px"},children:e.title})}),t]})})),ai=si,ii=n(440),ci=Ss.a.memo((function(e){var t=Object(Cs.useState)([]),n=Object(wa.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(Cs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key])},onDoubleClick:function(t){e.visibleModalUpdate[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){return e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":"ant-table-row ant-table-row-level-0"}})})})),oi=ci,li=n(147),ri=n(206),di=n.n(ri),ui=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(ha.jsxs)("div",{style:{padding:8},children:[Object(ha.jsx)(Ca.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Xs.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(ha.jsx)(li.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(ha.jsx)(Xs.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(ha.jsx)(li.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(ha.jsx)(di.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},mi=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ha.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},bi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ha.jsx)(Ys.a,{title:t,color:"grey",children:Object(ha.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},pi=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(ca.a)(e,mi);if(d)return Object(ks.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=ji;return r&&(m=bi),Object(ks.a)(Object(ks.a)({title:ji(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return ui(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},_i={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(a||(a=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Ia.a)(i||(i=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(c||(c=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},insert:Object(Ia.a)(o||(o=Object(Na.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(Ia.a)(l||(l=Object(Na.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(Ia.a)(r||(r=Object(Na.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},Oi={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(d||(d=Object(Na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Ia.a)(u||(u=Object(Na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(m||(m=Object(Na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(Ia.a)(j||(j=Object(Na.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(Ia.a)(b||(b=Object(Na.a)(["\n        mutation updatetPosition($positions: JSON) {\n            updatetPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(Ia.a)(p||(p=Object(Na.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},hi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)(!1),s=Object(ia.g)(Object(Ea.a)(_i.delete))(),a=Object(wa.a)(s,2),i=a[0],c=a[1].loading,o=Object(ia.h)(_i,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(Cs.useEffect)((function(){d()}),[]);var u=Object(ia.h)(Oi,"all")(),m=(u.loading,u.data),j=u.refetch;Object(Cs.useEffect)((function(){j()}),[]);var b=r&&null!=r.users?r.users.map((function(e){return{id:e.id,key:e.id,username:e.username,access:e.admin?"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c",positions:e.positions,fio:e.fio,email:e.email,positionName:m.positions.filter((function(t){return t.id==e.positions})).map((function(e){return e.name}))[0]}})):[],p=pi([{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",width:100,tooltip:!0},{title:"\u0420\u043e\u043b\u044c",dataIndex:"access",align:"center",width:100,render:function(e,t){switch(t.access){case"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":return Object(ha.jsx)(Ja.a,{color:"green",children:e});case"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c":return Object(ha.jsx)(Ja.a,{color:"geekblue",children:e});default:return e}}},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",dataIndex:"positionName",width:150,tooltip:!0}]);return Object(ha.jsx)(oi,{data:{dict:p,records:b},loading:l,title:function(e){return Object(ha.jsx)(ai,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",buttons:[Object(ha.jsx)(Ya,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",GQL:_i,InsertForm:fi,width:650}),Object(ha.jsx)(ni,Object(Ua.a)({visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",width:650,selectedRowKeys:e.selectedRowKeys,GQL:_i,UpdateForm:fi,update:!0},"width",700)),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[_i.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n,bordered:!0})})),fi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({username:"",password:"",admin:!1,accesses:[],positions:[],domain_username:"",fio:"",email:"",log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.users[0].id,username:e.initialValues.users[0].username,password:e.initialValues.users[0].password,admin:e.initialValues.users[0].admin,accesses:e.initialValues.users[0].accesses,positions:e.initialValues.users[0].positions,domain_username:e.initialValues.users[0].domain_username,fio:e.initialValues.users[0].fio,email:e.initialValues.users[0].email,log_username:t.username})}),[e.initialValues]);return Object(ha.jsx)(ka.a,{form:e.form,name:"WorkersWorkerdForm",onFinish:function(t){e.onFinish(a),console.log(t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:Object(ha.jsx)(Zs.a,{justify:"center",children:Object(ha.jsxs)(Ws.a,{flex:"auto",children:[Object(ha.jsx)(ka.a.Item,{name:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"domain_username",label:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"email",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043b\u044f \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u0439",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"fio",label:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(ha.jsx)(ka.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",labelCol:{span:24},rules:[{required:!e.initialValues,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a.Password,{disabled:e.disabled,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"accountInput"})}),Object(ha.jsx)(ka.a.Item,{name:"admin",valuePropName:"checked",rules:[{type:"boolean"}],shouldUpdate:!0,children:Object(ha.jsx)(Ka.a,{disabled:e.disabled,children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})}),a.admin?null:Object(ha.jsx)(Da.a,{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"}),Object(ha.jsx)(ka.a.Item,{name:"positions",rules:[{type:"array",required:!a.admin,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],hidden:a.admin,children:Object(ha.jsx)(xi,{disabled:e.disabled})}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0,children:Object(ha.jsx)(Ca.a,{disabled:e.disabled})})]})})})})),xi=Ss.a.memo((function(e){var t=Object(ia.h)(Oi,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(Cs.useEffect)((function(){a()}),[]);var i=Object(Cs.useState)([]),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Aa.a,{dataSource:r,showSearch:!0,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(La.a)(e),Object(La.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ha.jsx)(qa.a,{image:qa.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),vi=hi,gi={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(_||(_=Object(Na.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Ia.a)(O||(O=Object(Na.a)(["\n            query document_statuses($document_statuses: JSON) {\n                document_statuses(document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(h||(h=Object(Na.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(Ia.a)(f||(f=Object(Na.a)(["\n        mutation insertDocumentStatus($document_statuses: JSON) {\n            insertDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),update:Object(Ia.a)(x||(x=Object(Na.a)(["\n        mutation updateDocumentStatus($document_statuses: JSON) {\n            updateDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),delete:Object(Ia.a)(v||(v=Object(Na.a)(["\n        mutation deleteDocumentStatus($document_statuses: JSON) {\n            deleteDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "])))},yi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)(!1),s=Object(ia.g)(Object(Ea.a)(gi.delete))(),a=Object(wa.a)(s,2),i=a[0],c=a[1].loading,o=Object(ia.h)(gi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(Cs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=pi([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ha.jsx)(oi,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ha.jsx)(ai,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",buttons:[Object(ha.jsx)(Ya,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",GQL:gi,InsertForm:Vi}),Object(ha.jsx)(ni,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",selectedRowKeys:e.selectedRowKeys,GQL:gi,UpdateForm:Vi,update:!0}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[gi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Vi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({isuseforreport:!1,log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.document_statuses[0].id,name:e.initialValues.document_statuses[0].name,log_username:a.log_username})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentStatusesForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0,children:Object(ha.jsx)(Ca.a,{disabled:e.disabled})})]})})),wi=yi,Ni=n(465),ki=n(466),Ci=n(78),Si=n(165),Ti=["query","placeholder","clear"],Ii=Ss.a.memo((function(e){var t=e.query,n=e.placeholder,s=e.clear,a=Object(ca.a)(e,Ti),i=Object(ia.h)(t,"all")(),c=i.loading,o=i.data,l=i.refetch;return Object(Cs.useEffect)((function(){l()}),[]),Object(ha.jsxs)(Zs.a,{justify:"space-between",children:[Object(ha.jsx)(Ws.a,{flex:"auto",children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:s?{width:"100%"}:null,placeholder:n,loading:c,showSearch:!0,optionFilterProp:"children",filterOption:!0},a),{},{children:[Object(ha.jsx)(Si.a.Option,{value:null},null),o?o[Object.keys(o)[0]].map((function(e){return Object(ha.jsx)(Si.a.Option,{value:e.id,children:e[Object.keys(e).filter((function(e){return"id"!==e&&"__typename"!==e}))[0]]},e.id)})):[]]}))}),s?Object(ha.jsx)(Ws.a,{children:Object(ha.jsx)(Xs.a,{style:{padding:5},type:"dashed",onClick:function(){a.onChange(null)},children:Object(ha.jsx)(Ci.a,{})})}):null]})})),Ei=Ii,Fi=n(293),Pi=n(467),Ri=n(468),Di={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(g||(g=Object(Na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "]))),one:Object(Ia.a)(y||(y=Object(Na.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(V||(V=Object(Na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},insert:Object(Ia.a)(w||(w=Object(Na.a)(["\n        mutation insertDocumentRoute($document_routes: JSON) {\n            insertDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),update:Object(Ia.a)(N||(N=Object(Na.a)(["\n        mutation updateDocumentRoute($document_routes: JSON) {\n            updateDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),delete:Object(Ia.a)(k||(k=Object(Na.a)(["\n        mutation deleteDocumentRoute($document_routes: JSON) {\n            deleteDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "])))},Li={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(Ia.a)(C||(C=Object(Na.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(S||(S=Object(Na.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))}},Ui={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(T||(T=Object(Na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Ia.a)(I||(I=Object(Na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(E||(E=Object(Na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},$i=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)(!1),s=Object(ia.g)(Object(Ea.a)(Di.delete))(),a=Object(wa.a)(s,2),i=a[0],c=a[1].loading,o=Object(ia.h)(Di,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(Cs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=pi([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(oi,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ha.jsx)(ai,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",buttons:[Object(ha.jsx)(Ya,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",GQL:Di,InsertForm:Mi,width:750}),Object(ha.jsx)(ni,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:Di,UpdateForm:Mi,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Di.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})})),Mi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useRef)(),s=Object(Cs.useState)({isuseforreport:!1,log_username:t.username}),a=Object(wa.a)(s,2),i=a[0],c=a[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(i),console.log("props top",i)}),[i]),Object(Cs.useEffect)((function(){e.initialValues&&c({id:e.initialValues.document_routes[0].id,name:e.initialValues.document_routes[0].name,status_in_process:e.initialValues.document_routes[0].status_in_process,status_cancelled:e.initialValues.document_routes[0].status_cancelled,status_finished:e.initialValues.document_routes[0].status_finished,routes:e.initialValues.document_routes[0].routes,log_username:i.log_username})}),[e.initialValues]);return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentRoutesForm",onFinish:function(t){e.onFinish(i)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"status_in_process",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ei,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",query:Li})}),Object(ha.jsx)(ka.a.Item,{name:"status_cancelled",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ei,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",query:Li})}),Object(ha.jsx)(ka.a.Item,{name:"status_finished",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ei,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",query:Li})}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0,children:Object(ha.jsx)(Ca.a,{disabled:e.disabled})}),Object(ha.jsx)(ka.a.List,{name:"routes",children:function(t,s){var a=s.add,i=s.remove;return Object(ha.jsxs)(ha.Fragment,{children:[t.map((function(t){return Object(ha.jsx)(pa.b,{style:{display:"flex",marginBottom:40},align:"baseline",children:Object(ha.jsxs)(Zs.a,{gutter:20,children:[Object(ha.jsxs)(Ws.a,{span:24,children:["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u2116: ",Object(ha.jsx)("b",{children:t.name+1})]}),Object(ha.jsxs)(Ws.a,{span:12,children:[Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{name:[t.name,"positionId"],fieldKey:[t.fieldKey,"positionId"],children:Object(ha.jsx)(Ei,{disabled:e.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:Ui,onChange:function(e,n){c((function(e){var s=Object.assign({},e);return console.log("field.fieldKey",t.fieldKey),s.routes[t.name].positionName=n.children,s.routes[t.name].step=t.name+1,s}))}})})),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{name:[t.name,"step"],fieldKey:[t.fieldKey,"step"],hidden:!0})),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{name:[t.name,"positionName"],fieldKey:[t.fieldKey,"positionName"],hidden:!0}))]}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{name:[t.name,"isExecutor"],fieldKey:[t.fieldKey,"isExecutor"],valuePropName:"checked",rules:[{type:"boolean",required:!1}],children:Object(ha.jsx)(Ka.a,{disabled:e.disabled,children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c?"})}))}),Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{label:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b:",name:[t.name,"statuses"],fieldKey:[t.fieldKey,"statuses"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(ha.jsx)(Ji,{disabled:e.disabled})}))}),Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},t),{},{label:"\u0417\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0446\u0430:",name:[t.name,"substitutes"],fieldKey:[t.fieldKey,"substitutes"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(ha.jsx)(zi,{disabled:e.disabled})}))}),Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)("i",{children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(ha.jsx)(Ni.a,{onClick:function(){return i(t.name)},disabled:e.disabled,style:{marginLeft:5}})]})]})},t.key)})),Object(ha.jsx)(ka.a.Item,{children:Object(ha.jsx)(Xs.a,{type:"dashed",onClick:function(){return a()},disabled:e.disabled,block:!0,icon:Object(ha.jsx)(ki.a,{}),ref:n,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})})]})}})]}),Object(ha.jsx)(Zs.a,{className:"on-approval-from-buttons-wrap",children:Object(ha.jsxs)(Ws.a,{span:24,className:"on-approval-form-buttons-container",children:[Object(ha.jsx)(Xs.a,{disabled:e.disabled,style:{marginRight:"5px"},onClick:function(){n.current.click()},icon:Object(ha.jsx)(Fi.a,{})}),Object(ha.jsx)("span",{style:{marginRight:"5px"},children:e.setViewMode?Object(ha.jsx)(Xs.a,{onClick:function(){e.setViewMode(!1)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(ha.jsx)(Pi.a,{})}):Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){e.save()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),children:Object(ha.jsx)(Xs.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:Object(ha.jsx)(Ma.a,{})})})}),Object(ha.jsx)("span",{style:{marginRight:"5px"},children:Object(ha.jsx)(Xs.a,{onClick:function(){e.setVisible(!1),e.setViewMode(!0)},title:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:Object(ha.jsx)(Ri.a,{})})})]})})]})})),Ji=Ss.a.memo((function(e){var t=Object(ia.h)(Li,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(Cs.useEffect)((function(){a()}),[]);var i=Object(Cs.useState)([]),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.document_statuses.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Aa.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(La.a)(e),Object(La.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ha.jsx)(qa.a,{image:qa.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),zi=Ss.a.memo((function(e){var t=Object(ia.h)(Ui,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(Cs.useEffect)((function(){a()}),[]);var i=Object(Cs.useState)([]),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Aa.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(La.a)(e),Object(La.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ha.jsx)(qa.a,{image:qa.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"},disabled:e.disabled})})})),Ki=$i,Ai={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(F||(F=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "]))),one:Object(Ia.a)(P||(P=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(R||(R=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},insert:Object(Ia.a)(D||(D=Object(Na.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(Ia.a)(L||(L=Object(Na.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(Ia.a)(U||(U=Object(Na.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},qi={exemplar:"positions",table:"positions",options:{all:{variables:{positions:{global:{ORDER_BY:["name asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)($||($=Object(Na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),one:Object(Ia.a)(M||(M=Object(Na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(J||(J=Object(Na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},insert:Object(Ia.a)(z||(z=Object(Na.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(Ia.a)(K||(K=Object(Na.a)(["\n        mutation updatePosition($positions: JSON) {\n            updatePosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(Ia.a)(A||(A=Object(Na.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},Hi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)(!1),s=Object(ia.g)(Object(Ea.a)(qi.delete))(),a=Object(wa.a)(s,2),i=a[0],c=a[1].loading,o=Object(ia.h)(qi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(Cs.useEffect)((function(){d()}),[]);var u=Object(ia.h)(Ai,"all")(),m=(u.loading,u.data),j=u.refetch;Object(Cs.useEffect)((function(){j()}),[]);var b=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){var t;return{id:e.id,key:e.id,name:e.name,accesses:e.accesses,count:null===m||void 0===m||null===(t=m.users)||void 0===t?void 0:t.filter((function(t){return t.positions==e.id})).length}})):[],p=pi([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0},{title:"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u043b\u044c\u0437.",dataIndex:"count",width:"50px",tooltip:!0}]);return Object(ha.jsx)(oi,{data:{dict:p,records:b},loading:l,title:function(e){return Object(ha.jsx)(ai,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",buttons:[Object(ha.jsx)(Ya,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",GQL:qi,InsertForm:Bi}),Object(ha.jsx)(ni,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",selectedRowKeys:e.selectedRowKeys,GQL:qi,UpdateForm:Bi,update:!0}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[qi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Bi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.positions[0].id,name:e.initialValues.positions[0].name,accesses:e.initialValues.positions[0].accesses,log_username:a.log_username})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentPositionsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})}),Object(ha.jsx)("h3",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:"}),Object(ha.jsx)(ka.a.Item,{name:"accesses",rules:[{type:"array",required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gi,{disabled:e.disabled})}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0,children:Object(ha.jsx)(Ca.a,{disabled:e.disabled})})]})})),Gi=Ss.a.memo((function(e){var t=Object(Cs.useState)(!0),n=Object(wa.a)(t,2),s=n[0],a=n[1],i=Object(Cs.useState)([]),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(Ha.a,{checkable:!0,onExpand:function(e){l(e),a(!1)},expandedKeys:o,autoExpandParent:s,onCheck:function(t){e.onChange(t)},checkedKeys:e.value,treeData:[{title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-control-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-control-p/item-status-change"},{title:"\u041c\u043e\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p/orders-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/orders-p/select"}]},{title:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443",key:"/document-control-p/reviseduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/reviseduser-p/select"}]},{title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/approveduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approveduser-p/select"}]},{title:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/rejecteduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejecteduser-p/select"}]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c",key:"/document-control-p/on-approval-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-p/select"}]},{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435",key:"/document-control-p/on-approval-list-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-list-p/select"}]},{title:"\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/for-execution-inbox-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/for-execution-inbox-p/select"}]},{title:"\u0412\u0441\u0435 \u0443\u0442\u0432\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/approved-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approved-p/select"}]},{title:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u0435\u043d\u043d\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/rejected-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejected-p/select"}]}]},{title:"\u041e\u0442\u0447\u0435\u0442\u044b",key:"/document-report-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-report-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-report-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-report-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-report-p/item-status-change"}]},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",key:"/document-hitory-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-hitory-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-hitory-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-hitory-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-hitory-p/item-status-change"}]},{title:"\u041f\u043e\u0438\u0441\u043a",key:"/document-search-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-search-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-search-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-search-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-search-p/item-status-change"}]},{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"/admin-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/admin-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/admin-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/admin-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/admin-p/item-status-change"}]}],disabled:e.disabled})})),Qi=Hi,Wi={exemplar:"forms",table:"forms",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(q||(q=Object(Na.a)(["\n            query forms ($forms: JSON) {\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "]))),one:Object(Ia.a)(H||(H=Object(Na.a)(["\n            query forms($forms: JSON) {\n                forms(forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(B||(B=Object(Na.a)(["\n            subscription forms ($forms: JSON){\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},insert:Object(Ia.a)(G||(G=Object(Na.a)(["\n        mutation insertForm($forms: JSON) {\n            insertForm(forms: $forms){\n                message\n            }\n        }\n    "]))),update:Object(Ia.a)(Q||(Q=Object(Na.a)(["\n        mutation updateForm($forms: JSON) {\n            updateForm(forms: $forms){\n                message\n            }\n        }\n    "]))),delete:Object(Ia.a)(W||(W=Object(Na.a)(["\n        mutation deleteForm($forms: JSON) {\n            deleteForm(forms: $forms){\n                message\n            }\n        }\n    "])))},Yi={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(Ia.a)(Y||(Y=Object(Na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(X||(X=Object(Na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))}},Xi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)(!1),s=Object(ia.g)(Object(Ea.a)(Wi.delete))(),a=Object(wa.a)(s,2),i=a[0],c=a[1].loading,o=Object(ia.h)(Wi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(Cs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=pi([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ha.jsx)(oi,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ha.jsx)(ai,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0444\u043e\u0440\u043c",buttons:[Object(ha.jsx)(Ya,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",GQL:Wi,InsertForm:Zi}),Object(ha.jsx)(ni,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",selectedRowKeys:e.selectedRowKeys,GQL:Wi,UpdateForm:Zi,update:!0}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Wi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Zi=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({isuseforreport:!1,log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.forms[0].id,name:e.initialValues.forms[0].name,route:e.initialValues.forms[0].route,settings:JSON.stringify(e.initialValues.forms[0].settings),log_username:a.log_username})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"FormSettingsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b"})}),Object(ha.jsx)(ka.a.Item,{name:"route",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ha.jsx)(Ei,{disabled:e.disabled,placeholder:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",title:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",query:Yi})}),Object(ha.jsx)(ka.a.Item,{name:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0,children:Object(ha.jsx)(Ca.a,{disabled:e.disabled})})]})})),ec=Xi,tc=Gs.a.Content,nc=Gs.a.Sider,sc=Object(aa.withRouter)((function(e){var t=Object(aa.useLocation)().pathname,n=Object(ia.j)(),s=e.location.pathname.split("/").slice(1);if("/admin/"===t||"/admin"===t){if(n.username)return Object(ha.jsx)(aa.Redirect,{to:"/admin/registration"});if(n.username)return Object(ha.jsx)(aa.Redirect,{to:"/admin/positions-page"});if(n.username)return Object(ha.jsx)(aa.Redirect,{to:"/admin/document-statuses-page"});if(n.username)return Object(ha.jsx)(aa.Redirect,{to:"/admin/document-routes-page"});if(n.username)return Object(ha.jsx)(aa.Redirect,{to:"/admin/forms-settings-page"})}return console.log(s,t),Object(ha.jsxs)(Gs.a,{className:"main-layout",children:[Object(ha.jsx)(ya,{title:"\u041c\u043e\u0434\u0443\u043b\u044c \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",user:n}),Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsx)(nc,{theme:"dark",breakpoint:"lg",collapsedWidth:"0",className:"ant-layout-sider",children:Object(ha.jsxs)(Oa.a,{theme:"dark",mode:"inline",defaultSelectedKeys:t,style:{height:"100%"},className:"adminSider",children:[Object(ha.jsx)(Da.a,{style:{position:"absolute",margin:0,top:0}}),Object(ha.jsx)(Oa.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ha.jsx)(Ra.a,{}),children:Object(ha.jsx)(sa.c,{to:"/admin/registration",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/admin/registration"),Object(ha.jsx)(Da.a,{style:{margin:0}}),Object(ha.jsx)(Oa.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ha.jsx)(Ra.a,{}),children:Object(ha.jsx)(sa.c,{to:"/admin/positions-page",children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})},"/admin/positions-page"),Object(ha.jsx)(Da.a,{style:{margin:0}}),Object(ha.jsx)(Oa.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ha.jsx)(Ra.a,{}),children:Object(ha.jsx)(sa.c,{to:"/admin/document-statuses-page",children:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-statuses-page"),Object(ha.jsx)(Da.a,{style:{margin:0}}),Object(ha.jsx)(Oa.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ha.jsx)(Ra.a,{}),children:Object(ha.jsx)(sa.c,{to:"/admin/document-routes-page",children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-routes-page"),Object(ha.jsx)(Da.a,{style:{margin:0}}),Object(ha.jsx)(Oa.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ha.jsx)(Ra.a,{}),children:Object(ha.jsx)(sa.c,{to:"/admin/forms-settings-page",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})},"/admin/forms-settings-page"),Object(ha.jsx)(Da.a,{style:{margin:0}}),Object(ha.jsx)(Da.a,{style:{position:"absolute",margin:0,bottom:0}})]})}),Object(ha.jsx)(Gs.a,{className:"content-layout",children:Object(ha.jsx)(tc,{children:Object(ha.jsxs)("div",{className:"site-layout-background",style:{minHeight:360},children:[Object(ha.jsx)(aa.Route,{path:"/admin/registration",component:vi}),Object(ha.jsx)(aa.Route,{path:"/admin/positions-page",component:Qi}),Object(ha.jsx)(aa.Route,{path:"/admin/document-statuses-page",component:wi}),Object(ha.jsx)(aa.Route,{path:"/admin/document-routes-page",component:Ki}),Object(ha.jsx)(aa.Route,{path:"/admin/forms-settings-page",component:ec})]})})})]})]})})),ac=n(299),ic=n(446),cc=Gs.a.Sider,oc=Gs.a.Content,lc=Object(Ia.a)(Z||(Z=Object(Na.a)(["\n  mutation updatePassword(\n    $username: String\n    $password: String\n  ) {\n    updatePassword(username: $username, password: $password) {\n\t  username\n      password\n\t  \n    }\n  }\n"]))),rc=Object(Ia.a)(ee||(ee=Object(Na.a)(["\n\tquery application($application: JSON){\n  application(application: $application){\n    platform_version,\n    database_version\n  }\n}"]))),dc=Ss.a.memo((function(e){var t=Object(Cs.useState)(),n=Object(wa.a)(t,2),s=n[0],a=n[1],i=Object(Cs.useState)(),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("1447"),d=Object(wa.a)(r,2),u=(d[0],d[1],Object(Cs.useState)()),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=Object(ia.j)(),_=p.username,O=Object(Ea.a)(lc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=x.loading,g=x.error,y=Object(ac.a)(rc),V=(y.loading,y.data);y.refetch;Object(Cs.useEffect)((function(){v||g&&Qs.a.error({message:function(e){return e},duration:0,placement:"topLeft"})}),[g]),Object(Cs.useEffect)((function(){v||"0"===j&&(Qs.a.info({message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d",duration:0,placement:"topLeft"}),b("1"),console.log(j))}),[function(e){return e},j]);return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsx)(ya,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",user:p}),Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsxs)(cc,{theme:"dark",style:{color:"#fff"},children:[Object(ha.jsx)(Da.a,{style:{margin:"0 0 7px 0",top:0}}),Object(ha.jsx)("h1",{style:{color:"#fff"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(ha.jsx)(ic.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b",value:V&&V.application&&null!=V.application[0]?V.application[0].platform_version:null}),Object(ha.jsx)(ic.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0411\u0414",value:V&&V.application&&null!=V.application[0]?V.application[0].database_version:null})]}),Object(ha.jsx)(oc,{children:Object(ha.jsxs)(pa.b,{direction:"vertical",children:[Object(ha.jsx)("h1",{children:" \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f "}),Object(ha.jsx)("h1",{children:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c 2 \u0440\u0430\u0437\u0430 "}),Object(ha.jsx)(Ca.a.Password,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(e){a(e.target.value),console.log(s)},className:"accountInput",iconRender:function(e){return e?Object(ha.jsx)(Sa.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(ha.jsx)(Ta.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})}}),Object(ha.jsx)(Ca.a.Password,{onChange:function(e){l(e.target.value),console.log(o)},value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(ha.jsx)(Sa.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(ha.jsx)(Ta.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})},className:"accountInput"}),Object(ha.jsx)(Xs.a,{onClick:function(){s===o&&s.length>0&&o.length>0?(b("0"),f({variables:{username:_,password:s}})):Qs.a.error({message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0438\u043b\u0438 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u044b",duration:0,placement:"topLeft"})},children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})]})})})),uc=dc,mc=n(454),jc=n(471),bc=n(472),pc=n(478),_c=n(120),Oc=Gs.a.Sider,hc=Oa.a.SubMenu,fc=function(e){var t=Object(_c.useLocation)(),n=Object(ia.j)(),s=t.pathname,a=Object(Cs.useState)(!1),i=Object(wa.a)(a,2),c=i[0],o=i[1],l=Object(Cs.useState)({t1:2,t2:3,t3:3}),r=Object(wa.a)(l,2),d=r[0],u=r[1],m=Object(Cs.useState)({}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=Object(Ia.a)(te||(te=Object(Na.a)(["\n\tquery document_logs($document_logs: JSON){\n        document_logs(document_logs: $document_logs){\n            id\n            document_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),O=Object(Ia.a)(ne||(ne=Object(Na.a)(["\n        subscription document_logs ($document_logs: JSON){\n            document_logs(document_logs: $document_logs){\n                id\n                document_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),h=Object(Ia.a)(se||(se=Object(Na.a)(["\n\tquery document_tasks_logs($document_tasks_logs: JSON){\n        document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n            id\n            task_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),f=Object(Ia.a)(ae||(ae=Object(Na.a)(["\n        subscription document_tasks_logs ($document_tasks_logs: JSON){\n            document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n                id\n                task_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),x=Object(ac.a)(_,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){var t={};t.revised=e.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,t.approved=e.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,t.rejected=e.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,t.onaproval=e.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(t)}}),v=(x.loading,x.data,x.refetch,Object(pc.a)(O,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data,n={};n.revised=t.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,n.approved=t.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,n.rejected=t.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,n.onaproval=t.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(n),(n.revised>0||n.approved>0||n.rejected>0||n.onaproval>0)&&Object(ia.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));v.data,v.loading;Object(Cs.useEffect)((function(){e.countF(u),console.log("setCon applied")}),[]);var g=Object(ac.a)(h,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){console.log("tasks query",e),p(e.document_tasks_logs.length)}}),y=(g.loading,g.data,g.refetch,Object(pc.a)(f,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data;p(t.document_tasks_logs.length),console.log("tasks sub",t),b>0&&Object(ia.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));y.data,y.loading;Object(Cs.useEffect)((function(){switch(s){case"/document-control/orders":e.setHeaderTitle("\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/reviseduser":e.setHeaderTitle("\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443");break;case"/document-control/approveduser":e.setHeaderTitle("\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435");break;case"/document-control/rejecteduser":e.setHeaderTitle("\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/on-approval":e.setHeaderTitle("\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435");break;case"/document-control/on-approval-list":e.setHeaderTitle("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/approved":e.setHeaderTitle("\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b");break;case"/document-control/rejected":e.setHeaderTitle("\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/for-execution-inbox":e.setHeaderTitle("\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435")}}),[s]);return Object(ha.jsx)(Oc,{theme:"dark",collapsible:!0,collapsed:c,onCollapse:function(e){console.log(e),o(e)},children:Object(ha.jsxs)(Oa.a,{defaultSelectedKeys:s,className:"siderMenu",mode:"inline",defaultOpenKeys:["User","onApproval","Admin"],children:[Object(ha.jsxs)(hc,{icon:Object(ha.jsx)(Ms.a,{}),title:"\u041c\u043e\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",children:[n.documentControl.insert?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsx)(sa.b,{to:"/document-control/orders",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/orders"):null,n.documentControl.revisedUser.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsxs)(sa.c,{to:"/document-control/reviseduser",children:["\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 ",Object(ha.jsx)("sup",{children:Object(ha.jsx)(mc.a,{count:d.revised})})]})},"/document-control/reviseduser"):null,n.documentControl.approvedUser.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsxs)(sa.c,{to:"/document-control/approveduser",children:["\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 ",Object(ha.jsx)("sup",{children:Object(ha.jsx)(mc.a,{count:d.approved})})]})},"/document-control/approveduser"):null,n.documentControl.rejectedUser.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsxs)(sa.b,{to:"/document-control/rejecteduser",children:["\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435 ",Object(ha.jsx)("sup",{children:Object(ha.jsx)(mc.a,{count:d.rejected})})]})},"/document-control/rejecteduser"):null]},"User"),n.documentControl.onApproval.select||n.documentControl.onApprovalList.select?Object(ha.jsxs)(hc,{icon:Object(ha.jsx)(jc.a,{}),title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:[n.documentControl.onApproval.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsxs)(sa.b,{to:"/document-control/on-approval",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(ha.jsx)("sup",{children:Object(ha.jsx)(mc.a,{count:d.onaproval})})]})},"/document-control/on-approval"):null,n.documentControl.onApprovalList.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsx)(sa.b,{to:"/document-control/on-approval-list",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/on-approval-list"):null]},"onApproval"):null,n.documentControl.forExecutionInbox.select?Object(ha.jsx)(hc,{icon:Object(ha.jsx)(jc.a,{}),title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",children:n.documentControl.forExecutionInbox.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsxs)(sa.b,{to:"/document-control/for-execution-inbox",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(ha.jsx)("sup",{children:Object(ha.jsx)(mc.a,{count:b})})]})},"/document-control/for-execution-inbox"):null},"forExecution"):null,n.documentControl.approved.select||n.documentControl.rejected.select?Object(ha.jsxs)(hc,{icon:Object(ha.jsx)(bc.a,{}),title:"\u0421\u043f\u0438\u0441\u043e\u043a (\u0410\u0434\u043c\u0438\u043d)",children:[n.documentControl.approved.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsx)(sa.c,{to:"/document-control/approved",children:"\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"})},"/document-control/approved"):null,n.documentControl.rejected.select?Object(ha.jsx)(Oa.a.Item,{children:Object(ha.jsx)(sa.b,{to:"/document-control/rejected",children:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435"})},"/document-control/rejected"):null]},"Admin"):null]})})},xc=n(6),vc=n.n(xc),gc=n(13),yc=n(455),Vc=["GQL","GQL2","GQL3","GQL4","GQL5","Form1","Form2","Form3","Form4","Form5"],wc={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ie||(ie=Object(Na.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "]))),one:Object(Ia.a)(ce||(ce=Object(Na.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(oe||(oe=Object(Na.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))}},Nc={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(le||(le=Object(Na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Ia.a)(re||(re=Object(Na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(de||(de=Object(Na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},kc=yc.a.Step,Cc=Ss.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.Form1,o=e.Form2,l=e.Form3,r=e.Form4,d=e.Form5,u=Object(ca.a)(e,Vc),m=Object(Cs.useState)(!1),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=Object(Cs.useState)(!1),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=Object(Cs.useState)(!1),v=Object(wa.a)(x,2),g=v[0],y=v[1],V=Object(Cs.useState)(!1),w=Object(wa.a)(V,2),N=w[0],k=w[1],C=Object(Cs.useState)(!1),S=Object(wa.a)(C,2),T=S[0],I=S[1],E=Object(Cs.useState)(),F=Object(wa.a)(E,2),P=F[0],R=F[1],D=Object(Cs.useState)({}),L=Object(wa.a)(D,2),U=L[0],$=L[1],M=Object(ia.j)(),J=ka.a.useForm(),z=Object(wa.a)(J,1)[0],K=Object(Cs.useState)(!1),A=Object(wa.a)(K,2),q=A[0],H=A[1];Object(Cs.useEffect)((function(){q&&null!=U.route_id&&(z.resetFields(),$({route_id:null}),ee([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]))}),[q]);var B=function(){p(!1),f(!1),y(!1),k(!1),I(!1)},G=Object(ac.a)(wc.select.all,{variables:{document_routes:{global:{id:"=".concat(U.route_id)}}}}),Q=(G.loading,G.data),W=G.refetch;Object(Cs.useEffect)((function(){null!=U.route_id&&(W(),console.log("stateEffect",Q,U))}),[U]);var Y=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),X=Object(wa.a)(Y,2),Z=X[0],ee=X[1];Object(Cs.useEffect)((function(){Q&&null!=Q[Object.keys(Q)[0]]&&U.route_id>0&&(console.log("dataRoutes",Q),ne.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ae.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ce.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),le.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),de.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ee(void 0!=Q.document_routes[0].routes?Q.document_routes[0].routes.map((function(e){return{positionName:e.positionName}})):[]),R(Q.document_routes[0].routes.filter((function(e){return 1==e.step}))))}),[Q]);var te=ka.a.useForm(),ne=Object(wa.a)(te,1)[0],se=ka.a.useForm(),ae=Object(wa.a)(se,1)[0],ie=ka.a.useForm(),ce=Object(wa.a)(ie,1)[0],oe=ka.a.useForm(),le=Object(wa.a)(oe,1)[0],re=ka.a.useForm(),de=Object(wa.a)(re,1)[0],ue=Object(ia.g)(Object(Ea.a)(t.insert),(function(){p(!1),ne.resetFields()}))(),me=Object(wa.a)(ue,2),je=me[0],be=me[1].loading,pe=Object(ia.g)(Object(Ea.a)(n.insert),(function(){f(!1),ae.resetFields()}))(),_e=Object(wa.a)(pe,2),Oe=_e[0],he=(_e[1].loading2,Object(ia.g)(Object(Ea.a)(s.insert),(function(){y(!1),ce.resetFields()}))()),fe=Object(wa.a)(he,2),xe=fe[0],ve=(fe[1].loading3,Object(ia.g)(Object(Ea.a)(a.insert),(function(){k(!1),le.resetFields()}))()),ge=Object(wa.a)(ve,2),ye=ge[0],Ve=(ge[1].loading4,Object(ia.g)(Object(Ea.a)(i.insert),(function(){I(!1),de.resetFields()}))()),we=Object(wa.a)(Ve,2),Ne=we[0],ke=(we[1].loading5,function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(gc.a)(vc.a.mark((function n(s){return vc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(Cs.useRef)("displayNone"),Se=Object(Cs.useRef)();return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){H(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",onOk:function(){null!=U.route_id?(10==U.route_id&&(H(!1),p(!0)),24==U.route_id&&(H(!1),f(!0)),26==U.route_id&&(H(!1),y(!0)),27==U.route_id&&(H(!1),k(!0)),29==U.route_id&&(z.submit(),H(!1),I(!0))):z.setFields([{name:"route_id",errors:["\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442"]}])},visible:q,onCancel:function(){H(!1)},children:Object(ha.jsxs)(ka.a,{form:z,name:"Route_select",onFinish:function(e){Se.current=e.routes,console.log("ROUTE 5",e)},onValuesChange:function(e,t){$(Object.assign({},U,Object(ks.a)({},t))),console.log("state",U)},children:[Object(ha.jsx)(ka.a.Item,{name:"route_id",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442!",whitespace:!0}],children:Object(ha.jsx)(Ei,{placeholder:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",query:wc})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"font-form-header marginTop marginBottom",children:Object(ha.jsx)("label",{children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442:"})}),Object(ha.jsx)(yc.a,{size:"small",current:0,direction:"vertical",children:Z.map((function(e){if(4!=Z.length)return Ce.current="displayNone",Object(ha.jsx)(kc,{title:M.admin?e.positionName+" - "+M.username:e.positionName});Ce.current="displayBlock"}))}),Object(ha.jsxs)("div",{className:Ce.current,children:[Object(ha.jsx)("span",{className:"marginBottom displayBlock",children:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435"}),Object(ha.jsx)(ka.a.List,{name:"routes",children:function(e,t){var n=t.add,s=t.remove;return Object(ha.jsxs)(ha.Fragment,{children:[e.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:19,children:Object(ha.jsxs)("span",{className:"displayFlex",children:[Object(ha.jsxs)("p",{className:"anotherFormSelectCount",children:[e.name+1,". "]}),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},e),{},{name:[e.name,"positionId"],fieldKey:[e.fieldKey,"positionId"],className:"anotherForm",children:Object(ha.jsx)(Ei,{disabled:u.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:Nc,onChange:function(t,n){$((function(t){var s=Object.assign({},t);return console.log("field.fieldKey",e.fieldKey),s.routes[e.name].positionName=n.children,s.routes[e.name].step=e.name+1,s.routes[e.name].statuses=["5","4","2","7"],s}))}})}))]})}),Object(ha.jsxs)(Ws.a,{span:5,children:[Object(ha.jsx)("i",{style:{marginLeft:"20px"},children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(ha.jsx)(Ni.a,{onClick:function(){s(e.name)},disabled:u.disabled,style:{marginLeft:5}})]}),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},e),{},{name:[e.name,"step"],fieldKey:[e.fieldKey,"step"],hidden:!0})),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},e),{},{name:[e.name,"positionName"],fieldKey:[e.fieldKey,"positionName"],hidden:!0})),Object(ha.jsx)(ka.a.Item,Object(ks.a)(Object(ks.a)({},e),{},{name:[e.name,"statuses"],fieldKey:[e.fieldKey,"statuses"],hidden:!0}))]})})})),Object(ha.jsx)(Xs.a,{type:"dashed",onClick:function(){n()},disabled:u.disabled,block:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})]})}})]})]})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:b,onOk:function(){ne.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ha.jsx)(c,{form:ne,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var s,a,i;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,ke(n.files.fileList).then((function(e){i=e}));case 5:n.docs=i||[],n.user_id=M.id,n.username=M.username,n.position=M.position_names[0],n.is_read=!1,n.fio=M.fio,n.positionId=P[0].positionId,console.log("TEST",a),a[t.exemplar]=n,je({variables:a});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:h,onOk:function(){ae.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ha.jsx)(o,{form2:ae,onFinish2:function(){var e=Object(gc.a)(vc.a.mark((function e(t){var s,a;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},a=[],e.next=4,ke(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",s),s[n.exemplar]=t,Oe({variables:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:g,onOk:function(){ce.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ha.jsx)(l,{form3:ce,onFinish3:function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,a;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=[],e.next=4,ke(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[s.exemplar]=t,xe({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:N,onOk:function(){le.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ha.jsx)(r,{form4:le,onFinish4:function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,ke(t.files.fileList).then((function(e){s=e}));case 4:t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[a.exemplar]=t,ye({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:T,onOk:function(){de.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ha.jsx)(d,{form5:de,onFinish5:function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,ke(t.files.fileList).then((function(e){s=e}));case 4:t.route_data=Se.current,t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=P[0].positionId,console.log("TEST",n),n[i.exemplar]=t,Ne({variables:n});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),Sc=Cc,Tc=n(287),Ic=(n(228),n(276),["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"]),Ec=Object(Ia.a)(ue||(ue=Object(Na.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),Fc=Object(Ia.a)(me||(me=Object(Na.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Pc=Object(Ia.a)(je||(je=Object(Na.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Rc=Object(Ia.a)(be||(be=Object(Na.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),Dc=Object(Ia.a)(pe||(pe=Object(Na.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),Lc=Object(Ia.a)(_e||(_e=Object(Na.a)(["\n        query document_tasks($document_tasks: JSON){\n            document_tasks(document_tasks:$document_tasks){\n                id\n                document_id\n                status\n                is_cancelled\n                note\n                deadline\n                date_created\n                user_id_created\n                fio_created\n                user_id_receiver\n                fio_receiver\n                route_id\n                document_options\n                document_tasks_files{\n                    id\n                    filename\n                    data_file\n                    task_id\n                }\n                document_tasks_logs{\n                    id\n                    task_id\n                    is_read\n                    type\n                    user_id\n                }\n                task_statuses{\n                    id\n                    name\n                }\n            }\n        }\n"]))),Uc=Ss.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(ca.a)(e,Ic),m=ka.a.useForm(),j=Object(wa.a)(m,1)[0],b=ka.a.useForm(),p=Object(wa.a)(b,1)[0],_=ka.a.useForm(),O=Object(wa.a)(_,1)[0],h=ka.a.useForm(),f=Object(wa.a)(h,1)[0],x=ka.a.useForm(),v=Object(wa.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(wa.a)(g,2),V=y[0],w=y[1],N=u.visibleModalUpdate2?u.visibleModalUpdate2:[],k=Object(wa.a)(N,2),C=k[0],S=k[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(wa.a)(T,2),E=I[0],F=I[1],P=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(wa.a)(P,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(wa.a)(U,2),M=$[0],J=$[1],z=Object(Cs.useState)(!0),K=Object(wa.a)(z,2),A=K[0],q=K[1],H=Object(ia.j)(),B=function(){w(!1),S(!1),F(!1),L(!1),J(!1),q(!0)},G=function(){q(!1)};Ga.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(ia.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(ia.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(ia.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(ia.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(ia.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(Cs.useEffect)((function(){te&&j.resetFields()}),[te]),Object(Cs.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(Cs.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(Cs.useEffect)((function(){de&&f.resetFields()}),[de]),Object(Cs.useEffect)((function(){je&&v.resetFields()}),[je]),Object(Cs.useEffect)((function(){V&&ne(Q)}),[V]),Object(Cs.useEffect)((function(){C&&ie(W)}),[C]),Object(Cs.useEffect)((function(){E&&le(Y)}),[E]),Object(Cs.useEffect)((function(){D&&ue(X)}),[D]),Object(Cs.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(ia.g)(Object(Ea.a)(t.update),(function(){w(!1),S(!1),F(!1),L(!1),J(!1),q(!0)}))(),_e=Object(wa.a)(pe,2),Oe=_e[0],he=(_e[1].loading,{variables:{document_tasks:{global:{document_id:"=".concat(u.selectedRowKeys[0]),user_id_created:"=".concat(null===H||void 0===H?void 0:H.id)}}}}),fe=Object(ac.a)(Lc,he),xe=(fe.loading,fe.data),ve=fe.refetch;Object(Cs.useEffect)((function(){V&&ve(he)}),[null===u||void 0===u?void 0:u.selectedRowKeys[0]]);var ge=xe&&null!=xe[Object.keys(xe)[0]]?xe[Object.keys(xe)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id?e.document_id:"",status:e.status?e.status:"",is_cancelled:e.is_cancelled?e.is_cancelled:"",note:e.note?e.note:"",deadline:e.deadline?e.deadline:"",date_created:e.date_created?e.date_created:"",user_id_created:e.user_id_created?e.user_id_created:"",fio_created:e.fio_created?e.fio_created:"",user_id_receiver:e.user_id_receiver?e.user_id_receiver:"",fio_receiver:e.fio_receiver?e.fio_receiver:"",route_id:e.route_id?e.route_id:"",task_statuses:e.task_statuses.name?e.task_statuses.name:"",document_tasks_files:0!=e.document_tasks_files.length?e.document_tasks_files:[],document_tasks_logs:e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==H.id}))]}})):[],ye=Object(Cs.useState)(),Ve=Object(wa.a)(ye,2),we=Ve[0],Ne=Ve[1],ke=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},Ce=Object(ac.a)(Dc,ke),Se=(Ce.loading,Ce.data),Te=Ce.refetch;Object(Cs.useEffect)((function(){V&&Te(ke)}),[V]);var Ie=Se&&null!=Se[Object.keys(Se)[0]]?Se[Object.keys(Se)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ee=Object(Ea.a)(Ec,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Fe=Object(wa.a)(Ee,2),Pe=Fe[0],Re=Fe[1],De=(Re.loading,Re.error,function(e){Pe({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:we}}}),Te(ke),e.resetFields(["comments"])}),Le=function(e,t){e.target.value.length>0&&Ne(e.target.value)},Ue=Object(Cs.useState)(),$e=Object(wa.a)(Ue,2),Me=$e[0],Je=$e[1],ze=Object(Cs.useState)(),Ke=Object(wa.a)(ze,2),Ae=Ke[0],qe=Ke[1],He=Object(Cs.useState)(),Be=Object(wa.a)(He,2),Ge=Be[0],Qe=Be[1],We=Object(Ea.a)(Fc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ye=Object(wa.a)(We,2),Xe=Ye[0],Ze=Ye[1],et=(Ze.loading,Ze.error,Object(Ea.a)(Pc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),tt=Object(wa.a)(et,2),nt=(tt[0],tt[1]),st=(nt.loading,nt.error,function(){Tc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),at=function(){qe(7)},it=function(){qe(2)},ct=function(e){console.log("CLIIIICK",e),rt({variables:{document_files:{id:e.id}}})},ot=Object(Ea.a)(Rc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),lt=Object(wa.a)(ot,2),rt=lt[0],dt=lt[1],ut=(dt.loading,dt.error,Object(Cs.useRef)());return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){w(!0)},children:[Object(ha.jsx)(Xa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ha.jsx)(Ga.a,{title:u.title,visible:V,centered:!0,width:950,onOk:function(){j.submit()},onCancel:function(){w(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)("div",{id:"testId",ref:ut,children:Object(ha.jsx)(c,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},handleStatusCancelled:it,HandleDeleteFile:ct,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:A})})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(o,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){F(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(l,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(r,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(d,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=Ae&&qe(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),qe(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&Je(e)},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),qe(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),Ae&&(e.status_id=Ae),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:A})})]})})),$c=Uc,Mc=Ss.a.memo((function(e){var t=Object(Cs.useState)([]),n=Object(wa.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(Cs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id])},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),Jc=Mc,zc=n(442),Kc=n(473),Ac=zc.a.Dragger,qc=function(e){return Object(ha.jsxs)(Ac,Object(ks.a)(Object(ks.a)({},e),{},{beforeUpload:function(e,t){return console.log("beforeUpload file",e),console.log("beforeUpload fileList",t),e.size>55e5&&Tc.b.error({key:"msgKeyFileError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u0440\u0430\u0437\u043c\u0435\u0440 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439."),duration:30,className:"custom-class",style:{marginTop:"20vh"},onClick:function(){return Tc.b.destroy("msgKeyFileError")}}),"image/png"!==e.type&&"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"application/msword"!==e.type&&"application/vnd.ms-excel"!==e.type&&Tc.b.error({key:"msgKeyFileTypeError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430."),duration:30,onClick:function(){return Tc.b.destroy("msgKeyFileTypeError")}}),e.size<55e5&&"image/png"===e.type||e.size<55e5&&"image/jpg"===e.type||e.size<55e5&&"image/jpeg"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||e.size<55e5&&"application/pdf"===e.type||e.size<55e5&&"application/msword"===e.type||e.size<55e5&&"application/vnd.ms-excel"===e.type||zc.a.LIST_IGNORE},children:[Object(ha.jsx)("p",{className:"ant-upload-drag-icon",children:Object(ha.jsx)(Kc.a,{})}),Object(ha.jsx)("p",{className:"ant-upload-text",children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043c\u044b\u0448\u044c\u044e \u0442\u0443\u0442 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043d\u0430 \u044d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 "}),Object(ha.jsx)("p",{className:"ant-upload-hint",children:"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0437\u0430 \u0440\u0430\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432"})]}))},Hc=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:a.log_username})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Bc=Hc,Gc=n(210),Qc=Ss.a.memo((function(e){var t=Object(ia.j)(),n=/^\d+$/,s=Object(Cs.useState)({log_username:t.username}),a=Object(wa.a)(s,2),i=a[0],c=a[1];Object(Cs.useEffect)((function(){e.form2.setFieldsValue(i)}),[i]),Object(Cs.useEffect)((function(){e.initialValues&&c({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_agreement_list[0].price,subject:e.initialValues.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:i.log_username})}),[e.initialValues]);var o=Object(Cs.useState)(1),l=Object(wa.a)(o,2),r=l[0],d=l[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(i),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(ks.a)({},t)))},children:[Object(ha.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0420\u0415\u0410\u041b\u0418\u0417\u0410\u0426\u0418\u042e \u0413\u041e\u0422\u041e\u0412\u041e\u0419 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){d(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:r})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Wc=Qc,Yc=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form3.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues3&&i({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_id:e.initialValues3.documents[0].status_id,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,files:e.initialValues3.documents[0].files,log_username:a.log_username})}),[e.initialValues3]);var c=Object(Cs.useState)(1),o=Object(wa.a)(c,2),l=o[0],r=o[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Xc=Yc,Zc=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form4.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues4&&i({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_id:e.initialValues4.documents[0].status_id,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,files:e.initialValues4.documents[0].files,log_username:a.log_username})}),[e.initialValues4]);var c=Object(Cs.useState)(1),o=Object(wa.a)(c,2),l=o[0],r=o[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u0412\u041d\u0423\u0422\u0420\u0418\u0417\u0410\u0412\u041e\u0414\u0421\u041a\u0418\u0425 \u041d\u0423\u0416\u0414 \u0418 \u041a\u0410\u041f\u0418\u0422\u0410\u041b\u042c\u041d\u042b\u0425 \u0417\u0410\u0422\u0420\u0410\u0422"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),eo=Zc,to=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(Cs.useState)({log_username:t.username}),s=Object(wa.a)(n,2),a=s[0],i=s[1];Object(Cs.useEffect)((function(){e.form5.setFieldsValue(a)}),[a]),Object(Cs.useEffect)((function(){e.initialValues5&&i({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,files:e.initialValues5.documents[0].files,log_username:a.log_username})}),[e.initialValues5]);return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),no=to,so={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Oe||(Oe=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                reason\n                date_modified\n                status_id\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(he||(he=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    reason\n                    date_created\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(fe||(fe=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(xe||(xe=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(ve||(ve=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(ge||(ge=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},ao=so,io={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ye||(ye=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(Ve||(Ve=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(we||(we=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Ne||(Ne=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(ke||(ke=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Ce||(Ce=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},co=io,oo={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Se||(Se=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(Te||(Te=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Ie||(Ie=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Ee||(Ee=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(Fe||(Fe=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Pe||(Pe=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},lo=oo,ro={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Re||(Re=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(De||(De=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Le||(Le=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Ue||(Ue=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)($e||($e=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Me||(Me=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},uo=ro,mo={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Je||(Je=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(ze||(ze=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Ke||(Ke=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Ae||(Ae=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(qe||(qe=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(He||(He=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},jo=mo,bo=n(445),po=Ss.a.memo((function(e){var t,n,s,a,i={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Be||(Be=Object(Na.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Ia.a)(Ge||(Ge=Object(Na.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(Qe||(Qe=Object(Na.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},c=Object(Ia.a)(We||(We=Object(Na.a)(["\n       mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n"]))),o=Object(ia.h)(i,"all")(),l=(o.loading,o.data),r=o.refetch;Object(Cs.useEffect)((function(){r()}),[]);var d=Object(Ea.a)(c,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(wa.a)(d,2),m=(u[0],u[1]),j=(m.loading,m.error,Object(Cs.useState)({})),b=Object(wa.a)(j,2),p=b[0],_=b[1];console.log("propsS",e);var O=ka.a.useForm(),h=Object(wa.a)(O,1)[0];return Object(Cs.useEffect)((function(){h.setFieldsValue(p)}),[p]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Ga.a,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",visible:e.visible,centered:!0,width:450,onOk:function(){},onCancel:function(){e.setVisible(!1)},maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(Xs.a,{onClick:function(){e.setVisible(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),Object(ha.jsx)(za.a,{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",placement:"topLeft",disabled:!p.replacement,onConfirm:Object(gc.a)(vc.a.mark((function t(){var n;return vc.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.submit();case 2:n=l.positions.filter((function(e){return e.id==p.replacement}))[0],console.log("form name",n,p),e.setRoutesList((function(t){var s=Object.assign({},t),a=s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId);return console.log("tmpIndex",n.id,a),-1===s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId)&&s[0].substitutes.push(n.id),s[0].positionName=n.name,s[0].positionId=n.id,console.log("step old",s),s})),e.form.submit(),console.log("test"),e.setVisible(!1);case 8:case"end":return t.stop()}}),t)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:!p.replacement,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ha.jsx)(ka.a,{form:h,name:"ReplacementSelectForm",onFinish:function(e){console.log(e)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ks.a)({},t)))},children:Object(ha.jsx)(ka.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0435\u0433\u043e",labelAlign:"left",name:"replacement",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{children:[Object(ha.jsx)(Si.a.Option,{value:null},null),l&&(null===(t=l.positions)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e?void 0:e.routeData)&&(null===e||void 0===e||null===(n=e.stepCount)||void 0===n?void 0:n.step)&&null!=l[Object.keys(l)[0]]&&(null===e||void 0===e||null===(s=e.routeData[e.stepCount.step-1])||void 0===s||null===(a=s.substitutes)||void 0===a?void 0:a.length)>0?e.routeData[e.stepCount.step-1].substitutes.map((function(t,n){var s,a;if(t!=(null===(s=e.routeData.filter((function(e){return e.id==t}))[0])||void 0===s?void 0:s.positionId))return Object(ha.jsx)(Si.a.Option,{value:t,children:null===(a=l.positions.filter((function(e){return console.log("map",t,n,l.positions.filter((function(e){return e.id==t}))),e.id==t}))[0])||void 0===a?void 0:a.name},t)})):null]}))})})})})})),_o=po,Oo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=yc.a.Step,m=Object(Cs.useState)(!1),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=Object(Cs.useState)({step:"0"}),v=Object(wa.a)(x,2),g=v[0],y=v[1],V=Object(Cs.useState)({log_username:r.username}),w=Object(wa.a)(V,2),N=w[0],k=w[1],C=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(N)}),[N]),Object(Cs.useEffect)((function(){e.initialValues&&(k({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,log_username:N.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var S=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(N),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){k(Object.assign({},N,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:N.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:N.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:N.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:N.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){C(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(_o,{visible:b,setVisible:p,setRoutesList:f,routesList:h,stepCount:g,routeData:null===e||void 0===e||null===(s=e.initialValues)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues.documents[0].step==n+1&&p(!0)},subTitle:n==g.step-1&&(null===N||void 0===N||null===(s=N.signatures)||void 0===s?void 0:s.length)>0||1==g.step?function(){var e;if(1==g.step&&0==n){var t=Object(ia.f)(new Date(N.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===N||void 0===N||null===(e=N.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(ia.f)(new Date(N.signatures[N.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Zs.a,{children:Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),ho=Oo,fo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(ia.j)(),j=(bo.a.Title,bo.a.Link),b=yc.a.Step,p=Object(Cs.useState)(!1),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(wa.a)(f,2),v=x[0],g=x[1],y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=V[0],N=V[1],k=Object(Cs.useState)({log_username:m.username}),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(S)}),[S]),Object(Cs.useEffect)((function(){e.initialValues2&&(console.log("props.initialValues 22222",e.initialValues2),T({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 2",e.initialValues2),N({step:e.initialValues2.documents[0].step}),g(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),P=Object(wa.a)(F,2);P[0],P[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(j,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(_o,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:w,routeData:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:w.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues2.documents[0].step==n+1&&h(!0)},subTitle:n==w.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==w.step?function(){var e;if(1==w.step&&0==n){var t=Object(ia.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(ia.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues2)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),xo=fo,vo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(ia.j)(),j=(bo.a.Title,bo.a.Link),b=yc.a.Step,p=Object(Cs.useState)(!1),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(wa.a)(f,2),v=x[0],g=x[1],y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=V[0],N=V[1],k=Object(Cs.useState)({log_username:m.username}),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(S)}),[S]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(console.log("props.initialValues 33333",e.initialValues3),T({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 3",e.initialValues3),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),P=Object(wa.a)(F,2);P[0],P[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(j,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(_o,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:w,routeData:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:w.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues3.documents[0].step==n+1&&h(!0)},subTitle:n==w.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==w.step?function(){var e;if(1==w.step&&0==n){var t=Object(ia.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(ia.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),go=vo,yo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(ia.j)(),j=(bo.a.Title,bo.a.Link),b=yc.a.Step,p=Object(Cs.useState)(!1),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(wa.a)(f,2),v=x[0],g=x[1],y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=V[0],N=V[1],k=Object(Cs.useState)({log_username:m.username}),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(S)}),[S]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(T({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:S.log_username}),console.log("props.initialValues4",e.initialValues4),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),P=Object(wa.a)(F,2);P[0],P[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:S.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(j,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(_o,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:w,routeData:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:w.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues4.documents[0].step==n+1&&h(!0)},subTitle:n==w.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==w.step?function(){var e;if(1==w.step&&0==n){var t=Object(ia.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(ia.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Vo=yo,wo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=yc.a.Step,m=Object(Cs.useRef)("vertical");Object(Cs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(Cs.useState)(!1),b=Object(wa.a)(j,2),p=b[0],_=b[1],O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)({step:"0"}),g=Object(wa.a)(v,2),y=g[0],V=g[1],w=Object(Cs.useState)({log_username:r.username}),N=Object(wa.a)(w,2),k=N[0],C=N[1],S=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(k)}),[k]),Object(Cs.useEffect)((function(){e.initialValues5&&(C({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:k.log_username}),V({step:e.initialValues5.documents[0].step}),x(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(k),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){C(Object.assign({},k,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:k.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:k.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:k.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){S(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(_o,{visible:p,setVisible:_,setRoutesList:x,routesList:f,stepCount:y,routeData:null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:y.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues5.documents[0].step==n+1&&_(!0)},subTitle:n==y.step-1&&(null===k||void 0===k||null===(s=k.signatures)||void 0===s?void 0:s.length)>0||1==y.step?function(){var e;if(1==y.step&&0==n){var t=Object(ia.f)(new Date(k.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===k||void 0===k||null===(e=k.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(ia.f)(new Date(k.signatures[k.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),No=wo,ko=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.positions.toString(),s=t.id,a={documents:{global:{user_id:"=".concat(s),ORDER_BY:["date_created desc"]}}};ao.options.all.variables=a,co.options.all.variables=a,lo.options.all.variables=a,uo.options.all.variables=a,jo.options.all.variables=a,t.admin&&(a={});var i=Object(Cs.useState)(!1),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(ia.g)(Object(Ea.a)(ao.delete))(),u=Object(wa.a)(d,2),m=u[0],j=u[1].loading,b=Object(ia.h)(ao,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(Cs.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var t,s,a,i;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(t=e.document_statuses)||void 0===t?void 0:t.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:""}})):[],f=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Jc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(Sc,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",GQL:ao,Form1:Bc,GQL2:co,Form2:Wc,GQL3:lo,Form3:Xc,GQL4:uo,Form4:eo,GQL5:jo,Form5:no,width:750}),Object(ha.jsx)($c,{visibleModalUpdate:i,GQL:ao,UpdateForm:ho,visibleModalUpdate2:c,GQL2:co,UpdateForm2:xo,visibleModalUpdate3:o,GQL3:lo,UpdateForm3:go,visibleModalUpdate4:l,GQL4:uo,UpdateForm4:Vo,visibleModalUpdate5:r,GQL5:jo,UpdateForm5:No,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[ao.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r})})})),Co=ko,So=["GQL"],To=Ss.a.memo((function(e){var t=e.GQL,n=Object(ca.a)(e,So),s=(Object(_c.useLocation)().pathname,Object(Cs.useState)([])),a=Object(wa.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(Ea.a)(t.setIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(wa.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(Cs.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",loading:n.loading,style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,bordered:n.bordered,onRow:function(e,t){return{onClick:function(t){c([e.key,e.route_id])},onDoubleClick:function(t){var s;0==(null===e||void 0===e||null===(s=e.document_logs)||void 0===s?void 0:s.is_read)?(d({variables:{document:{id:e.document_logs.id,is_read:!0}}}),10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0)):(10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),Io=To,Eo=["reasonText","dataProps","setState","user"],Fo=Ss.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(ca.a)(e,Eo),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(wa.a)(n,2),a=s[0];s[1];return Object(ha.jsx)(za.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove(),t.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Po=Fo,Ro=["item","reasonText","dataProps","setState","user"],Do=Ss.a.memo((function(e){var t=e.item,n=(e.reasonText,e.dataProps),s=e.setState,a=(e.user,Object(ca.a)(e,Ro),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b?")),i=Object(wa.a)(a,2),c=i[0];i[1];return Object(ha.jsx)(za.a,{title:c,placement:"topLeft",disabled:n.disabled,onConfirm:function(){n.HandleDeleteFile(t),s((function(e){console.log("item",t);var n=Object.assign({},e),s=n.files.findIndex((function(e){return e.id==t.id}));return n.files.splice(s,1),console.log("OOOLLLLDDDDD+++++++++",s,n.files),n})),console.log("ITEM",t)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",icon:Object(ha.jsx)(Ma.a,{})})})})),Lo=Do,Uo=(bo.a.Title,bo.a.Link),$o=yc.a.Step,Mo=/^\d+$/,Jo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=p[0],O=p[1],h=Object(Cs.useState)({step:"0"}),f=Object(wa.a)(h,2),x=f[0],v=f[1];Object(Cs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),v({step:e.initialValues.documents[0].step}),O(e.initialValues.documents[0].route_data))}),[e.initialValues]);var g=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Mo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(Uo,{children:Object(ha.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})}),Object(ha.jsx)(Lo,{item:t,dataProps:e,setState:m,user:l}),Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ha.jsx)($o,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Po,{dataProps:e,setState:m,user:l})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),zo=Jo,Ko=["reasonText","dataProps","setState","user"],Ao=Ss.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(ca.a)(e,Ko),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(wa.a)(n,2),a=s[0];s[1];return Object(ha.jsx)(za.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove2(),t.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),qo=Ao,Ho=(bo.a.Title,bo.a.Link),Bo=yc.a.Step,Go=/^\d+$/,Qo=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(ia.j)(),m=Object(Cs.useState)({log_username:u.username}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)({step:"0"}),g=Object(wa.a)(v,2),y=g[0],V=g[1];Object(Cs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),V({step:e.initialValues2.documents[0].step}),x(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var w=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),k=Object(wa.a)(N,2),C=k[0],S=k[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){S(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:C})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Go,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(t){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(Ho,{children:Object(ha.jsx)("a",{"data-fileid":t.id,onClick:w,children:t.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){_(t)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})}),Object(ha.jsx)(Lo,{item:t,dataProps:e,setState:p,user:u}),Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ha.jsx)(Bo,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(qo,{dataProps:e,setState:p,user:u}),Object(ha.jsx)(Da.a,{type:"vertical"})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Wo=Qo,Yo=["reasonText","dataProps","setState","user"],Xo=Ss.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(ca.a)(e,Yo),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(wa.a)(n,2),a=s[0];s[1];return Object(ha.jsx)(za.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove3(),t.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Zo=Xo,el=(bo.a.Title,bo.a.Link),tl=yc.a.Step,nl=/^\d+$/,sl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=p[0],O=p[1],h=Object(Cs.useState)({step:"0"}),f=Object(wa.a)(h,2),x=f[0],v=f[1];Object(Cs.useEffect)((function(){e.initialValues3&&(m({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:u.log_username}),v({step:e.initialValues3.documents[0].step}),O(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var g=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(Cs.useState)(1),V=Object(wa.a)(y,2),w=V[0],N=V[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues3)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues3)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){N(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:w})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:nl,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues3)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(el,{children:Object(ha.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})}),Object(ha.jsx)(Lo,{item:t,dataProps:e,setState:m,user:l}),Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ha.jsx)(tl,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Zo,{dataProps:e,setState:m,user:l})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),al=sl,il=["reasonText","dataProps","setState","user"],cl=Ss.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(ca.a)(e,il),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(wa.a)(n,2),a=s[0];s[1];return Object(ha.jsx)(za.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove4(),t.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ol=cl,ll=(bo.a.Title,bo.a.Link),rl=yc.a.Step,dl=/^\d+$/,ul=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=p[0],O=p[1],h=Object(Cs.useState)({step:"0"}),f=Object(wa.a)(h,2),x=f[0],v=f[1];Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,j,b;e.initialValues4&&(m({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(j=e.initialValues4.documents[0])||void 0===j||null===(b=j.data_agreement_list_internal_needs[0])||void 0===b?void 0:b.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:u.log_username}),v({step:e.initialValues4.documents[0].step}),O(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var g=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(Cs.useState)(1),V=Object(wa.a)(y,2),w=V[0],N=V[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues4)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues4)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){N(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:w})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:dl,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues4)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(ll,{children:Object(ha.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})}),Object(ha.jsx)(Lo,{item:t,dataProps:e,setState:m,user:l}),Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ha.jsx)(rl,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ol,{dataProps:e,setState:m,user:l})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),ml=ul,jl=["reasonText","dataProps","setState","user"],bl=Ss.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(ca.a)(e,jl),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(wa.a)(n,2),a=s[0];s[1];return Object(ha.jsx)(za.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove5(),t.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),pl=bl,_l=(bo.a.Title,bo.a.Link),Ol=yc.a.Step,hl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useRef)("vertical");Object(Cs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(r.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var d=Object(Cs.useState)({log_username:l.username}),u=Object(wa.a)(d,2),m=u[0],j=u[1],b=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(m)}),[m]);var p=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=Object(Cs.useState)({step:"0"}),x=Object(wa.a)(f,2),v=x[0],g=x[1];Object(Cs.useEffect)((function(){e.initialValues5&&(j({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:m.log_username}),g({step:e.initialValues5.documents[0].step}),h(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var y=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(Cs.useState)(1),w=Object(wa.a)(V,2);w[0],w[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(m),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){j(Object.assign({},m,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"form-input-label",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues5)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(_l,{children:Object(ha.jsx)("a",{"data-fileid":t.id,onClick:y,children:t.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){b(t)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})}),Object(ha.jsx)(Lo,{item:t,dataProps:e,setState:j,user:l}),Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",direction:r.current,responsive:!0,current:v.step-1,className:"steps-form-update",children:O.map((function(e){return Object(ha.jsx)(Ol,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(pl,{dataProps:e,setState:j,user:l})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),fl=hl,xl=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Ye||(Ye=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(Xe||(Xe=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Ze||(Ze=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                files{\n                    id\n                    filename\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(et||(et=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(tt||(tt=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(nt||(nt=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(st||(st=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(Cs.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(Cs.useState)(!1),u=Object(ia.g)(Object(Ea.a)(a.delete))(),m=Object(wa.a)(u,2),j=m[0],b=m[1].loading,p=Object(ia.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(Cs.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 7==e.status_id}));window.localStorage.rows_approved=x.length;var v=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(Io,{data:{dict:v,records:x},loading:_,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:c,GQL:a,UpdateForm:zo,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Wo,visibleModalUpdate3:l,GQL3:a,UpdateForm3:al,visibleModalUpdate4:r,GQL4:a,UpdateForm4:ml,visibleModalUpdate5:d,GQL5:a,UpdateForm5:fl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})),vl=xl,gl=(bo.a.Title,bo.a.Link),yl=(yc.a.Step,Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=(p[0],p[1]),O=Object(Cs.useState)({step:"0"}),h=Object(wa.a)(O,2),f=(h[0],h[1]);Object(Cs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(gl,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){j(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})}))),Vl=yl,wl=(bo.a.Title,bo.a.Link),Nl=(yc.a.Step,Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(ia.j)(),m=Object(Cs.useState)({log_username:u.username}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=(h[0],h[1]),x=Object(Cs.useState)({step:"0"}),v=Object(wa.a)(x,2),g=(v[0],v[1]);Object(Cs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),w=Object(wa.a)(V,2);w[0],w[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(wl,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})}))),kl=Nl,Cl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Sl=Cl,Tl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Il=Tl,El=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Fl=El,Pl=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(at||(at=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(it||(it=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(ct||(ct=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(ot||(ot=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(lt||(lt=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(rt||(rt=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(dt||(dt=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(Cs.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(Cs.useRef)(0),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(Cs.useState)(!1),u=Object(Cs.useState)(!1),m=Object(ia.g)(Object(Ea.a)(a.delete))(),j=Object(wa.a)(m,2),b=j[0],p=j[1].loading,_=Object(ia.h)(a,"all")(),O=_.loading,h=_.data,f=_.refetch;Object(Cs.useEffect)((function(){f()}),[]);var x=(h&&null!=h[Object.keys(h)[0]]?h[Object.keys(h)[0]].map((function(e){var n,a,i,o;return c.current=h.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=x.length;var v=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(Io,{data:{dict:v,records:x},loading:O,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:o,GQL:a,UpdateForm:Vl,visibleModalUpdate2:l,GQL2:a,UpdateForm2:kl,visibleModalUpdate3:r,GQL3:a,UpdateForm3:Sl,visibleModalUpdate4:d,GQL4:a,UpdateForm4:Il,visibleModalUpdate5:u,GQL5:a,UpdateForm5:Fl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},b({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:p,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:o,visibleModalUpdate2:l,visibleModalUpdate3:r,visibleModalUpdate4:d,visibleModalUpdate5:u,GQL:a})})),Rl=Pl,Dl=(bo.a.Title,bo.a.Link),Ll=(yc.a.Step,Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=(p[0],p[1]),O=Object(Cs.useState)({step:"0"}),h=Object(wa.a)(O,2),f=(h[0],h[1]);Object(Cs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:u.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(Dl,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){j(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})}))),Ul=Ll,$l=(bo.a.Title,bo.a.Link),Ml=(yc.a.Step,Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(ia.j)(),m=Object(Cs.useState)({log_username:u.username}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]);var O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=(h[0],h[1]),x=Object(Cs.useState)({step:"0"}),v=Object(wa.a)(x,2),g=(v[0],v[1]);console.log("PROPS UPDATE DOC 2",e),Object(Cs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),w=Object(wa.a)(V,2);w[0],w[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)($l,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})}))),Jl=Ml,zl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Kl=zl,Al=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),ql=Al,Hl=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=Object(Cs.useState)({log_username:r.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(Cs.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(wa.a)(O,2);h[0],h[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Bl=Hl,Gl=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ut||(ut=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                reason\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(mt||(mt=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(jt||(jt=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(bt||(bt=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(pt||(pt=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(_t||(_t=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(Ot||(Ot=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=Object(Cs.useRef)(0),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(Cs.useState)(!1),u=Object(ia.g)(Object(Ea.a)(a.delete))(),m=Object(wa.a)(u,2),j=m[0],b=m[1].loading,p=Object(ia.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(Cs.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,c,o;return i.current=O.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 2==e.status_id}));window.localStorage.rows_rejected=x.length;var v=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Io,{data:{dict:v,records:x},loading:_,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:c,GQL:a,UpdateForm:Ul,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Jl,visibleModalUpdate3:l,GQL3:a,UpdateForm3:Kl,visibleModalUpdate4:r,GQL4:a,UpdateForm4:ql,visibleModalUpdate5:d,GQL5:a,UpdateForm5:Bl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})})),Ql=Gl,Wl=n(451),Yl=["reasonText","dataProps","setState","user"],Xl=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Yl),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Zl=Xl,er=["reasonText","dataProps","setState","user"],tr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,er),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),nr=tr,sr=["reasonText","dataProps","setState","user"],ar=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,sr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),ir=ar,cr=["reasonText","dataProps","setState","user"],or=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,cr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),lr=or,rr=(n(229),Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O=Object(ia.j)(),h=bo.a.Link,f=Object(Cs.useState)({log_username:O.username}),x=Object(wa.a)(f,2),v=x[0],g=x[1],y=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(O.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=null===v||void 0===v||null===(t=v.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),w=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===V||void 0===V?void 0:V.includes(e.id)})),N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(v)}),[v]),Object(Cs.useEffect)((function(){e.initialValues&&g({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:v.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:v.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:v.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===v||void 0===v||null===(c=v.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===v||void 0===v||null===(l=v.document_options)||void 0===l?void 0:l.supllier)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===v||void 0===v||null===(u=v.document_options)||void 0===u?void 0:u.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===v||void 0===v||null===(b=v.document_options)||void 0===b?void 0:b.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===w||void 0===w?void 0:w.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(h,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){y(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),2==v.status?Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),v.report?v.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:v.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(h,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){y(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}):"",1==(null===v||void 0===v?void 0:v.status)&&(null===v||void 0===v?void 0:v.user_id_created)!=O.id?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})}))),dr=rr,ur=n(441),mr=n(458),jr=(n(155),n(86)),br=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p=Object(ia.j)(),_={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ht||(ht=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Ia.a)(ft||(ft=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(xt||(xt=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},O={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(vt||(vt=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Ia.a)(gt||(gt=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(yt||(yt=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Ia.a)(Vt||(Vt=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},h=bo.a.Link,f=Object(ia.g)(Object(Ea.a)(O.insert))(),x=Object(wa.a)(f,2),v=x[0],g=(x[1].loading,Object(ia.h)(_,"all")()),y=(g.loading,g.data),V=g.refetch,w=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(p.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){V()}),[]);var k=Object(Cs.useState)({}),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=ka.a.useForm(),E=Object(wa.a)(I,1)[0];Object(Cs.useEffect)((function(){E.setFieldsValue(S)}),[S]);var F=Ka.a.Group,P=Object(Cs.useState)(!1),R=Object(wa.a)(P,2),D=(R[0],R[1]);return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:550,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),D(!1)},onCancel:function(){D(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ha.jsx)(za.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!S.recepient,onConfirm:Object(gc.a)(vc.a.mark((function e(){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ha.jsxs)(ka.a,{form:E,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(ia.e)(t.deadline._d),user_id_created:"".concat(p.id),fio_created:p.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,supllier:void 0!=t.supllier&&t.supllier,price:void 0!=t.price&&t.price},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};v(n),e.setVisible(!1),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ha.jsx)(Si.a.Option,{value:null},null),null===y||void 0===y||null===(t=y.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ha.jsx)(Si.a.Option,{value:e.id,children:null===y||void 0===y||null===(n=y.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ha.jsx)(ka.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(ur.a,{locale:jr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ha.jsx)(ka.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:5})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop marginBottom",children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423:"})}),Object(ha.jsx)(Ws.a,{span:13,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"title",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})}),Object(ha.jsx)(Ws.a,{span:13,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_one[0])||void 0===c?void 0:c.supllier}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"supllier",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(ha.jsx)(Ws.a,{span:13,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_one[0])||void 0===r?void 0:r.subject}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"subject",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: "})}),Object(ha.jsx)(Ws.a,{span:13,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_one[0])||void 0===m?void 0:m.price}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"price",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:15,children:Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ha.jsx)(Ws.a,{span:9,children:Object(ha.jsx)(Xs.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));E.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ha.jsx)(ka.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ha.jsx)(F,{children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b?void 0:b.files.map((function(e){return Object(ha.jsxs)(Ss.a.Fragment,{children:[Object(ha.jsxs)(Ws.a,{span:21,children:[Object(ha.jsx)(h,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){w(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})]}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(Ka.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),pr=br,_r=["GQL"],Or=Ss.a.memo((function(e){var t=e.GQL,n=Object(ca.a)(e,_r),s=(Object(_c.useLocation)().pathname,Object(Cs.useState)([])),a=Object(wa.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(Ea.a)(t.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(wa.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(Cs.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,onRow:function(e,t){return{onClick:function(t){c([e.key,e.document_id,e.route_id])},onDoubleClick:function(t){void 0==e.document_tasks_logs?n.visibleModalUpdate[1](!0):(n.visibleModalUpdate[1](!0),d({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}))}}},pagination:{simple:!0,pageSize:10,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),hr=Or,fr=["GQL","UpdateForm"],xr=Ss.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(ca.a)(e,fr),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(wt||(wt=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(Nt||(Nt=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(kt||(kt=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Ct||(Ct=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(St||(St=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Tt||(Tt=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(It||(It=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},i=ka.a.useForm(),c=Object(wa.a)(i,1)[0],o=Object(Cs.useState)(!0),l=Object(wa.a)(o,2),r=(l[0],l[1]),d=s.visibleModalUpdate?s.visibleModalUpdate:[],u=Object(wa.a)(d,2),m=u[0],j=u[1],b={};b[t.table]=t.table?{global:{id:"= ".concat(s.selectedRowKeys[0])}}:{};var p=Object(ia.h)(t,"one",{variables1:b})(),_=(p.loading,p.data),O=p.refetch;Object(Cs.useEffect)((function(){m&&O(b)}),[m]);var h={documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},f=Object(ia.h)(a,"one",{variables1:b})(),x=(f.loading,f.data),v=f.refetch;Object(Cs.useEffect)((function(){m&&v(h)}),[m]);var g=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(gc.a)(vc.a.mark((function n(s){return vc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",disabled:3!==s.selectedRowKeys.length,onClick:function(){j(!0)},children:[Object(ha.jsx)(Xa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ha.jsx)(Ga.a,{title:s.title,visible:m,width:900,onCancel:function(){j(!1),r(!0)},footer:null,children:Object(ha.jsx)(n,{document:null===x||void 0===x?void 0:x.documents[0],initialValues:_,form:c,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var a,i,c;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},c=[],!(null===n||void 0===n||null===(a=n.files)||void 0===a?void 0:a.fileList)){e.next=5;break}return e.next=5,g(n.files.fileList).then((function(e){c=e}));case 5:n.docs=c||[],i[t.exemplar]={id:s.selectedRowKeys[0],status:2,user_id:n.user_id_created},console.log("values-------",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),vr=xr,gr=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Et||(Et=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Ia.a)(Ft||(Ft=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(Pt||(Pt=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Ia.a)(Rt||(Rt=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Ia.a)(Dt||(Dt=Object(Na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},u=Object(ia.j)(),m=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=Object(Cs.useState)({step:"0"}),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=Object(Cs.useState)(!1),v=(bo.a.Title,bo.a.Link),g=yc.a.Step,y=Wl.a.Panel,V=Object(Cs.useRef)("vertical");Object(Cs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(V.current=(null===e||void 0===e||null===(a=e.initialValues)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var w=Object(Cs.useState)(!1),N=Object(wa.a)(w,2),k=N[0],C=N[1],S=Object(Cs.useState)({log_username:u.username}),T=Object(wa.a)(S,2),I=T[0],E=T[1],F=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(I)}),[I]),Object(Cs.useEffect)((function(){e.initialValues&&(E({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:I.log_username}),f({step:e.initialValues.documents[0].step}),p(e.initialValues.documents[0].route_data))}),[e.initialValues]);var P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(wa.a)(R,2),L=D[0],U=D[1];function $(e){}return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(I)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){E(Object.assign({},I,Object(ks.a)({},t)))},children:[Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsxs)(Ws.a,{span:8,children:[" ",Object(ha.jsx)("b",{children:"\u041e\u0442: "})]})," ",Object(ha.jsx)(Ws.a,{span:16,children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio}),Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position}),Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:I.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:I.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:I.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:I.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ha.jsx)(Wl.a,{defaultActiveKey:["2"],onChange:$,children:Object(ha.jsx)(y,{header:Object(ha.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:12,className:"document-view-wrap",children:[Object(ha.jsx)(v,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:P,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})},"2")})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",direction:V.current,responsive:!0,current:h.step-1,className:"steps-form-update",children:b.map((function(e){return Object(ha.jsx)(g,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Zl,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(lr,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ha.jsx)(ir,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(nr,{reasonText:L,dataProps:e,setState:E,user:u})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Wl.a,{defaultActiveKey:["1"],onChange:$,children:Object(ha.jsx)(y,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ha.jsx)(hr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:x,GQL:d,title:function(t){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(vr,{visibleModalUpdate:x,UpdateForm:dr,GQL:d,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(pr,{visible:k,setVisible:C,document:e.initialValues})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),yr=gr,Vr=["reasonText","dataProps","setState","user"],wr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Vr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Nr=wr,kr=["reasonText","dataProps","setState","user"],Cr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,kr),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Sr=Cr,Tr=["reasonText","dataProps","setState","user"],Ir=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Tr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Er=Ir,Fr=["reasonText","dataProps","setState","user"],Pr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Fr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Rr=Pr,Dr=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y=Object(ia.j)(),V={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Lt||(Lt=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Ia.a)(Ut||(Ut=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)($t||($t=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},w={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Mt||(Mt=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Ia.a)(Jt||(Jt=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(zt||(zt=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Ia.a)(Kt||(Kt=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},N=bo.a.Link,k=Object(ia.g)(Object(Ea.a)(w.insert))(),C=Object(wa.a)(k,2),S=C[0],T=(C[1].loading,Object(ia.h)(V,"all")()),I=(T.loading,T.data),E=T.refetch,F=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(y.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){E()}),[]);var R=Object(Cs.useState)({}),D=Object(wa.a)(R,2),L=D[0],U=D[1],$=ka.a.useForm(),M=Object(wa.a)($,1)[0];Object(Cs.useEffect)((function(){M.setFieldsValue(L)}),[L]);var J=Ka.a.Group,z=Object(Cs.useState)(!1),K=Object(wa.a)(z,2),A=(K[0],K[1]);return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),A(!1)},onCancel:function(){A(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ha.jsx)(za.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!L.recepient,onConfirm:Object(gc.a)(vc.a.mark((function e(){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ha.jsxs)(ka.a,{form:M,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(ia.e)(t.deadline._d),user_id_created:"".concat(y.id),fio_created:y.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency_price:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,sider_signatures_date:void 0!=t.sider_signatures_date&&t.sider_signatures_date,received_from_counteragent_date:void 0!=t.received_from_counteragent_date&&t.received_from_counteragent_date},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};S(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){U(Object.assign({},L,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ha.jsx)(Si.a.Option,{value:null},null),null===I||void 0===I||null===(t=I.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ha.jsx)(Si.a.Option,{value:e.id,children:null===I||void 0===I||null===(n=I.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ha.jsx)(ka.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(ur.a,{locale:jr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ha.jsx)(ka.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:5})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop marginBottom",children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"title",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i?void 0:i.subject}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"subject",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(c=e.document)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list[0])||void 0===l?void 0:l.price}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"price",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.data_agreement_list[0])||void 0===u?void 0:u.currency_price}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"currency_price",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.documents[0])||void 0===j||null===(b=j.data_agreement_list[0])||void 0===b?void 0:b.executor_name_division}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.documents[0])||void 0===_||null===(O=_.data_agreement_list[0])||void 0===O?void 0:O.sider_signatures_date}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"sider_signatures_date",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list[0])||void 0===x?void 0:x.received_from_counteragent_date}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"received_from_counteragent_date",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:18,children:Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ha.jsx)(Ws.a,{span:5,children:Object(ha.jsx)(Xs.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));M.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ha.jsx)(ka.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ha.jsx)(J,{children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.documents[0])||void 0===g?void 0:g.files.map((function(e){return Object(ha.jsxs)(Ss.a.Fragment,{children:[Object(ha.jsxs)(Ws.a,{span:21,children:[Object(ha.jsx)(N,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:P,children:e.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})]}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(Ka.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),Lr=Dr,Ur=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N=Object(ia.j)(),k=bo.a.Link,C=Object(Cs.useState)({log_username:N.username}),S=Object(wa.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(N.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(Cs.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:T.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:T.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency_price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list[0])||void 0===w?void 0:w.received_from_counteragent_date})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),2==T.status?Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=N.id?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),$r=Ur,Mr=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(At||(At=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Ia.a)(qt||(qt=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(Ht||(Ht=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Ia.a)(Bt||(Bt=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Ia.a)(Gt||(Gt=Object(Na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(ia.j)(),p=(bo.a.Title,bo.a.Link),_=yc.a.Step,O=Wl.a.Panel,h=Object(Cs.useState)({log_username:b.username}),f=Object(wa.a)(h,2),x=f[0],v=f[1],g=Object(Cs.useState)(!1),y=Object(Cs.useState)(!1),V=Object(wa.a)(y,2),w=V[0],N=V[1],k=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(x)}),[x]);var C=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),S=Object(wa.a)(C,2),T=S[0],I=S[1],E=Object(Cs.useState)({step:"0"}),F=Object(wa.a)(E,2),P=F[0],R=F[1];Object(Cs.useEffect)((function(){e.initialValues2&&(v({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:x.log_username}),R({step:e.initialValues2.documents[0].step}),I(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var D=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){}var U=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),$=Object(wa.a)(U,2),M=$[0],J=$[1],z=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),K=Object(wa.a)(z,2);K[0],K[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(x),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){v(Object.assign({},x,Object(ks.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:x.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ha.jsx)(Wl.a,{defaultActiveKey:["2"],onChange:L,children:Object(ha.jsx)(O,{header:Object(ha.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:12,className:"document-view-wrap",children:[Object(ha.jsx)(p,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:D,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){k(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})},"2")})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:P.step-1,className:"steps-form-update",children:T.map((function(e){return Object(ha.jsx)(_,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Nr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Rr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ha.jsx)(Er,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Sr,{reasonText:M,dataProps:e,setState:v,user:b})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,J(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Wl.a,{defaultActiveKey:["1"],onChange:L,children:Object(ha.jsx)(O,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ha.jsx)(hr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:g,GQL:j,title:function(t){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(vr,{visibleModalUpdate:g,UpdateForm:$r,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(Lr,{visible:w,setVisible:N,document:e.initialValues2})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Jr=Mr,zr=["reasonText","dataProps","setState","user"],Kr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,zr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Ar=Kr,qr=["reasonText","dataProps","setState","user"],Hr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,qr),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Br=Hr,Gr=["reasonText","dataProps","setState","user"],Qr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Gr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Wr=Qr,Yr=["reasonText","dataProps","setState","user"],Xr=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Yr),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Zr=Xr,ed=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V=Object(ia.j)(),w={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Qt||(Qt=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Ia.a)(Wt||(Wt=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(Yt||(Yt=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},N={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Xt||(Xt=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Ia.a)(Zt||(Zt=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(en||(en=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Ia.a)(tn||(tn=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},k=bo.a.Link,C=Object(ia.g)(Object(Ea.a)(N.insert))(),S=Object(wa.a)(C,2),T=S[0],I=(S[1].loading,Object(ia.h)(w,"all")()),E=(I.loading,I.data),F=I.refetch,P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(V.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){F()}),[]);var D=Object(Cs.useState)({}),L=Object(wa.a)(D,2),U=L[0],$=L[1],M=ka.a.useForm(),J=Object(wa.a)(M,1)[0];Object(Cs.useEffect)((function(){J.setFieldsValue(U)}),[U]);var z=Ka.a.Group,K=Object(Cs.useState)(!1),A=Object(wa.a)(K,2),q=(A[0],A[1]);return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ha.jsx)(za.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!U.recepient,onConfirm:Object(gc.a)(vc.a.mark((function e(){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ha.jsxs)(ka.a,{form:J,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(ia.e)(t.deadline._d),user_id_created:"".concat(V.id),fio_created:V.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,executor_phone_number:void 0!=t.executor_phone_number&&t.executor_phone_number,counteragent_contacts:void 0!=t.counteragent_contacts&&t.counteragent_contacts},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};T(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){$(Object.assign({},U,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ha.jsx)(Si.a.Option,{value:null},null),null===E||void 0===E||null===(t=E.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ha.jsx)(Si.a.Option,{value:e.id,children:null===E||void 0===E||null===(n=E.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ha.jsx)(ka.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(ur.a,{locale:jr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ha.jsx)(ka.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:5})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop marginBottom",children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"title",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.subject}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"subject",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_agreement_list_production[0])||void 0===r?void 0:r.price}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"price",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.currency}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"currency",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b||null===(p=b.data_agreement_list_production[0])||void 0===p?void 0:p.executor_name_division}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(_=e.document)||void 0===_||null===(O=_.documents[0])||void 0===O||null===(h=O.data_agreement_list_production[0])||void 0===h?void 0:h.executor_phone_number}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(f=e.document)||void 0===f||null===(x=f.documents[0])||void 0===x||null===(v=x.data_agreement_list_production[0])||void 0===v?void 0:v.counteragent_contacts}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:18,children:Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ha.jsx)(Ws.a,{span:5,children:Object(ha.jsx)(Xs.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));J.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ha.jsx)(ka.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ha.jsx)(z,{children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(g=e.document)||void 0===g||null===(y=g.documents[0])||void 0===y?void 0:y.files.map((function(e){return Object(ha.jsxs)(Ss.a.Fragment,{children:[Object(ha.jsxs)(Ws.a,{span:21,children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})]}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(Ka.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),td=ed,nd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N=Object(ia.j)(),k=bo.a.Link,C=Object(Cs.useState)({log_username:N.username}),S=Object(wa.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(N.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(Cs.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsxs)(Ws.a,{span:12,children:[T.fio_created," AAAAAAAAA"]})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:T.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list_production[0])||void 0===w?void 0:w.counteragent_contacts})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),2==T.status?Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=N.id?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),sd=nd,ad=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(nn||(nn=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Ia.a)(sn||(sn=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(an||(an=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Ia.a)(cn||(cn=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Ia.a)(on||(on=Object(Na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(ia.j)(),p=(bo.a.Title,bo.a.Link),_=(yc.a.Step,Wl.a.Panel),O=Object(Cs.useState)({log_username:b.username}),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)(!1),g=Object(Cs.useState)(!1),y=Object(wa.a)(g,2),V=y[0],w=y[1],N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(f)}),[f]);var k=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),C=Object(wa.a)(k,2),S=(C[0],C[1]),T=Object(Cs.useState)({step:"0"}),I=Object(wa.a)(T,2),E=(I[0],I[1]);Object(Cs.useEffect)((function(){e.initialValues3&&(x({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:f.log_username}),E({step:e.initialValues3.documents[0].step}),S(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var F=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){}var R=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(wa.a)(R,2),L=D[0],U=D[1],$=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),M=Object(wa.a)($,2);M[0],M[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ks.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ha.jsx)(Wl.a,{defaultActiveKey:["2"],onChange:P,children:Object(ha.jsx)(_,{header:Object(ha.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(p,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){N(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))},"2")})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Ar,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Zr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(Wr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Br,{reasonText:L,dataProps:e,setState:x,user:b})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Wl.a,{defaultActiveKey:["1"],onChange:P,children:Object(ha.jsx)(_,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ha.jsx)(hr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:v,GQL:j,title:function(t){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(vr,{visibleModalUpdate:v,UpdateForm:sd,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(td,{visible:V,setVisible:w,document:e.initialValues3})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),id=ad,cd=["reasonText","dataProps","setState","user"],od=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,cd),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),ld=od,rd=["reasonText","dataProps","setState","user"],dd=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,rd),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),ud=dd,md=["reasonText","dataProps","setState","user"],jd=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,md),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),bd=jd,pd=["reasonText","dataProps","setState","user"],_d=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,pd),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Od=_d,hd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V=Object(ia.j)(),w={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ln||(ln=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Ia.a)(rn||(rn=Object(Na.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Ia.a)(dn||(dn=Object(Na.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},N={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(un||(un=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Ia.a)(mn||(mn=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(jn||(jn=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Ia.a)(bn||(bn=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},k=bo.a.Link,C=Object(ia.g)(Object(Ea.a)(N.insert))(),S=Object(wa.a)(C,2),T=S[0],I=(S[1].loading,Object(ia.h)(w,"all")()),E=(I.loading,I.data),F=I.refetch,P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(V.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){F()}),[]);var D=Object(Cs.useState)({}),L=Object(wa.a)(D,2),U=L[0],$=L[1],M=ka.a.useForm(),J=Object(wa.a)(M,1)[0];Object(Cs.useEffect)((function(){J.setFieldsValue(U)}),[U]);var z=Ka.a.Group,K=Object(Cs.useState)(!1),A=Object(wa.a)(K,2),q=(A[0],A[1]);return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ha.jsx)(Ba.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ha.jsx)(Ga.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ha.jsx)(za.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!U.recepient,onConfirm:Object(gc.a)(vc.a.mark((function e(){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ha.jsxs)(ka.a,{form:J,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(ia.e)(t.deadline._d),user_id_created:"".concat(V.id),fio_created:V.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,executor_phone_number:void 0!=t.executor_phone_number&&t.executor_phone_number,counteragent_contacts:void 0!=t.counteragent_contacts&&t.counteragent_contacts},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};T(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){$(Object.assign({},U,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsxs)(Si.a,Object(ks.a)(Object(ks.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ha.jsx)(Si.a.Option,{value:null},null),null===E||void 0===E||null===(t=E.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ha.jsx)(Si.a.Option,{value:e.id,children:null===E||void 0===E||null===(n=E.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ha.jsx)(ka.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(ur.a,{locale:jr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ha.jsx)(ka.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a.TextArea,{rows:5})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop marginBottom",children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"title",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.subject}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"subject",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_agreement_list_internal_needs[0])||void 0===r?void 0:r.price}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"price",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.currency}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"currency",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b||null===(p=b.data_agreement_list_internal_needs[0])||void 0===p?void 0:p.executor_name_division}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(_=e.document)||void 0===_||null===(O=_.documents[0])||void 0===O||null===(h=O.data_agreement_list_internal_needs[0])||void 0===h?void 0:h.executor_phone_number}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"executor_phone_number",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:13,children:Object(ha.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ha.jsx)(Ws.a,{span:8,children:null===e||void 0===e||null===(f=e.document)||void 0===f||null===(x=f.documents[0])||void 0===x||null===(v=x.data_agreement_list_internal_needs[0])||void 0===v?void 0:v.counteragent_contacts}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(ka.a.Item,{name:"counteragent_contacts",children:Object(ha.jsx)(mr.a,{defaultChecked:!1})})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:18,children:Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ha.jsx)(Ws.a,{span:5,children:Object(ha.jsx)(Xs.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));J.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ha.jsx)(ka.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ha.jsx)(z,{children:Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(g=e.document)||void 0===g||null===(y=g.documents[0])||void 0===y?void 0:y.files.map((function(e){return Object(ha.jsxs)(Ss.a.Fragment,{children:[Object(ha.jsxs)(Ws.a,{span:21,children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})}),Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})]}),Object(ha.jsx)(Ws.a,{span:1,children:Object(ha.jsx)(Ka.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),fd=hd,xd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N=Object(ia.j)(),k=bo.a.Link,C=Object(Cs.useState)({log_username:N.username}),S=Object(wa.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(N.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),P=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===F||void 0===F?void 0:F.includes(e.id)})),R=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(Cs.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsxs)(Ws.a,{span:12,children:[T.fio_created," AAAAAAAAA"]})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:T.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_internal_needs[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_internal_needs[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_internal_needs[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_internal_needs[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list_internal_needs[0])||void 0===w?void 0:w.counteragent_contacts})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===P||void 0===P?void 0:P.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),2==T.status?Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(k,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=N.id?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),vd=xd,gd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(pn||(pn=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Ia.a)(_n||(_n=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(On||(On=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Ia.a)(hn||(hn=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Ia.a)(fn||(fn=Object(Na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(ia.j)(),p=(bo.a.Title,bo.a.Link),_=(yc.a.Step,Wl.a.Panel),O=Object(Cs.useState)({log_username:b.username}),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)(!1),g=Object(Cs.useState)(!1),y=Object(wa.a)(g,2),V=y[0],w=y[1],N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(f)}),[f]);var k=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),C=Object(wa.a)(k,2),S=(C[0],C[1]),T=Object(Cs.useState)({step:"0"}),I=Object(wa.a)(T,2),E=(I[0],I[1]);Object(Cs.useEffect)((function(){e.initialValues4&&(x({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:f.log_username}),E({step:e.initialValues4.documents[0].step}),S(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var F=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e){}var R=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(wa.a)(R,2),L=D[0],U=D[1],$=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),M=Object(wa.a)($,2);M[0],M[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(f)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ks.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position}),Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:Object(ha.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ha.jsx)(Wl.a,{defaultActiveKey:["2"],onChange:P,children:Object(ha.jsx)(_,{header:Object(ha.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(p,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){N(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))},"2")})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ld,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Od,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(bd,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(ud,{reasonText:L,dataProps:e,setState:x,user:b})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Wl.a,{defaultActiveKey:["1"],onChange:P,children:Object(ha.jsx)(_,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ha.jsx)(hr,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:v,GQL:j,title:function(t){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(vr,{visibleModalUpdate:v,UpdateForm:vd,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(fd,{visible:V,setVisible:w,document:e.initialValues4})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),yd=gd,Vd=["reasonText","dataProps","setState","user"],wd=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Vd),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Nd=wd,kd=["reasonText","dataProps","setState","user"],Cd=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,kd),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Sd=Cd,Td=["reasonText","dataProps","setState","user"],Id=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Td),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Ed=Id,Fd=["reasonText","dataProps","setState","user"],Pd=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Fd),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Rd=Pd,Dd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=yc.a.Step,_=Object(Cs.useRef)("vertical");Object(Cs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(_.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var O=Object(Cs.useState)({log_username:j.username}),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(f)}),[f]);var g=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(wa.a)(g,2),V=y[0],w=y[1],N=Object(Cs.useState)({step:"0"}),k=Object(wa.a)(N,2),C=k[0],S=k[1];Object(Cs.useEffect)((function(){e.initialValues5&&(x({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:f.log_username}),S({step:e.initialValues5.documents[0].step}),w(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(wa.a)(I,2),F=E[0],P=E[1],R=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),D=Object(wa.a)(R,2);D[0],D[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(f)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ks.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio}),Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position}),Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:"\u0414\u0440\u0443\u0433\u043e\u0439"})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:f.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:f.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:8,children:Object(ha.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ha.jsx)(Ws.a,{span:16,children:f.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){v(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",direction:_.current,responsive:!0,current:C.step-1,className:"steps-form-update",children:V.map((function(e){return Object(ha.jsx)(p,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Nd,{reasonText:F,dataProps:e,setState:x,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Rd,{reasonText:F,dataProps:e,setState:x,user:j}),Object(ha.jsx)(Ed,{reasonText:F,dataProps:e,setState:x,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Sd,{reasonText:F,dataProps:e,setState:x,user:j})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,P(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Ld=Dd,Ud=(bo.a.Title,bo.a.Link,yc.a.Step,Ss.a.memo((function(e){var t=Object(ia.j)(),n=(t.id,t.positions.toString()),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,status_id:"=5",ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(xn||(xn=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(Ia.a)(vn||(vn=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        \n                        \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(gn||(gn=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(yn||(yn=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(Vn||(Vn=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(wn||(wn=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(Nn||(Nn=Object(Na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a={exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_created:"=".concat(t.id)}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(kn||(kn=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                }\n            "]))),one:Object(Ia.a)(Cn||(Cn=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(Sn||(Sn=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Ia.a)(Tn||(Tn=Object(Na.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "])))},i=Object(Cs.useRef)(0),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(Cs.useState)(!1),u=Object(ia.g)(Object(Ea.a)(s.delete))(),m=Object(wa.a)(u,2),j=m[0],b=m[1].loading,p=Object(ia.h)(s,"all")(),_=p.loading,O=p.data,h=p.refetch,f=Object(ia.h)(a,"all")(),x=(f.loading,f.data),v=f.refetch;Object(Cs.useEffect)((function(){v()}),[]),Object(Cs.useEffect)((function(){h()}),[]);var g=(O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var s,a,c,o,l,r;i.current=O.documents.length;var d=null===x||void 0===x||null===(s=x.document_tasks)||void 0===s?void 0:s.filter((function(t){return t.document_id==e.id})),u=null===x||void 0===x||null===(a=x.document_tasks)||void 0===a?void 0:a.filter((function(t){return t.document_id==e.id&&2==t.status}));return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(c=e.document_statuses)||void 0===c?void 0:c.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(o=e.route_id)||void 0===o?void 0:o.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(l=e.route_data)||void 0===l?void 0:l.length),step_name:(null===(r=e.route_data)||void 0===r?void 0:r.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],tasks_count:"".concat(null===u||void 0===u?void 0:u.length," \u0438\u0437 ").concat(null===d||void 0===d?void 0:d.length)}})):[]).filter((function(e){return e.step==e.route_step&&4!=e.status_id}));window.localStorage.rows_onaproval=g.length;var y=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"180px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"},{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u0434\u0430\u0447",dataIndex:"tasks_count",width:"90px"}]);return Object(ha.jsx)(Io,{data:{dict:y,records:g},loading:_,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:c,GQL:s,UpdateForm:yr,visibleModalUpdate2:o,GQL2:s,UpdateForm2:Jr,visibleModalUpdate3:l,GQL3:s,UpdateForm3:id,visibleModalUpdate4:r,GQL4:s,UpdateForm4:yd,visibleModalUpdate5:d,GQL5:s,UpdateForm5:Ld,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:s,setCountManager:e.setCountManager})}))),$d=Ud,Md=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=(bo.a.Title,bo.a.Link),d=yc.a.Step,u=Object(Cs.useState)({log_username:l.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(j)}),[j]);var _=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=Object(Cs.useState)({step:"0"}),v=Object(wa.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC",e),Object(Cs.useEffect)((function(){e.initialValues&&(b({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var V=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(r,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(ha.jsx)(d,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Jd=Md,zd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=(bo.a.Title,bo.a.Link),d=yc.a.Step,u=Object(Cs.useState)({log_username:l.username}),m=Object(wa.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(j),console.log("state2 form",j)}),[j]);var _=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=Object(Cs.useState)({step:"0"}),v=Object(wa.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC 2",e),Object(Cs.useEffect)((function(){e.initialValues2&&(b({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues2",e.initialValues2),y({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var V=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(ks.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:j.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues2)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(r,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(ha.jsx)(d,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues2)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Kd=zd,Ad=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=yc.a.Step,m=Object(Cs.useState)({log_username:r.username}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(b)}),[b]);var O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)({step:"0"}),g=Object(wa.a)(v,2),y=g[0],V=g[1];Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(p({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:b.log_username}),V({step:e.initialValues3.documents[0].step}),x(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),k=Object(wa.a)(N,2);k[0],k[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ha.jsx)(u,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),qd=Ad,Hd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=yc.a.Step,m=Object(Cs.useState)({log_username:r.username}),j=Object(wa.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(b)}),[b]);var O=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=Object(Cs.useState)({step:"0"}),g=Object(wa.a)(v,2),y=g[0],V=g[1];Object(Cs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(p({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:b.log_username}),V({step:e.initialValues4.documents[0].step}),x(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),k=Object(wa.a)(N,2);k[0],k[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:b.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ha.jsx)(u,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Bd=Hd,Gd=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(ia.j)(),d=(bo.a.Title,bo.a.Link),u=yc.a.Step,m=Object(Cs.useRef)("vertical");Object(Cs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(Cs.useState)({log_username:r.username}),b=Object(wa.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(p)}),[p]);var h=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(wa.a)(h,2),x=f[0],v=f[1],g=Object(Cs.useState)({step:"0"}),y=Object(wa.a)(g,2),V=y[0],w=y[1];Object(Cs.useEffect)((function(){e.initialValues5&&(_({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:p.log_username}),w({step:e.initialValues5.documents[0].step}),v(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),C=Object(wa.a)(k,2);C[0],C[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ks.a)({},t)))},children:[Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(d,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){O(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(ha.jsx)(u,{title:e.positionName})}))})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ha.jsx)(Xs.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Qd=Gd,Wd=(bo.a.Title,bo.a.Link,yc.a.Step,Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.positions.toString(),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{approved_by_me:t.id,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(In||(In=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(En||(En=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    reason\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Fn||(Fn=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Pn||(Pn=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(Rn||(Rn=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Dn||(Dn=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(Ln||(Ln=Object(Na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(Cs.useState)(!1),i=Object(Cs.useState)(!1),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(ia.g)(Object(Ea.a)(s.delete))(),d=Object(wa.a)(r,2),u=d[0],m=d[1].loading,j=Object(ia.h)(s,"all")(),b=j.loading,p=j.data,_=j.refetch;Object(Cs.useEffect)((function(){_()}),[]);var O=p&&null!=p[Object.keys(p)[0]]?p[Object.keys(p)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],h=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(Io,{data:{dict:h,records:O},loading:b,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:a,GQL:s,UpdateForm:Jd,visibleModalUpdate2:i,GQL2:s,UpdateForm2:Kd,visibleModalUpdate3:c,GQL3:s,UpdateForm3:qd,visibleModalUpdate4:o,GQL4:s,UpdateForm4:Bd,visibleModalUpdate5:l,GQL5:s,UpdateForm5:Qd,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},u({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:m,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})}))),Yd=Wd,Xd=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],Zd=Ss.a.memo((function(e){var t=e.GQL,n=(e.GQL2,e.GQL3,e.GQL4,e.GQL5,e.UpdateForm),s=e.UpdateForm2,a=e.UpdateForm3,i=e.UpdateForm4,c=(e.UpdateForm5,Object(ca.a)(e,Xd)),o={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(c.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Un||(Un=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)($n||($n=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(Mn||(Mn=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Jn||(Jn=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(zn||(zn=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Kn||(Kn=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(An||(An=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},l=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(gc.a)(vc.a.mark((function n(s){return vc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=ka.a.useForm(),d=Object(wa.a)(r,1)[0],u=ka.a.useForm(),m=Object(wa.a)(u,1)[0],j=ka.a.useForm(),b=Object(wa.a)(j,1)[0],p=ka.a.useForm(),_=Object(wa.a)(p,1)[0],O=Object(Cs.useState)(!0),h=Object(wa.a)(O,2),f=(h[0],h[1]),x=c.visibleModalUpdate?c.visibleModalUpdate:[],v=Object(wa.a)(x,2),g=v[0],y=v[1],V=c.visibleModalUpdate2?c.visibleModalUpdate2:[],w=Object(wa.a)(V,2),N=w[0],k=w[1],C=c.visibleModalUpdate3?c.visibleModalUpdate3:[],S=Object(wa.a)(C,2),T=S[0],I=S[1],E=c.visibleModalUpdate4?c.visibleModalUpdate4:[],F=Object(wa.a)(E,2),P=F[0],R=F[1],D={};D[t.table]=t.table?{global:{id:"= ".concat(c.selectedRowKeys[0])}}:{};var L=Object(ia.h)(t,"one",{variables1:D})(),U=(L.loading,L.data),$=L.refetch,M=Object(ia.h)(t,"one",{variables1:D})(),J=(M.loading,M.data),z=M.refetch,K=Object(ia.h)(t,"one",{variables1:D})(),A=(K.loading,K.data),q=K.refetch,H=Object(ia.h)(t,"one",{variables1:D})(),B=(H.loading,H.data),G=H.refetch;Object(Cs.useEffect)((function(){g&&$(D)}),[g]),Object(Cs.useEffect)((function(){N&&z(D)}),[N]),Object(Cs.useEffect)((function(){T&&q(D)}),[T]),Object(Cs.useEffect)((function(){P&&G(D)}),[P]);var Q={documents:{global:{id:"=".concat(c.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},W=Object(ia.h)(o,"one",{variables1:D})(),Y=(W.loading,W.data),X=W.refetch,Z=Object(ia.h)(o,"one",{variables1:D})(),ee=(Z.loading,Z.data),te=Z.refetch,ne=Object(ia.h)(o,"one",{variables1:D})(),se=(ne.loading,ne.data),ae=ne.refetch,ie=Object(ia.h)(o,"one",{variables1:D})(),ce=(ie.loading,ie.data),oe=ie.refetch;Object(Cs.useEffect)((function(){g&&X(Q)}),[g]),Object(Cs.useEffect)((function(){N&&te(Q)}),[N]),Object(Cs.useEffect)((function(){T&&ae(Q)}),[T]),Object(Cs.useEffect)((function(){P&&oe(Q)}),[P]);var le=Object(ia.g)(Object(Ea.a)(t.update),(function(){y(!1)}))(),re=Object(wa.a)(le,2),de=re[0];re[1].loading;return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",disabled:2!==c.selectedRowKeys.length,onClick:function(){y(!0)},children:[Object(ha.jsx)(Xa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ha.jsx)(Ga.a,{title:c.title,visible:g,width:600,onCancel:function(){y(!1),f(!0)},footer:null,children:Object(ha.jsx)(n,{document:null===Y||void 0===Y?void 0:Y.documents[0],initialValues:U,form:d,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var s,a,i;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,l(n.files.fileList).then((function(e){i=e}));case 5:y(!1),a[t.exemplar]={id:c.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),de({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:c.title,visible:N,width:600,onCancel:function(){k(!1),f(!0)},footer:null,children:Object(ha.jsx)(s,{document:null===ee||void 0===ee?void 0:ee.documents[0],initialValues:J,form:m,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var s,a,i;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,l(n.files.fileList).then((function(e){i=e}));case 5:k(!1),a[t.exemplar]={id:c.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),de({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:c.title,visible:T,width:900,onCancel:function(){I(!1),f(!0)},footer:null,children:Object(ha.jsx)(a,{document:null===se||void 0===se?void 0:se.documents[0],initialValues:A,form:b,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var s,a,i;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,l(n.files.fileList).then((function(e){i=e}));case 5:I(!1),a[t.exemplar]={id:c.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),de({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ha.jsx)(Ga.a,{title:c.title,visible:P,width:900,onCancel:function(){R(!1),f(!0)},footer:null,children:Object(ha.jsx)(i,{document:null===ce||void 0===ce?void 0:ce.documents[0],initialValues:B,form:_,onFinish:function(){var e=Object(gc.a)(vc.a.mark((function e(n){var s,a,i;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,l(n.files.fileList).then((function(e){i=e}));case 5:R(!1),a[t.exemplar]={id:c.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:i||[],report:n.report},console.log("variables-------123",a),de({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),eu=Zd,tu=["GQL"],nu=Ss.a.memo((function(e){var t,n,s=e.GQL,a=Object(ca.a)(e,tu),i=Object(Cs.useState)([]),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=[];a.loading||(r=a.data.records.map((function(e){return e.id})));var d=Object(Ea.a)(s.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(wa.a)(d,2),m=u[0],j=u[1];j.loading,j.error;return Object(Cs.useEffect)((function(){l(o.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return!0;return!1})))}),[a.data]),Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",style:{minHeight:168},loading:a.loading,columns:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.dict,dataSource:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:a.title?function(){return a.title({selectedRowKeys:o})}:null,bordered:a.bordered,onRow:function(e,t){return{onClick:function(t){l([e.key,e.document_id]),console.log(e.route_id)},onDoubleClick:function(t){var n;0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)?(m({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}),10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0),27==e.route_id&&a.visibleModalUpdate4[1](!0)):(10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0),27==e.route_id&&a.visibleModalUpdate4[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===o[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})),su=nu,au=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f=Object(ia.j)(),x=bo.a.Link,v=Object(Cs.useState)({log_username:f.username}),g=Object(wa.a)(v,2),y=g[0],V=g[1],w=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(f.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=null===y||void 0===y||null===(t=y.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),k=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===N||void 0===N?void 0:N.includes(e.id)})),C=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(y)}),[y]),Object(Cs.useEffect)((function(){e.initialValues&&V({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:y.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=y.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:y.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:y.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===y||void 0===y||null===(c=y.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===y||void 0===y||null===(l=y.document_options)||void 0===l?void 0:l.supllier)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===y||void 0===y||null===(u=y.document_options)||void 0===u?void 0:u.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===y||void 0===y||null===(b=y.document_options)||void 0===b?void 0:b.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===k||void 0===k?void 0:k.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(x,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){w(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),2!=y.status?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(ka.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(Ca.a.TextArea,{})}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),y.report?y.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(O=e.initialValues)||void 0===O||null===(h=O.document_tasks[0])||void 0===h?void 0:h.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(x,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){w(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}),1==(null===y||void 0===y?void 0:y.status)?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),iu=au,cu=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N,k,C=Object(ia.j)(),S=bo.a.Link,T=Object(Cs.useState)({log_username:C.username}),I=Object(wa.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(Cs.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency_price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list[0])||void 0===w?void 0:w.received_from_counteragent_date})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),2!=E.status?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(ka.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(Ca.a.TextArea,{})}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(N=e.initialValues)||void 0===N||null===(k=N.document_tasks[0])||void 0===k?void 0:k.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),ou=cu,lu=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N,k,C=Object(ia.j)(),S=bo.a.Link,T=Object(Cs.useState)({log_username:C.username}),I=Object(wa.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(Cs.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list_production[0])||void 0===w?void 0:w.counteragent_contacts})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),2!=E.status?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(ka.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(Ca.a.TextArea,{})}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(N=e.initialValues)||void 0===N||null===(k=N.document_tasks[0])||void 0===k?void 0:k.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),ru=lu,du=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,w,N,k,C=Object(ia.j)(),S=bo.a.Link,T=Object(Cs.useState)({log_username:C.username}),I=Object(wa.a)(T,2),E=I[0],F=I[1],P=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(Cs.useEffect)((function(){e.initialValues&&F({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.fio_created})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:E.note})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ha.jsx)(Ws.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(w=V.data_agreement_list_production[0])||void 0===w?void 0:w.counteragent_contacts})]})}):"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("h3",{className:"marginTop",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})})),Object(ha.jsx)(Da.a,{type:"horizontal"}),2!=E.status?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(ka.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(Ca.a.TextArea,{})}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ha.jsx)(qc,{showUploadList:!0,action:"https://"+Fs.host+":"+Fs.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?Tc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&Tc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{children:Object(ha.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)("h3",{className:"font-form-header",children:Object(ha.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ha.jsx)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(N=e.initialValues)||void 0===N||null===(k=N.document_tasks[0])||void 0===k?void 0:k.document_tasks_files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)(Ws.a,{span:24,className:"document-view-wrap",children:[Object(ha.jsx)(S,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),uu=du,mu=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.id,s=(t.positions.toString(),Object(Ia.a)(qn||(qn=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                \n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                \n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(Ia.a)(Hn||(Hn=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "]))),Object(Ia.a)(Bn||(Bn=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(Ia.a)(Gn||(Gn=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Ia.a)(Qn||(Qn=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Ia.a)(Wn||(Wn=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Ia.a)(Yn||(Yn=Object(Na.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"]))),{exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_receiver:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(Xn||(Xn=Object(Na.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        task_statuses{\n                            id\n                            name\n                        }\n                        document_tasks_logs{\n                            id\n                            task_id\n                            is_read\n                            type\n                            user_id\n                        }\n                        report\n                    }\n                }\n            "]))),one:Object(Ia.a)(Zn||(Zn=Object(Na.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                    report\n                }\n            }\n            "])))},subscription:{all:Object(Ia.a)(es||(es=Object(Na.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    report\n                }\n            }\n        "])))},update:Object(Ia.a)(ts||(ts=Object(Na.a)(["\n        mutation updateDocumentTasks($document_tasks: JSON) {\n            updateDocumentTasks(document_tasks: $document_tasks) {\n            type\n            message\n        }\n        }\n        "]))),setTaskIsReadTrue:Object(Ia.a)(ns||(ns=Object(Na.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))}),a=Object(Cs.useState)(!1),i=Object(Cs.useState)(!1),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(ia.h)(s,"all")(),d=r.loading,u=r.data,m=r.refetch;Object(Cs.useEffect)((function(){m()}),[]);var j=u&&null!=u[Object.keys(u)[0]]?u[Object.keys(u)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id,status:e.status,is_cancelled:e.is_cancelled,note:e.note,deadline:e.deadline,date_created:e.date_created,user_id_created:e.user_id_created,fio_created:e.fio_created,user_id_receiver:e.user_id_receiver,fio_receiver:e.fio_receiver,route_id:e.route_id?e.route_id:10,document_options:e.document_options,task_files:e.task_files?e.task_files:{},task_statuses:e.task_statuses.name,document_tasks_logs:e.document_tasks_logs?e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==t.id}))]:[]}})):[],b=j.filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=b.length;var p=pi([{title:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f",dataIndex:"fio_created",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.fio_created.localeCompare(t.fio_created)}},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"300px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e",dataIndex:"deadline",width:"214px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.deadline)-new Date(t.deadline)})),{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",width:"114px",tooltip:!0},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",width:"214px"}]);return Object(ha.jsx)(su,{data:{dict:p,records:j},loading:d,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(eu,{visibleModalUpdate:a,UpdateForm:iu,visibleModalUpdate2:i,UpdateForm2:ou,visibleModalUpdate3:c,UpdateForm3:ru,visibleModalUpdate4:o,UpdateForm4:uu,GQL:s,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u043d\u0438\u044f",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})),ju=mu,bu=["reasonText","dataProps","setState","user"],pu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,bu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),_u=pu,Ou=["reasonText","dataProps","setState","user"],hu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Ou),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),fu=hu,xu=["reasonText","dataProps","setState","user"],vu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,xu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),gu=vu,yu=["reasonText","dataProps","setState","user"],Vu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,yu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),wu=Vu,Nu=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(ia.j)(),u=(bo.a.Title,bo.a.Link),m=yc.a.Step,j=Object(Cs.useState)({log_username:d.username}),b=Object(wa.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(p)}),[p]);var h=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(wa.a)(h,2),x=f[0],v=f[1],g=Object(Cs.useState)({step:"0"}),y=Object(wa.a)(g,2),V=y[0],w=y[1];console.log("PROPS UPDATE DOC",e),Object(Cs.useEffect)((function(){e.initialValues&&(_({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:p.log_username}),console.log("props.initialValues",e.initialValues),w({step:e.initialValues.documents[0].step}),v(e.initialValues.documents[0].route_data))}),[e.initialValues]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=C[0],T=C[1];return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:p.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(u,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){O(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(ha.jsx)(m,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(_u,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(wu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ha.jsx)(gu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(fu,{reasonText:S,dataProps:e,setState:_,user:d})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),ku=Nu,Cu=["reasonText","dataProps","setState","user"],Su=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Cu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Tu=Su,Iu=["reasonText","dataProps","setState","user"],Eu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Iu),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Fu=Eu,Pu=["reasonText","dataProps","setState","user"],Ru=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Pu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Du=["reasonText","dataProps","setState","user"],Lu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Du),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return console.log("dataProps FORM2222",n),Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Uu=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=yc.a.Step,_=Object(Cs.useState)({log_username:j.username}),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(wa.a)(v,2),y=g[0],V=g[1],w=Object(Cs.useState)({step:"0"}),N=Object(wa.a)(w,2),k=N[0],C=N[1];Object(Cs.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(wa.a)(T,2),E=I[0],F=I[1],P=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),R=Object(wa.a)(P,2);R[0],R[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ks.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ha.jsx)(p,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Tu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Lu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ha.jsx)(Ru,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Fu,{reasonText:E,dataProps:e,setState:f,user:j})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,F(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),$u=Uu,Mu=["reasonText","dataProps","setState","user"],Ju=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Mu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),zu=["reasonText","dataProps","setState","user"],Ku=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,zu),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Au=["reasonText","dataProps","setState","user"],qu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Au),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Hu=["reasonText","dataProps","setState","user"],Bu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Hu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Gu=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=(yc.a.Step,Object(Cs.useState)({log_username:j.username})),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(wa.a)(x,2),g=(v[0],v[1]),y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=(V[0],V[1]);Object(Cs.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),w({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),E=Object(wa.a)(I,2);E[0],E[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ks.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Ju,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Bu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(qu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Ku,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Qu=Gu,Wu=["reasonText","dataProps","setState","user"],Yu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Wu),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Xu=["reasonText","dataProps","setState","user"],Zu=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,Xu),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),em=["reasonText","dataProps","setState","user"],tm=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,em),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),nm=["reasonText","dataProps","setState","user"],sm=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,nm),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),am=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=(yc.a.Step,Object(Cs.useState)({log_username:j.username})),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(wa.a)(x,2),g=(v[0],v[1]),y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=(V[0],V[1]);Object(Cs.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),w({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),E=Object(wa.a)(I,2);E[0],E[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ks.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Yu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(sm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(tm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Zu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),im=am,cm=["reasonText","dataProps","setState","user"],om=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,cm),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),lm=["reasonText","dataProps","setState","user"],rm=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,lm),Object(Cs.useState)(!1)),c=Object(wa.a)(i,2),o=c[0],l=c[1],r=Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(wa.a)(r,2),u=d[0],m=d[1];return Object(ha.jsx)(za.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),Tc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),dm=["reasonText","dataProps","setState","user"],um=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,dm),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),mm=["reasonText","dataProps","setState","user"],jm=Ss.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(ca.a)(e,mm),Object(Cs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(wa.a)(i,2),o=c[0],l=c[1];return Object(ha.jsx)(za.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ha.jsx)(Xs.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),bm=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=(yc.a.Step,Object(Cs.useState)({log_username:j.username})),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(O)}),[O]);var x=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(wa.a)(x,2),g=(v[0],v[1]),y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=(V[0],V[1]);Object(Cs.useEffect)((function(){e.initialValues5&&(h({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:O.log_username}),w({step:e.initialValues5.documents[0].step}),g(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=C[0],T=C[1],I=Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),E=Object(wa.a)(I,2);E[0],E[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ks.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(om,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(jm,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(um,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(rm,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsxs)("div",{children:[Object(ha.jsx)(Ca.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),pm=bm,_m=(bo.a.Title,bo.a.Link,yc.a.Step,Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ss||(ss=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(Ia.a)(as||(as=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(is||(is=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(cs||(cs=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(os||(os=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(ls||(ls=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Ia.a)(rs||(rs=Object(Na.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(Cs.useRef)(0),i=Object(Cs.useState)(!1),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(!1),l=Object(Cs.useState)(!1),r=Object(Cs.useState)(!1),d=Object(ia.g)(Object(Ea.a)(s.delete))(),u=Object(wa.a)(d,2),m=u[0],j=u[1].loading,b=Object(ia.h)(s,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(Cs.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var s,i,c,o;return a.current=_.documents.length,{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(i=e.route_id)||void 0===i?void 0:i.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],f=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(Jc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:i,GQL:s,UpdateForm:ku,visibleModalUpdate2:c,GQL2:s,UpdateForm2:$u,visibleModalUpdate3:o,GQL3:s,UpdateForm3:Qu,visibleModalUpdate4:l,GQL4:s,UpdateForm4:im,visibleModalUpdate5:r,GQL5:s,UpdateForm5:pm,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r,GQL:s})}))),Om=n(474),hm=(bo.a.Title,bo.a.Link),fm=yc.a.Step,xm=Ss.a.memo((function(e){var t=Object(ia.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(ds||(ds=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                description\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(us||(us=Object(Na.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    description\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Ia.a)(ms||(ms=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(js||(js=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(bs||(bs=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(ps||(ps=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(Cs.useState)(!1),i=Object(Cs.useState)(!1),c=Object(ia.g)(Object(Ea.a)(s.delete))(),o=Object(wa.a)(c,2),l=o[0],r=o[1].loading,d=Object(ia.h)(s,"all")(),u=d.loading,m=d.data,j=d.refetch;Object(Cs.useEffect)((function(){j()}),[]);var b=(m&&null!=m[Object.keys(m)[0]]?m[Object.keys(m)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 2==e.status_id})),p=pi([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:!0},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:!0},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ha.jsx)(Jc,{data:{dict:p,records:b},loading:u,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)($c,{visibleModalUpdate:a,visibleModalUpdate2:i,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:s,GQL2:s,UpdateForm:gm,UpdateForm2:ym,update:!0,width:750}),Object(ha.jsx)(za.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},l({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ha.jsx)($a.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ha.jsxs)(Xs.a,{type:"dashed",danger:!0,loading:r,disabled:1!==e.selectedRowKeys.length,children:[Object(ha.jsx)(Ma.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,GQL:s})})),vm=/^\d+$/,gm=Ss.a.memo((function(e){var t,n,s=Object(ia.j)(),a=Object(Cs.useState)({log_username:s.username}),i=Object(wa.a)(a,2),c=i[0],o=i[1],l=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(c)}),[c]);var r=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=Object(Cs.useState)({step:"0"}),b=Object(wa.a)(j,2),p=b[0],_=b[1];Object(Cs.useEffect)((function(){e.initialValues&&(o({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].price,supllier:e.initialValues.documents[0].supllier,subject:e.initialValues.documents[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:c.log_username}),console.log("props.initialValues",e.initialValues),_({step:e.initialValues.documents[0].step}),m(e.initialValues.documents[0].route_data))}),[e.initialValues]);var O=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(c),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){o(Object.assign({},c,Object(ks.a)({},t)))},children:[Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:'"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:'"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:vm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(hm,{children:Object(ha.jsxs)("a",{"data-fileid":e.id,onClick:O,children:[e.filename," ",Object(ha.jsx)(Om.a,{})]})})," ",Object(ha.jsx)("br",{}),Object(ha.jsx)(Xs.a,{onClick:function(){l(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:p.step-1,className:"steps-form-update",children:u.map((function(e){return Object(ha.jsx)(fm,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),ym=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(ia.j)(),r=Object(Cs.useState)({log_username:l.username}),d=Object(wa.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(u)}),[u]);var b=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(wa.a)(b,2),_=p[0],O=p[1],h=Object(Cs.useState)({step:"0"}),f=Object(wa.a)(h,2),x=f[0],v=f[1];console.log("PROPS UPDATE DOC 2",e),Object(Cs.useEffect)((function(){e.initialValues2&&(m({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:u.log_username}),v({step:e.initialValues2.documents[0].step}),O(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var g=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),V=Object(wa.a)(y,2),w=V[0],N=V[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Gc.a.Group,{disabled:e.disabled,onChange:function(e){N(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"1"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"2"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"3"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"4"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"5"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"6"}],className:"form-radio",value:w})}),Object(ha.jsx)(ka.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:vm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ha.jsx)(ka.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ha.jsx)(ka.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(ka.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ha.jsx)(Ca.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(hm,{children:Object(ha.jsxs)("a",{"data-fileid":e.id,onClick:g,children:[e.filename," ",Object(ha.jsx)(Om.a,{})]})})," ",Object(ha.jsx)("br",{}),Object(ha.jsx)(Xs.a,{onClick:function(){j(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ha.jsx)(fm,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsxs)(Ws.a,{span:24,children:[Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward2,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward2,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(ha.jsxs)(Ws.a,{span:24,className:"marginTop",children:[Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ha.jsx)(Da.a,{type:"vertical"}),Object(ha.jsx)(Xs.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ha.jsx)(Ca.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ha.jsx)(Xs.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Vm=xm,wm=Gs.a.Content,Nm=Object(aa.withRouter)((function(e){var t=Object(aa.useLocation)().pathname,n=Object(ia.j)(),s=Object(Cs.useState)("Test"),a=Object(wa.a)(s,2),i=a[0],c=a[1],o=Object(Cs.useState)({revised:"0",approved:"0",rejected:"0",onaproval:"0",type:"count"}),l=Object(wa.a)(o,2),r=l[0],d=l[1],u=Object(Cs.useState)(null),m=Object(wa.a)(u,2),j=m[0],b=m[1];if(Object(Cs.useEffect)((function(){console.log("dc effect",j)}),[j]),Object(Cs.useEffect)((function(){console.log("dc2 effect",r),(null===j||void 0===j?void 0:j.setValue)&&"function"==typeof j.setValue&&j.setValue((function(e){var t=Object.assign({},e);return t.revised=e.revised-r.revised,t.approved=e.approved-r.approved,t.rejected=e.rejected-r.rejected,t.onaproval=e.onaproval-r.onaproval,t}))}),[r]),("/document-control/"===t||"/document-control"===t)&&n.documentControl.orders.select)return Object(ha.jsx)(aa.Redirect,{to:"/document-control/orders"});return Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsx)(ya,{title:i,user:n}),Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsx)(fc,{setHeaderTitle:c,setCountManager:d,countF:function e(t){console.log("Setter",t),console.log("Setter2",e);b({setValue:function(e){t(e)},stateSetter:t})}}),Object(ha.jsx)(Gs.a,{className:"content-layout",children:Object(ha.jsxs)(wm,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(ha.jsx)(aa.Route,{path:"/document-control/orders",component:Object(ia.a)(Co)}),Object(ha.jsx)(aa.Route,{path:"/document-control/reviseduser",component:Object(ia.a)(vl)}),Object(ha.jsx)(aa.Route,{path:"/document-control/approveduser",component:Object(ia.a)(Rl)}),Object(ha.jsx)(aa.Route,{path:"/document-control/rejecteduser",component:Object(ia.a)(Ql)}),Object(ha.jsx)(aa.Route,{exact:!0,path:"/document-control/on-approval",render:function(e){return Object(ha.jsx)($d,Object(ks.a)(Object(ks.a)({},e),{},{title:"Props through render"}))},setCountManager:d}),Object(ha.jsx)(aa.Route,{path:"/document-control/on-approval-list",component:Object(ia.a)(Yd)}),Object(ha.jsx)(aa.Route,{path:"/document-control/approved",component:Object(ia.a)(_m)}),Object(ha.jsx)(aa.Route,{path:"/document-control/rejected",component:Object(ia.a)(Vm)}),Object(ha.jsx)(aa.Route,{path:"/document-control/for-execution-inbox",component:Object(ia.a)(ju)})]})})]})]})})),km=["title","user"],Cm=Gs.a.Header,Sm=ma.a.useBreakpoint,Tm=Ss.a.memo((function(e){var t=e.title,n=e.user,s=(Object(ca.a)(e,km),Sm()),a=Object(aa.useHistory)(),i=Object(aa.useLocation)().pathname;return Object(ha.jsx)("div",{children:Object(ha.jsx)(Cm,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(ha.jsxs)(Zs.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(ha.jsx)(Ws.a,{flex:"auto",style:{color:"c40c46"},children:Object(ha.jsx)(ja.a,{className:"site-page-header",backIcon:Object(ha.jsx)(oa.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(ha.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(ha.jsx)(Ws.a,{flex:"auto",children:Object(ha.jsx)("h1",{style:{color:"white"},children:t})}):Object(ha.jsx)(ha.Fragment,{}),Object(ha.jsx)(Ws.a,{children:Object(ha.jsx)(ba.a,{shape:"square",size:"small",icon:Object(ha.jsx)(la.a,{})})}),Object(ha.jsx)(Ws.a,{flex:"70px",style:{marginRight:"30px"},children:Object(ha.jsx)(pa.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(ha.jsx)(_a.a,{overlay:Object(ha.jsxs)(Oa.a,{children:[n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(ha.jsx)(ra.a,{}),"ADMIN"]}),n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(ha.jsx)(da.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(ha.jsx)(da.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(ha.jsx)(la.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(ha.jsxs)(Oa.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(ha.jsx)(ua.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(ha.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),Im=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],Em=Object(Ia.a)(_s||(_s=Object(Na.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),Fm=Object(Ia.a)(Os||(Os=Object(Na.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Pm=Object(Ia.a)(hs||(hs=Object(Na.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Rm=Object(Ia.a)(fs||(fs=Object(Na.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),Dm=Object(Ia.a)(xs||(xs=Object(Na.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),Lm=Ss.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(ca.a)(e,Im),m=ka.a.useForm(),j=Object(wa.a)(m,1)[0],b=ka.a.useForm(),p=Object(wa.a)(b,1)[0],_=ka.a.useForm(),O=Object(wa.a)(_,1)[0],h=ka.a.useForm(),f=Object(wa.a)(h,1)[0],x=ka.a.useForm(),v=Object(wa.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(wa.a)(g,2),V=y[0],w=y[1],N=u.visibleModalUpdate2?u.visibleModalUpdate2:[],k=Object(wa.a)(N,2),C=k[0],S=k[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(wa.a)(T,2),E=I[0],F=I[1],P=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(wa.a)(P,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(wa.a)(U,2),M=$[0],J=$[1],z=Object(Cs.useState)(!0),K=Object(wa.a)(z,2),A=K[0],q=K[1],H=Object(ia.j)(),B=function(){w(!1),S(!1),F(!1),L(!1),J(!1),q(!0)},G=function(){q(!1)};Ga.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(ia.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(ia.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(ia.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(ia.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(ia.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(Cs.useEffect)((function(){te&&j.resetFields()}),[te]),Object(Cs.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(Cs.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(Cs.useEffect)((function(){de&&f.resetFields()}),[de]),Object(Cs.useEffect)((function(){je&&v.resetFields()}),[je]),Object(Cs.useEffect)((function(){V&&ne(Q)}),[V]),Object(Cs.useEffect)((function(){C&&ie(W)}),[C]),Object(Cs.useEffect)((function(){E&&le(Y)}),[E]),Object(Cs.useEffect)((function(){D&&ue(X)}),[D]),Object(Cs.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(ia.g)(Object(Ea.a)(t.update),(function(){w(!1),S(!1),F(!1),L(!1),J(!1),q(!0)}))(),_e=Object(wa.a)(pe,2),Oe=_e[0],he=(_e[1].loading,Object(Cs.useState)()),fe=Object(wa.a)(he,2),xe=fe[0],ve=fe[1],ge=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},ye=Object(ac.a)(Dm,ge),Ve=(ye.loading,ye.data),we=ye.refetch;Object(Cs.useEffect)((function(){V&&we(ge)}),[V]);var Ne=Ve&&null!=Ve[Object.keys(Ve)[0]]?Ve[Object.keys(Ve)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],ke=Object(Ea.a)(Em,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ce=Object(wa.a)(ke,2),Se=Ce[0],Te=Ce[1],Ie=(Te.loading,Te.error,function(e){Se({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:xe}}}),we(ge),e.resetFields(["comments"])}),Ee=function(e,t){e.target.value.length>0&&ve(e.target.value)},Fe=Object(Cs.useState)(),Pe=Object(wa.a)(Fe,2),Re=Pe[0],De=Pe[1],Le=Object(Cs.useState)(),Ue=Object(wa.a)(Le,2),$e=Ue[0],Me=Ue[1],Je=Object(Cs.useState)(),ze=Object(wa.a)(Je,2),Ke=ze[0],Ae=ze[1],qe=Object(Ea.a)(Fm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),He=Object(wa.a)(qe,2),Be=He[0],Ge=He[1],Qe=(Ge.loading,Ge.error,Object(Ea.a)(Pm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),We=Object(wa.a)(Qe,2),Ye=(We[0],We[1]),Xe=(Ye.loading,Ye.error,function(){Tc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),Ze=function(){Me(7)},et=function(){Me(2)};console.log("route_data",Ke),console.log("data",te);var tt=function(e){console.log("CLIIIICK",e),at({variables:{document_files:{id:e.id}}})},nt=Object(Ea.a)(Rm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),st=Object(wa.a)(nt,2),at=st[0],it=st[1];it.loading,it.error;return Object(ha.jsxs)(ha.Fragment,{children:[Object(ha.jsxs)(Xs.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){w(!0)},children:[Object(ha.jsx)(Xa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ha.jsx)(Ga.a,{title:u.title,visible:V,centered:!0,width:900,onOk:function(){j.submit()},onCancel:function(){w(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(c,{commentsList:Ne,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Ae(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Ae(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Ae(te.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,HandleDeleteFile:tt,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(o,{commentsList:Ne,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Ae(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Ae(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,HandleDeleteFile:tt,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Ae(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){F(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(l,{commentsList:Ne,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Ae(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Ae(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Ae(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(r,{commentsList:Ne,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Ae(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Ae(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Ae(de.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:A})}),Object(ha.jsx)(Ga.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),q(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ha.jsx)(d,{commentsList:Ne,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Ae(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Ae(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&De(e)},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Ae(je.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:A})})]})})),Um=Ss.a.memo((function(e){var t=Object(Cs.useState)([]),n=Object(wa.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(Cs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsx)(ii.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onChange:e.onChange,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id]),console.log("SelectedRowKeys",s)},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),$m=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(ha.jsxs)("div",{style:{padding:8},children:[Object(ha.jsx)(Ca.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(ha.jsxs)(pa.b,{children:[Object(ha.jsx)(Xs.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(ha.jsx)(li.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(ha.jsx)(Xs.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(ha.jsx)(li.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(ha.jsx)(di.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},Mm=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],Jm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ha.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},zm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ha.jsx)(Ys.a,{title:t,color:"grey",children:Object(ha.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},Km=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(ca.a)(e,Mm);if(d)return Object(ks.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=Jm;return r&&(m=zm),Object(ks.a)(Object(ks.a)({title:Jm(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return $m(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},Am=(n(94),n(237)),qm={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Ia.a)(vs||(vs=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Ia.a)(gs||(gs=Object(Na.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                files{\n                    id\n                    filename\n                }\n                signatures{\n                    id\n                    document_id\n                    user_id\n                    username\n                    date_signature\n                    position\n                    fio\n                }\n                step\n                route_data\n            }\n        }\n        "])))},subscription:{all:[Object(Ia.a)(ys||(ys=Object(Na.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Ia.a)(Vs||(Vs=Object(Na.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Ia.a)(ws||(ws=Object(Na.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Ia.a)(Ns||(Ns=Object(Na.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Hm=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b=Object(ia.j)(),p=(bo.a.Title,bo.a.Link),_=yc.a.Step,O=Object(Cs.useState)({log_username:b.username}),h=Object(wa.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form.setFieldsValue(f)}),[f]);var g=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(wa.a)(g,2),V=y[0],w=y[1],N=Object(Cs.useState)({step:"0"}),k=Object(wa.a)(N,2),C=k[0],S=k[1];console.log("PROPS UPDATE DOC",e),Object(Cs.useEffect)((function(){e.initialValues&&(x({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:f.log_username}),console.log("props.initialValues",e.initialValues),S({step:e.initialValues.documents[0].step}),w(e.initialValues.documents[0].route_data))}),[e.initialValues]);var T=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(wa.a)(I,2);E[0],E[1];return Object(ha.jsxs)(ka.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.supllier})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:f.price})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.files)||void 0===o?void 0:o.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(p,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){v(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(l=e.initialValues)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.signatures)||void 0===d?void 0:d.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:V.map((function(e){return Object(ha.jsx)(_,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Da.a,{type:"horizontal"})}),Object(ha.jsx)(Ws.a,{span:24,className:"marginTop",children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(u=e.initialValues)||void 0===u||null===(m=u.documents[0])||void 0===m||null===(j=m.reason)||void 0===j?void 0:j.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Bm=Hm,Gm=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=yc.a.Step,_=Object(Cs.useState)({log_username:j.username}),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(wa.a)(v,2),y=g[0],V=g[1],w=Object(Cs.useState)({step:"0"}),N=Object(wa.a)(w,2),k=N[0],C=N[1];Object(Cs.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(wa.a)(T,2),E=(I[0],I[1],Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject)),F=Object(wa.a)(E,2);F[0],F[1];return Object(ha.jsxs)(ka.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ks.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.currency_price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.sider_signatures_date})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ha.jsx)(p,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Da.a,{type:"horizontal"})}),Object(ha.jsx)(Ws.a,{span:24,className:"marginTop",children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Qm=Gm,Wm=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=(yc.a.Step,Object(Cs.useState)({log_username:j.username})),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(wa.a)(x,2),g=(v[0],v[1]),y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=(V[0],V[1]);Object(Cs.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),w({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=(C[0],C[1],Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject)),T=Object(wa.a)(S,2);T[0],T[1];return Object(ha.jsxs)(ka.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ks.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Da.a,{type:"horizontal"})}),Object(ha.jsx)(Ws.a,{span:24,className:"marginTop",children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Ym=Wm,Xm=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=(yc.a.Step,Object(Cs.useState)({log_username:j.username})),_=Object(wa.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(wa.a)(x,2),g=(v[0],v[1]),y=Object(Cs.useState)({step:"0"}),V=Object(wa.a)(y,2),w=(V[0],V[1]);Object(Cs.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),w({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var N=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(wa.a)(k,2),S=(C[0],C[1],Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject)),T=Object(wa.a)(S,2);T[0],T[1];return Object(ha.jsxs)(ka.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(ks.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.subject})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.price})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.currency})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_name_division})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.executor_phone_number})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:O.counteragent_contacts})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})}))}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Da.a,{type:"horizontal"})}),Object(ha.jsx)(Ws.a,{span:24,className:"marginTop",children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),Zm=Xm,ej=Ss.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(ia.j)(),b=(bo.a.Title,bo.a.Link),p=yc.a.Step,_=Object(Cs.useState)({log_username:j.username}),O=Object(wa.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(Cs.useEffect)((function(){e.form5.setFieldsValue(h)}),[h]);var v=Object(Cs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(wa.a)(v,2),y=g[0],V=g[1],w=Object(Cs.useState)({step:"0"}),N=Object(wa.a)(w,2),k=N[0],C=N[1];Object(Cs.useEffect)((function(){e.initialValues5&&(f({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:h.log_username}),C({step:e.initialValues5.documents[0].step}),V(e.initialValues5.documents[0].route_data),console.log("----------------------------------",e))}),[e.initialValues5]);var S=function(){var e=Object(gc.a)(vc.a.mark((function e(t){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(Cs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(wa.a)(T,2),E=(I[0],I[1],Object(Cs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject)),F=Object(wa.a)(E,2);F[0],F[1];return Object(ha.jsxs)(ka.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(h)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(ks.a)({},t)))},children:[Object(ha.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(ha.jsx)("br",{}),Object(ha.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(ha.jsxs)("h4",{children:[Object(ha.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.title})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.remark})]})}),Object(ha.jsx)("div",{className:"form-item-wrap",children:Object(ha.jsxs)(Zs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ha.jsx)(Ws.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ha.jsx)(Ws.a,{span:12,children:h.subject})]})}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"document-view-wrap",children:[Object(ha.jsx)(b,{children:Object(ha.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ha.jsx)(Xs.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ha.jsx)(Xa.a,{})})," ",Object(ha.jsx)("br",{})]})})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsxs)(ka.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ha.jsx)(ha.Fragment,{children:Object(ha.jsxs)("div",{className:"signature-view-wrap",children:[Object(ha.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ha.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ha.jsx)("span",{className:"signature-view-date",children:Object(ia.c)(e.date_signature)})]})})})),Object(ha.jsx)(yc.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ha.jsx)(p,{title:e.positionName})}))})]}),Object(ha.jsxs)(Zs.a,{children:[Object(ha.jsx)(Ws.a,{span:24,children:Object(ha.jsx)(Da.a,{type:"horizontal"})}),Object(ha.jsx)(Ws.a,{span:24,className:"marginTop",children:Object(ha.jsx)(Xs.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ha.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ha.jsxs)("span",{children:[Object(ha.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ha.jsx)("br",{})]})}))}),Object(ha.jsx)(Da.a,{type:"horizontal"}),Object(ha.jsx)(ka.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ha.jsx)("div",{className:"comments",children:Object(ha.jsxs)("li",{className:"comment-item",children:[Object(ha.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ha.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ha.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ha.jsx)("br",{}),Object(ha.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ha.jsx)(ka.a.Item,{name:"date_created",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"route_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"status_id",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"step",hidden:!0}),Object(ha.jsx)(ka.a.Item,{name:"log_username",hidden:!0})]})})),tj=ej,nj=Si.a.Option,sj=Ss.a.memo((function(e){var t=Object(ia.j)().positions.toString(),n=(ur.a.RangePicker,ka.a.useForm(),Object(Cs.useState)(!1)),s=Object(Cs.useState)(!1),a=Object(Cs.useState)(!1),i=Object(Cs.useState)(!1),c=Object(Cs.useState)(!1),o=Object(Cs.useState)(),l=Object(wa.a)(o,2),r=l[0],d=l[1],u=Object(Cs.useState)([]),m=Object(wa.a)(u,2),j=(m[0],m[1]),b=Object(Cs.useState)(),p=Object(wa.a)(b,2),_=p[0],O=p[1],h=Object(ia.h)(qm,"all",{variables:r})(),f=h.loading,x=h.data,v=h.refetch,g=x&&null!=x[Object.keys(x)[0]]?x[Object.keys(x)[0]].map((function(e){var n,s,a,i,c=0,o="-",l="-";return 0!=e.data_one.length&&(c=e.data_one[0].price,o=e.title,l=e.data_one[0].supllier),0!=e.data_agreement_list.length&&(c=e.data_agreement_list[0].price,l=e.title),0!=e.data_agreement_list_production.length&&(c=e.data_agreement_list_production[0].price,l=e.title),0!=e.data_agreement_list_internal_needs.length&&(c=e.data_agreement_list_internal_needs[0].price,l=e.title),0!=e.data_custom.length&&(o=e.title),{id:e.id,key:e.id,title:o,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==t}))+1:[],step:e.step,route_id:e.route_id.id,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:"",price:c,counteragent_name:l}})):[],y=Object(Cs.useState)(),V=Object(wa.a)(y,2),w=V[0],N=V[1],k=function(){var e=Object(gc.a)(vc.a.mark((function e(t){var n,s;return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),void 0==t.dateFrom&&void 0==t.dateTo?console.log("undefined"):void 0!=t.dateFrom&&void 0!=t.dateTo&&(n=t.dateFrom._d,s=t.dateTo._d,d({documents:{global:{date_created:"::date<= date'".concat(Object(Am.a)(s,"dd-MM-yyyy"),"' and date_created::date>=date'").concat(Object(Am.a)(n,"dd-MM-yyyy"),"'"),ORDER_BY:["date_created desc"]}}})),v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Km([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"134px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},{title:"\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"counteragent_name",width:"130px",type:"search",tooltip:!0,sorter:function(e,t){return e.counteragent_name.localeCompare(t.counteragent_name)},sortDirections:["ascend","descend"]},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",width:"55px",tooltip:!0,sorter:function(e,t){return e.price-t.price},sortDirections:["ascend","descend"]},Object(Ua.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ua.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]),S=function(){console.log("currentTableData Excel //////////",_),fetch("/api/tabledata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentTableData:_})}),Object(gc.a)(vc.a.mark((function e(){return vc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ia.b)("/api/tabledata","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432 "+Object(ia.d)(new Date)+".xlsx");case 2:case"end":return e.stop()}}),e)})))()},T="YYYY-MM-DD HH:mm:ss";return Object(ha.jsxs)("span",{children:[Object(ha.jsx)(ka.a,{onFinish:k,name:"filterForm",onValuesChange:function(e,t){N(Object.assign({},w,Object(ks.a)({},t)))},children:Object(ha.jsxs)(Zs.a,{style:{paddingLeft:"10px",paddingRight:"10px",marginBottom:"15px",marginTop:"15px"},children:[Object(ha.jsxs)(Ws.a,{span:2,style:{marginRight:"25px"},children:["\u041e\u0442:",Object(ha.jsx)(ka.a.Item,{name:"dateFrom",children:Object(ha.jsx)(ur.a,{format:T,locale:jr.a,style:{width:"100%"}})})]}),Object(ha.jsxs)(Ws.a,{span:2,style:{marginRight:"25px"},children:["\u0414\u043e:",Object(ha.jsx)(ka.a.Item,{name:"dateTo",children:Object(ha.jsx)(ur.a,{format:T,locale:jr.a,style:{width:"100%"}})})]}),Object(ha.jsxs)(Ws.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(ha.jsx)(ka.a.Item,{name:"documentType",children:Object(ha.jsxs)(Si.a,{style:{width:"100%"},children:[Object(ha.jsx)(nj,{value:10,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"}),Object(ha.jsx)(nj,{value:24,children:"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(ha.jsx)(nj,{value:26,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(ha.jsx)(nj,{value:27,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"}),Object(ha.jsx)(nj,{value:29,children:"\u0414\u0440\u0443\u0433\u043e\u0439"}),Object(ha.jsx)(nj,{value:void 0})]})})]}),Object(ha.jsxs)(Ws.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(ha.jsx)(ka.a.Item,{name:"documentStatus",children:Object(ha.jsxs)(Si.a,{style:{width:"100%"},children:[Object(ha.jsx)(nj,{value:5,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(ha.jsx)(nj,{value:4,children:"\u0423\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d"}),Object(ha.jsx)(nj,{value:2,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d"}),Object(ha.jsx)(nj,{value:7,children:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0435"}),Object(ha.jsx)(nj,{value:void 0})]})})]}),Object(ha.jsxs)(Ws.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u043e\u0442:",Object(ha.jsx)(ka.a.Item,{name:"priceFrom",children:Object(ha.jsx)(Ca.a,{})})]}),Object(ha.jsxs)(Ws.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u0434\u043e:",Object(ha.jsx)(ka.a.Item,{name:"priceTo",children:Object(ha.jsx)(Ca.a,{})})]}),Object(ha.jsx)(Ws.a,{span:2,style:{marginRight:"25px",marginTop:"20px"},children:Object(ha.jsx)(Xs.a,{type:"primary",htmlType:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})})]})}),Object(ha.jsx)(Um,{data:{dict:C,records:g},loading:f||!1,title:function(e){return Object(ha.jsx)(ai,{buttons:[Object(ha.jsx)(Xs.a,{onClick:S,children:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 Excel"}),Object(ha.jsx)(Lm,{visibleModalUpdate:n,GQL:qm,UpdateForm:Bm,visibleModalUpdate2:s,GQL2:qm,UpdateForm2:Qm,visibleModalUpdate3:a,GQL3:qm,UpdateForm3:Ym,visibleModalUpdate4:i,GQL4:qm,UpdateForm4:Zm,visibleModalUpdate5:c,GQL5:qm,UpdateForm5:tj,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},onChange:function(e,t,n,s){O(s.currentDataSource),j(t)},visibleModalUpdate:n,visibleModalUpdate2:s,visibleModalUpdate3:a,visibleModalUpdate4:i,visibleModalUpdate5:c})]})})),aj=sj,ij=(Gs.a.Header,Gs.a.Content),cj=Ss.a.memo((function(e){var t=Object(ia.j)(),n=Object(aa.useLocation)().pathname,s=Object(Cs.useState)("\u041f\u043e\u0438\u0441\u043a"),a=Object(wa.a)(s,2),i=a[0];a[1];return"/document-search/"!==n&&"/document-search"!==n||!t.documentSearch.search.select?Object(ha.jsxs)(Gs.a,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(ha.jsx)(Tm,{title:i,user:t}),Object(ha.jsx)(Gs.a,{children:Object(ha.jsx)(Gs.a,{className:"content-layout",children:Object(ha.jsx)(ij,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(ha.jsx)(aa.Route,{path:"/document-search/search",component:Object(ia.a)(aj)})})})})]}):Object(ha.jsx)(aa.Redirect,{to:"/document-search/search"})})),oj=Object(aa.withRouter)(cj),lj=Fs.port,rj=Fs.graphql;console.log("Starting SD Client. Host is "+window.SERVER_DATA);var dj=new Ks.a({uri:"https://"+window.SERVER_DATA+":".concat(lj).concat(rj.path)}),uj=new Hs.a({uri:"wss://"+window.SERVER_DATA+":".concat(lj).concat(rj.path),options:{reconnect:!0}}),mj=(Gs.a.Header,Gs.a.Content),jj=(Gs.a.Sider,Object(zs.a)((function(e){var t=e.graphQLErrors,n=e.networkError,s=e.operation;e.response;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(JSON.stringify(n),", Path: ").concat(a,". \n"),"[Details]: operation: ".concat(JSON.stringify(s.variables),". \n"),"[Details]: operationName: ".concat(JSON.stringify(s.operationName),". \n"))})),n&&(console.log("[Network error]: ".concat(JSON.stringify(n))),Qs.a.info({message:Object(ha.jsxs)("div",{id:"ant_notification",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c ZiK-\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430.",Object(ha.jsx)("br",{}),"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u043d\u0438\u043b\u0430\u0441\u044c \u0447\u0435\u0440\u0435\u0437 5 \u043c\u0438\u043d\u0443\u0442, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0432\u0430\u0448\u0435\u0439 \u0441\u043b\u0443\u0436\u0431\u043e\u0439 IT."]}),duration:10,placement:"bottomRight"}))}))),bj=Object(Bs.a)((function(e,t){var n=t.headers,s=localStorage.getItem("token");return{headers:Object(ks.a)(Object(ks.a)({},n),{},{authorization:s?"Bearer ".concat(s):""})}})),pj=Object(As.a)((function(e){var t=e.query,n=Object(qs.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),uj,bj.concat(dj)),_j=new Rs.a({link:Js.a.from([jj,pj]),cache:new Ds.a}),Oj=Object(ha.jsx)(Ws.a,{className:"main-menu-col",children:Object(ha.jsx)(Ys.a,{placement:"rightTop",title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0431\u043e\u0440\u043e\u0442",children:Object(ha.jsx)(Xs.a,{type:"solid",className:"main-menu-button",children:Object(ha.jsxs)(sa.c,{to:"document-control",style:{fontSize:"25px"},children:[" ",Object(ha.jsx)(Ls.a,{style:{marginRight:7}})," \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 ",Object(ha.jsx)("p",{className:"page-desc",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})]})})})}),hj=Object(ha.jsx)(Ws.a,{className:"main-menu-col",children:Object(ha.jsx)(Ys.a,{placement:"rightTop",title:"\u041e\u0442\u0447\u0435\u0442\u044b",children:Object(ha.jsx)(Xs.a,{type:"solid",className:"main-menu-button",children:Object(ha.jsxs)(sa.c,{to:"document-report",style:{fontSize:"25px"},children:[" ",Object(ha.jsx)(Us.a,{style:{marginRight:7}})," \u041e\u0442\u0447\u0435\u0442\u044b ",Object(ha.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c"})]})})})}),fj=Object(ha.jsx)(Ws.a,{className:"main-menu-col",children:Object(ha.jsx)(Ys.a,{placement:"rightTop",title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438",children:Object(ha.jsx)(Xs.a,{type:"solid",className:"main-menu-button",children:Object(ha.jsxs)(sa.c,{to:"document-history",style:{fontSize:"25px"},children:[" ",Object(ha.jsx)($s.a,{style:{marginRight:7}}),"  \u0418\u0441\u0442\u043e\u0440\u0438\u044f ",Object(ha.jsx)("p",{className:"page-desc",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})]})})})}),xj=Object(ha.jsx)(Ws.a,{className:"main-menu-col",children:Object(ha.jsx)(Ys.a,{placement:"rightTop",title:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c",children:Object(ha.jsx)(Xs.a,{type:"solid",className:"main-menu-button",children:Object(ha.jsxs)(sa.c,{to:"document-search",style:{fontSize:"25px"},children:[Object(ha.jsx)(Ms.a,{style:{marginRight:7}})," \u041f\u043e\u0438\u0441\u043a ",Object(ha.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c"})]})})})}),vj=Ss.a.memo((function(){Object(aa.useLocation)().pathname;var e=Object(ia.j)();return console.log("user",e),Object(ha.jsxs)(Gs.a,{children:[Object(ha.jsx)(ya,{title:"",user:e}),Object(ha.jsx)(Gs.a,{children:Object(ha.jsx)(Gs.a,{className:"content-layout",children:Object(ha.jsx)(mj,{className:"site-layout-background",style:{padding:0,margin:0,minHeight:280},children:Object(ha.jsx)("div",{style:{paddingTop:50},children:Object(ha.jsxs)(Zs.a,{justify:"center",style:{margin:"0",top:"50%",transform:"translate(0,-50%)",position:"absolute",width:"99%"},children:[e.documentControl.select?Oj:null,e.documentReport.select?hj:null,e.documentHistory.select?fj:null,e.documentSearch.select?xj:null]})})})})})]})})),gj=function(){return Object(ha.jsxs)(aa.Switch,{children:[Object(ha.jsx)(aa.Route,{path:"/login",component:Pa}),Object(ha.jsx)(aa.Route,{path:"/logout",component:function(){return Object(ha.jsx)(ha.Fragment,{})}}),Object(ha.jsx)(aa.Route,{path:"/",exact:!0,component:vj}),Object(ha.jsx)(aa.Route,{path:"/document-control",component:Object(ia.a)(Nm)}),Object(ha.jsx)(aa.Route,{path:"/document-search",component:Object(ia.a)(oj)}),Object(ha.jsx)(aa.Route,{path:"/admin",component:Object(ia.a)(sc)}),Object(ha.jsx)(aa.Route,{path:"/account",component:Object(ia.a)(uc)}),Object(ha.jsx)(aa.Route,{component:Va.a})]})};Is.a.render(Object(ha.jsx)(sa.a,{children:Object(ha.jsx)(Ps.a,{client:_j,children:Object(ha.jsx)(ea.b,{locale:na.a,children:Object(ha.jsx)(gj,{})})})}),document.getElementById("root"))},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return handlerQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return handlerMutation})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useUser})),__webpack_require__.d(__webpack_exports__,"a",(function(){return accessRedirect})),__webpack_require__.d(__webpack_exports__,"b",(function(){return download})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDDMMYYY})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDDMMYYYHHmm})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatDate})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDiffHours})),__webpack_require__.d(__webpack_exports__,"i",(function(){return notifyMe}));var G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(151),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_apollo_client__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(299),_apollo_client__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(240),react_router_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(36),_modules_Error404__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(178),_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(232),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__),_templateObject,_templateObject2,_templateObject3,MergeRecursive=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var s in n)try{n[s].constructor===Object?t[s]=e(t[s],n[s]):t[s]=n[s]}catch(a){t[s]=n[s]}return t},checkObject=function checkObject(object,data){var request="";try{request=eval("object.".concat(data))}catch(e){return request}return void 0===request?"":request},handlerQuery=function(e,t,n,s){return function(){var a=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),i=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(a,2),c=i[0],o=i[1],l=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(e.select[t],Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)));return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){l.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:l.error.message,duration:0,placement:"bottomRight"})}),[l.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(e.subscription[t]&&l.data&&!c){if(e.subscription[t][0])for(var a in e.subscription[t])l.subscribeToMore({document:e.subscription[t][a],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});else l.subscribeToMore({document:e.subscription[t],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});o(!0)}}),[l.data]),l}},handlerMutation=function(e){var t=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(e,2),n=t[0],s=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){s.loading||s.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:s.error.message,duration:0,placement:"bottomRight"})}),[s.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(s.data){var e=s.data[Object.keys(s.data)[0]];"warning"==e.type?antd__WEBPACK_IMPORTED_MODULE_5__.a.warning({message:e.message,duration:0,placement:"bottomRight"}):antd__WEBPACK_IMPORTED_MODULE_5__.a.success({message:e.message,duration:10,placement:"bottomRight"}),a()}}),[s.data]),[n,s]}},isAccessed=function(e,t){return!!e.admin||t.some((function(t){return e.accesses.includes(t)}))},authMe={options:{},select:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject||(_templateObject=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                    position_accesses\n                }\n            }\n        "])))},subscription:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject2||(_templateObject2=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            subscription authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                }\n            }\n\n        "])))}},positions=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject3||(_templateObject3=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),useUser=function(){var e=handlerQuery(authMe,"one",{variables:{}},"auth")(),t=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(positions),n=(t.loading,t.data),s=(t.refetch,e.data?e.data.authMe[0]:void 0),a=s?e.data.authMe[0].position_names:[],i=(s&&s.positions&&(null===n||void 0===n||n.positions.filter((function(e){return e.id==s.positions[0]}))),s?e.data.authMe[0].position_accesses:[]),c=s?s.admin:void 0;return{query:e,id:s?s.id:void 0,username:s?s.username:void 0,domain_username:s?s.domain_username:void 0,fio:s?s.fio:void 0,email:s?s.email:void 0,admin:s?s.admin:void 0,role_id:s?s.role_id:void 0,positions:c?[1,2,3,4,5,6]:null===s||void 0===s?void 0:s.positions,position_names:a,documentControl:{select:!!c||i.includes("/document-control-p/select"),insert:!!c||i.includes("/document-control-p/insert"),update:!!c||i.includes("/document-control-p/update"),delete:!!c||i.includes("/document-control-p/delete"),orders:{select:!!c||i.includes("/document-control-p/orders-p/select")},revisedUser:{select:!!c||i.includes("/document-control-p/reviseduser-p/select")},approvedUser:{select:!!c||i.includes("/document-control-p/approveduser-p/select")},rejectedUser:{select:!!c||i.includes("/document-control-p/rejecteduser-p/select")},onApproval:{select:!!c||i.includes("/document-control-p/on-approval-p/select")},onApprovalList:{select:!!c||i.includes("/document-control-p/on-approval-list-p/select")},forExecutionInbox:{select:!!c||i.includes("/document-control-p/for-execution-inbox-p/select")},approved:{select:!!c||i.includes("/document-control-p/approved-p/select")},rejected:{select:!!c||i.includes("/document-control-p/rejected-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-control-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-control-p/item-status-change")},documentReport:{select:!!c||i.includes("/document-report-p/select"),insert:!!c||i.includes("/document-report-p/insert"),update:!!c||i.includes("/document-report-p/update"),delete:!!c||i.includes("/document-report-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-report-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-report-p/item-status-change")},documentHistory:{select:!!c||i.includes("/document-history-p/select"),insert:!!c||i.includes("/document-history-p/insert"),update:!!c||i.includes("/document-history-p/update"),delete:!!c||i.includes("/document-history-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-history-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-history-p/item-status-change")},documentSearch:{select:!!c||i.includes("/document-search-p/select"),insert:!!c||i.includes("/document-search-p/insert"),update:!!c||i.includes("/document-search-p/update"),delete:!!c||i.includes("/document-search-p/delete"),search:{select:!!c||i.includes("/document-search-p/search-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-search-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-search-p/item-status-change")},adminDepartment:{select:!!c||i.includes("/admin-p/select"),insert:!!c||i.includes("/admin-p/insert"),update:!!c||i.includes("/admin-p/update"),delete:!!c||i.includes("/admin-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/admin-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/admin-p/item-status-change")}}},accessRedirect=function(e){var t=function(t){var n=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useLocation)().pathname,s=useUser();n.split("/");if(s.query.loading)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:"Loading..."});switch(n){case"/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/login"});break;case"/login":case"/login/":if(s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/logout":case"/logout/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/account":case"/account/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/account"});break;case"/admin":case"/admin/":case"/graphql":case"/graphql/":case"/admin/registration":case"/admin/registration/":case"/admin/positions-page":case"/admin/positions-page/":case"/admin/document-statuses-page":case"/admin/document-statuses-page/":case"/admin/document-routes-page":case"/admin/document-routes-page/":case"/admin/forms-settings-page":case"/admin/forms-settings-page/":if(!s.admin)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control":case"/document-control/":if(!s.documentControl.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/orders":case"/document-control/orders/":if(!s.documentControl.orders.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/reviseduser":case"/document-control/reviseduser/":case"/document-control/approveduser":case"/document-control/approveduser/":if(!s.documentControl.approvedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejecteduser":case"/document-control/rejecteduser/":if(!s.documentControl.rejectedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval":case"/document-control/on-approval/":if(!s.documentControl.onApproval.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval-list":case"/document-control/on-approval-list/":if(!s.documentControl.onApprovalList.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/for-execution-inbox":case"/document-control/for-execution-inbox/":if(!s.documentControl.forExecutionInbox.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/approved":case"/document-control/approved/":if(!s.documentControl.approved.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejected":case"/document-control/rejected/":if(!s.documentControl.rejected.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-report":case"/document-report/":if(!s.documentReport.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-history":case"/document-history/":if(!s.documentHistory.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search":case"/document-search/":if(!s.documentSearch.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search/search":case"/document-search/search/":if(!s.documentSearch.search.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;default:return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_modules_Error404__WEBPACK_IMPORTED_MODULE_10__.a,{})}return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},t))};return t},download=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t,n){var s,a,i;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"no-cors"});case 2:return s=e.sent,e.prev=3,e.next=6,s.blob();case 6:a=e.sent,(i=document.createElement("a")).href=URL.createObjectURL(a),i.setAttribute("download",n),i.click(),i.remove(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),getDDMMYYY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear();return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a},getDDMMYYYHHmm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear(),i=t.getHours(),c=t.getMinutes();function o(e){return String(e).padStart(2,"0")}return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a+" "+o(i)+":"+o(c)},getFirstMonthDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3),s=n;return s.setHours(0,0,0,0),s.setMonth(s.getMonth()+1,0),s.setDate(1),s},formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.split(/[^\d]+/);return t=t[2]+"-"+t[1]+"-"+t[0]+" "+t[3]+":"+t[4]+":"+t[5]},getDiffHours=function(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,console.log("diff",n),n<1?"\u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434":n<12&&n>=1?Math.abs(Math.round(n))+" \u0447. \u043d\u0430\u0437\u0430\u0434":n>12&&n<24?"\u0412\u0447\u0435\u0440\u0430":n>24?Math.abs(Math.round(n/24))+" \u0434. \u043d\u0430\u0437\u0430\u0434":void 0},notifyMe=function(e){if(window.Notification){if(e)if("granted"===Notification.permission){var t=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){t.close()}),3e3)}else Notification.requestPermission().then((function(t){if("granted"===t){var n=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){n.close()}),3e3)}else console.log("User blocked notifications.")})).catch((function(e){console.error(e)}))}else console.log("Browser does not support notifications.")},sendAgentNotification=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t){var n;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},[[421,1,2]]]);
//# sourceMappingURL=main.b572b883.chunk.js.map