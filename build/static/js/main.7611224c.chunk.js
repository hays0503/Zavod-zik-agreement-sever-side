(this.webpackJsonpdocrecyler=this.webpackJsonpdocrecyler||[]).push([[0],{178:function(e,t,n){"use strict";var s=n(422),a=n(55),i=n(50),c=(n(1),n(0));t.a=function(){return Object(c.jsx)(s.a,{status:"404",title:"404",subTitle:"\u0423\u043f\u0441, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438\u043b\u0438 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430.",extra:Object(c.jsx)(a.a,{type:"primary",children:Object(c.jsx)(i.c,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})}},232:function(e,t,n){"use strict";t.a=n.p+"static/media/duck.dcaac10b.jpg"},306:function(e,t,n){},384:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w,k,C,S,T,I,E,P,F,R,D,L,U,$,M,J,z,K,q,A,H,B,G,Q,W,Y,X,Z,ee,te,ne,se,ae,ie,ce,oe,le,re,de,ue,me,je,be,pe,_e,Oe,he,fe,xe,ve,ge,ye,Ve,Ne,we,ke,Ce,Se,Te,Ie,Ee,Pe,Fe,Re,De,Le,Ue,$e,Me,Je,ze,Ke,qe,Ae,He,Be,Ge,Qe,We,Ye,Xe,Ze,et,tt,nt,st,at,it,ct,ot,lt,rt,dt,ut,mt,jt,bt,pt,_t,Ot,ht,ft,xt,vt,gt,yt,Vt,Nt,wt,kt,Ct,St,Tt,It,Et,Pt,Ft,Rt,Dt,Lt,Ut,$t,Mt,Jt,zt,Kt,qt,At,Ht,Bt,Gt,Qt,Wt,Yt,Xt,Zt,en,tn,nn,sn,an,cn,on,ln,rn,dn,un,mn,jn,bn,pn,_n,On,hn,fn,xn,vn,gn,yn,Vn,Nn,wn,kn,Cn,Sn,Tn,In,En,Pn,Fn,Rn,Dn,Ln,Un,$n,Mn,Jn,zn,Kn,qn,An,Hn,Bn,Gn,Qn,Wn,Yn,Xn,Zn,es,ts,ns,ss,as,is,cs,os,ls,rs,ds,us,ms,js,bs,ps,_s,Os,hs,fs,xs=n(3),vs=n(1),gs=n.n(vs),ys=(n(221),n(58)),Vs=n.n(ys),Ns=(n(306),{debug:!1,port:8445,host:window.SERVER_DATA,graphql:{path:"/graphql"}}),ws=Ns,ks=n(439),Cs=n(447),Ss=n(449),Ts=n(475),Is=n(476),Es=n(219),Ps=n(470),Fs=n(117),Rs=n(280),Ds=n(448),Ls=n(438),Us=n(118),$s=n(278),Ms=n(281),Js=n(429),zs=n(151),Ks=n(431),qs=n(65),As=n(55),Hs=n(430),Bs=n(21),Gs=n(282),Qs=n.n(Gs),Ws=n(50),Ys=n(36),Xs=n(8),Zs=n(11),ea=n(294),ta=n(459),na=n(460),sa=n(461),aa=n(462),ia=n(247),ca=n(453),oa=n(286),la=n(456),ra=n(144),da=n(64),ua=n(0),ma=["title","user"],ja=Js.a.Header,ba=ia.a.useBreakpoint,pa=gs.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Zs.a)(e,ma),ba()),a=Object(Ys.useHistory)(),i=Object(Ys.useLocation)().pathname;return Object(ua.jsx)("div",{children:Object(ua.jsx)(ja,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(ua.jsxs)(Hs.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(ua.jsx)(Ks.a,{flex:"auto",style:{color:"c40c46"},children:Object(ua.jsx)(ca.a,{className:"site-page-header",backIcon:Object(ua.jsx)(ea.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(ua.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(ua.jsx)(Ks.a,{flex:"auto",children:Object(ua.jsx)("h1",{style:{color:"white"},children:t})}):Object(ua.jsx)(ua.Fragment,{}),Object(ua.jsx)(Ks.a,{children:Object(ua.jsx)(oa.a,{shape:"square",size:"small",icon:Object(ua.jsx)(ta.a,{})})}),Object(ua.jsx)(Ks.a,{flex:"70px",style:{marginRight:"30px"},children:Object(ua.jsx)(la.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(ua.jsx)(ra.a,{overlay:Object(ua.jsxs)(da.a,{children:[n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(ua.jsx)(na.a,{}),"ADMIN"]}),n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(ua.jsx)(sa.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(ua.jsx)(sa.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(ua.jsx)(ta.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(ua.jsx)(aa.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(ua.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),_a=pa,Oa=n(178),ha=n(2),fa=n(9),xa=n(444),va=n(288),ga=n(463),ya=n(296),Va=(n(383),n(240)),Na=n(477),wa=(n(384),Object(Va.a)(s||(s=Object(fa.a)(["\n    mutation login($user: JSON) {\n        login(user: $user){\n            username\n        }\n    }"])))),ka=function(){var e=Object(vs.useState)(),t=Object(ha.a)(e,2),n=t[0],s=t[1],a=Object(Xs.g)(Object(Na.a)(wa))(),i=Object(ha.a)(a,2),c=i[0],o=i[1],l=o.loading,r=o.data;Object(vs.useEffect)((function(){n&&c({variables:{user:n}})}),[n]),Object(vs.useEffect)((function(){if(r){var e={method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(n)};fetch("https://"+ws.host+":"+ws.port+"/login",e).then((function(e){e.url!=window.location.href?window.location.href=e.url:console.log(e)}))}}),[r]);var d=xa.a.useForm(),u=Object(ha.a)(d,1)[0];return Object(ua.jsx)(Hs.a,{justify:"center",align:"middle",style:{height:"95vh"},children:Object(ua.jsx)(Ks.a,{children:Object(ua.jsx)(xa.a,{form:u,name:"basic",onFinish:s,onFinishFailed:function(e){console.log("Failed:",e)},children:Object(ua.jsx)(Hs.a,{gutter:16,children:Object(ua.jsxs)(Ks.a,{children:[Object(ua.jsx)("div",{className:"authorizationHeader",children:"\u0410\u0412\u0422\u041e\u0420\u0418\u0417\u0410\u0426\u0418\u042f"}),Object(ua.jsx)(xa.a.Item,{name:"username",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{className:"loginFormName",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"password",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.Password,{className:"loginFormPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(ua.jsx)(ga.a,{style:{color:"#fff"},className:"loginIcons"}):Object(ua.jsx)(ya.a,{style:{color:"#fff"},className:"loginIcons"})}})}),Object(ua.jsx)(xa.a.Item,{className:"loginFormItem",children:Object(ua.jsx)(As.a,{htmlType:"submit",loading:l,className:"login_btn",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})})})},Ca=n(469),Sa=n(437),Ta=n(19),Ia=n(10),Ea=n(295),Pa=n(218),Fa=n(292),Ra=n(436),Da=n(98),La=n(452),Ua=n(103),$a=n(443),Ma=n(464),Ja=n(450),za=["GQL","InsertForm"],Ka=gs.a.memo((function(e){var t=e.GQL,n=e.InsertForm,s=Object(Zs.a)(e,za),a=xa.a.useForm(),i=Object(ha.a)(a,1)[0],c=Object(vs.useState)(!1),o=Object(ha.a)(c,2),l=o[0],r=o[1],d=Object(Xs.g)(Object(Na.a)(t.insert),(function(){r(!1),i.resetFields()}))(),u=Object(ha.a)(d,2),m=u[0],j=u[1].loading;return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",onClick:function(){r(!0)},children:[Object(ua.jsx)(Ma.a,{}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]}),Object(ua.jsx)(Ja.a,{title:s.title,visible:l,onOk:function(){i.submit()},onCancel:function(){r(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",centered:!0,width:s.width?s.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:j||!1,children:Object(ua.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,m({variables:n})},setVisible:r,save:function(){i.submit()}})})]})})),qa=Ka,Aa=n(217),Ha=n(272),Ba=["GQL","UpdateForm"],Ga=gs.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Zs.a)(e,Ba),a=xa.a.useForm(),i=Object(ha.a)(a,1)[0],c=Object(ha.a)(s.visibleModalUpdate,2),o=c[0],l=c[1],r=Object(vs.useState)(!0),d=Object(ha.a)(r,2),u=d[0],m=d[1],j={};j[t.table]={global:{id:"= ".concat(s.selectedRowKeys[0])}};var b=Object(Xs.h)(t,"one",{variables:j})(),p=b.loading,_=b.data,O=b.refetch;Object(vs.useEffect)((function(){_&&i.resetFields()}),[_]),Object(vs.useEffect)((function(){o&&O()}),[o]),window.setVisible=l;var h=Object(Xs.g)(Object(Na.a)(t.update),(function(){l(!1),m(!0)}))(),f=Object(ha.a)(h,2),x=f[0],v=f[1].loading;return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",disabled:1!==s.selectedRowKeys.length,onClick:function(){l(!0)},children:[Object(ua.jsx)(Aa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ua.jsx)(Ja.a,{title:s.title,visible:o,centered:!0,width:s.width?s.width:450,onOk:function(){i.submit()},onCancel:function(){l(!1),m(!0)},maskClosable:!1,destroyOnClose:!0,footer:[Object(ua.jsx)(As.a,{onClick:function(){l(!1),m(!0)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),u?s.update&&Object(ua.jsx)(As.a,{type:"primary",onClick:function(){m(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},"setViewMode"):Object(ua.jsx)(As.a,{type:"primary",loading:v,onClick:function(){i.submit()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"update")],children:Object(ua.jsx)(Ha.a,{spinning:p,children:Object(ua.jsx)(n,{form:i,onFinish:function(e){var n={};n[t.exemplar]=e,x({variables:n})},initialValues:_,disabled:u,setVisible:l,setViewMode:m,save:function(){i.submit()}})})})]})})),Qa=Ga,Wa=gs.a.memo((function(e){var t=e.buttons?e.buttons.map((function(e,t){return Object(ua.jsx)(Ks.a,{children:e},"button".concat(t))})):[];return Object(ua.jsxs)(Hs.a,{justify:"end",align:"middle",gutter:[8,8],children:[Object(ua.jsx)(Ks.a,{flex:"auto",children:Object(ua.jsx)("h1",{style:{margin:"0 0 0 30px"},children:e.title})}),t]})})),Ya=Wa,Xa=n(440),Za=gs.a.memo((function(e){var t=Object(vs.useState)([]),n=Object(ha.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(vs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key])},onDoubleClick:function(t){e.visibleModalUpdate[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){return e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":"ant-table-row ant-table-row-level-0"}})})})),ei=Za,ti=n(147),ni=n(206),si=n.n(ni),ai=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(ua.jsxs)("div",{style:{padding:8},children:[Object(ua.jsx)(va.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(As.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(ua.jsx)(ti.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(ua.jsx)(As.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(ua.jsx)(ti.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(ua.jsx)(si.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},ii=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],ci=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ua.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},oi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ua.jsx)(qs.a,{title:t,color:"grey",children:Object(ua.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},li=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Zs.a)(e,ii);if(d)return Object(xs.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=ci;return r&&(m=oi),Object(xs.a)(Object(xs.a)({title:ci(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return ai(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},ri={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(a||(a=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Va.a)(i||(i=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(c||(c=Object(fa.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},insert:Object(Va.a)(o||(o=Object(fa.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(Va.a)(l||(l=Object(fa.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(Va.a)(r||(r=Object(fa.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},di={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(d||(d=Object(fa.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Va.a)(u||(u=Object(fa.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(m||(m=Object(fa.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(Va.a)(j||(j=Object(fa.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(Va.a)(b||(b=Object(fa.a)(["\n        mutation updatetPosition($positions: JSON) {\n            updatetPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(Va.a)(p||(p=Object(fa.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},ui=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)(!1),s=Object(Xs.g)(Object(Na.a)(ri.delete))(),a=Object(ha.a)(s,2),i=a[0],c=a[1].loading,o=Object(Xs.h)(ri,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(vs.useEffect)((function(){d()}),[]);var u=Object(Xs.h)(di,"all")(),m=(u.loading,u.data),j=u.refetch;Object(vs.useEffect)((function(){j()}),[]);var b=r&&null!=r.users?r.users.map((function(e){return{id:e.id,key:e.id,username:e.username,access:e.admin?"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c",positions:e.positions,fio:e.fio,email:e.email,positionName:m.positions.filter((function(t){return t.id==e.positions})).map((function(e){return e.name}))[0]}})):[],p=li([{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",width:100,tooltip:!0},{title:"\u0420\u043e\u043b\u044c",dataIndex:"access",align:"center",width:100,render:function(e,t){switch(t.access){case"\u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u041e\u0420":return Object(ua.jsx)(Fa.a,{color:"green",children:e});case"\u041f\u041e\u041b\u042c\u0417\u041e\u0412\u0410\u0422\u0415\u041b\u042c":return Object(ua.jsx)(Fa.a,{color:"geekblue",children:e});default:return e}}},{title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",dataIndex:"positionName",width:150,tooltip:!0}]);return Object(ua.jsx)(ei,{data:{dict:p,records:b},loading:l,title:function(e){return Object(ua.jsx)(Ya,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",buttons:[Object(ua.jsx)(qa,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",GQL:ri,InsertForm:mi,width:650}),Object(ua.jsx)(Qa,Object(Ia.a)({visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",width:650,selectedRowKeys:e.selectedRowKeys,GQL:ri,UpdateForm:mi,update:!0},"width",700)),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[ri.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n,bordered:!0})})),mi=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({username:"",password:"",admin:!1,accesses:[],positions:[],domain_username:"",fio:"",email:"",log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.users[0].id,username:e.initialValues.users[0].username,password:e.initialValues.users[0].password,admin:e.initialValues.users[0].admin,accesses:e.initialValues.users[0].accesses,positions:e.initialValues.users[0].positions,domain_username:e.initialValues.users[0].domain_username,fio:e.initialValues.users[0].fio,email:e.initialValues.users[0].email,log_username:t.username})}),[e.initialValues]);return Object(ua.jsx)(xa.a,{form:e.form,name:"WorkersWorkerdForm",onFinish:function(t){e.onFinish(a),console.log(t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:Object(ua.jsx)(Hs.a,{justify:"center",children:Object(ua.jsxs)(Ks.a,{flex:"auto",children:[Object(ua.jsx)(xa.a.Item,{name:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"domain_username",label:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041b\u043e\u0433\u0438\u043d \u0434\u043e\u043c\u0435\u043d\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"email",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043b\u044f \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u0439",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0447\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"fio",label:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0424.\u0418.\u041e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438"})}),Object(ua.jsx)(xa.a.Item,{name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",labelCol:{span:24},rules:[{required:!e.initialValues,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a.Password,{disabled:e.disabled,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"accountInput"})}),Object(ua.jsx)(xa.a.Item,{name:"admin",valuePropName:"checked",rules:[{type:"boolean"}],shouldUpdate:!0,children:Object(ua.jsx)(Da.a,{disabled:e.disabled,children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"})}),a.admin?null:Object(ua.jsx)(Sa.a,{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"}),Object(ua.jsx)(xa.a.Item,{name:"positions",rules:[{type:"array",required:!a.admin,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],hidden:a.admin,children:Object(ua.jsx)(ji,{disabled:e.disabled})}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0,children:Object(ua.jsx)(va.a,{disabled:e.disabled})})]})})})})),ji=gs.a.memo((function(e){var t=Object(Xs.h)(di,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(vs.useEffect)((function(){a()}),[]);var i=Object(vs.useState)([]),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(La.a,{dataSource:r,showSearch:!0,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(Ta.a)(e),Object(Ta.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ua.jsx)(Ua.a,{image:Ua.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),bi=ui,pi={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(_||(_=Object(fa.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Va.a)(O||(O=Object(fa.a)(["\n            query document_statuses($document_statuses: JSON) {\n                document_statuses(document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(h||(h=Object(fa.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},insert:Object(Va.a)(f||(f=Object(fa.a)(["\n        mutation insertDocumentStatus($document_statuses: JSON) {\n            insertDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),update:Object(Va.a)(x||(x=Object(fa.a)(["\n        mutation updateDocumentStatus($document_statuses: JSON) {\n            updateDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "]))),delete:Object(Va.a)(v||(v=Object(fa.a)(["\n        mutation deleteDocumentStatus($document_statuses: JSON) {\n            deleteDocumentStatus(document_statuses: $document_statuses){\n                message\n            }\n        }\n    "])))},_i=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)(!1),s=Object(Xs.g)(Object(Na.a)(pi.delete))(),a=Object(ha.a)(s,2),i=a[0],c=a[1].loading,o=Object(Xs.h)(pi,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(vs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=li([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ua.jsx)(ei,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ua.jsx)(Ya,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",buttons:[Object(ua.jsx)(qa,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",GQL:pi,InsertForm:Oi}),Object(ua.jsx)(Qa,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",selectedRowKeys:e.selectedRowKeys,GQL:pi,UpdateForm:Oi,update:!0}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[pi.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Oi=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({isuseforreport:!1,log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.document_statuses[0].id,name:e.initialValues.document_statuses[0].name,log_username:a.log_username})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentStatusesForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0,children:Object(ua.jsx)(va.a,{disabled:e.disabled})})]})})),hi=_i,fi=n(465),xi=n(466),vi=n(78),gi=n(165),yi=["query","placeholder","clear"],Vi=gs.a.memo((function(e){var t=e.query,n=e.placeholder,s=e.clear,a=Object(Zs.a)(e,yi),i=Object(Xs.h)(t,"all")(),c=i.loading,o=i.data,l=i.refetch;return Object(vs.useEffect)((function(){l()}),[]),Object(ua.jsxs)(Hs.a,{justify:"space-between",children:[Object(ua.jsx)(Ks.a,{flex:"auto",children:Object(ua.jsxs)(gi.a,Object(xs.a)(Object(xs.a)({style:s?{width:"100%"}:null,placeholder:n,loading:c,showSearch:!0,optionFilterProp:"children",filterOption:!0},a),{},{children:[Object(ua.jsx)(gi.a.Option,{value:null},null),o?o[Object.keys(o)[0]].map((function(e){return Object(ua.jsx)(gi.a.Option,{value:e.id,children:e[Object.keys(e).filter((function(e){return"id"!==e&&"__typename"!==e}))[0]]},e.id)})):[]]}))}),s?Object(ua.jsx)(Ks.a,{children:Object(ua.jsx)(As.a,{style:{padding:5},type:"dashed",onClick:function(){a.onChange(null)},children:Object(ua.jsx)(vi.a,{})})}):null]})})),Ni=Vi,wi=n(293),ki=n(467),Ci=n(468),Si={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(g||(g=Object(fa.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "]))),one:Object(Va.a)(y||(y=Object(fa.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(V||(V=Object(fa.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                    routes\n                }\n            }\n        "])))},insert:Object(Va.a)(N||(N=Object(fa.a)(["\n        mutation insertDocumentRoute($document_routes: JSON) {\n            insertDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),update:Object(Va.a)(w||(w=Object(fa.a)(["\n        mutation updateDocumentRoute($document_routes: JSON) {\n            updateDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "]))),delete:Object(Va.a)(k||(k=Object(fa.a)(["\n        mutation deleteDocumentRoute($document_routes: JSON) {\n            deleteDocumentRoute(document_routes: $document_routes){\n                message\n            }\n        }\n    "])))},Ti={exemplar:"document_statuses",table:"document_statuses",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(Va.a)(C||(C=Object(fa.a)(["\n            query document_statuses ($document_statuses: JSON) {\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(S||(S=Object(fa.a)(["\n            subscription document_statuses ($document_statuses: JSON){\n                document_statuses (document_statuses: $document_statuses) {\n                    id\n                    name\n                }\n            }\n        "])))}},Ii={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(T||(T=Object(fa.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Va.a)(I||(I=Object(fa.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(E||(E=Object(fa.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},Ei=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)(!1),s=Object(Xs.g)(Object(Na.a)(Si.delete))(),a=Object(ha.a)(s,2),i=a[0],c=a[1].loading,o=Object(Xs.h)(Si,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(vs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=li([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(ei,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ua.jsx)(Ya,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",buttons:[Object(ua.jsx)(qa,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",GQL:Si,InsertForm:Pi,width:750}),Object(ua.jsx)(Qa,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:Si,UpdateForm:Pi,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Si.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})})),Pi=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useRef)(),s=Object(vs.useState)({isuseforreport:!1,log_username:t.username}),a=Object(ha.a)(s,2),i=a[0],c=a[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(i),console.log("props top",i)}),[i]),Object(vs.useEffect)((function(){e.initialValues&&c({id:e.initialValues.document_routes[0].id,name:e.initialValues.document_routes[0].name,status_in_process:e.initialValues.document_routes[0].status_in_process,status_cancelled:e.initialValues.document_routes[0].status_cancelled,status_finished:e.initialValues.document_routes[0].status_finished,routes:e.initialValues.document_routes[0].routes,log_username:i.log_username})}),[e.initialValues]);return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentRoutesForm",onFinish:function(t){e.onFinish(i)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"status_in_process",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(Ni,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",query:Ti})}),Object(ua.jsx)(xa.a.Item,{name:"status_cancelled",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(Ni,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d",query:Ti})}),Object(ua.jsx)(xa.a.Item,{name:"status_finished",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(Ni,{disabled:e.disabled,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",title:"\u0421\u0442\u0430\u0442\u0443\u0441 - \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d",query:Ti})}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0,children:Object(ua.jsx)(va.a,{disabled:e.disabled})}),Object(ua.jsx)(xa.a.List,{name:"routes",children:function(t,s){var a=s.add,i=s.remove;return Object(ua.jsxs)(ua.Fragment,{children:[t.map((function(t){return Object(ua.jsx)(la.b,{style:{display:"flex",marginBottom:40},align:"baseline",children:Object(ua.jsxs)(Hs.a,{gutter:20,children:[Object(ua.jsxs)(Ks.a,{span:24,children:["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u2116: ",Object(ua.jsx)("b",{children:t.name+1})]}),Object(ua.jsxs)(Ks.a,{span:12,children:[Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{name:[t.name,"positionId"],fieldKey:[t.fieldKey,"positionId"],children:Object(ua.jsx)(Ni,{disabled:e.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:Ii,onChange:function(e,n){c((function(e){var s=Object.assign({},e);return console.log("field.fieldKey",t.fieldKey),s.routes[t.name].positionName=n.children,s.routes[t.name].step=t.name+1,s}))}})})),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{name:[t.name,"step"],fieldKey:[t.fieldKey,"step"],hidden:!0})),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{name:[t.name,"positionName"],fieldKey:[t.fieldKey,"positionName"],hidden:!0}))]}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{name:[t.name,"isExecutor"],fieldKey:[t.fieldKey,"isExecutor"],valuePropName:"checked",rules:[{type:"boolean",required:!1}],children:Object(ua.jsx)(Da.a,{disabled:e.disabled,children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c?"})}))}),Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{label:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b:",name:[t.name,"statuses"],fieldKey:[t.fieldKey,"statuses"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(ua.jsx)(Fi,{disabled:e.disabled})}))}),Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},t),{},{label:"\u0417\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0446\u0430:",name:[t.name,"substitutes"],fieldKey:[t.fieldKey,"substitutes"],rules:[{type:"array",required:!1,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b \u043e\u0434\u043d\u0443!"}],children:Object(ua.jsx)(Ri,{disabled:e.disabled})}))}),Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)("i",{children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(ua.jsx)(fi.a,{onClick:function(){return i(t.name)},disabled:e.disabled,style:{marginLeft:5}})]})]})},t.key)})),Object(ua.jsx)(xa.a.Item,{children:Object(ua.jsx)(As.a,{type:"dashed",onClick:function(){return a()},disabled:e.disabled,block:!0,icon:Object(ua.jsx)(xi.a,{}),ref:n,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})})]})}})]}),Object(ua.jsx)(Hs.a,{className:"on-approval-from-buttons-wrap",children:Object(ua.jsxs)(Ks.a,{span:24,className:"on-approval-form-buttons-container",children:[Object(ua.jsx)(As.a,{disabled:e.disabled,style:{marginRight:"5px"},onClick:function(){n.current.click()},icon:Object(ua.jsx)(wi.a,{})}),Object(ua.jsx)("span",{style:{marginRight:"5px"},children:e.setViewMode?Object(ua.jsx)(As.a,{onClick:function(){e.setViewMode(!1)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(ua.jsx)(ki.a,{})}):Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){e.save()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),children:Object(ua.jsx)(As.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:Object(ua.jsx)(Pa.a,{})})})}),Object(ua.jsx)("span",{style:{marginRight:"5px"},children:Object(ua.jsx)(As.a,{onClick:function(){e.setVisible(!1),e.setViewMode(!0)},title:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:Object(ua.jsx)(Ci.a,{})})})]})})]})})),Fi=gs.a.memo((function(e){var t=Object(Xs.h)(Ti,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(vs.useEffect)((function(){a()}),[]);var i=Object(vs.useState)([]),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.document_statuses.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(La.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(Ta.a)(e),Object(Ta.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ua.jsx)(Ua.a,{image:Ua.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u0421\u0442\u0430\u0442\u0443\u0441"},disabled:e.disabled})})})),Ri=gs.a.memo((function(e){var t=Object(Xs.h)(Ii,"all")(),n=t.loading,s=t.data,a=t.refetch;Object(vs.useEffect)((function(){a()}),[]);var i=Object(vs.useState)([]),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=[];return n||(r=s.positions.map((function(e){return{id:e.id,key:e.id,title:e.name,description:e.name}}))),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(La.a,{dataSource:r,titles:["\u0412\u0441\u0435","\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"],targetKeys:e.value?e.value:[],selectedKeys:o,onChange:function(t,n,s){e.onChange(t)},showSelectAll:!1,onSelectChange:function(e,t){l([].concat(Object(Ta.a)(e),Object(Ta.a)(t))),console.log(o)},render:function(e){return e.title},listStyle:{width:650/2.2},style:{marginBottom:16},filterOption:function(e,t){return t.description.indexOf(e)>-1},locale:{itemUnit:"",itemsUnit:"",notFoundContent:Object(ua.jsx)(Ua.a,{image:Ua.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}),searchPlaceholder:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"},disabled:e.disabled})})})),Di=Ei,Li={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(P||(P=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "]))),one:Object(Va.a)(F||(F=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(R||(R=Object(fa.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                }\n            }\n        "])))},insert:Object(Va.a)(D||(D=Object(fa.a)(["\n        mutation insertUser($user: JSON) {\n            insertUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),update:Object(Va.a)(L||(L=Object(fa.a)(["\n        mutation updateUser($user: JSON) {\n            updateUser(user: $user) {\n                message\n                type\n            }\n        }\n    "]))),delete:Object(Va.a)(U||(U=Object(fa.a)(["\n        mutation deleteUser($user: JSON) {\n            deleteUser(user: $user) {\n                message\n                type\n            }\n        }\n    "])))},Ui={exemplar:"positions",table:"positions",options:{all:{variables:{positions:{global:{ORDER_BY:["name asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)($||($=Object(fa.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),one:Object(Va.a)(M||(M=Object(fa.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(J||(J=Object(fa.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "])))},insert:Object(Va.a)(z||(z=Object(fa.a)(["\n        mutation insertPosition($positions: JSON) {\n            insertPosition(positions: $positions){\n                message\n            }\n        }\n    "]))),update:Object(Va.a)(K||(K=Object(fa.a)(["\n        mutation updatePosition($positions: JSON) {\n            updatePosition(positions: $positions){\n                message\n            }\n        }\n    "]))),delete:Object(Va.a)(q||(q=Object(fa.a)(["\n        mutation deletePosition($positions: JSON) {\n            deletePosition(positions: $positions){\n                message\n            }\n        }\n    "])))},$i=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)(!1),s=Object(Xs.g)(Object(Na.a)(Ui.delete))(),a=Object(ha.a)(s,2),i=a[0],c=a[1].loading,o=Object(Xs.h)(Ui,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(vs.useEffect)((function(){d()}),[]);var u=Object(Xs.h)(Li,"all")(),m=(u.loading,u.data),j=u.refetch;Object(vs.useEffect)((function(){j()}),[]);var b=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){var t;return{id:e.id,key:e.id,name:e.name,accesses:e.accesses,count:null===m||void 0===m||null===(t=m.users)||void 0===t?void 0:t.filter((function(t){return t.positions==e.id})).length}})):[],p=li([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0},{title:"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u043b\u044c\u0437.",dataIndex:"count",width:"50px",tooltip:!0}]);return Object(ua.jsx)(ei,{data:{dict:p,records:b},loading:l,title:function(e){return Object(ua.jsx)(Ya,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",buttons:[Object(ua.jsx)(qa,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",GQL:Ui,InsertForm:Mi}),Object(ua.jsx)(Qa,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",selectedRowKeys:e.selectedRowKeys,GQL:Ui,UpdateForm:Mi,update:!0}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Ui.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Mi=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.positions[0].id,name:e.initialValues.positions[0].name,accesses:e.initialValues.positions[0].accesses,log_username:a.log_username})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentPositionsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})}),Object(ua.jsx)("h3",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430:"}),Object(ua.jsx)(xa.a.Item,{name:"accesses",rules:[{type:"array",required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Ji,{disabled:e.disabled})}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0,children:Object(ua.jsx)(va.a,{disabled:e.disabled})})]})})),Ji=gs.a.memo((function(e){var t=Object(vs.useState)(!0),n=Object(ha.a)(t,2),s=n[0],a=n[1],i=Object(vs.useState)([]),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)($a.a,{checkable:!0,onExpand:function(e){l(e),a(!1)},expandedKeys:o,autoExpandParent:s,onCheck:function(t){e.onChange(t)},checkedKeys:e.value,treeData:[{title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-control-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-control-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-control-p/item-status-change"},{title:"\u041c\u043e\u0438 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",key:"/document-control-p/orders-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/orders-p/select"}]},{title:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443",key:"/document-control-p/reviseduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/reviseduser-p/select"}]},{title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/approveduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approveduser-p/select"}]},{title:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043d\u044b\u0435",key:"/document-control-p/rejecteduser-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejecteduser-p/select"}]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c",key:"/document-control-p/on-approval-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-p/select"}]},{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435",key:"/document-control-p/on-approval-list-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/on-approval-list-p/select"}]},{title:"\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",key:"/document-control-p/for-execution-inbox-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/for-execution-inbox-p/select"}]},{title:"\u0412\u0441\u0435 \u0443\u0442\u0432\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/approved-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/approved-p/select"}]},{title:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u0435\u043d\u043d\u0451\u043d\u043d\u044b\u0435",key:"/document-control-p/rejected-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-control-p/rejected-p/select"}]}]},{title:"\u041e\u0442\u0447\u0435\u0442\u044b",key:"/document-report-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-report-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-report-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-report-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-report-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-report-p/item-status-change"}]},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",key:"/document-hitory-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-hitory-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-hitory-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-hitory-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-hitory-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-hitory-p/item-status-change"}]},{title:"\u041f\u043e\u0438\u0441\u043a",key:"/document-search-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/document-search-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/document-search-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/document-search-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/document-search-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/document-search-p/item-status-change"}]},{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"/admin-p",children:[{title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",key:"/admin-p/select"},{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/insert"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",key:"/admin-p/update"},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",key:"/admin-p/delete"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",key:"/admin-p/document-status-change"},{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",key:"/admin-p/item-status-change"}]}],disabled:e.disabled})})),zi=$i,Ki={exemplar:"forms",table:"forms",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(A||(A=Object(fa.a)(["\n            query forms ($forms: JSON) {\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "]))),one:Object(Va.a)(H||(H=Object(fa.a)(["\n            query forms($forms: JSON) {\n                forms(forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(B||(B=Object(fa.a)(["\n            subscription forms ($forms: JSON){\n                forms (forms: $forms) {\n                    id\n                    name\n                    route\n                    settings\n                }\n            }\n        "])))},insert:Object(Va.a)(G||(G=Object(fa.a)(["\n        mutation insertForm($forms: JSON) {\n            insertForm(forms: $forms){\n                message\n            }\n        }\n    "]))),update:Object(Va.a)(Q||(Q=Object(fa.a)(["\n        mutation updateForm($forms: JSON) {\n            updateForm(forms: $forms){\n                message\n            }\n        }\n    "]))),delete:Object(Va.a)(W||(W=Object(fa.a)(["\n        mutation deleteForm($forms: JSON) {\n            deleteForm(forms: $forms){\n                message\n            }\n        }\n    "])))},qi={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"}},select:{all:Object(Va.a)(Y||(Y=Object(fa.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(X||(X=Object(fa.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                }\n            }\n        "])))}},Ai=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)(!1),s=Object(Xs.g)(Object(Na.a)(Ki.delete))(),a=Object(ha.a)(s,2),i=a[0],c=a[1].loading,o=Object(Xs.h)(Ki,"all")(),l=o.loading,r=o.data,d=o.refetch;Object(vs.useEffect)((function(){d()}),[]);var u=r&&null!=r[Object.keys(r)[0]]?r[Object.keys(r)[0]].map((function(e){return{id:e.id,key:e.id,name:e.name}})):[],m=li([{title:"ID",dataIndex:"id",width:"15px",type:"search",tooltip:!0},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",width:"150px",type:"search",tooltip:!0}]);return Object(ua.jsx)(ei,{data:{dict:m,records:u},loading:l,title:function(e){return Object(ua.jsx)(Ya,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0444\u043e\u0440\u043c",buttons:[Object(ua.jsx)(qa,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",GQL:Ki,InsertForm:Hi}),Object(ua.jsx)(Qa,{visibleModalUpdate:n,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",selectedRowKeys:e.selectedRowKeys,GQL:Ki,UpdateForm:Hi,update:!0}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Ki.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},i({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:c,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:n})})),Hi=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({isuseforreport:!1,log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.forms[0].id,name:e.initialValues.forms[0].name,route:e.initialValues.forms[0].route,settings:JSON.stringify(e.initialValues.forms[0].settings),log_username:a.log_username})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"FormSettingsForm",onFinish:function(t){e.onFinish(a)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"name",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b"})}),Object(ua.jsx)(xa.a.Item,{name:"route",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!",whitespace:!0}],children:Object(ua.jsx)(Ni,{disabled:e.disabled,placeholder:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",title:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442",query:qi})}),Object(ua.jsx)(xa.a.Item,{name:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0,children:Object(ua.jsx)(va.a,{disabled:e.disabled})})]})})),Bi=Ai,Gi=Js.a.Content,Qi=Js.a.Sider,Wi=Object(Ys.withRouter)((function(e){var t=Object(Ys.useLocation)().pathname,n=Object(Xs.j)(),s=e.location.pathname.split("/").slice(1);if("/admin/"===t||"/admin"===t){if(n.username)return Object(ua.jsx)(Ys.Redirect,{to:"/admin/registration"});if(n.username)return Object(ua.jsx)(Ys.Redirect,{to:"/admin/positions-page"});if(n.username)return Object(ua.jsx)(Ys.Redirect,{to:"/admin/document-statuses-page"});if(n.username)return Object(ua.jsx)(Ys.Redirect,{to:"/admin/document-routes-page"});if(n.username)return Object(ua.jsx)(Ys.Redirect,{to:"/admin/forms-settings-page"})}return console.log(s,t),Object(ua.jsxs)(Js.a,{className:"main-layout",children:[Object(ua.jsx)(_a,{title:"\u041c\u043e\u0434\u0443\u043b\u044c \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430",user:n}),Object(ua.jsxs)(Js.a,{children:[Object(ua.jsx)(Qi,{theme:"dark",breakpoint:"lg",collapsedWidth:"0",className:"ant-layout-sider",children:Object(ua.jsxs)(da.a,{theme:"dark",mode:"inline",defaultSelectedKeys:t,style:{height:"100%"},className:"adminSider",children:[Object(ua.jsx)(Sa.a,{style:{position:"absolute",margin:0,top:0}}),Object(ua.jsx)(da.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ua.jsx)(Ca.a,{}),children:Object(ua.jsx)(Ws.c,{to:"/admin/registration",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/admin/registration"),Object(ua.jsx)(Sa.a,{style:{margin:0}}),Object(ua.jsx)(da.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ua.jsx)(Ca.a,{}),children:Object(ua.jsx)(Ws.c,{to:"/admin/positions-page",children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"})},"/admin/positions-page"),Object(ua.jsx)(Sa.a,{style:{margin:0}}),Object(ua.jsx)(da.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ua.jsx)(Ca.a,{}),children:Object(ua.jsx)(Ws.c,{to:"/admin/document-statuses-page",children:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-statuses-page"),Object(ua.jsx)(Sa.a,{style:{margin:0}}),Object(ua.jsx)(da.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ua.jsx)(Ca.a,{}),children:Object(ua.jsx)(Ws.c,{to:"/admin/document-routes-page",children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"})},"/admin/document-routes-page"),Object(ua.jsx)(Sa.a,{style:{margin:0}}),Object(ua.jsx)(da.a.Item,{style:{marginTop:2,marginBottom:2},icon:Object(ua.jsx)(Ca.a,{}),children:Object(ua.jsx)(Ws.c,{to:"/admin/forms-settings-page",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})},"/admin/forms-settings-page"),Object(ua.jsx)(Sa.a,{style:{margin:0}}),Object(ua.jsx)(Sa.a,{style:{position:"absolute",margin:0,bottom:0}})]})}),Object(ua.jsx)(Js.a,{className:"content-layout",children:Object(ua.jsx)(Gi,{children:Object(ua.jsxs)("div",{className:"site-layout-background",style:{minHeight:360},children:[Object(ua.jsx)(Ys.Route,{path:"/admin/registration",component:bi}),Object(ua.jsx)(Ys.Route,{path:"/admin/positions-page",component:zi}),Object(ua.jsx)(Ys.Route,{path:"/admin/document-statuses-page",component:hi}),Object(ua.jsx)(Ys.Route,{path:"/admin/document-routes-page",component:Di}),Object(ua.jsx)(Ys.Route,{path:"/admin/forms-settings-page",component:Bi})]})})})]})]})})),Yi=n(299),Xi=n(446),Zi=Js.a.Sider,ec=Js.a.Content,tc=Object(Va.a)(Z||(Z=Object(fa.a)(["\n  mutation updatePassword(\n    $username: String\n    $password: String\n  ) {\n    updatePassword(username: $username, password: $password) {\n\t  username\n      password\n\t  \n    }\n  }\n"]))),nc=Object(Va.a)(ee||(ee=Object(fa.a)(["\n\tquery application($application: JSON){\n  application(application: $application){\n    platform_version,\n    database_version\n  }\n}"]))),sc=gs.a.memo((function(e){var t=Object(vs.useState)(),n=Object(ha.a)(t,2),s=n[0],a=n[1],i=Object(vs.useState)(),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("1447"),d=Object(ha.a)(r,2),u=(d[0],d[1],Object(vs.useState)()),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=Object(Xs.j)(),_=p.username,O=Object(Na.a)(tc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=x.loading,g=x.error,y=Object(Yi.a)(nc),V=(y.loading,y.data);y.refetch;Object(vs.useEffect)((function(){v||g&&zs.a.error({message:function(e){return e},duration:0,placement:"topLeft"})}),[g]),Object(vs.useEffect)((function(){v||"0"===j&&(zs.a.info({message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d",duration:0,placement:"topLeft"}),b("1"),console.log(j))}),[function(e){return e},j]);return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Js.a,{children:[Object(ua.jsx)(_a,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",user:p}),Object(ua.jsxs)(Js.a,{children:[Object(ua.jsxs)(Zi,{theme:"dark",style:{color:"#fff"},children:[Object(ua.jsx)(Sa.a,{style:{margin:"0 0 7px 0",top:0}}),Object(ua.jsx)("h1",{style:{color:"#fff"},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(ua.jsx)(Xi.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b",value:V&&V.application&&null!=V.application[0]?V.application[0].platform_version:null}),Object(ua.jsx)(Xi.a,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0411\u0414",value:V&&V.application&&null!=V.application[0]?V.application[0].database_version:null})]}),Object(ua.jsx)(ec,{children:Object(ua.jsxs)(la.b,{direction:"vertical",children:[Object(ua.jsx)("h1",{children:" \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043c\u0435\u043d\u044b \u043f\u0430\u0440\u043e\u043b\u044f "}),Object(ua.jsx)("h1",{children:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c 2 \u0440\u0430\u0437\u0430 "}),Object(ua.jsx)(va.a.Password,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(e){a(e.target.value),console.log(s)},className:"accountInput",iconRender:function(e){return e?Object(ua.jsx)(ga.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(ua.jsx)(ya.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})}}),Object(ua.jsx)(va.a.Password,{onChange:function(e){l(e.target.value),console.log(o)},value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",iconRender:function(e){return e?Object(ua.jsx)(ga.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}}):Object(ua.jsx)(ya.a,{className:"accountEyeTwoTone",style:{color:"#2C3E50"}})},className:"accountInput"}),Object(ua.jsx)(As.a,{onClick:function(){s===o&&s.length>0&&o.length>0?(b("0"),f({variables:{username:_,password:s}})):zs.a.error({message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u0438\u043b\u0438 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u044b",duration:0,placement:"topLeft"})},children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})]})})})),ac=sc,ic=n(454),cc=n(471),oc=n(472),lc=n(478),rc=n(120),dc=Js.a.Sider,uc=da.a.SubMenu,mc=function(e){var t=Object(rc.useLocation)(),n=Object(Xs.j)(),s=t.pathname,a=Object(vs.useState)(!1),i=Object(ha.a)(a,2),c=i[0],o=i[1],l=Object(vs.useState)({t1:2,t2:3,t3:3}),r=Object(ha.a)(l,2),d=r[0],u=r[1],m=Object(vs.useState)({}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=Object(Va.a)(te||(te=Object(fa.a)(["\n\tquery document_logs($document_logs: JSON){\n        document_logs(document_logs: $document_logs){\n            id\n            document_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),O=Object(Va.a)(ne||(ne=Object(fa.a)(["\n        subscription document_logs ($document_logs: JSON){\n            document_logs(document_logs: $document_logs){\n                id\n                document_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),h=Object(Va.a)(se||(se=Object(fa.a)(["\n\tquery document_tasks_logs($document_tasks_logs: JSON){\n        document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n            id\n            task_id\n            is_read\n            user_id\n            type\n        }\n    }"]))),f=Object(Va.a)(ae||(ae=Object(fa.a)(["\n        subscription document_tasks_logs ($document_tasks_logs: JSON){\n            document_tasks_logs(document_tasks_logs: $document_tasks_logs){\n                id\n                task_id\n                is_read\n                user_id\n                type\n            }\n        }"]))),x=Object(Yi.a)(_,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){var t={};t.revised=e.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,t.approved=e.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,t.rejected=e.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,t.onaproval=e.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(t)}}),v=(x.loading,x.data,x.refetch,Object(lc.a)(O,{variables:{document_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data,n={};n.revised=t.document_logs.filter((function(e){return 4==e.type&&0==e.is_read})).length,n.approved=t.document_logs.filter((function(e){return 1==e.type&&0==e.is_read})).length,n.rejected=t.document_logs.filter((function(e){return 3==e.type&&0==e.is_read})).length,n.onaproval=t.document_logs.filter((function(e){return 2==e.type&&0==e.is_read})).length,u(n),(n.revised>0||n.approved>0||n.rejected>0||n.onaproval>0)&&Object(Xs.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));v.data,v.loading;Object(vs.useEffect)((function(){e.countF(u),console.log("setCon applied")}),[]);var g=Object(Yi.a)(h,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onCompleted:function(e){console.log("tasks query",e),p(e.document_tasks_logs.length)}}),y=(g.loading,g.data,g.refetch,Object(lc.a)(f,{variables:{document_tasks_logs:{global:{is_read:"=false",user_id:"="+n.id,ORDER_BY:["date"]}}},onSubscriptionData:function(e){var t=e.subscriptionData.data;p(t.document_tasks_logs.length),console.log("tasks sub",t),b>0&&Object(Xs.i)("\u0415\u0441\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.")}}));y.data,y.loading;Object(vs.useEffect)((function(){switch(s){case"/document-control/orders":e.setHeaderTitle("\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/reviseduser":e.setHeaderTitle("\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443");break;case"/document-control/approveduser":e.setHeaderTitle("\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435");break;case"/document-control/rejecteduser":e.setHeaderTitle("\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/on-approval":e.setHeaderTitle("\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435");break;case"/document-control/on-approval-list":e.setHeaderTitle("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e");break;case"/document-control/approved":e.setHeaderTitle("\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b");break;case"/document-control/rejected":e.setHeaderTitle("\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435");break;case"/document-control/for-execution-inbox":e.setHeaderTitle("\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435")}}),[s]);return Object(ua.jsx)(dc,{theme:"dark",collapsible:!0,collapsed:c,onCollapse:function(e){console.log(e),o(e)},children:Object(ua.jsxs)(da.a,{defaultSelectedKeys:s,className:"siderMenu",mode:"inline",defaultOpenKeys:["User","onApproval","Admin"],children:[Object(ua.jsxs)(uc,{icon:Object(ua.jsx)(Ps.a,{}),title:"\u041c\u043e\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",children:[n.documentControl.insert?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsx)(Ws.b,{to:"/document-control/orders",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/orders"):null,n.documentControl.revisedUser.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsxs)(Ws.c,{to:"/document-control/reviseduser",children:["\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 ",Object(ua.jsx)("sup",{children:Object(ua.jsx)(ic.a,{count:d.revised})})]})},"/document-control/reviseduser"):null,n.documentControl.approvedUser.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsxs)(Ws.c,{to:"/document-control/approveduser",children:["\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 ",Object(ua.jsx)("sup",{children:Object(ua.jsx)(ic.a,{count:d.approved})})]})},"/document-control/approveduser"):null,n.documentControl.rejectedUser.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsxs)(Ws.b,{to:"/document-control/rejecteduser",children:["\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435 ",Object(ua.jsx)("sup",{children:Object(ua.jsx)(ic.a,{count:d.rejected})})]})},"/document-control/rejecteduser"):null]},"User"),n.documentControl.onApproval.select||n.documentControl.onApprovalList.select?Object(ua.jsxs)(uc,{icon:Object(ua.jsx)(cc.a,{}),title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:[n.documentControl.onApproval.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsxs)(Ws.b,{to:"/document-control/on-approval",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(ua.jsx)("sup",{children:Object(ua.jsx)(ic.a,{count:d.onaproval})})]})},"/document-control/on-approval"):null,n.documentControl.onApprovalList.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsx)(Ws.b,{to:"/document-control/on-approval-list",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e"})},"/document-control/on-approval-list"):null]},"onApproval"):null,n.documentControl.forExecutionInbox.select?Object(ua.jsx)(uc,{icon:Object(ua.jsx)(cc.a,{}),title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",children:n.documentControl.forExecutionInbox.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsxs)(Ws.b,{to:"/document-control/for-execution-inbox",children:["\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435",Object(ua.jsx)("sup",{children:Object(ua.jsx)(ic.a,{count:b})})]})},"/document-control/for-execution-inbox"):null},"forExecution"):null,n.documentControl.approved.select||n.documentControl.rejected.select?Object(ua.jsxs)(uc,{icon:Object(ua.jsx)(oc.a,{}),title:"\u0421\u043f\u0438\u0441\u043e\u043a (\u0410\u0434\u043c\u0438\u043d)",children:[n.documentControl.approved.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsx)(Ws.c,{to:"/document-control/approved",children:"\u0412\u0441\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"})},"/document-control/approved"):null,n.documentControl.rejected.select?Object(ua.jsx)(da.a.Item,{children:Object(ua.jsx)(Ws.b,{to:"/document-control/rejected",children:"\u0412\u0441\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0451\u043d\u043d\u044b\u0435"})},"/document-control/rejected"):null]},"Admin"):null]})})},jc=n(6),bc=n.n(jc),pc=n(13),_c=n(455),Oc=["GQL","GQL2","GQL3","GQL4","GQL5","Form1","Form2","Form3","Form4","Form5"],hc={exemplar:"document_routes",table:"document_routes",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(ie||(ie=Object(fa.a)(["\n            query document_routes ($document_routes: JSON) {\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "]))),one:Object(Va.a)(ce||(ce=Object(fa.a)(["\n            query document_routes($document_routes: JSON) {\n                document_routes(document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(oe||(oe=Object(fa.a)(["\n            subscription document_routes ($document_routes: JSON){\n                document_routes (document_routes: $document_routes) {\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n            }\n        "])))}},fc={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(le||(le=Object(fa.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Va.a)(re||(re=Object(fa.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(de||(de=Object(fa.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},xc=_c.a.Step,vc=gs.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.Form1,o=e.Form2,l=e.Form3,r=e.Form4,d=e.Form5,u=Object(Zs.a)(e,Oc),m=Object(vs.useState)(!1),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=Object(vs.useState)(!1),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=Object(vs.useState)(!1),v=Object(ha.a)(x,2),g=v[0],y=v[1],V=Object(vs.useState)(!1),N=Object(ha.a)(V,2),w=N[0],k=N[1],C=Object(vs.useState)(!1),S=Object(ha.a)(C,2),T=S[0],I=S[1],E=Object(vs.useState)(),P=Object(ha.a)(E,2),F=P[0],R=P[1],D=Object(vs.useState)({}),L=Object(ha.a)(D,2),U=L[0],$=L[1],M=Object(Xs.j)(),J=xa.a.useForm(),z=Object(ha.a)(J,1)[0],K=Object(vs.useState)(!1),q=Object(ha.a)(K,2),A=q[0],H=q[1];Object(vs.useEffect)((function(){A&&null!=U.route_id&&(z.resetFields(),$({route_id:null}),ee([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]))}),[A]);var B=function(){p(!1),f(!1),y(!1),k(!1),I(!1)},G=Object(Yi.a)(hc.select.all,{variables:{document_routes:{global:{id:"=".concat(U.route_id)}}}}),Q=(G.loading,G.data),W=G.refetch;Object(vs.useEffect)((function(){null!=U.route_id&&(W(),console.log("stateEffect",Q,U))}),[U]);var Y=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),X=Object(ha.a)(Y,2),Z=X[0],ee=X[1];Object(vs.useEffect)((function(){Q&&null!=Q[Object.keys(Q)[0]]&&U.route_id>0&&(console.log("dataRoutes",Q),ne.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ae.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ce.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),le.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),de.setFieldsValue({route_id:Q.document_routes[0].id,step:1,status_id:Q.document_routes[0].status_in_process}),ee(void 0!=Q.document_routes[0].routes?Q.document_routes[0].routes.map((function(e){return{positionName:e.positionName}})):[]),R(Q.document_routes[0].routes.filter((function(e){return 1==e.step}))))}),[Q]);var te=xa.a.useForm(),ne=Object(ha.a)(te,1)[0],se=xa.a.useForm(),ae=Object(ha.a)(se,1)[0],ie=xa.a.useForm(),ce=Object(ha.a)(ie,1)[0],oe=xa.a.useForm(),le=Object(ha.a)(oe,1)[0],re=xa.a.useForm(),de=Object(ha.a)(re,1)[0],ue=Object(Xs.g)(Object(Na.a)(t.insert),(function(){p(!1),ne.resetFields()}))(),me=Object(ha.a)(ue,2),je=me[0],be=me[1].loading,pe=Object(Xs.g)(Object(Na.a)(n.insert),(function(){f(!1),ae.resetFields()}))(),_e=Object(ha.a)(pe,2),Oe=_e[0],he=(_e[1].loading2,Object(Xs.g)(Object(Na.a)(s.insert),(function(){y(!1),ce.resetFields()}))()),fe=Object(ha.a)(he,2),xe=fe[0],ve=(fe[1].loading3,Object(Xs.g)(Object(Na.a)(a.insert),(function(){k(!1),le.resetFields()}))()),ge=Object(ha.a)(ve,2),ye=ge[0],Ve=(ge[1].loading4,Object(Xs.g)(Object(Na.a)(i.insert),(function(){I(!1),de.resetFields()}))()),Ne=Object(ha.a)(Ve,2),we=Ne[0],ke=(Ne[1].loading5,function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(pc.a)(bc.a.mark((function n(s){return bc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(vs.useRef)("displayNone"),Se=Object(vs.useRef)();return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",onClick:function(){H(!0)},children:[Object(ua.jsx)(Ma.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ua.jsx)(Ja.a,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",onOk:function(){null!=U.route_id?(10==U.route_id&&(H(!1),p(!0)),24==U.route_id&&(H(!1),f(!0)),26==U.route_id&&(H(!1),y(!0)),27==U.route_id&&(H(!1),k(!0)),29==U.route_id&&(z.submit(),H(!1),I(!0))):z.setFields([{name:"route_id",errors:["\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442"]}])},visible:A,onCancel:function(){H(!1)},children:Object(ua.jsxs)(xa.a,{form:z,name:"Route_select",onFinish:function(e){Se.current=e.routes,console.log("ROUTE 5",e)},onValuesChange:function(e,t){$(Object.assign({},U,Object(xs.a)({},t))),console.log("state",U)},children:[Object(ua.jsx)(xa.a.Item,{name:"route_id",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442!",whitespace:!0}],children:Object(ua.jsx)(Ni,{placeholder:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",query:hc})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"font-form-header marginTop marginBottom",children:Object(ua.jsx)("label",{children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442:"})}),Object(ua.jsx)(_c.a,{size:"small",current:0,direction:"vertical",children:Z.map((function(e){if(4!=Z.length)return Ce.current="displayNone",Object(ua.jsx)(xc,{title:M.admin?e.positionName+" - "+M.username:e.positionName});Ce.current="displayBlock"}))}),Object(ua.jsxs)("div",{className:Ce.current,children:[Object(ua.jsx)("span",{className:"marginBottom displayBlock",children:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435"}),Object(ua.jsx)(xa.a.List,{name:"routes",children:function(e,t){var n=t.add,s=t.remove;return Object(ua.jsxs)(ua.Fragment,{children:[e.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:19,children:Object(ua.jsxs)("span",{className:"displayFlex",children:[Object(ua.jsxs)("p",{className:"anotherFormSelectCount",children:[e.name+1,". "]}),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},e),{},{name:[e.name,"positionId"],fieldKey:[e.fieldKey,"positionId"],className:"anotherForm",children:Object(ua.jsx)(Ni,{disabled:u.disabled,placeholder:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",query:fc,onChange:function(t,n){$((function(t){var s=Object.assign({},t);return console.log("field.fieldKey",e.fieldKey),s.routes[e.name].positionName=n.children,s.routes[e.name].step=e.name+1,s.routes[e.name].statuses=["5","4","2","7"],s}))}})}))]})}),Object(ua.jsxs)(Ks.a,{span:5,children:[Object(ua.jsx)("i",{style:{marginLeft:"20px"},children:"\u0423\u0431\u0440\u0430\u0442\u044c"}),Object(ua.jsx)(fi.a,{onClick:function(){s(e.name)},disabled:u.disabled,style:{marginLeft:5}})]}),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},e),{},{name:[e.name,"step"],fieldKey:[e.fieldKey,"step"],hidden:!0})),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},e),{},{name:[e.name,"positionName"],fieldKey:[e.fieldKey,"positionName"],hidden:!0})),Object(ua.jsx)(xa.a.Item,Object(xs.a)(Object(xs.a)({},e),{},{name:[e.name,"statuses"],fieldKey:[e.fieldKey,"statuses"],hidden:!0}))]})})})),Object(ua.jsx)(As.a,{type:"dashed",onClick:function(){n()},disabled:u.disabled,block:!0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"})]})}})]})]})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:b,onOk:function(){ne.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ua.jsx)(c,{form:ne,onFinish:function(){var e=Object(pc.a)(bc.a.mark((function e(n){var s,a,i;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,ke(n.files.fileList).then((function(e){i=e}));case 5:n.docs=i||[],n.user_id=M.id,n.username=M.username,n.position=M.position_names[0],n.is_read=!1,n.fio=M.fio,n.positionId=F[0].positionId,console.log("TEST",a),a[t.exemplar]=n,je({variables:a});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:h,onOk:function(){ae.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ua.jsx)(o,{form2:ae,onFinish2:function(){var e=Object(pc.a)(bc.a.mark((function e(t){var s,a;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},a=[],e.next=4,ke(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",s),s[n.exemplar]=t,Oe({variables:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:g,onOk:function(){ce.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ua.jsx)(l,{form3:ce,onFinish3:function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,a;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=[],e.next=4,ke(t.files.fileList).then((function(e){a=e}));case 4:t.docs=a,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[s.exemplar]=t,xe({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:w,onOk:function(){le.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ua.jsx)(r,{form4:le,onFinish4:function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,ke(t.files.fileList).then((function(e){s=e}));case 4:t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[a.exemplar]=t,ye({variables:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:T,onOk:function(){de.submit()},onCancel:B,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",centered:!0,width:u.width?u.width:450,maskClosable:!1,destroyOnClose:!0,confirmLoading:be||!1,children:Object(ua.jsx)(d,{form5:de,onFinish5:function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},s=[],e.next=4,ke(t.files.fileList).then((function(e){s=e}));case 4:t.route_data=Se.current,t.docs=s,t.user_id=M.id,t.username=M.username,t.position=M.position_names[0],t.is_read=!1,t.fio=M.fio,t.positionId=F[0].positionId,console.log("TEST",n),n[i.exemplar]=t,we({variables:n});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),gc=vc,yc=n(287),Vc=(n(228),n(276),["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"]),Nc=Object(Va.a)(ue||(ue=Object(fa.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),wc=Object(Va.a)(me||(me=Object(fa.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),kc=Object(Va.a)(je||(je=Object(fa.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),Cc=Object(Va.a)(be||(be=Object(fa.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),Sc=Object(Va.a)(pe||(pe=Object(fa.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),Tc=Object(Va.a)(_e||(_e=Object(fa.a)(["\n        query document_tasks($document_tasks: JSON){\n            document_tasks(document_tasks:$document_tasks){\n                id\n                document_id\n                status\n                is_cancelled\n                note\n                deadline\n                date_created\n                user_id_created\n                fio_created\n                user_id_receiver\n                fio_receiver\n                route_id\n                document_options\n                document_tasks_files{\n                    id\n                    filename\n                    data_file\n                    task_id\n                }\n                document_tasks_logs{\n                    id\n                    task_id\n                    is_read\n                    type\n                    user_id\n                }\n                task_statuses{\n                    id\n                    name\n                }\n            }\n        }\n"]))),Ic=gs.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Zs.a)(e,Vc),m=xa.a.useForm(),j=Object(ha.a)(m,1)[0],b=xa.a.useForm(),p=Object(ha.a)(b,1)[0],_=xa.a.useForm(),O=Object(ha.a)(_,1)[0],h=xa.a.useForm(),f=Object(ha.a)(h,1)[0],x=xa.a.useForm(),v=Object(ha.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(ha.a)(g,2),V=y[0],N=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],k=Object(ha.a)(w,2),C=k[0],S=k[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(ha.a)(T,2),E=I[0],P=I[1],F=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(ha.a)(F,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(ha.a)(U,2),M=$[0],J=$[1],z=Object(vs.useState)(!0),K=Object(ha.a)(z,2),q=K[0],A=K[1],H=Object(Xs.j)(),B=function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)},G=function(){A(!1)};Ja.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Xs.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Xs.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Xs.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Xs.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Xs.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(vs.useEffect)((function(){te&&j.resetFields()}),[te]),Object(vs.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(vs.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(vs.useEffect)((function(){de&&f.resetFields()}),[de]),Object(vs.useEffect)((function(){je&&v.resetFields()}),[je]),Object(vs.useEffect)((function(){V&&ne(Q)}),[V]),Object(vs.useEffect)((function(){C&&ie(W)}),[C]),Object(vs.useEffect)((function(){E&&le(Y)}),[E]),Object(vs.useEffect)((function(){D&&ue(X)}),[D]),Object(vs.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Xs.g)(Object(Na.a)(t.update),(function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)}))(),_e=Object(ha.a)(pe,2),Oe=_e[0],he=(_e[1].loading,{variables:{document_tasks:{global:{document_id:"=".concat(u.selectedRowKeys[0]),user_id_created:"=".concat(null===H||void 0===H?void 0:H.id)}}}}),fe=Object(Yi.a)(Tc,he),xe=(fe.loading,fe.data),ve=fe.refetch;Object(vs.useEffect)((function(){V&&ve(he)}),[null===u||void 0===u?void 0:u.selectedRowKeys[0]]);var ge=xe&&null!=xe[Object.keys(xe)[0]]?xe[Object.keys(xe)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id?e.document_id:"",status:e.status?e.status:"",is_cancelled:e.is_cancelled?e.is_cancelled:"",note:e.note?e.note:"",deadline:e.deadline?e.deadline:"",date_created:e.date_created?e.date_created:"",user_id_created:e.user_id_created?e.user_id_created:"",fio_created:e.fio_created?e.fio_created:"",user_id_receiver:e.user_id_receiver?e.user_id_receiver:"",fio_receiver:e.fio_receiver?e.fio_receiver:"",route_id:e.route_id?e.route_id:"",task_statuses:e.task_statuses.name?e.task_statuses.name:"",document_tasks_files:0!=e.document_tasks_files.length?e.document_tasks_files:[],document_tasks_logs:e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==H.id}))]}})):[],ye=Object(vs.useState)(),Ve=Object(ha.a)(ye,2),Ne=Ve[0],we=Ve[1],ke=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},Ce=Object(Yi.a)(Sc,ke),Se=(Ce.loading,Ce.data),Te=Ce.refetch;Object(vs.useEffect)((function(){V&&Te(ke)}),[V]);var Ie=Se&&null!=Se[Object.keys(Se)[0]]?Se[Object.keys(Se)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],Ee=Object(Na.a)(Nc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Pe=Object(ha.a)(Ee,2),Fe=Pe[0],Re=Pe[1],De=(Re.loading,Re.error,function(e){Fe({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:Ne}}}),Te(ke),e.resetFields(["comments"])}),Le=function(e,t){e.target.value.length>0&&we(e.target.value)},Ue=Object(vs.useState)(),$e=Object(ha.a)(Ue,2),Me=$e[0],Je=$e[1],ze=Object(vs.useState)(),Ke=Object(ha.a)(ze,2),qe=Ke[0],Ae=Ke[1],He=Object(vs.useState)(),Be=Object(ha.a)(He,2),Ge=Be[0],Qe=Be[1],We=Object(Na.a)(wc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ye=Object(ha.a)(We,2),Xe=Ye[0],Ze=Ye[1],et=(Ze.loading,Ze.error,Object(Na.a)(kc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),tt=Object(ha.a)(et,2),nt=(tt[0],tt[1]),st=(nt.loading,nt.error,function(){yc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),at=function(){Ae(7)},it=function(){Ae(2)},ct=function(e){console.log("CLIIIICK",e),rt({variables:{document_files:{id:e.id}}})},ot=Object(Na.a)(Cc,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),lt=Object(ha.a)(ot,2),rt=lt[0],dt=lt[1],ut=(dt.loading,dt.error,Object(vs.useRef)());return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){N(!0)},children:[Object(ua.jsx)(Aa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ua.jsx)(Ja.a,{title:u.title,visible:V,centered:!0,width:950,onOk:function(){j.submit()},onCancel:function(){N(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)("div",{id:"testId",ref:ut,children:Object(ua.jsx)(c,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(Qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;Qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},handleStatusCancelled:it,HandleDeleteFile:ct,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:q})})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(o,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(Qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;Qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){P(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(l,{documentTasksList:ge,commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(Qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;Qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(t=Ge[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(r,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(Qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&(Je(e),st())},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;Qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(d,{commentsList:Ie,HandleComment:De,HandleCommentOnChange:Le,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(Qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)Je(t+1),5!=qe&&Ae(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){Je(t),Ae(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Xe({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?Je(e-1):(e=1)&&Je(e)},handleRouteReturnToSender:at,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;Qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),Ae(5)},HandleDeleteFile:ct,handleStatusCancelled:it,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Me&&(e.step=Me),qe&&(e.status_id=qe),e.is_read=!1,Ge&&(null===(n=Ge[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ge[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:q})})]})})),Ec=Ic,Pc=gs.a.memo((function(e){var t=Object(vs.useState)([]),n=Object(ha.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(vs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id])},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),Fc=Pc,Rc=n(442),Dc=n(473),Lc=Rc.a.Dragger,Uc=function(e){return Object(ua.jsxs)(Lc,Object(xs.a)(Object(xs.a)({},e),{},{beforeUpload:function(e,t){return console.log("beforeUpload file",e),console.log("beforeUpload fileList",t),e.size>55e5&&yc.b.error({key:"msgKeyFileError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u0440\u0430\u0437\u043c\u0435\u0440 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439."),duration:30,className:"custom-class",style:{marginTop:"20vh"},onClick:function(){return yc.b.destroy("msgKeyFileError")}}),"image/png"!==e.type&&"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"application/msword"!==e.type&&"application/vnd.ms-excel"!==e.type&&yc.b.error({key:"msgKeyFileTypeError",content:"\u0424\u0430\u0439\u043b - ".concat(e.name," :\u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430."),duration:30,onClick:function(){return yc.b.destroy("msgKeyFileTypeError")}}),e.size<55e5&&"image/png"===e.type||e.size<55e5&&"image/jpg"===e.type||e.size<55e5&&"image/jpeg"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||e.size<55e5&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||e.size<55e5&&"application/pdf"===e.type||e.size<55e5&&"application/msword"===e.type||e.size<55e5&&"application/vnd.ms-excel"===e.type||Rc.a.LIST_IGNORE},children:[Object(ua.jsx)("p",{className:"ant-upload-drag-icon",children:Object(ua.jsx)(Dc.a,{})}),Object(ua.jsx)("p",{className:"ant-upload-text",children:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043c\u044b\u0448\u044c\u044e \u0442\u0443\u0442 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u043d\u0430 \u044d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430 "}),Object(ua.jsx)("p",{className:"ant-upload-hint",children:"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0437\u0430 \u0440\u0430\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432"})]}))},$c=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues&&i({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:a.log_username})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Mc=$c,Jc=n(210),zc=gs.a.memo((function(e){var t=Object(Xs.j)(),n=/^\d+$/,s=Object(vs.useState)({log_username:t.username}),a=Object(ha.a)(s,2),i=a[0],c=a[1];Object(vs.useEffect)((function(){e.form2.setFieldsValue(i)}),[i]),Object(vs.useEffect)((function(){e.initialValues&&c({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,price:e.initialValues.documents[0].data_agreement_list[0].price,subject:e.initialValues.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_id:e.initialValues.documents[0].status_id,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,files:e.initialValues.documents[0].files,log_username:i.log_username})}),[e.initialValues]);var o=Object(vs.useState)(1),l=Object(ha.a)(o,2),r=l[0],d=l[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(i),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){c(Object.assign({},i,Object(xs.a)({},t)))},children:[Object(ua.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0420\u0415\u0410\u041b\u0418\u0417\u0410\u0426\u0418\u042e \u0413\u041e\u0422\u041e\u0412\u041e\u0419 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){d(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:r})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:n,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Kc=zc,qc=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form3.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues3&&i({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_id:e.initialValues3.documents[0].status_id,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,files:e.initialValues3.documents[0].files,log_username:a.log_username})}),[e.initialValues3]);var c=Object(vs.useState)(1),o=Object(ha.a)(c,2),l=o[0],r=o[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ac=qc,Hc=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form4.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues4&&i({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_id:e.initialValues4.documents[0].status_id,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,files:e.initialValues4.documents[0].files,log_username:a.log_username})}),[e.initialValues4]);var c=Object(vs.useState)(1),o=Object(ha.a)(c,2),l=o[0],r=o[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)("h4",{children:"\u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u0412\u041d\u0423\u0422\u0420\u0418\u0417\u0410\u0412\u041e\u0414\u0421\u041a\u0418\u0425 \u041d\u0423\u0416\u0414 \u0418 \u041a\u0410\u041f\u0418\u0422\u0410\u041b\u042c\u041d\u042b\u0425 \u0417\u0410\u0422\u0420\u0410\u0422"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){r(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:l})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:/^\d+$/,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Bc=Hc,Gc=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(vs.useState)({log_username:t.username}),s=Object(ha.a)(n,2),a=s[0],i=s[1];Object(vs.useEffect)((function(){e.form5.setFieldsValue(a)}),[a]),Object(vs.useEffect)((function(){e.initialValues5&&i({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,files:e.initialValues5.documents[0].files,log_username:a.log_username})}),[e.initialValues5]);return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(a),console.log("-------------------------------------------",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){i(Object.assign({},a,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Qc=Gc,Wc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Oe||(Oe=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                reason\n                date_modified\n                status_id\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(he||(he=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    reason\n                    date_created\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(fe||(fe=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(xe||(xe=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(ve||(ve=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(ge||(ge=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Yc=Wc,Xc={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(ye||(ye=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(Ve||(Ve=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Ne||(Ne=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(we||(we=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(ke||(ke=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Ce||(Ce=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Zc=Xc,eo={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Se||(Se=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(Te||(Te=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Ie||(Ie=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Ee||(Ee=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(Pe||(Pe=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Fe||(Fe=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},to=eo,no={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Re||(Re=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(De||(De=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Le||(Le=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Ue||(Ue=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)($e||($e=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Me||(Me=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},so=no,ao={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Je||(Je=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                date_created\n                date_modified\n                status_id\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(ze||(ze=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Ke||(Ke=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(qe||(qe=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(Ae||(Ae=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(He||(He=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},io=ao,co=n(445),oo=gs.a.memo((function(e){var t,n,s,a,i={exemplar:"positions",table:"positions",options:{all:{fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Be||(Be=Object(fa.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "]))),one:Object(Va.a)(Ge||(Ge=Object(fa.a)(["\n            query positions($positions: JSON) {\n                positions(positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(Qe||(Qe=Object(fa.a)(["\n            subscription positions ($positions: JSON){\n                positions (positions: $positions) {\n                    id\n                    name\n                }\n            }\n        "])))}},c=Object(Va.a)(We||(We=Object(fa.a)(["\n       mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n"]))),o=Object(Xs.h)(i,"all")(),l=(o.loading,o.data),r=o.refetch;Object(vs.useEffect)((function(){r()}),[]);var d=Object(Na.a)(c,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(ha.a)(d,2),m=(u[0],u[1]),j=(m.loading,m.error,Object(vs.useState)({})),b=Object(ha.a)(j,2),p=b[0],_=b[1];console.log("propsS",e);var O=xa.a.useForm(),h=Object(ha.a)(O,1)[0];return Object(vs.useEffect)((function(){h.setFieldsValue(p)}),[p]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Ja.a,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0445 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0435\u0439",visible:e.visible,centered:!0,width:450,onOk:function(){},onCancel:function(){e.setVisible(!1)},maskClosable:!1,destroyOnClose:!0,footer:[Object(ua.jsx)(As.a,{onClick:function(){e.setVisible(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cancel"),Object(ua.jsx)(Ra.a,{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",placement:"topLeft",disabled:!p.replacement,onConfirm:Object(pc.a)(bc.a.mark((function t(){var n;return bc.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.submit();case 2:n=l.positions.filter((function(e){return e.id==p.replacement}))[0],console.log("form name",n,p),e.setRoutesList((function(t){var s=Object.assign({},t),a=s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId);return console.log("tmpIndex",n.id,a),-1===s[0].substitutes.indexOf(e.routeData[e.stepCount.step-1].positionId)&&s[0].substitutes.push(n.id),s[0].positionName=n.name,s[0].positionId=n.id,console.log("step old",s),s})),e.form.submit(),console.log("test"),e.setVisible(!1);case 8:case"end":return t.stop()}}),t)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:!p.replacement,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ua.jsx)(xa.a,{form:h,name:"ReplacementSelectForm",onFinish:function(e){console.log(e)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(xs.a)({},t)))},children:Object(ua.jsx)(xa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043c\u0435\u043d\u044f\u044e\u0449\u0435\u0433\u043e",labelAlign:"left",name:"replacement",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsxs)(gi.a,Object(xs.a)(Object(xs.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{children:[Object(ua.jsx)(gi.a.Option,{value:null},null),l&&(null===(t=l.positions)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e?void 0:e.routeData)&&(null===e||void 0===e||null===(n=e.stepCount)||void 0===n?void 0:n.step)&&null!=l[Object.keys(l)[0]]&&(null===e||void 0===e||null===(s=e.routeData[e.stepCount.step-1])||void 0===s||null===(a=s.substitutes)||void 0===a?void 0:a.length)>0?e.routeData[e.stepCount.step-1].substitutes.map((function(t,n){var s,a;if(t!=(null===(s=e.routeData.filter((function(e){return e.id==t}))[0])||void 0===s?void 0:s.positionId))return Object(ua.jsx)(gi.a.Option,{value:t,children:null===(a=l.positions.filter((function(e){return console.log("map",t,n,l.positions.filter((function(e){return e.id==t}))),e.id==t}))[0])||void 0===a?void 0:a.name},t)})):null]}))})})})})})),lo=oo,ro=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=_c.a.Step,m=Object(vs.useState)(!1),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=Object(vs.useState)({step:"0"}),v=Object(ha.a)(x,2),g=v[0],y=v[1],V=Object(vs.useState)({log_username:r.username}),N=Object(ha.a)(V,2),w=N[0],k=N[1],C=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(w)}),[w]),Object(vs.useEffect)((function(){e.initialValues&&(k({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,log_username:w.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var S=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(w),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){k(Object.assign({},w,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:w.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:w.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:w.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:w.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){C(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(lo,{visible:b,setVisible:p,setRoutesList:f,routesList:h,stepCount:g,routeData:null===e||void 0===e||null===(s=e.initialValues)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues.documents[0].step==n+1&&p(!0)},subTitle:n==g.step-1&&(null===w||void 0===w||null===(s=w.signatures)||void 0===s?void 0:s.length)>0||1==g.step?function(){var e;if(1==g.step&&0==n){var t=Object(Xs.f)(new Date(w.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===w||void 0===w||null===(e=w.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Xs.f)(new Date(w.signatures[w.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Hs.a,{children:Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),uo=ro,mo=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Xs.j)(),j=(co.a.Title,co.a.Link),b=_c.a.Step,p=Object(vs.useState)(!1),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ha.a)(f,2),v=x[0],g=x[1],y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=V[0],w=V[1],k=Object(vs.useState)({log_username:m.username}),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(S)}),[S]),Object(vs.useEffect)((function(){e.initialValues2&&(console.log("props.initialValues 22222",e.initialValues2),T({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 2",e.initialValues2),w({step:e.initialValues2.documents[0].step}),g(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var E=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),F=Object(ha.a)(P,2);F[0],F[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(j,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(lo,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues2.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Xs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Xs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues2)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),jo=mo,bo=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Xs.j)(),j=(co.a.Title,co.a.Link),b=_c.a.Step,p=Object(vs.useState)(!1),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ha.a)(f,2),v=x[0],g=x[1],y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=V[0],w=V[1],k=Object(vs.useState)({log_username:m.username}),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(S)}),[S]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(console.log("props.initialValues 33333",e.initialValues3),T({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:S.log_username}),console.log("props.initialValues 3",e.initialValues3),w({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var E=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),F=Object(ha.a)(P,2);F[0],F[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(j,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(lo,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues3.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Xs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Xs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),po=bo,_o=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m=Object(Xs.j)(),j=(co.a.Title,co.a.Link),b=_c.a.Step,p=Object(vs.useState)(!1),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),x=Object(ha.a)(f,2),v=x[0],g=x[1],y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=V[0],w=V[1],k=Object(vs.useState)({log_username:m.username}),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(m.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(S)}),[S]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(T({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:S.log_username}),console.log("props.initialValues4",e.initialValues4),w({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var E=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),F=Object(ha.a)(P,2);F[0],F[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(S),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:S.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(j,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:E,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){I(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(lo,{visible:O,setVisible:h,setRoutesList:g,routesList:v,stepCount:N,routeData:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o?void 0:o.route_data,form:e.form}),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:N.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].route_data.map((function(t,n){var s;return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(b,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues4.documents[0].step==n+1&&h(!0)},subTitle:n==N.step-1&&(null===S||void 0===S||null===(s=S.signatures)||void 0===s?void 0:s.length)>0||1==N.step?function(){var e;if(1==N.step&&0==n){var t=Object(Xs.f)(new Date(S.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===S||void 0===S||null===(e=S.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Xs.f)(new Date(S.signatures[S.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.reason)||void 0===u?void 0:u.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Oo=_o,ho=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=_c.a.Step,m=Object(vs.useRef)("vertical");Object(vs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(vs.useState)(!1),b=Object(ha.a)(j,2),p=b[0],_=b[1],O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=Object(vs.useState)({step:"0"}),g=Object(ha.a)(v,2),y=g[0],V=g[1],N=Object(vs.useState)({log_username:r.username}),w=Object(ha.a)(N,2),k=w[0],C=w[1],S=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(k)}),[k]),Object(vs.useEffect)((function(){e.initialValues5&&(C({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:k.log_username}),V({step:e.initialValues5.documents[0].step}),x(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(k),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){C(Object.assign({},k,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:k.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:k.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:k.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){S(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(lo,{visible:p,setVisible:_,setRoutesList:x,routesList:f,stepCount:y,routeData:null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a?void 0:a.route_data,form:e.form}),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:y.step-1,className:"steps-form-update",children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].route_data.map((function(t,n){var s;return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(u,{title:t.positionName,onClick:function(){console.log("step click",t),e.initialValues5.documents[0].step==n+1&&_(!0)},subTitle:n==y.step-1&&(null===k||void 0===k||null===(s=k.signatures)||void 0===s?void 0:s.length)>0||1==y.step?function(){var e;if(1==y.step&&0==n){var t=Object(Xs.f)(new Date(k.date_created),new Date);return console.log("tmpD1",t),null===t||void 0===t?void 0:t.toString()}if(0!=n&&(null===k||void 0===k||null===(e=k.signatures[n-1])||void 0===e?void 0:e.date_signature)){var s=Object(Xs.f)(new Date(k.signatures[k.signatures.length-1].date_signature),new Date);return console.log("tmpD2",s),null===s||void 0===s?void 0:s.toString()}}():null})})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),fo=ho,xo=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.positions.toString(),s=t.id,a={documents:{global:{user_id:"=".concat(s),ORDER_BY:["date_created desc"]}}};Yc.options.all.variables=a,Zc.options.all.variables=a,to.options.all.variables=a,so.options.all.variables=a,io.options.all.variables=a,t.admin&&(a={});var i=Object(vs.useState)(!1),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(Xs.g)(Object(Na.a)(Yc.delete))(),u=Object(ha.a)(d,2),m=u[0],j=u[1].loading,b=Object(Xs.h)(Yc,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(vs.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var t,s,a,i;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(t=e.document_statuses)||void 0===t?void 0:t.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:""}})):[],f=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Fc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(gc,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",GQL:Yc,Form1:Mc,GQL2:Zc,Form2:Kc,GQL3:to,Form3:Ac,GQL4:so,Form4:Bc,GQL5:io,Form5:Qc,width:750}),Object(ua.jsx)(Ec,{visibleModalUpdate:i,GQL:Yc,UpdateForm:uo,visibleModalUpdate2:c,GQL2:Zc,UpdateForm2:jo,visibleModalUpdate3:o,GQL3:to,UpdateForm3:po,visibleModalUpdate4:l,GQL4:so,UpdateForm4:Oo,visibleModalUpdate5:r,GQL5:io,UpdateForm5:fo,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[Yc.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r})})})),vo=xo,go=["GQL"],yo=gs.a.memo((function(e){var t=e.GQL,n=Object(Zs.a)(e,go),s=(Object(rc.useLocation)().pathname,Object(vs.useState)([])),a=Object(ha.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(Na.a)(t.setIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(ha.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(vs.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",loading:n.loading,style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,bordered:n.bordered,onRow:function(e,t){return{onClick:function(t){c([e.key,e.route_id])},onDoubleClick:function(t){var s;0==(null===e||void 0===e||null===(s=e.document_logs)||void 0===s?void 0:s.is_read)?(d({variables:{document:{id:e.document_logs.id,is_read:!0}}}),10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0)):(10==e.route_id&&n.visibleModalUpdate[1](!0),24==e.route_id&&n.visibleModalUpdate2[1](!0),26==e.route_id&&n.visibleModalUpdate3[1](!0),27==e.route_id&&n.visibleModalUpdate4[1](!0),29==e.route_id&&n.visibleModalUpdate5[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),Vo=yo,No=["reasonText","dataProps","setState","user"],wo=gs.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Zs.a)(e,No),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ha.a)(n,2),a=s[0];s[1];return Object(ua.jsx)(Ra.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove(),t.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ko=wo,Co=["item","reasonText","dataProps","setState","user"],So=gs.a.memo((function(e){var t=e.item,n=(e.reasonText,e.dataProps),s=e.setState,a=(e.user,Object(Zs.a)(e,Co),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b?")),i=Object(ha.a)(a,2),c=i[0];i[1];return Object(ua.jsx)(Ra.a,{title:c,placement:"topLeft",disabled:n.disabled,onConfirm:function(){n.HandleDeleteFile(t),s((function(e){console.log("item",t);var n=Object.assign({},e),s=n.files.findIndex((function(e){return e.id==t.id}));return n.files.splice(s,1),console.log("OOOLLLLDDDDD+++++++++",s,n.files),n})),console.log("ITEM",t)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",icon:Object(ua.jsx)(Pa.a,{})})})})),To=So,Io=(co.a.Title,co.a.Link),Eo=_c.a.Step,Po=/^\d+$/,Fo=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=p[0],O=p[1],h=Object(vs.useState)({step:"0"}),f=Object(ha.a)(h,2),x=f[0],v=f[1];Object(vs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),v({step:e.initialValues.documents[0].step}),O(e.initialValues.documents[0].route_data))}),[e.initialValues]);var g=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Po,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(Io,{children:Object(ua.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ua.jsx)(As.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})}),Object(ua.jsx)(To,{item:t,dataProps:e,setState:m,user:l}),Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ua.jsx)(Eo,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(ko,{dataProps:e,setState:m,user:l})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ro=Fo,Do=["reasonText","dataProps","setState","user"],Lo=gs.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Zs.a)(e,Do),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ha.a)(n,2),a=s[0];s[1];return Object(ua.jsx)(Ra.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove2(),t.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Uo=Lo,$o=(co.a.Title,co.a.Link),Mo=_c.a.Step,Jo=/^\d+$/,zo=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Xs.j)(),m=Object(vs.useState)({log_username:u.username}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=Object(vs.useState)({step:"0"}),g=Object(ha.a)(v,2),y=g[0],V=g[1];Object(vs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),V({step:e.initialValues2.documents[0].step}),x(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var N=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),k=Object(ha.a)(w,2),C=k[0],S=k[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){S(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:C})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Jo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(t){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)($o,{children:Object(ua.jsx)("a",{"data-fileid":t.id,onClick:N,children:t.filename})}),Object(ua.jsx)(As.a,{onClick:function(){_(t)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})}),Object(ua.jsx)(To,{item:t,dataProps:e,setState:p,user:u}),Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ua.jsx)(Mo,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Uo,{dataProps:e,setState:p,user:u}),Object(ua.jsx)(Sa.a,{type:"vertical"})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ko=zo,qo=["reasonText","dataProps","setState","user"],Ao=gs.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Zs.a)(e,qo),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ha.a)(n,2),a=s[0];s[1];return Object(ua.jsx)(Ra.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove3(),t.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),Ho=Ao,Bo=(co.a.Title,co.a.Link),Go=_c.a.Step,Qo=/^\d+$/,Wo=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=p[0],O=p[1],h=Object(vs.useState)({step:"0"}),f=Object(ha.a)(h,2),x=f[0],v=f[1];Object(vs.useEffect)((function(){e.initialValues3&&(m({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:u.log_username}),v({step:e.initialValues3.documents[0].step}),O(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var g=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(vs.useState)(1),V=Object(ha.a)(y,2),N=V[0],w=V[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues3)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues3)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0418\u0421\u0422 \u0421\u041e\u0413\u041b\u0410\u0421\u041e\u0412\u0410\u041d\u0418\u042f \u041d\u0410 \u0417\u0410\u041a\u0423\u041f \u0422\u0420\u0423 \u0414\u041b\u042f \u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0414\u0423\u041a\u0426\u0418\u0418"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:N})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:Qo,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues3)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(Bo,{children:Object(ua.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ua.jsx)(As.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})}),Object(ua.jsx)(To,{item:t,dataProps:e,setState:m,user:l}),Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ua.jsx)(Go,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Ho,{dataProps:e,setState:m,user:l})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Yo=Wo,Xo=["reasonText","dataProps","setState","user"],Zo=gs.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Zs.a)(e,Xo),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ha.a)(n,2),a=s[0];s[1];return Object(ua.jsx)(Ra.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove4(),t.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),el=Zo,tl=(co.a.Title,co.a.Link),nl=_c.a.Step,sl=/^\d+$/,al=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=p[0],O=p[1],h=Object(vs.useState)({step:"0"}),f=Object(ha.a)(h,2),x=f[0],v=f[1];Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,j,b;e.initialValues4&&(m({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(j=e.initialValues4.documents[0])||void 0===j||null===(b=j.data_agreement_list_internal_needs[0])||void 0===b?void 0:b.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:u.log_username}),v({step:e.initialValues4.documents[0].step}),O(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var g=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(vs.useState)(1),V=Object(ha.a)(y,2),N=V[0],w=V[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues4)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues4)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-checkbox",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430"}],className:"form-radio",value:N})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:sl,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_phone_number",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"counteragent_contacts",label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues4)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(tl,{children:Object(ua.jsx)("a",{"data-fileid":t.id,onClick:g,children:t.filename})}),Object(ua.jsx)(As.a,{onClick:function(){j(t)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})}),Object(ua.jsx)(To,{item:t,dataProps:e,setState:m,user:l}),Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ua.jsx)(nl,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(el,{dataProps:e,setState:m,user:l})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),il=al,cl=["reasonText","dataProps","setState","user"],ol=gs.a.memo((function(e){e.reasonText;var t=e.dataProps,n=(e.setState,e.user,Object(Zs.a)(e,cl),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435?")),s=Object(ha.a)(n,2),a=s[0];s[1];return Object(ua.jsx)(Ra.a,{title:a,placement:"topLeft",disabled:t.disabled,onConfirm:function(){t.handleRouteFromUserEditToApprove5(),t.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:t.disabled,type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435"})})})),ll=ol,rl=(co.a.Title,co.a.Link),dl=_c.a.Step,ul=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useRef)("vertical");Object(vs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(r.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var d=Object(vs.useState)({log_username:l.username}),u=Object(ha.a)(d,2),m=u[0],j=u[1],b=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(m)}),[m]);var p=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=Object(vs.useState)({step:"0"}),x=Object(ha.a)(f,2),v=x[0],g=x[1];Object(vs.useEffect)((function(){e.initialValues5&&(j({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:m.log_username}),g({step:e.initialValues5.documents[0].step}),h(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var y=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(vs.useState)(1),N=Object(ha.a)(V,2);N[0],N[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(m),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){j(Object.assign({},m,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues5)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues5)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"remark",label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435",className:"form-input-label",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:4,disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/orders",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})}),null===e||void 0===e||null===(s=e.initialValues5)||void 0===s?void 0:s.documents[0].files.map((function(t){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(rl,{children:Object(ua.jsx)("a",{"data-fileid":t.id,onClick:y,children:t.filename})}),Object(ua.jsx)(As.a,{onClick:function(){b(t)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})}),Object(ua.jsx)(To,{item:t,dataProps:e,setState:j,user:l}),Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",direction:r.current,responsive:!0,current:v.step-1,className:"steps-form-update",children:O.map((function(e){return Object(ua.jsx)(dl,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(ll,{dataProps:e,setState:j,user:l})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),ml=ul,jl=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Ye||(Ye=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(Xe||(Xe=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Ze||(Ze=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                files{\n                    id\n                    filename\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(et||(et=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(tt||(tt=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(nt||(nt=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(st||(st=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(vs.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(vs.useState)(!1),u=Object(Xs.g)(Object(Na.a)(a.delete))(),m=Object(ha.a)(u,2),j=m[0],b=m[1].loading,p=Object(Xs.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(vs.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 7==e.status_id}));window.localStorage.rows_approved=x.length;var v=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(Vo,{data:{dict:v,records:x},loading:_,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:c,GQL:a,UpdateForm:Ro,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Ko,visibleModalUpdate3:l,GQL3:a,UpdateForm3:Yo,visibleModalUpdate4:r,GQL4:a,UpdateForm4:il,visibleModalUpdate5:d,GQL5:a,UpdateForm5:ml,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})),bl=jl,pl=(co.a.Title,co.a.Link),_l=(_c.a.Step,gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=(p[0],p[1]),O=Object(vs.useState)({step:"0"}),h=Object(ha.a)(O,2),f=(h[0],h[1]);Object(vs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),console.log("props.initialValues",e.initialValues),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(pl,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){j(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})}))),Ol=_l,hl=(co.a.Title,co.a.Link),fl=(_c.a.Step,gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Xs.j)(),m=Object(vs.useState)({log_username:u.username}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]),console.log("PROPS UPDATE DOC 2",e);var O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=(h[0],h[1]),x=Object(vs.useState)({step:"0"}),v=Object(ha.a)(x,2),g=(v[0],v[1]);Object(vs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(ha.a)(V,2);N[0],N[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(hl,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})}))),xl=fl,vl=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),gl=vl,yl=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Vl=yl,Nl=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),wl=Nl,kl=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(at||(at=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(it||(it=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(ct||(ct=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(ot||(ot=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(lt||(lt=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(rt||(rt=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(dt||(dt=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=function(){"visible"===document.visibilityState&&console.log("Tab visible, refetch the data!"),"hidden"===document.visibilityState&&console.log("Tab hidden, refetch the data!")};Object(vs.useLayoutEffect)((function(){document.addEventListener("visibilitychange",i)}),[]);var c=Object(vs.useRef)(0),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(vs.useState)(!1),u=Object(vs.useState)(!1),m=Object(Xs.g)(Object(Na.a)(a.delete))(),j=Object(ha.a)(m,2),b=j[0],p=j[1].loading,_=Object(Xs.h)(a,"all")(),O=_.loading,h=_.data,f=_.refetch;Object(vs.useEffect)((function(){f()}),[]);var x=(h&&null!=h[Object.keys(h)[0]]?h[Object.keys(h)[0]].map((function(e){var n,a,i,o;return c.current=h.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=x.length;var v=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(Vo,{data:{dict:v,records:x},loading:O,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:o,GQL:a,UpdateForm:Ol,visibleModalUpdate2:l,GQL2:a,UpdateForm2:xl,visibleModalUpdate3:r,GQL3:a,UpdateForm3:gl,visibleModalUpdate4:d,GQL4:a,UpdateForm4:Vl,visibleModalUpdate5:u,GQL5:a,UpdateForm5:wl,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},b({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:p,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:o,visibleModalUpdate2:l,visibleModalUpdate3:r,visibleModalUpdate4:d,visibleModalUpdate5:u,GQL:a})})),Cl=kl,Sl=(co.a.Title,co.a.Link),Tl=(_c.a.Step,gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(l.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=(p[0],p[1]),O=Object(vs.useState)({step:"0"}),h=Object(ha.a)(O,2),f=(h[0],h[1]);Object(vs.useEffect)((function(){e.initialValues&&(m({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:{is_read:!0},log_username:u.log_username}),f({step:e.initialValues.documents[0].step}),_(e.initialValues.documents[0].route_data))}),[e.initialValues]);var x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:u.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(Sl,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:x,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){j(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})}))),Il=Tl,El=(co.a.Title,co.a.Link),Pl=(_c.a.Step,gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u=Object(Xs.j)(),m=Object(vs.useState)({log_username:u.username}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(b)}),[b]);var O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=(h[0],h[1]),x=Object(vs.useState)({step:"0"}),v=Object(ha.a)(x,2),g=(v[0],v[1]);console.log("PROPS UPDATE DOC 2",e),Object(vs.useEffect)((function(){e.initialValues2&&(p({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:{is_read:!0},log_username:b.log_username}),console.log("props.initialValues2",e.initialValues2),g({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var y=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),N=Object(ha.a)(V,2);N[0],N[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(El,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:y,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.reason)||void 0===d?void 0:d.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})}))),Fl=Pl,Rl=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&b({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:j.log_username})}),[e.initialValues3]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Dl=Rl,Ll=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&b({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:j.log_username})}),[e.initialValues4]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ul=Ll,$l=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=Object(vs.useState)({log_username:r.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(j)}),[j]),Object(vs.useEffect)((function(){e.initialValues5&&b({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:j.log_username})}),[e.initialValues5]);var _=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_custom[0])||void 0===s?void 0:s.subject),h=Object(ha.a)(O,2);h[0],h[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:_,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ml=$l,Jl=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.id,s=t.positions.toString(),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{user_id:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(ut||(ut=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                reason\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(mt||(mt=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(jt||(jt=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(bt||(bt=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(pt||(pt=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(_t||(_t=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(Ot||(Ot=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"])))},i=Object(vs.useRef)(0),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(vs.useState)(!1),u=Object(Xs.g)(Object(Na.a)(a.delete))(),m=Object(ha.a)(u,2),j=m[0],b=m[1].loading,p=Object(Xs.h)(a,"all")(),_=p.loading,O=p.data,h=p.refetch;Object(vs.useEffect)((function(){h()}),[]);var f=O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var n,a,c,o;return i.current=O.documents.length,{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==s}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),document_logs:e.document_logs?e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]:[],step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:""}})):[];console.log("list",f),console.log("data",O);var x=f.filter((function(e){return 2==e.status_id}));window.localStorage.rows_rejected=x.length;var v=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Vo,{data:{dict:v,records:x},loading:_,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:c,GQL:a,UpdateForm:Il,visibleModalUpdate2:o,GQL2:a,UpdateForm2:Fl,visibleModalUpdate3:l,GQL3:a,UpdateForm3:Dl,visibleModalUpdate4:r,GQL4:a,UpdateForm4:Ul,visibleModalUpdate5:d,GQL5:a,UpdateForm5:Ml,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[a.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:a})})})),zl=Jl,Kl=n(451),ql=["reasonText","dataProps","setState","user"],Al=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,ql),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Hl=Al,Bl=["reasonText","dataProps","setState","user"],Gl=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Bl),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Ql=Gl,Wl=["reasonText","dataProps","setState","user"],Yl=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Wl),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Xl=Yl,Zl=["reasonText","dataProps","setState","user"],er=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Zl),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),tr=er,nr=(n(229),gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O=Object(Xs.j)(),h=co.a.Link,f=Object(vs.useState)({log_username:O.username}),x=Object(ha.a)(f,2),v=x[0],g=x[1],y=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(O.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=null===v||void 0===v||null===(t=v.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),N=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===V||void 0===V?void 0:V.includes(e.id)})),w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(v)}),[v]),Object(vs.useEffect)((function(){e.initialValues&&g({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:v.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:v.fio_created})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:v.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===v||void 0===v||null===(c=v.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===v||void 0===v||null===(l=v.document_options)||void 0===l?void 0:l.supllier)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===v||void 0===v||null===(u=v.document_options)||void 0===u?void 0:u.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===v||void 0===v||null===(b=v.document_options)||void 0===b?void 0:b.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===N||void 0===N?void 0:N.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(h,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){y(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),2==v.status?Object(ua.jsxs)("div",{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),v.report?v.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:v.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(h,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){y(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}):"",1==(null===v||void 0===v?void 0:v.status)&&(null===v||void 0===v?void 0:v.user_id_created)!=O.id?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})}))),sr=nr,ar=n(441),ir=n(458),cr=(n(155),n(86)),or=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p=Object(Xs.j)(),_={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(ht||(ht=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Va.a)(ft||(ft=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(xt||(xt=Object(fa.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},O={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(vt||(vt=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Va.a)(gt||(gt=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(yt||(yt=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Va.a)(Vt||(Vt=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},h=co.a.Link,f=Object(Xs.g)(Object(Na.a)(O.insert))(),x=Object(ha.a)(f,2),v=x[0],g=(x[1].loading,Object(Xs.h)(_,"all")()),y=(g.loading,g.data),V=g.refetch,N=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(p.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){V()}),[]);var k=Object(vs.useState)({}),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=xa.a.useForm(),E=Object(ha.a)(I,1)[0];Object(vs.useEffect)((function(){E.setFieldsValue(S)}),[S]);var P=Da.a.Group,F=Object(vs.useState)(!1),R=Object(ha.a)(F,2),D=(R[0],R[1]);return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ua.jsx)(Ma.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ua.jsx)(Ja.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:550,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),D(!1)},onCancel:function(){D(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ua.jsx)(Ra.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!S.recepient,onConfirm:Object(pc.a)(bc.a.mark((function e(){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ua.jsxs)(xa.a,{form:E,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Xs.e)(t.deadline._d),user_id_created:"".concat(p.id),fio_created:p.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,supllier:void 0!=t.supllier&&t.supllier,price:void 0!=t.price&&t.price},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};v(n),e.setVisible(!1),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){T(Object.assign({},S,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsxs)(gi.a,Object(xs.a)(Object(xs.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ua.jsx)(gi.a.Option,{value:null},null),null===y||void 0===y||null===(t=y.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ua.jsx)(gi.a.Option,{value:e.id,children:null===y||void 0===y||null===(n=y.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ua.jsx)(xa.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(ar.a,{locale:cr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ua.jsx)(xa.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:5})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop marginBottom",children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423:"})}),Object(ua.jsx)(Ks.a,{span:13,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"title",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})}),Object(ua.jsx)(Ks.a,{span:13,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_one[0])||void 0===c?void 0:c.supllier}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"supllier",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})}),Object(ua.jsx)(Ks.a,{span:13,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_one[0])||void 0===r?void 0:r.subject}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"subject",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: "})}),Object(ua.jsx)(Ks.a,{span:13,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_one[0])||void 0===m?void 0:m.price}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"price",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:15,children:Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ua.jsx)(Ks.a,{span:9,children:Object(ua.jsx)(As.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));E.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ua.jsx)(xa.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ua.jsx)(P,{children:Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b?void 0:b.files.map((function(e){return Object(ua.jsxs)(gs.a.Fragment,{children:[Object(ua.jsxs)(Ks.a,{span:21,children:[Object(ua.jsx)(h,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})}),Object(ua.jsx)(As.a,{onClick:function(){N(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})]}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(Da.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),lr=or,rr=["GQL"],dr=gs.a.memo((function(e){var t=e.GQL,n=Object(Zs.a)(e,rr),s=(Object(rc.useLocation)().pathname,Object(vs.useState)([])),a=Object(ha.a)(s,2),i=a[0],c=a[1],o=[];n.loading||(o=n.data.records.map((function(e){return e.id})));var l=Object(Na.a)(t.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),r=Object(ha.a)(l,2),d=r[0],u=r[1];u.loading,u.error;return Object(vs.useEffect)((function(){c(i.filter((function(e){for(var t=0;t<o.length;t++)if(o[t]==e)return!0;return!1})))}),[n.data]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",style:{minHeight:168},columns:n.data.dict,dataSource:n.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:n.title?function(){return n.title({selectedRowKeys:i})}:null,onRow:function(e,t){return{onClick:function(t){c([e.key,e.document_id,e.route_id])},onDoubleClick:function(t){void 0==e.document_tasks_logs?n.visibleModalUpdate[1](!0):(n.visibleModalUpdate[1](!0),d({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}))}}},pagination:{simple:!0,pageSize:10,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===i[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})})),ur=dr,mr=["GQL","UpdateForm"],jr=gs.a.memo((function(e){var t=e.GQL,n=e.UpdateForm,s=Object(Zs.a)(e,mr),a={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Nt||(Nt=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(wt||(wt=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(kt||(kt=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Ct||(Ct=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(St||(St=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Tt||(Tt=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(It||(It=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},i=xa.a.useForm(),c=Object(ha.a)(i,1)[0],o=Object(vs.useState)(!0),l=Object(ha.a)(o,2),r=(l[0],l[1]),d=s.visibleModalUpdate?s.visibleModalUpdate:[],u=Object(ha.a)(d,2),m=u[0],j=u[1],b={};b[t.table]=t.table?{global:{id:"= ".concat(s.selectedRowKeys[0])}}:{};var p=Object(Xs.h)(t,"one",{variables1:b})(),_=(p.loading,p.data),O=p.refetch;Object(vs.useEffect)((function(){m&&O(b)}),[m]);var h={documents:{global:{id:"=".concat(s.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},f=Object(Xs.h)(a,"one",{variables1:b})(),x=(f.loading,f.data),v=f.refetch;Object(vs.useEffect)((function(){m&&v(h)}),[m]);var g=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(pc.a)(bc.a.mark((function n(s){return bc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",disabled:3!==s.selectedRowKeys.length,onClick:function(){j(!0)},children:[Object(ua.jsx)(Aa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ua.jsx)(Ja.a,{title:s.title,visible:m,width:900,onCancel:function(){j(!1),r(!0)},footer:null,children:Object(ua.jsx)(n,{document:null===x||void 0===x?void 0:x.documents[0],initialValues:_,form:c,onFinish:function(){var e=Object(pc.a)(bc.a.mark((function e(n){var a,i,c;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},c=[],!(null===n||void 0===n||null===(a=n.files)||void 0===a?void 0:a.fileList)){e.next=5;break}return e.next=5,g(n.files.fileList).then((function(e){c=e}));case 5:n.docs=c||[],i[t.exemplar]={id:s.selectedRowKeys[0],status:2,user_id:n.user_id_created},console.log("values-------",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),br=jr,pr=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Et||(Et=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Va.a)(Pt||(Pt=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(Ft||(Ft=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Va.a)(Rt||(Rt=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Va.a)(Dt||(Dt=Object(fa.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},u=Object(Xs.j)(),m=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=Object(vs.useState)({step:"0"}),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=Object(vs.useState)(!1),v=(co.a.Title,co.a.Link),g=_c.a.Step,y=Kl.a.Panel,V=Object(vs.useRef)("vertical");Object(vs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(V.current=(null===e||void 0===e||null===(a=e.initialValues)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var N=Object(vs.useState)(!1),w=Object(ha.a)(N,2),k=w[0],C=w[1],S=Object(vs.useState)({log_username:u.username}),T=Object(ha.a)(S,2),I=T[0],E=T[1],P=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(u.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(I)}),[I]),Object(vs.useEffect)((function(){e.initialValues&&(E({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:I.log_username}),f({step:e.initialValues.documents[0].step}),p(e.initialValues.documents[0].route_data))}),[e.initialValues]);var F=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(ha.a)(R,2),L=D[0],U=D[1];function $(e){}return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(I)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){E(Object.assign({},I,Object(xs.a)({},t)))},children:[Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsxs)(Ks.a,{span:8,children:[" ",Object(ua.jsx)("b",{children:"\u041e\u0442: "})]})," ",Object(ua.jsx)(Ks.a,{span:16,children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio}),Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position}),Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:I.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:I.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:I.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:I.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ua.jsx)(Kl.a,{defaultActiveKey:["2"],onChange:$,children:Object(ua.jsx)(y,{header:Object(ua.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:12,className:"document-view-wrap",children:[Object(ua.jsx)(v,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})},"2")})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",direction:V.current,responsive:!0,current:h.step-1,className:"steps-form-update",children:b.map((function(e){return Object(ua.jsx)(g,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Hl,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(tr,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ua.jsx)(Xl,{reasonText:L,dataProps:e,setState:E,user:u}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Ql,{reasonText:L,dataProps:e,setState:E,user:u})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Kl.a,{defaultActiveKey:["1"],onChange:$,children:Object(ua.jsx)(y,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ua.jsx)(ur,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:x,GQL:d,title:function(t){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(br,{visibleModalUpdate:x,UpdateForm:sr,GQL:d,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(lr,{visible:k,setVisible:C,document:e.initialValues})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),_r=pr,Or=["reasonText","dataProps","setState","user"],hr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Or),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),fr=hr,xr=["reasonText","dataProps","setState","user"],vr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,xr),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),gr=vr,yr=["reasonText","dataProps","setState","user"],Vr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,yr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Nr=Vr,wr=["reasonText","dataProps","setState","user"],kr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,wr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Cr=kr,Sr=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y=Object(Xs.j)(),V={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Lt||(Lt=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Va.a)(Ut||(Ut=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)($t||($t=Object(fa.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},N={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Mt||(Mt=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Va.a)(Jt||(Jt=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(zt||(zt=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Va.a)(Kt||(Kt=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},w=co.a.Link,k=Object(Xs.g)(Object(Na.a)(N.insert))(),C=Object(ha.a)(k,2),S=C[0],T=(C[1].loading,Object(Xs.h)(V,"all")()),I=(T.loading,T.data),E=T.refetch,P=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(y.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){E()}),[]);var R=Object(vs.useState)({}),D=Object(ha.a)(R,2),L=D[0],U=D[1],$=xa.a.useForm(),M=Object(ha.a)($,1)[0];Object(vs.useEffect)((function(){M.setFieldsValue(L)}),[L]);var J=Da.a.Group,z=Object(vs.useState)(!1),K=Object(ha.a)(z,2),q=(K[0],K[1]);return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ua.jsx)(Ma.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ua.jsx)(Ja.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),q(!1)},onCancel:function(){q(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ua.jsx)(Ra.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!L.recepient,onConfirm:Object(pc.a)(bc.a.mark((function e(){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ua.jsxs)(xa.a,{form:M,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Xs.e)(t.deadline._d),user_id_created:"".concat(y.id),fio_created:y.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency_price:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,sider_signatures_date:void 0!=t.sider_signatures_date&&t.sider_signatures_date,received_from_counteragent_date:void 0!=t.received_from_counteragent_date&&t.received_from_counteragent_date},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};S(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){U(Object.assign({},L,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsxs)(gi.a,Object(xs.a)(Object(xs.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ua.jsx)(gi.a.Option,{value:null},null),null===I||void 0===I||null===(t=I.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ua.jsx)(gi.a.Option,{value:e.id,children:null===I||void 0===I||null===(n=I.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ua.jsx)(xa.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(ar.a,{locale:cr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ua.jsx)(xa.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:5})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop marginBottom",children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"title",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i?void 0:i.subject}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"subject",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(c=e.document)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.data_agreement_list[0])||void 0===l?void 0:l.price}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"price",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.documents[0])||void 0===d||null===(u=d.data_agreement_list[0])||void 0===u?void 0:u.currency_price}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"currency_price",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.documents[0])||void 0===j||null===(b=j.data_agreement_list[0])||void 0===b?void 0:b.executor_name_division}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.documents[0])||void 0===_||null===(O=_.data_agreement_list[0])||void 0===O?void 0:O.sider_signatures_date}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"sider_signatures_date",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.documents[0])||void 0===f||null===(x=f.data_agreement_list[0])||void 0===x?void 0:x.received_from_counteragent_date}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"received_from_counteragent_date",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:18,children:Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ua.jsx)(Ks.a,{span:5,children:Object(ua.jsx)(As.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));M.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ua.jsx)(xa.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ua.jsx)(J,{children:Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.documents[0])||void 0===g?void 0:g.files.map((function(e){return Object(ua.jsxs)(gs.a.Fragment,{children:[Object(ua.jsxs)(Ks.a,{span:21,children:[Object(ua.jsx)(w,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:F,children:e.filename})}),Object(ua.jsx)(As.a,{onClick:function(){P(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})]}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(Da.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),Tr=Sr,Ir=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w=Object(Xs.j)(),k=co.a.Link,C=Object(vs.useState)({log_username:w.username}),S=Object(ha.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),F=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===P||void 0===P?void 0:P.includes(e.id)})),R=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(vs.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:T.fio_created})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:T.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency_price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list[0])||void 0===N?void 0:N.received_from_counteragent_date})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===F||void 0===F?void 0:F.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(k,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),2==T.status?Object(ua.jsxs)("div",{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(k,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Er=Ir,Pr=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(qt||(qt=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Va.a)(At||(At=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(Ht||(Ht=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Va.a)(Bt||(Bt=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Va.a)(Gt||(Gt=Object(fa.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Xs.j)(),p=(co.a.Title,co.a.Link),_=_c.a.Step,O=Kl.a.Panel,h=Object(vs.useState)({log_username:b.username}),f=Object(ha.a)(h,2),x=f[0],v=f[1],g=Object(vs.useState)(!1),y=Object(vs.useState)(!1),V=Object(ha.a)(y,2),N=V[0],w=V[1],k=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(x)}),[x]);var C=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),S=Object(ha.a)(C,2),T=S[0],I=S[1],E=Object(vs.useState)({step:"0"}),P=Object(ha.a)(E,2),F=P[0],R=P[1];Object(vs.useEffect)((function(){e.initialValues2&&(v({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:x.log_username}),R({step:e.initialValues2.documents[0].step}),I(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var D=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){}var U=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),$=Object(ha.a)(U,2),M=$[0],J=$[1],z=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),K=Object(ha.a)(z,2);K[0],K[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(x),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){v(Object.assign({},x,Object(xs.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:x.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ua.jsx)(Kl.a,{defaultActiveKey:["2"],onChange:L,children:Object(ua.jsx)(O,{header:Object(ua.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:12,className:"document-view-wrap",children:[Object(ua.jsx)(p,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:D,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){k(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})},"2")})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:F.step-1,className:"steps-form-update",children:T.map((function(e){return Object(ua.jsx)(_,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(fr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Cr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ua.jsx)(Nr,{reasonText:M,dataProps:e,setState:v,user:b}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(gr,{reasonText:M,dataProps:e,setState:v,user:b})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,J(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Kl.a,{defaultActiveKey:["1"],onChange:L,children:Object(ua.jsx)(O,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ua.jsx)(ur,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:g,GQL:j,title:function(t){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(br,{visibleModalUpdate:g,UpdateForm:Er,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Tr,{visible:N,setVisible:w,document:e.initialValues2})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Fr=Pr,Rr=["reasonText","dataProps","setState","user"],Dr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Rr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Lr=Dr,Ur=["reasonText","dataProps","setState","user"],$r=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Ur),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Mr=$r,Jr=["reasonText","dataProps","setState","user"],zr=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Jr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Kr=zr,qr=["reasonText","dataProps","setState","user"],Ar=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,qr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Hr=Ar,Br=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V=Object(Xs.j)(),N={exemplar:"user",table:"users",options:{all:{variables:{users:{global:{ORDER_BY:["username asc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Qt||(Qt=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "]))),one:Object(Va.a)(Wt||(Wt=Object(fa.a)(["\n            query users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    password\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))},subscription:{all:Object(Va.a)(Yt||(Yt=Object(fa.a)(["\n            subscription users ($users: JSON) {\n                users(users: $users) {\n                    id\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                }\n            }\n        "])))}},w={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Xt||(Xt=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                    }\n                }\n            "]))),one:Object(Va.a)(Zt||(Zt=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(en||(en=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                }\n            }\n        "])))},insert:Object(Va.a)(tn||(tn=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n     "])))},k=co.a.Link,C=Object(Xs.g)(Object(Na.a)(w.insert))(),S=Object(ha.a)(C,2),T=S[0],I=(S[1].loading,Object(Xs.h)(N,"all")()),E=(I.loading,I.data),P=I.refetch,F=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(V.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){P()}),[]);var D=Object(vs.useState)({}),L=Object(ha.a)(D,2),U=L[0],$=L[1],M=xa.a.useForm(),J=Object(ha.a)(M,1)[0];Object(vs.useEffect)((function(){J.setFieldsValue(U)}),[U]);var z=Da.a.Group,K=Object(vs.useState)(!1),q=Object(ha.a)(K,2),A=(q[0],q[1]);return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",onClick:function(){e.setVisible(!0)},children:[Object(ua.jsx)(Ma.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]}),Object(ua.jsx)(Ja.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f",visible:e.visible,centered:!0,width:800,onOk:function(){},closable:!1,maskClosable:!1,destroyOnClose:!0,footer:[Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c?",onConfirm:function(){e.setVisible(!1),A(!1)},onCancel:function(){A(!1)},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},"cancel")}),Object(ua.jsx)(Ra.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435?",placement:"topLeft",disabled:!U.recepient,onConfirm:Object(pc.a)(bc.a.mark((function e(){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.submit();case 2:case"end":return e.stop()}}),e)}))),okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})],children:Object(ua.jsxs)(xa.a,{form:J,name:"TaskAddForm",onFinish:function(t){var n={variables:{document_tasks:{document_id:e.document.documents[0].id,status:"1",is_cancelled:"false",note:t.note,deadline:Object(Xs.e)(t.deadline._d),user_id_created:"".concat(V.id),fio_created:V.fio,user_id_receiver:"".concat(t.recepient.value),fio_receiver:t.recepient.label,route_id:e.document.documents[0].route_id.id,document_options:{title:void 0!=t.title&&t.title,subject:void 0!=t.subject&&t.subject,price:void 0!=t.price&&t.price,currency:void 0!=t.currency_price&&t.currency_price,executor_name_division:void 0!=t.executor_name_division&&t.executor_name_division,executor_phone_number:void 0!=t.executor_phone_number&&t.executor_phone_number,counteragent_contacts:void 0!=t.counteragent_contacts&&t.counteragent_contacts},task_files:"{".concat(t.task_files.map((function(e){return parseInt(e)})),"}"),files:t.files}}};T(n),e.setVisible(!1),console.log("taskData-------------",n),console.log("VALUES-----",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){$(Object.assign({},U,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"recepient",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsxs)(gi.a,Object(xs.a)(Object(xs.a)({style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:!0},e),{},{labelInValue:!0,children:[Object(ua.jsx)(gi.a.Option,{value:null},null),null===E||void 0===E||null===(t=E.users)||void 0===t?void 0:t.map((function(e,t){var n;return Object(ua.jsx)(gi.a.Option,{value:e.id,children:null===E||void 0===E||null===(n=E.users[t])||void 0===n?void 0:n.fio},e.id)}))]}))}),Object(ua.jsx)(xa.a.Item,{label:"\u0421\u0440\u043e\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"deadline",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(ar.a,{locale:cr.a,format:"DD-MM-YYYY HH:mm",showTime:{format:"HH:mm"},onChange:function(e,t){}})}),Object(ua.jsx)(xa.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",labelAlign:"left",labelCol:{span:12},wrapperCol:{span:12},name:"note",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a.TextArea,{rows:5})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop marginBottom",children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u043e\u043b\u044f"})}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.documents[0])||void 0===s?void 0:s.title}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"title",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.subject}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"subject",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(o=e.document)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.data_agreement_list_production[0])||void 0===r?void 0:r.price}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"price",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(d=e.document)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.currency}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"currency",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(j=e.document)||void 0===j||null===(b=j.documents[0])||void 0===b||null===(p=b.data_agreement_list_production[0])||void 0===p?void 0:p.executor_name_division}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(_=e.document)||void 0===_||null===(O=_.documents[0])||void 0===O||null===(h=O.data_agreement_list_production[0])||void 0===h?void 0:h.executor_phone_number}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"executor_phone_number",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:13,children:Object(ua.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})}),Object(ua.jsx)(Ks.a,{span:8,children:null===e||void 0===e||null===(f=e.document)||void 0===f||null===(x=f.documents[0])||void 0===x||null===(v=x.data_agreement_list_production[0])||void 0===v?void 0:v.counteragent_contacts}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(xa.a.Item,{name:"counteragent_contacts",children:Object(ua.jsx)(ir.a,{defaultChecked:!1})})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:18,children:Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0424\u0430\u0439\u043b\u044b"})})}),Object(ua.jsx)(Ks.a,{span:5,children:Object(ua.jsx)(As.a,{onClick:function(){var t,n,s=null===e||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.files.map((function(e){return e.id}));J.setFieldsValue({task_files:s})},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b"})})]}),Object(ua.jsx)(xa.a.Item,{style:{marginTop:"30px"},name:"task_files",children:Object(ua.jsx)(z,{children:Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(g=e.document)||void 0===g||null===(y=g.documents[0])||void 0===y?void 0:y.files.map((function(e){return Object(ua.jsxs)(gs.a.Fragment,{children:[Object(ua.jsxs)(Ks.a,{span:21,children:[Object(ua.jsx)(k,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})}),Object(ua.jsx)(As.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})]}),Object(ua.jsx)(Ks.a,{span:1,children:Object(ua.jsx)(Da.a,{value:e.id,defaultChecked:!1})})]})}))})})})]})})]})})),Gr=Br,Qr=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w=Object(Xs.j)(),k=co.a.Link,C=Object(vs.useState)({log_username:w.username}),S=Object(ha.a)(C,2),T=S[0],I=S[1],E=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(w.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=null===T||void 0===T||null===(t=T.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),F=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===P||void 0===P?void 0:P.includes(e.id)})),R=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(T)}),[T]),Object(vs.useEffect)((function(){e.initialValues&&I({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,report:e.initialValues.document_tasks[0].report,document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files,log_username:T.log_username,task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(e){},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsxs)(Ks.a,{span:12,children:[T.fio_created," AAAAAAAAA"]})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:T.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===T||void 0===T||null===(c=T.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===T||void 0===T||null===(l=T.document_options)||void 0===l?void 0:l.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===T||void 0===T||null===(u=T.document_options)||void 0===u?void 0:u.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===T||void 0===T||null===(b=T.document_options)||void 0===b?void 0:b.currency)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===T||void 0===T||null===(O=T.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===T||void 0===T||null===(x=T.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===T||void 0===T||null===(y=T.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list_production[0])||void 0===N?void 0:N.counteragent_contacts})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===F||void 0===F?void 0:F.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(k,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),2==T.status?Object(ua.jsxs)("div",{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),T.report?T.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:T.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(k,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:R,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){E(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}):"",1==(null===T||void 0===T?void 0:T.status)&&(null===T||void 0===T?void 0:T.user_id_created)!=w.id?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Wr=Qr,Yr=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j={exemplar:"document_tasks",table:"document_tasks",options:{all:{fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(nn||(nn=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),one:Object(Va.a)(sn||(sn=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(an||(an=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Va.a)(cn||(cn=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),setTaskIsReadTrue:Object(Va.a)(on||(on=Object(fa.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))},b=Object(Xs.j)(),p=(co.a.Title,co.a.Link),_=(_c.a.Step,Kl.a.Panel),O=Object(vs.useState)({log_username:b.username}),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=Object(vs.useState)(!1),g=Object(vs.useState)(!1),y=Object(ha.a)(g,2),V=y[0],N=y[1],w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(f)}),[f]);var k=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),C=Object(ha.a)(k,2),S=(C[0],C[1]),T=Object(vs.useState)({step:"0"}),I=Object(ha.a)(T,2),E=(I[0],I[1]);Object(vs.useEffect)((function(){e.initialValues3&&(x({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:f.log_username}),E({step:e.initialValues3.documents[0].step}),S(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var P=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function F(e){}var R=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),D=Object(ha.a)(R,2),L=D[0],U=D[1],$=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),M=Object(ha.a)($,2);M[0],M[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(xs.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ua.jsx)(Kl.a,{defaultActiveKey:["2"],onChange:F,children:Object(ua.jsx)(_,{header:Object(ua.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(p,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:P,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){w(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))},"2")})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Lr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Hr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ua.jsx)(Kr,{reasonText:L,dataProps:e,setState:x,user:b}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Mr,{reasonText:L,dataProps:e,setState:x,user:b})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,U(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Kl.a,{defaultActiveKey:["1"],onChange:F,children:Object(ua.jsx)(_,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443",children:Object(ua.jsx)(ur,{data:{dict:[{title:"\u0423 \u043a\u043e\u0433\u043e",dataIndex:"fio_receiver",key:"fio_receiver",width:"200px"},{title:"\u0421\u0440\u043e\u043a",dataIndex:"deadline",key:"deadline",width:"200px"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",key:"task_statuses",width:"150px"},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",key:"note",width:"250px"}],records:e.documentTasksList},visibleModalUpdate:v,GQL:j,title:function(t){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(br,{visibleModalUpdate:v,UpdateForm:Wr,GQL:j,title:"\u041f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u0435",selectedRowKeys:t.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Gr,{visible:V,setVisible:N,document:e.initialValues3})],selectedRowKeys:t.selectedRowKeys})}})},"1")}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Xr=Yr,Zr=["reasonText","dataProps","setState","user"],ed=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Zr),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),td=ed,nd=["reasonText","dataProps","setState","user"],sd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,nd),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),ad=sd,id=["reasonText","dataProps","setState","user"],cd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,id),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),od=cd,ld=["reasonText","dataProps","setState","user"],rd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,ld),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),dd=rd,ud=gs.a.memo((function(e){Object(Va.a)(ln||(ln=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        report\n                        document_tasks_files{\n                            id\n                            filename\n                            data_file\n                            task_id\n                        }\n                    }\n                }\n            "]))),Object(Va.a)(rn||(rn=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    report\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                }\n            }\n            "]))),Object(Va.a)(dn||(dn=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "]))),Object(Va.a)(un||(un=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "]))),Object(Va.a)(mn||(mn=Object(fa.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])));var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Kl.a.Panel),_=Object(vs.useState)({log_username:j.username}),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(h)}),[h]);var v=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ha.a)(v,2),y=(g[0],g[1]),V=Object(vs.useState)({step:"0"}),N=Object(ha.a)(V,2),w=(N[0],N[1]);Object(vs.useEffect)((function(){e.initialValues4&&(f({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:h.log_username}),w({step:e.initialValues4.documents[0].step}),y(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var k=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(e){}var S=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),T=Object(ha.a)(S,2),I=T[0],E=T[1],P=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),F=Object(ha.a)(P,2);F[0],F[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(h)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(xs.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position}),Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:Object(ua.jsx)("b",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",labelCol:{span:24},children:Object(ua.jsx)(Kl.a,{defaultActiveKey:["2"],onChange:C,children:Object(ua.jsx)(p,{header:Object(ua.jsx)("b",{children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"}),children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:k,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))},"2")})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(td,{reasonText:I,dataProps:e,setState:f,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(dd,{reasonText:I,dataProps:e,setState:f,user:j}),Object(ua.jsx)(od,{reasonText:I,dataProps:e,setState:f,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(ad,{reasonText:I,dataProps:e,setState:f,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,E(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Kl.a,{defaultActiveKey:["1"],onChange:C,children:Object(ua.jsx)(p,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u044e \u043f\u043e\u0440\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443"},"1")}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),md=ud,jd=["reasonText","dataProps","setState","user"],bd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,jd),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),pd=bd,_d=["reasonText","dataProps","setState","user"],Od=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,_d),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),hd=Od,fd=["reasonText","dataProps","setState","user"],xd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,fd),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),vd=xd,gd=["reasonText","dataProps","setState","user"],yd=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,gd),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Vd=yd,Nd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=_c.a.Step,_=Object(vs.useRef)("vertical");Object(vs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(_.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var O=Object(vs.useState)({log_username:j.username}),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(f)}),[f]);var g=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(ha.a)(g,2),V=y[0],N=y[1],w=Object(vs.useState)({step:"0"}),k=Object(ha.a)(w,2),C=k[0],S=k[1];Object(vs.useEffect)((function(){e.initialValues5&&(x({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:f.log_username}),S({step:e.initialValues5.documents[0].step}),N(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var T=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(ha.a)(I,2),P=E[0],F=E[1],R=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),D=Object(ha.a)(R,2);D[0],D[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(f)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(xs.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0442: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio}),Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position}),Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:"\u0414\u0440\u0443\u0433\u043e\u0439"})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:f.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:f.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:8,children:Object(ua.jsx)("b",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})})," ",Object(ua.jsx)(Ks.a,{span:16,children:f.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){v(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",direction:_.current,responsive:!0,current:C.step-1,className:"steps-form-update",children:V.map((function(e){return Object(ua.jsx)(p,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(pd,{reasonText:P,dataProps:e,setState:x,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Vd,{reasonText:P,dataProps:e,setState:x,user:j}),Object(ua.jsx)(vd,{reasonText:P,dataProps:e,setState:x,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(hd,{reasonText:P,dataProps:e,setState:x,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,F(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),wd=Nd,kd=(co.a.Title,co.a.Link,_c.a.Step,gs.a.memo((function(e){var t=Object(Xs.j)(),n=(t.id,t.positions.toString()),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,status_id:"=5",ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(jn||(jn=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(Va.a)(bn||(bn=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        \n                        \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(pn||(pn=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(_n||(_n=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(On||(On=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(hn||(hn=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(fn||(fn=Object(fa.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a={exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_created:"=".concat(t.id)}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(xn||(xn=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                }\n            "]))),one:Object(Va.a)(vn||(vn=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(gn||(gn=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n            }\n        "])))},insert:Object(Va.a)(yn||(yn=Object(fa.a)(["\n        mutation insertDocumentTasks($document_tasks: JSON) {\n            insertDocumentTasks(document_tasks: $document_tasks) {\n                type\n                message\n            }\n        }\n        "])))},i=Object(vs.useRef)(0),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(vs.useState)(!1),u=Object(Xs.g)(Object(Na.a)(s.delete))(),m=Object(ha.a)(u,2),j=m[0],b=m[1].loading,p=Object(Xs.h)(s,"all")(),_=p.loading,O=p.data,h=p.refetch,f=Object(Xs.h)(a,"all")(),x=(f.loading,f.data),v=f.refetch;Object(vs.useEffect)((function(){v()}),[]),Object(vs.useEffect)((function(){h()}),[]);var g=(O&&null!=O[Object.keys(O)[0]]?O[Object.keys(O)[0]].map((function(e){var s,a,c,o,l,r;i.current=O.documents.length;var d=null===x||void 0===x||null===(s=x.document_tasks)||void 0===s?void 0:s.filter((function(t){return t.document_id==e.id})),u=null===x||void 0===x||null===(a=x.document_tasks)||void 0===a?void 0:a.filter((function(t){return t.document_id==e.id&&2==t.status}));return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(c=e.document_statuses)||void 0===c?void 0:c.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(o=e.route_id)||void 0===o?void 0:o.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(l=e.route_data)||void 0===l?void 0:l.length),step_name:(null===(r=e.route_data)||void 0===r?void 0:r.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],tasks_count:"".concat(null===u||void 0===u?void 0:u.length," \u0438\u0437 ").concat(null===d||void 0===d?void 0:d.length)}})):[]).filter((function(e){return e.step==e.route_step&&4!=e.status_id}));window.localStorage.rows_onaproval=g.length;var y=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"180px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"},{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430\u0434\u0430\u0447",dataIndex:"tasks_count",width:"90px"}]);return Object(ua.jsx)(Vo,{data:{dict:y,records:g},loading:_,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:c,GQL:s,UpdateForm:_r,visibleModalUpdate2:o,GQL2:s,UpdateForm2:Fr,visibleModalUpdate3:l,GQL3:s,UpdateForm3:Xr,visibleModalUpdate4:r,GQL4:s,UpdateForm4:md,visibleModalUpdate5:d,GQL5:s,UpdateForm5:wd,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},j({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:b,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:c,visibleModalUpdate2:o,visibleModalUpdate3:l,visibleModalUpdate4:r,visibleModalUpdate5:d,GQL:s,setCountManager:e.setCountManager})}))),Cd=kd,Sd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=(co.a.Title,co.a.Link),d=_c.a.Step,u=Object(vs.useState)({log_username:l.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(j)}),[j]);var _=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=Object(vs.useState)({step:"0"}),v=Object(ha.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC",e),Object(vs.useEffect)((function(){e.initialValues&&(b({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues",e.initialValues),y({step:e.initialValues.documents[0].step}),f(e.initialValues.documents[0].route_data))}),[e.initialValues]);var V=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(r,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(ua.jsx)(d,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Td=Sd,Id=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=(co.a.Title,co.a.Link),d=_c.a.Step,u=Object(vs.useState)({log_username:l.username}),m=Object(ha.a)(u,2),j=m[0],b=m[1],p=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(j),console.log("state2 form",j)}),[j]);var _=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=Object(vs.useState)({step:"0"}),v=Object(ha.a)(x,2),g=v[0],y=v[1];console.log("PROPS UPDATE DOC 2",e),Object(vs.useEffect)((function(){e.initialValues2&&(b({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:j.log_username}),console.log("props.initialValues2",e.initialValues2),y({step:e.initialValues2.documents[0].step}),f(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var V=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(j),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){b(Object.assign({},j,Object(xs.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(t=e.initialValues2)||void 0===t?void 0:t.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(n=e.initialValues2)||void 0===n?void 0:n.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:j.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(s=e.initialValues2)||void 0===s?void 0:s.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(r,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:V,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){p(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:g.step-1,className:"steps-form-update",children:h.map((function(e){return Object(ua.jsx)(d,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(i=e.initialValues2)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.reason)||void 0===o?void 0:o.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ed=Id,Pd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=_c.a.Step,m=Object(vs.useState)({log_username:r.username}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(b)}),[b]);var O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=Object(vs.useState)({step:"0"}),g=Object(ha.a)(v,2),y=g[0],V=g[1];Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues3&&(p({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:null===(t=e.initialValues3.documents[0])||void 0===t||null===(n=t.data_agreement_list_production[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues3.documents[0])||void 0===s||null===(a=s.data_agreement_list_production[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues3.documents[0])||void 0===i||null===(c=i.data_agreement_list_production[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues3.documents[0])||void 0===o||null===(l=o.data_agreement_list_production[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues3.documents[0])||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues3.documents[0])||void 0===u||null===(m=u.data_agreement_list_production[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:b.log_username}),V({step:e.initialValues3.documents[0].step}),x(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var N=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_production[0])||void 0===s?void 0:s.subject),k=Object(ha.a)(w,2);k[0],k[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues3)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues3)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ua.jsx)(u,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues3)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Fd=Pd,Rd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=_c.a.Step,m=Object(vs.useState)({log_username:r.username}),j=Object(ha.a)(m,2),b=j[0],p=j[1],_=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(b)}),[b]);var O=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=Object(vs.useState)({step:"0"}),g=Object(ha.a)(v,2),y=g[0],V=g[1];Object(vs.useEffect)((function(){var t,n,s,a,i,c,o,l,r,d,u,m;e.initialValues4&&(p({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:null===(t=e.initialValues4.documents[0])||void 0===t||null===(n=t.data_agreement_list_internal_needs[0])||void 0===n?void 0:n.price,subject:null===(s=e.initialValues4.documents[0])||void 0===s||null===(a=s.data_agreement_list_internal_needs[0])||void 0===a?void 0:a.subject,currency:null===(i=e.initialValues4.documents[0])||void 0===i||null===(c=i.data_agreement_list_internal_needs[0])||void 0===c?void 0:c.currency,executor_name_division:null===(o=e.initialValues4.documents[0])||void 0===o||null===(l=o.data_agreement_list_internal_needs[0])||void 0===l?void 0:l.executor_name_division,executor_phone_number:null===(r=e.initialValues4.documents[0])||void 0===r||null===(d=r.data_agreement_list_internal_needs[0])||void 0===d?void 0:d.executor_phone_number,counteragent_contacts:null===(u=e.initialValues4.documents[0])||void 0===u||null===(m=u.data_agreement_list_internal_needs[0])||void 0===m?void 0:m.counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:b.log_username}),V({step:e.initialValues4.documents[0].step}),x(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var N=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),k=Object(ha.a)(w,2);k[0],k[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(b),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){p(Object.assign({},b,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:b.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues4)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:N,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){_(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues4)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:y.step-1,className:"steps-form-update",children:f.map((function(e){return Object(ua.jsx)(u,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues4)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Dd=Rd,Ld=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r=Object(Xs.j)(),d=(co.a.Title,co.a.Link),u=_c.a.Step,m=Object(vs.useRef)("vertical");Object(vs.useEffect)((function(){var t,n,s,a,i,c;(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.route_data)||void 0===s?void 0:s.length)>1&&(m.current=(null===e||void 0===e||null===(a=e.initialValues5)||void 0===a||null===(i=a.documents[0])||void 0===i||null===(c=i.route_data)||void 0===c?void 0:c.length)<=7?"horizontal":"vertical")}),[e]);var j=Object(vs.useState)({log_username:r.username}),b=Object(ha.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(r.id),item:t.id})});case 2:return n=e.sent,e.next=5,n.json();case 5:void 0!=(s=e.sent)&&console.log("RESULT",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(p)}),[p]);var h=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(ha.a)(h,2),x=f[0],v=f[1],g=Object(vs.useState)({step:"0"}),y=Object(ha.a)(g,2),V=y[0],N=y[1];Object(vs.useEffect)((function(){e.initialValues5&&(_({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:p.log_username}),N({step:e.initialValues5.documents[0].step}),v(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list_internal_needs[0])||void 0===s?void 0:s.subject),C=Object(ha.a)(k,2);C[0],C[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(xs.a)({},t)))},children:[Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(a=e.initialValues5)||void 0===a?void 0:a.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(d,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){O(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(i=e.initialValues5)||void 0===i?void 0:i.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",direction:m.current,responsive:!0,current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(ua.jsx)(u,{title:e.positionName})}))})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(c=e.initialValues5)||void 0===c||null===(o=c.documents[0])||void 0===o||null===(l=o.reason)||void 0===l?void 0:l.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange}),Object(ua.jsx)(As.a,{onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Ud=Ld,$d=(co.a.Title,co.a.Link,_c.a.Step,gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.positions.toString(),s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{approved_by_me:t.id,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Vn||(Vn=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(Nn||(Nn=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    reason\n                    date_modified\n                    status_id\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(wn||(wn=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(kn||(kn=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(Cn||(Cn=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Sn||(Sn=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(Tn||(Tn=Object(fa.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(vs.useState)(!1),i=Object(vs.useState)(!1),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(Xs.g)(Object(Na.a)(s.delete))(),d=Object(ha.a)(r,2),u=d[0],m=d[1].loading,j=Object(Xs.h)(s,"all")(),b=j.loading,p=j.data,_=j.refetch;Object(vs.useEffect)((function(){_()}),[]);var O=p&&null!=p[Object.keys(p)[0]]?p[Object.keys(p)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],h=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Vo,{data:{dict:h,records:O},loading:b,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:a,GQL:s,UpdateForm:Td,visibleModalUpdate2:i,GQL2:s,UpdateForm2:Ed,visibleModalUpdate3:c,GQL3:s,UpdateForm3:Fd,visibleModalUpdate4:o,GQL4:s,UpdateForm4:Dd,visibleModalUpdate5:l,GQL5:s,UpdateForm5:Ud,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},u({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:m,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})}))),Md=$d,Jd=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],zd=gs.a.memo((function(e){var t=e.GQL,n=(e.GQL2,e.GQL3,e.GQL4,e.GQL5,e.UpdateForm),s=e.UpdateForm2,a=e.UpdateForm3,i=(e.UpdateForm4,e.UpdateForm5,Object(Zs.a)(e,Jd)),c={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{id:"=".concat(i.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(In||(In=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n    \n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(En||(En=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Pn||(Pn=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Fn||(Fn=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(Rn||(Rn=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(Dn||(Dn=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(Ln||(Ln=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n    }\n    "])))},o=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.map((function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(){var n=Object(pc.a)(bc.a.mark((function n(s){return bc.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({dataFile:s.target.result,fileName:e.name});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s.onerror=function(e){n(e)},s.readAsDataURL(e.originFileObj)}))})),e.next=4,Promise.all(n);case 4:return s=e.sent,console.log("COMPLETED"),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=xa.a.useForm(),r=Object(ha.a)(l,1)[0],d=xa.a.useForm(),u=Object(ha.a)(d,1)[0],m=xa.a.useForm(),j=Object(ha.a)(m,1)[0],b=Object(vs.useState)(!0),p=Object(ha.a)(b,2),_=(p[0],p[1]),O=i.visibleModalUpdate?i.visibleModalUpdate:[],h=Object(ha.a)(O,2),f=h[0],x=h[1],v=i.visibleModalUpdate2?i.visibleModalUpdate2:[],g=Object(ha.a)(v,2),y=g[0],V=g[1],N=i.visibleModalUpdate3?i.visibleModalUpdate3:[],w=Object(ha.a)(N,2),k=w[0],C=w[1],S={};S[t.table]=t.table?{global:{id:"= ".concat(i.selectedRowKeys[0])}}:{};var T=Object(Xs.h)(t,"one",{variables1:S})(),I=(T.loading,T.data),E=T.refetch,P=Object(Xs.h)(t,"one",{variables1:S})(),F=(P.loading,P.data),R=P.refetch,D=Object(Xs.h)(t,"one",{variables1:S})(),L=(D.loading,D.data),U=D.refetch;Object(vs.useEffect)((function(){f&&E(S)}),[f]),Object(vs.useEffect)((function(){y&&R(S)}),[y]),Object(vs.useEffect)((function(){k&&U(S)}),[k]);var $={documents:{global:{id:"=".concat(i.selectedRowKeys[1]),ORDER_BY:["date_created desc"]}}},M=Object(Xs.h)(c,"one",{variables1:S})(),J=(M.loading,M.data),z=M.refetch,K=Object(Xs.h)(c,"one",{variables1:S})(),q=(K.loading,K.data),A=K.refetch,H=Object(Xs.h)(c,"one",{variables1:S})(),B=(H.loading,H.data),G=H.refetch;Object(vs.useEffect)((function(){f&&z($)}),[f]),Object(vs.useEffect)((function(){y&&A($)}),[y]),Object(vs.useEffect)((function(){k&&G($)}),[k]);var Q=Object(Xs.g)(Object(Na.a)(t.update),(function(){x(!1)}))(),W=Object(ha.a)(Q,2),Y=W[0];W[1].loading;return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",disabled:2!==i.selectedRowKeys.length,onClick:function(){x(!0)},children:[Object(ua.jsx)(Aa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ua.jsx)(Ja.a,{title:i.title,visible:f,width:600,onCancel:function(){x(!1),_(!0)},footer:null,children:Object(ua.jsx)(n,{document:null===J||void 0===J?void 0:J.documents[0],initialValues:I,form:r,onFinish:function(){var e=Object(pc.a)(bc.a.mark((function e(n){var s,a,c;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},c=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,o(n.files.fileList).then((function(e){c=e}));case 5:x(!1),a[t.exemplar]={id:i.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:c||[],report:n.report},console.log("variables-------123",a),Y({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:i.title,visible:y,width:600,onCancel:function(){V(!1),_(!0)},footer:null,children:Object(ua.jsx)(s,{document:null===q||void 0===q?void 0:q.documents[0],initialValues:F,form:u,onFinish:function(){var e=Object(pc.a)(bc.a.mark((function e(n){var s,a,c;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},c=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,o(n.files.fileList).then((function(e){c=e}));case 5:V(!1),a[t.exemplar]={id:i.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:c||[],report:n.report},console.log("variables-------123",a),Y({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(ua.jsx)(Ja.a,{title:i.title,visible:k,width:900,onCancel:function(){C(!1),_(!0)},footer:null,children:Object(ua.jsx)(a,{document:null===B||void 0===B?void 0:B.documents[0],initialValues:L,form:j,onFinish:function(){var e=Object(pc.a)(bc.a.mark((function e(n){var s,a,c;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},c=[],!(null===n||void 0===n||null===(s=n.files)||void 0===s?void 0:s.fileList)){e.next=5;break}return e.next=5,o(n.files.fileList).then((function(e){c=e}));case 5:C(!1),a[t.exemplar]={id:i.selectedRowKeys[0],status:2,user_id:n.user_id_created,docs:c||[],report:n.report},console.log("variables-------123",a),Y({variables:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})})),Kd=zd,qd=["GQL"],Ad=gs.a.memo((function(e){var t,n,s=e.GQL,a=Object(Zs.a)(e,qd),i=Object(vs.useState)([]),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=[];a.loading||(r=a.data.records.map((function(e){return e.id})));var d=Object(Na.a)(s.setTaskIsReadTrue,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),u=Object(ha.a)(d,2),m=u[0],j=u[1];j.loading,j.error;return Object(vs.useEffect)((function(){l(o.filter((function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return!0;return!1})))}),[a.data]),Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",style:{minHeight:168},loading:a.loading,columns:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.dict,dataSource:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:a.title?function(){return a.title({selectedRowKeys:o})}:null,bordered:a.bordered,onRow:function(e,t){return{onClick:function(t){l([e.key,e.document_id])},onDoubleClick:function(t){var n;0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)?(m({variables:{task:{id:e.document_tasks_logs.id,is_read:!0}}}),10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0)):(10==e.route_id&&a.visibleModalUpdate[1](!0),24==e.route_id&&a.visibleModalUpdate2[1](!0),26==e.route_id&&a.visibleModalUpdate3[1](!0))}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n,s="";return 0==(null===e||void 0===e||null===(n=e.document_tasks_logs)||void 0===n?void 0:n.is_read)&&(s+="is_read_false"),e.key===o[0]?"ant-table-row ant-table-row-level-0 statusSelected":s}})})),Hd=Ad,Bd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f=Object(Xs.j)(),x=co.a.Link,v=Object(vs.useState)({log_username:f.username}),g=Object(ha.a)(v,2),y=g[0],V=g[1],N=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(f.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===y||void 0===y||null===(t=y.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),k=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===w||void 0===w?void 0:w.includes(e.id)})),C=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(y)}),[y]),Object(vs.useEffect)((function(){e.initialValues&&V({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:y.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=y.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:y.fio_created})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:y.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===y||void 0===y||null===(c=y.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===y||void 0===y||null===(l=y.document_options)||void 0===l?void 0:l.supllier)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_one[0])||void 0===d?void 0:d.supllier})]})}):"",1==(null===y||void 0===y||null===(u=y.document_options)||void 0===u?void 0:u.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_one[0])||void 0===j?void 0:j.subject})]})}):"",1==(null===y||void 0===y||null===(b=y.document_options)||void 0===b?void 0:b.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_one[0])||void 0===_?void 0:_.price})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===k||void 0===k?void 0:k.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(x,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){N(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),2!=y.status?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(xa.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(va.a.TextArea,{})}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),y.report?y.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(O=e.initialValues)||void 0===O||null===(h=O.document_tasks[0])||void 0===h?void 0:h.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(x,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:C,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){N(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}),1==(null===y||void 0===y?void 0:y.status)?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Gd=Bd,Qd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w,k,C=Object(Xs.j)(),S=co.a.Link,T=Object(vs.useState)({log_username:C.username}),I=Object(ha.a)(T,2),E=I[0],P=I[1],F=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(vs.useEffect)((function(){e.initialValues&&P({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:E.fio_created})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:E.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency_price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list[0])||void 0===_?void 0:_.currency_price})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.sider_signatures_date)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list[0])||void 0===g?void 0:g.sider_signatures_date})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.sider_signatures_date)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list[0])||void 0===N?void 0:N.received_from_counteragent_date})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(S,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),2!=E.status?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(xa.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(va.a.TextArea,{})}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(k=w.document_tasks[0])||void 0===k?void 0:k.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(S,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Wd=Qd,Yd=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b,p,_,O,h,f,x,v,g,y,V,N,w,k,C=Object(Xs.j)(),S=co.a.Link,T=Object(vs.useState)({log_username:C.username}),I=Object(ha.a)(T,2),E=I[0],P=I[1],F=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(C.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=null===E||void 0===E||null===(t=E.task_files)||void 0===t?void 0:t.map((function(e){return e.toString()})),D=null===e||void 0===e||null===(n=e.document)||void 0===n||null===(s=n.files)||void 0===s?void 0:s.filter((function(e){return null===R||void 0===R?void 0:R.includes(e.id)})),L=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(E)}),[E]),Object(vs.useEffect)((function(){e.initialValues&&P({id:e.initialValues.document_tasks[0].id,document_id:e.initialValues.document_tasks[0].document_id,status:e.initialValues.document_tasks[0].status,is_cancelled:e.initialValues.document_tasks[0].is_cancelled,note:e.initialValues.document_tasks[0].note,deadline:e.initialValues.document_tasks[0].deadline,date_created:e.initialValues.document_tasks[0].date_created,fio_created:e.initialValues.document_tasks[0].fio_created,user_id_created:e.initialValues.document_tasks[0].user_id_created,user_id_receiver:e.initialValues.document_tasks[0].user_id_receiver,fio_receiver:e.initialValues.document_tasks[0].fio_receiver,route_id:e.initialValues.document_tasks[0].route_id,document_options:e.initialValues.document_tasks[0].document_options,task_files:e.initialValues.document_tasks[0].task_files,log_username:E.log_username,report:e.initialValues.document_tasks[0].report?e.initialValues.document_tasks[0].report:"",document_tasks_files:e.initialValues.document_tasks[0].document_tasks_files?e.initialValues.document_tasks[0].document_tasks_files:[],task_statuses:e.initialValues.document_tasks[0].task_statuses})}),[e.initialValues]);return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){t.type=1,t.user_id_created=E.user_id_created,e.onFinish(t),console.log("values2222",t)},children:[Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:E.fio_created})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:E.note})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0435"})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(a=e.document)||void 0===a||null===(i=a.route_id)||void 0===i?void 0:i.name})]})}),1==(null===E||void 0===E||null===(c=E.document_options)||void 0===c?void 0:c.title)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(o=e.document)||void 0===o?void 0:o.title})]})}):"",1==(null===E||void 0===E||null===(l=E.document_options)||void 0===l?void 0:l.subject)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(r=e.document)||void 0===r||null===(d=r.data_agreement_list_production[0])||void 0===d?void 0:d.subject})]})}):"",1==(null===E||void 0===E||null===(u=E.document_options)||void 0===u?void 0:u.price)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(m=e.document)||void 0===m||null===(j=m.data_agreement_list_production[0])||void 0===j?void 0:j.price})]})}):"",1==(null===E||void 0===E||null===(b=E.document_options)||void 0===b?void 0:b.currency)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(p=e.document)||void 0===p||null===(_=p.data_agreement_list_production[0])||void 0===_?void 0:_.currency})]})}):"",1==(null===E||void 0===E||null===(O=E.document_options)||void 0===O?void 0:O.executor_name_division)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(h=e.document)||void 0===h||null===(f=h.data_agreement_list_production[0])||void 0===f?void 0:f.executor_name_division})]})}):"",1==(null===E||void 0===E||null===(x=E.document_options)||void 0===x?void 0:x.executor_phone_number)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(v=e.document)||void 0===v||null===(g=v.data_agreement_list_production[0])||void 0===g?void 0:g.executor_phone_number})]})}):"",1==(null===E||void 0===E||null===(y=E.document_options)||void 0===y?void 0:y.counteragent_contacts)?Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430: "}),Object(ua.jsx)(Ks.a,{span:12,children:null===e||void 0===e||null===(V=e.document)||void 0===V||null===(N=V.data_agreement_list_production[0])||void 0===N?void 0:N.counteragent_contacts})]})}):"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("h3",{className:"marginTop",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u043c"})}),null===D||void 0===D?void 0:D.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(S,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})})),Object(ua.jsx)(Sa.a,{type:"horizontal"}),2!=E.status?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(xa.a.Item,{name:"report",className:"font-form-header",label:"\u041e\u0442\u0447\u0451\u0442",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(va.a.TextArea,{})}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b."}],children:Object(ua.jsx)(Uc,{showUploadList:!0,action:"https://"+ws.host+":"+ws.port+"/document-control/for-execution-inbox",multiple:!0,maxCount:50,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log("info.file",e.file,e.fileList),"done"===t?yc.b.success("".concat(e.file.name," - \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e.")):"error"===t&&yc.b.error("".concat(e.file.name," - \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435."))}})})]}):Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{children:Object(ua.jsx)("b",{children:"\u041e\u0442\u0447\u0451\u0442"})}),E.report?E.report:"",Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)("h3",{className:"font-form-header",children:Object(ua.jsx)("b",{children:"\u0424\u0430\u0439\u043b\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"})}),Object(ua.jsx)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:null===e||void 0===e||null===(w=e.initialValues)||void 0===w||null===(k=w.document_tasks[0])||void 0===k?void 0:k.document_tasks_files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)(Ks.a,{span:24,className:"document-view-wrap",children:[Object(ua.jsx)(S,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:L,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){F(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))})]})]}),1==(null===E||void 0===E?void 0:E.status)?Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"})]}):""]})})),Xd=Yd,Zd=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.id,s=(t.positions.toString(),Object(Va.a)(Un||(Un=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                reason\n                subject\n                date_created\n                date_modified\n                status_id\n                \n                document_tasks{\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                \n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(Va.a)($n||($n=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    reason\n                    status_id\n                    document_tasks{\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                    \n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "]))),Object(Va.a)(Mn||(Mn=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                date_modified\n                status_id\n                reason\n                document_statuses{\n                        id\n                        name\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),Object(Va.a)(Jn||(Jn=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Va.a)(zn||(zn=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Va.a)(Kn||(Kn=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),Object(Va.a)(qn||(qn=Object(fa.a)(["\n    mutation setIsReadTrue($document: JSON) {\n    setIsReadTrue(document: $document) {\n        type\n        message\n    }\n}\n"]))),{exemplar:"document_tasks",table:"document_tasks",options:{all:{variables:{document_tasks:{global:{user_id_receiver:"=".concat(n),ORDER_BY:["date_created desc"]}}},fetchPolicy:"standby"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(An||(An=Object(fa.a)(["\n                query document_tasks ($document_tasks: JSON){\n                    document_tasks(document_tasks: $document_tasks){\n                        id\n                        document_id\n                        status\n                        is_cancelled\n                        note\n                        deadline\n                        date_created\n                        user_id_created\n                        fio_created\n                        user_id_receiver\n                        fio_receiver\n                        route_id\n                        document_options\n                        task_files\n                        task_statuses{\n                            id\n                            name\n                        }\n                        document_tasks_logs{\n                            id\n                            task_id\n                            is_read\n                            type\n                            user_id\n                        }\n                        report\n                    }\n                }\n            "]))),one:Object(Va.a)(Hn||(Hn=Object(fa.a)(["\n            query document_tasks ($document_tasks: JSON){\n                document_tasks(document_tasks: $document_tasks){\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    route_id\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    document_tasks_files{\n                        id\n                        filename\n                        data_file\n                        task_id\n                    }\n                    report\n                }\n            }\n            "])))},subscription:{all:Object(Va.a)(Bn||(Bn=Object(fa.a)(["\n            subscription document_tasks ($document_tasks: JSON) {\n                document_tasks(document_tasks: $document_tasks) {\n                    id\n                    document_id\n                    status\n                    is_cancelled\n                    note\n                    deadline\n                    date_created\n                    user_id_created\n                    fio_created\n                    user_id_receiver\n                    fio_receiver\n                    document_options\n                    task_files\n                    document_tasks_logs{\n                        id\n                        task_id\n                        is_read\n                        type\n                        user_id\n                    }\n                    task_statuses{\n                        id\n                        name\n                    }\n                    report\n                }\n            }\n        "])))},update:Object(Va.a)(Gn||(Gn=Object(fa.a)(["\n        mutation updateDocumentTasks($document_tasks: JSON) {\n            updateDocumentTasks(document_tasks: $document_tasks) {\n            type\n            message\n        }\n        }\n        "]))),setTaskIsReadTrue:Object(Va.a)(Qn||(Qn=Object(fa.a)(["\n        mutation setTaskIsReadTrue($task: JSON) {\n            setTaskIsReadTrue(task: $task){\n                type\n                message\n            }\n        }\n        "])))}),a=Object(vs.useState)(!1),i=Object(vs.useState)(!1),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(Xs.h)(s,"all")(),d=r.loading,u=r.data,m=r.refetch;Object(vs.useEffect)((function(){m()}),[]);var j=u&&null!=u[Object.keys(u)[0]]?u[Object.keys(u)[0]].map((function(e){return{id:e.id,key:e.id,document_id:e.document_id,status:e.status,is_cancelled:e.is_cancelled,note:e.note,deadline:e.deadline,date_created:e.date_created,user_id_created:e.user_id_created,fio_created:e.fio_created,user_id_receiver:e.user_id_receiver,fio_receiver:e.fio_receiver,route_id:e.route_id?e.route_id:10,document_options:e.document_options,task_files:e.task_files?e.task_files:{},task_statuses:e.task_statuses.name,document_tasks_logs:e.document_tasks_logs?e.document_tasks_logs[e.document_tasks_logs.findIndex((function(e){return e.user_id==t.id}))]:[]}})):[],b=j.filter((function(e){return 4==e.status_id}));window.localStorage.rows_approved=b.length;var p=li([{title:"\u0424\u0418\u041e \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044f",dataIndex:"fio_created",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.fio_created.localeCompare(t.fio_created)}},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"300px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e",dataIndex:"deadline",width:"214px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.deadline)-new Date(t.deadline)})),{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"task_statuses",width:"114px",tooltip:!0},{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"note",width:"214px"}]);return Object(ua.jsx)(Hd,{data:{dict:p,records:j},loading:d,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Kd,{visibleModalUpdate:a,UpdateForm:Gd,visibleModalUpdate2:i,UpdateForm2:Wd,visibleModalUpdate3:c,UpdateForm3:Xd,GQL:s,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u043d\u0438\u044f",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,visibleModalUpdate3:c,visibleModalUpdate4:o,visibleModalUpdate5:l,GQL:s})})),eu=Zd,tu=["reasonText","dataProps","setState","user"],nu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,tu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),su=nu,au=["reasonText","dataProps","setState","user"],iu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,au),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),cu=iu,ou=["reasonText","dataProps","setState","user"],lu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,ou),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),ru=lu,du=["reasonText","dataProps","setState","user"],uu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,du),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues.documents[0].reason?n.initialValues.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),mu=uu,ju=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d=Object(Xs.j)(),u=(co.a.Title,co.a.Link),m=_c.a.Step,j=Object(vs.useState)({log_username:d.username}),b=Object(ha.a)(j,2),p=b[0],_=b[1],O=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(d.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(p)}),[p]);var h=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),f=Object(ha.a)(h,2),x=f[0],v=f[1],g=Object(vs.useState)({step:"0"}),y=Object(ha.a)(g,2),V=y[0],N=y[1];console.log("PROPS UPDATE DOC",e),Object(vs.useEffect)((function(){e.initialValues&&(_({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:p.log_username}),console.log("props.initialValues",e.initialValues),N({step:e.initialValues.documents[0].step}),v(e.initialValues.documents[0].route_data))}),[e.initialValues]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=C[0],T=C[1];return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(p),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){_(Object.assign({},p,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:p.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i?void 0:i.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(u,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){O(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(c=e.initialValues)||void 0===c?void 0:c.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:V.step-1,className:"steps-form-update",children:x.map((function(e){return Object(ua.jsx)(m,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(su,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(mu,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ua.jsx)(ru,{reasonText:S,dataProps:e,setState:_,user:d}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(cu,{reasonText:S,dataProps:e,setState:_,user:d})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(o=e.initialValues)||void 0===o||null===(l=o.documents[0])||void 0===l||null===(r=l.reason)||void 0===r?void 0:r.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:function(){e.HandleComment(e.form)},className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),bu=ju,pu=["reasonText","dataProps","setState","user"],_u=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,pu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward2(),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Ou=_u,hu=["reasonText","dataProps","setState","user"],fu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,hu),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form2.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),xu=fu,vu=["reasonText","dataProps","setState","user"],gu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,vu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward2(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),yu=["reasonText","dataProps","setState","user"],Vu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,yu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return console.log("dataProps FORM2222",n),Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues2.documents[0].reason?n.initialValues2.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form2)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Nu=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=_c.a.Step,_=Object(vs.useState)({log_username:j.username}),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ha.a)(v,2),y=g[0],V=g[1],N=Object(vs.useState)({step:"0"}),w=Object(ha.a)(N,2),k=w[0],C=w[1];Object(vs.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ha.a)(T,2),E=I[0],P=I[1],F=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject),R=Object(ha.a)(F,2);R[0],R[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(xs.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ua.jsx)(p,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Ou,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Vu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ua.jsx)(gu,{reasonText:E,dataProps:e,setState:f,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(xu,{reasonText:E,dataProps:e,setState:f,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,P(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),wu=Nu,ku=["reasonText","dataProps","setState","user"],Cu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,ku),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Su=["reasonText","dataProps","setState","user"],Tu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Su),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Iu=["reasonText","dataProps","setState","user"],Eu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Iu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteBackward3(),n.form3.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Pu=["reasonText","dataProps","setState","user"],Fu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Pu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){var e;(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues3.documents[0].reason?n.initialValues3.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),null===n||void 0===n||null===(e=n.form3)||void 0===e||e.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Ru=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Object(vs.useState)({log_username:j.username})),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ha.a)(x,2),g=(v[0],v[1]),y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=(V[0],V[1]);Object(vs.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject),E=Object(ha.a)(I,2);E[0],E[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(xs.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Cu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Fu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Eu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Tu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Du=Ru,Lu=["reasonText","dataProps","setState","user"],Uu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Lu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),$u=["reasonText","dataProps","setState","user"],Mu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,$u),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Ju=["reasonText","dataProps","setState","user"],zu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Ju),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues4)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues4)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward4(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Ku=["reasonText","dataProps","setState","user"],qu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Ku),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues4.documents[0].reason?n.initialValues4.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form4.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),Au=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Object(vs.useState)({log_username:j.username})),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ha.a)(x,2),g=(v[0],v[1]),y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=(V[0],V[1]);Object(vs.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject),E=Object(ha.a)(I,2);E[0],E[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(xs.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Uu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(qu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(zu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Mu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Hu=Au,Bu=["reasonText","dataProps","setState","user"],Gu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Bu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteForward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?")},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"})})})),Qu=["reasonText","dataProps","setState","user"],Wu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Qu),Object(vs.useState)(!1)),c=Object(ha.a)(i,2),o=c[0],l=c[1],r=Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"),d=Object(ha.a)(r,2),u=d[0],m=d[1];return Object(ua.jsx)(Ra.a,{title:u,placement:"topLeft",disabled:n.disabled,visible:o,onCancel:function(){l(!1)},onConfirm:function(){s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleStatusCancelled(),l(!1),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{type:"primary",disabled:n.disabled,onClick:function(){null==t||0==t.length?(l(!1),yc.b.error("\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435")):(l(!0),m("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u0434\u043e\u0433\u043e\u0432\u043e\u0440?"))},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})})})),Yu=["reasonText","dataProps","setState","user"],Xu=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Yu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s,i,c=Object.assign({},e);return c.reason=null,c.reason=(null===n||void 0===n||null===(s=n.initialValues5)||void 0===s?void 0:s.documents[0].reason)?null===n||void 0===n||null===(i=n.initialValues5)||void 0===i?void 0:i.documents[0].reason:[],c.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),c})),n.handleRouteBackward5(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0448\u0430\u0433 \u043d\u0430\u0437\u0430\u0434?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434"})})})),Zu=["reasonText","dataProps","setState","user"],em=gs.a.memo((function(e){var t=e.reasonText,n=e.dataProps,s=e.setState,a=e.user,i=(Object(Zs.a)(e,Zu),Object(vs.useState)("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")),c=Object(ha.a)(i,2),o=c[0],l=c[1];return Object(ua.jsx)(Ra.a,{title:o,placement:"topLeft",disabled:n.disabled,onConfirm:function(){(null!=t||(null===t||void 0===t?void 0:t.length)>0)&&s((function(e){var s=Object.assign({},e);return s.reason=null,s.reason=n.initialValues5.documents[0].reason?n.initialValues5.documents[0].reason:[],s.reason.push({text:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435: "+t,userId:a.id,userFio:a.fio,userPosition:a.position_names[0],userName:a.username}),s})),n.handleRouteReturnToSender(),n.form5.submit()},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(ua.jsx)(As.a,{disabled:n.disabled,type:"primary",onClick:function(){null==t||0==t.length?l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0431\u0435\u0437 \u0437\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0439?"):l("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e?")},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"})})})),tm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Object(vs.useState)({log_username:j.username})),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(O)}),[O]);var x=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ha.a)(x,2),g=(v[0],v[1]),y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=(V[0],V[1]);Object(vs.useEffect)((function(){e.initialValues5&&(h({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:O.log_username}),N({step:e.initialValues5.documents[0].step}),g(e.initialValues5.documents[0].route_data))}),[e.initialValues5]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=C[0],T=C[1],I=Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject),E=Object(ha.a)(I,2);E[0],E[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(xs.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(Gu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(em,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Xu,{reasonText:S,dataProps:e,setState:h,user:j}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(Wu,{reasonText:S,dataProps:e,setState:h,user:j})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsxs)("div",{children:[Object(ua.jsx)(va.a,{disabled:e.disabled,onChange:function(e,t){e.target.value.length,T(e.target.value)},placeholder:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}),null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),nm=tm,sm=(co.a.Title,co.a.Link,_c.a.Step,gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(Wn||(Wn=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    step\n                    route_data\n                }\n            }"]))),one:Object(Va.a)(Yn||(Yn=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    reason\n                    data_one{\n                        id\n                        document_id\n                        price\n                        subject\n                        supllier\n                    }\n                    data_custom{\n                        id\n                        document_id\n                        subject\n                        remark\n                    }\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n\n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    data_agreement_list_production{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    data_agreement_list_internal_needs{\n                        id\n                        document_id\n                        price\n                        subject\n                        currency\n                        executor_name_division\n                        executor_phone_number\n                        counteragent_contacts\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(Xn||(Xn=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                reason\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Zn||(Zn=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(es||(es=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(ts||(ts=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),setIsReadTrue:Object(Va.a)(ns||(ns=Object(fa.a)(["\n        mutation setIsReadTrue($document: JSON) {\n        setIsReadTrue(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(vs.useRef)(0),i=Object(vs.useState)(!1),c=Object(vs.useState)(!1),o=Object(vs.useState)(!1),l=Object(vs.useState)(!1),r=Object(vs.useState)(!1),d=Object(Xs.g)(Object(Na.a)(s.delete))(),u=Object(ha.a)(d,2),m=u[0],j=u[1].loading,b=Object(Xs.h)(s,"all")(),p=b.loading,_=b.data,O=b.refetch;Object(vs.useEffect)((function(){O()}),[]);var h=_&&null!=_[Object.keys(_)[0]]?_[Object.keys(_)[0]].map((function(e){var s,i,c,o;return a.current=_.documents.length,{id:e.id,key:e.id,title:e.title,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(i=e.route_id)||void 0===i?void 0:i.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(c=e.route_data)||void 0===c?void 0:c.length),step_name:(null===(o=e.route_data)||void 0===o?void 0:o.length)>0?e.route_data[e.step-1].positionName:"",document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))]}})):[],f=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"\u041e\u0442 \u043a\u043e\u0433\u043e",dataIndex:"user_info",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.user_info.localeCompare(t.user_info)}},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)}},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(Fc,{data:{dict:f,records:h},loading:p,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:i,GQL:s,UpdateForm:bu,visibleModalUpdate2:c,GQL2:s,UpdateForm2:wu,visibleModalUpdate3:o,GQL3:s,UpdateForm3:Du,visibleModalUpdate4:l,GQL4:s,UpdateForm4:Hu,visibleModalUpdate5:r,GQL5:s,UpdateForm5:nm,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},m({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:t.documentControl.delete?Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:j,disabled:2!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove"):null})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:i,visibleModalUpdate2:c,visibleModalUpdate3:o,visibleModalUpdate4:l,visibleModalUpdate5:r,GQL:s})}))),am=n(474),im=(co.a.Title,co.a.Link),cm=_c.a.Step,om=gs.a.memo((function(e){var t=Object(Xs.j)(),n=t.positions.toString();console.log("positionsVariable",n);var s={exemplar:"document",table:"documents",options:{all:{variables:{documents:{global:{positions:n,ORDER_BY:["date_created desc"]}}},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(ss||(ss=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                description\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(as||(as=Object(fa.a)(["\n            query documents ($documents: JSON) {\n                documents(documents:$documents) {\n                    id\n                    title\n                    user_id\n                    username\n                    position\n                    fio\n                    description\n                    price\n                    supllier\n                    subject\n                    date_created\n                    date_modified\n                    status_id\n                    data_agreement_list{\n                        id\n                        document_id\n                        price\n                        subject\n    \n                        currency_price\n                        executor_name_division\n                        sider_signatures_date\n                        received_from_counteragent_date\n                    }\n                    document_logs{\n                        id\n                        document_id\n                        is_read\n                        user_id\n                    }\n                    document_statuses{\n                        id\n                        name\n                    }\n                    route_id{\n                        id\n                        name\n                        routes\n                        status_in_process\n                        status_cancelled\n                        status_finished\n                    }\n                    files{\n                        id\n                        filename\n                    }\n                    signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                        fio\n                    }\n                    step\n                    route_data\n                }\n            }\n        "])))},subscription:{all:[Object(Va.a)(is||(is=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                date_created\n                date_modified\n                status_id\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(cs||(cs=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(os||(os=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(ls||(ls=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},a=Object(vs.useState)(!1),i=Object(vs.useState)(!1),c=Object(Xs.g)(Object(Na.a)(s.delete))(),o=Object(ha.a)(c,2),l=o[0],r=o[1].loading,d=Object(Xs.h)(s,"all")(),u=d.loading,m=d.data,j=d.refetch;Object(vs.useEffect)((function(){j()}),[]);var b=(m&&null!=m[Object.keys(m)[0]]?m[Object.keys(m)[0]].map((function(e){var s,a,i,c;return{id:e.id,key:e.id,title:e.title,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(s=e.document_statuses)||void 0===s?void 0:s.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route_id:e.route_id.id,route:(null===(a=e.route_id)||void 0===a?void 0:a.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==n}))+1:[],step:e.step,step_count:e.step+" \u0438\u0437 "+(null===(i=e.route_data)||void 0===i?void 0:i.length),document_logs:e.document_logs[e.document_logs.findIndex((function(e){return e.user_id==t.id}))],step_name:(null===(c=e.route_data)||void 0===c?void 0:c.length)>0?e.route_data[e.step-1].positionName:""}})):[]).filter((function(e){return 2==e.status_id})),p=li([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"214px",type:"search",tooltip:!0,sorter:!0},{title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:!0},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:!0},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]);return Object(ua.jsx)(Fc,{data:{dict:p,records:b},loading:u,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(Ec,{visibleModalUpdate:a,visibleModalUpdate2:i,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",selectedRowKeys:e.selectedRowKeys,GQL:s,GQL2:s,UpdateForm:rm,UpdateForm2:dm,update:!0,width:750}),Object(ua.jsx)(Ra.a,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onConfirm:function(){var n={};n[s.exemplar]={id:Number(e.selectedRowKeys[0]),log_username:t.username},l({variables:n})},okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:Object(ua.jsx)(Ea.a,{style:{color:"red"}}),disabled:1!==e.selectedRowKeys.length,children:Object(ua.jsxs)(As.a,{type:"dashed",danger:!0,loading:r,disabled:1!==e.selectedRowKeys.length,children:[Object(ua.jsx)(Pa.a,{}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]},"remove")})],selectedRowKeys:e.selectedRowKeys})},visibleModalUpdate:a,visibleModalUpdate2:i,GQL:s})})),lm=/^\d+$/,rm=gs.a.memo((function(e){var t,n,s=Object(Xs.j)(),a=Object(vs.useState)({log_username:s.username}),i=Object(ha.a)(a,2),c=i[0],o=i[1],l=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(c)}),[c]);var r=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=Object(vs.useState)({step:"0"}),b=Object(ha.a)(j,2),p=b[0],_=b[1];Object(vs.useEffect)((function(){e.initialValues&&(o({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,description:e.initialValues.documents[0].description,price:e.initialValues.documents[0].price,supllier:e.initialValues.documents[0].supllier,subject:e.initialValues.documents[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:c.log_username}),console.log("props.initialValues",e.initialValues),_({step:e.initialValues.documents[0].step}),m(e.initialValues.documents[0].route_data))}),[e.initialValues]);var O=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(c),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){o(Object.assign({},c,Object(xs.a)({},t)))},children:[Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"supllier",label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423",labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:'"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:'"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430',labelCol:{span:24},rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:lm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,placeholder:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(t=e.initialValues)||void 0===t?void 0:t.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(im,{children:Object(ua.jsxs)("a",{"data-fileid":e.id,onClick:O,children:[e.filename," ",Object(ua.jsx)(am.a,{})]})})," ",Object(ua.jsx)("br",{}),Object(ua.jsx)(As.a,{onClick:function(){l(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(n=e.initialValues)||void 0===n?void 0:n.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:p.step-1,className:"steps-form-update",children:u.map((function(e){return Object(ua.jsx)(cm,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),dm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l=Object(Xs.j)(),r=Object(vs.useState)({log_username:l.username}),d=Object(ha.a)(r,2),u=d[0],m=d[1],j=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(u)}),[u]);var b=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),p=Object(ha.a)(b,2),_=p[0],O=p[1],h=Object(vs.useState)({step:"0"}),f=Object(ha.a)(h,2),x=f[0],v=f[1];console.log("PROPS UPDATE DOC 2",e),Object(vs.useEffect)((function(){e.initialValues2&&(m({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,description:e.initialValues2.documents[0].data_agreement_list[0].description,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:u.log_username}),v({step:e.initialValues2.documents[0].step}),O(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var g=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues2)||void 0===t||null===(n=t.documents[0])||void 0===n||null===(s=n.data_agreement_list[0])||void 0===s?void 0:s.subject),V=Object(ha.a)(y,2),N=V[0],w=V[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm",onFinish:function(t){e.onFinish(u),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){m(Object.assign({},u,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(a=e.initialValues2)||void 0===a?void 0:a.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(i=e.initialValues2)||void 0===i?void 0:i.documents[0].position,Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"title",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"subject",label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(Jc.a.Group,{disabled:e.disabled,onChange:function(e){w(e.target.value)},options:[{label:"\u0417\u0430\u043a\u0443\u043f\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",value:"1"},{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438 (\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433) \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c",value:"2"},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u0430\u0440\u0435\u043d\u0434\u0443 (\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435)",value:"3"},{label:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",value:"4"},{label:"\u0424\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432)",value:"5"},{label:"\u041f\u0440\u043e\u0447\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",value:"6"}],className:"form-radio",value:N})}),Object(ua.jsx)(xa.a.Item,{name:"price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"},{pattern:lm,message:"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"currency_price",label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0412 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a"})}),Object(ua.jsx)(xa.a.Item,{name:"executor_name_division",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"})}),Object(ua.jsx)(xa.a.Item,{name:"sider_signatures_date",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(xa.a.Item,{name:"received_from_counteragent_date",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",labelCol:{span:24},className:"form-input-label",rules:[{required:!0,message:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!"}],children:Object(ua.jsx)(va.a,{disabled:e.disabled,className:"form-input",placeholder:"\u0414\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430"})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].files.map((function(e){new Blob(["".concat(e.data_file)],{type:"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"});return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(im,{children:Object(ua.jsxs)("a",{"data-fileid":e.id,onClick:g,children:[e.filename," ",Object(ua.jsx)(am.a,{})]})})," ",Object(ua.jsx)("br",{}),Object(ua.jsx)(As.a,{onClick:function(){j(e)},children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:x.step-1,className:"steps-form-update",children:_.map((function(e){return Object(ua.jsx)(cm,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsxs)(Ks.a,{span:24,children:[Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteForward2,children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleRouteBackward2,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0443"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",onClick:e.handleStatusCancelled,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(ua.jsxs)(Ks.a,{span:24,className:"marginTop",children:[Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(ua.jsx)(Sa.a,{type:"vertical"}),Object(ua.jsx)(As.a,{onClick:e.modalEnableEditHandler,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:[Object(ua.jsx)(va.a.TextArea,{rows:7,name:"comment",onChange:e.HandleCommentOnChange,disabled:e.disabled}),Object(ua.jsx)(As.a,{disabled:e.disabled,onClick:e.HandleComment,className:"marginTop",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))]}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),um=om,mm=Js.a.Content,jm=Object(Ys.withRouter)((function(e){var t=Object(Ys.useLocation)().pathname,n=Object(Xs.j)(),s=Object(vs.useState)("Test"),a=Object(ha.a)(s,2),i=a[0],c=a[1],o=Object(vs.useState)({revised:"0",approved:"0",rejected:"0",onaproval:"0",type:"count"}),l=Object(ha.a)(o,2),r=l[0],d=l[1],u=Object(vs.useState)(null),m=Object(ha.a)(u,2),j=m[0],b=m[1];if(Object(vs.useEffect)((function(){console.log("dc effect",j)}),[j]),Object(vs.useEffect)((function(){console.log("dc2 effect",r),(null===j||void 0===j?void 0:j.setValue)&&"function"==typeof j.setValue&&j.setValue((function(e){var t=Object.assign({},e);return t.revised=e.revised-r.revised,t.approved=e.approved-r.approved,t.rejected=e.rejected-r.rejected,t.onaproval=e.onaproval-r.onaproval,t}))}),[r]),("/document-control/"===t||"/document-control"===t)&&n.documentControl.orders.select)return Object(ua.jsx)(Ys.Redirect,{to:"/document-control/orders"});return Object(ua.jsxs)(Js.a,{children:[Object(ua.jsx)(_a,{title:i,user:n}),Object(ua.jsxs)(Js.a,{children:[Object(ua.jsx)(mc,{setHeaderTitle:c,setCountManager:d,countF:function e(t){console.log("Setter",t),console.log("Setter2",e);b({setValue:function(e){t(e)},stateSetter:t})}}),Object(ua.jsx)(Js.a,{className:"content-layout",children:Object(ua.jsxs)(mm,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(ua.jsx)(Ys.Route,{path:"/document-control/orders",component:Object(Xs.a)(vo)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/reviseduser",component:Object(Xs.a)(bl)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/approveduser",component:Object(Xs.a)(Cl)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/rejecteduser",component:Object(Xs.a)(zl)}),Object(ua.jsx)(Ys.Route,{exact:!0,path:"/document-control/on-approval",render:function(e){return Object(ua.jsx)(Cd,Object(xs.a)(Object(xs.a)({},e),{},{title:"Props through render"}))},setCountManager:d}),Object(ua.jsx)(Ys.Route,{path:"/document-control/on-approval-list",component:Object(Xs.a)(Md)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/approved",component:Object(Xs.a)(sm)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/rejected",component:Object(Xs.a)(um)}),Object(ua.jsx)(Ys.Route,{path:"/document-control/for-execution-inbox",component:Object(Xs.a)(eu)})]})})]})]})})),bm=["title","user"],pm=Js.a.Header,_m=ia.a.useBreakpoint,Om=gs.a.memo((function(e){var t=e.title,n=e.user,s=(Object(Zs.a)(e,bm),_m()),a=Object(Ys.useHistory)(),i=Object(Ys.useLocation)().pathname;return Object(ua.jsx)("div",{children:Object(ua.jsx)(pm,{className:"site-layout-sub-header-background",style:{padding:0},children:Object(ua.jsxs)(Hs.a,{justify:"space-between",align:"middle",style:{paddingLeft:46},children:[Object(ua.jsx)(Ks.a,{flex:"auto",style:{color:"c40c46"},children:Object(ua.jsx)(ca.a,{className:"site-page-header",backIcon:Object(ua.jsx)(ea.a,{style:{color:"white"}}),onBack:"/"===i?null:function(){a.push("/")},title:Object(ua.jsx)("div",{style:{color:"white"},children:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432"})})}),s.sm?Object(ua.jsx)(Ks.a,{flex:"auto",children:Object(ua.jsx)("h1",{style:{color:"white"},children:t})}):Object(ua.jsx)(ua.Fragment,{}),Object(ua.jsx)(Ks.a,{children:Object(ua.jsx)(oa.a,{shape:"square",size:"small",icon:Object(ua.jsx)(ta.a,{})})}),Object(ua.jsx)(Ks.a,{flex:"70px",style:{marginRight:"30px"},children:Object(ua.jsx)(la.b,{direction:"vertical",align:"center",style:{width:"100%"},children:Object(ua.jsx)(ra.a,{overlay:Object(ua.jsxs)(da.a,{children:[n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){a.push("/admin/")},style:{textAlign:"center"},children:[Object(ua.jsx)(na.a,{}),"ADMIN"]}),n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="IUPC-WEB",e.href="/help/admin",e.click()},style:{textAlign:"center"},children:[Object(ua.jsx)(sa.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),n.technicalDepartment&&!n.admin&&Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){var e=document.createElement("a");e.target="_blank",e.title="ZIK-\u0421\u041a\u0423\u0414",e.href="/help/hr",e.click()},style:{textAlign:"center"},children:[Object(ua.jsx)(sa.a,{}),"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"]}),Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){window.location.href="/account/"},style:{textAlign:"center"},children:[Object(ua.jsx)(ta.a,{}),"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"]}),Object(ua.jsxs)(da.a.Item,{danger:!0,onClick:function(){window.location.href="/logout/"},style:{textAlign:"center"},children:[Object(ua.jsx)(aa.a,{}),"\u0412\u044b\u0439\u0442\u0438"]})]}),placement:"bottomCenter",trigger:["click"],children:Object(ua.jsx)("a",{className:"ant-dropdown-link userName",onClick:function(e){return e.preventDefault()},style:{fontSize:21},children:n.username})})})})]})})})})),hm=["GQL","GQL2","GQL3","GQL4","GQL5","UpdateForm","UpdateForm2","UpdateForm3","UpdateForm4","UpdateForm5"],fm=Object(Va.a)(rs||(rs=Object(fa.a)(["\n       mutation insertComment($comment: JSON) {\n        insertComment(comment: $comment) {\n            type\n            message\n        }\n    }\n"]))),xm=Object(Va.a)(ds||(ds=Object(fa.a)(["\n       mutation insertSignature($signature: JSON) {\n        insertSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),vm=Object(Va.a)(us||(us=Object(fa.a)(["\n       mutation deleteSignature($signature: JSON) {\n        deleteSignature(signature: $signature) {\n            type\n            message\n        }\n    }\n"]))),gm=Object(Va.a)(ms||(ms=Object(fa.a)(["\n        mutation deleteFile($document_files :JSON){\n            deleteFile(document_files:$document_files){\n                type\n                message\n            }\n        }"]))),ym=Object(Va.a)(js||(js=Object(fa.a)(["\n        query document_comments($document_comments: JSON) {\n            document_comments(document_comments:$document_comments) {\n                id\n                comment\n                document_id\n                user_id\n                position\n                username\n                fio\n                date\n            }\n        }\n    "]))),Vm=gs.a.memo((function(e){var t=e.GQL,n=e.GQL2,s=e.GQL3,a=e.GQL4,i=e.GQL5,c=e.UpdateForm,o=e.UpdateForm2,l=e.UpdateForm3,r=e.UpdateForm4,d=e.UpdateForm5,u=Object(Zs.a)(e,hm),m=xa.a.useForm(),j=Object(ha.a)(m,1)[0],b=xa.a.useForm(),p=Object(ha.a)(b,1)[0],_=xa.a.useForm(),O=Object(ha.a)(_,1)[0],h=xa.a.useForm(),f=Object(ha.a)(h,1)[0],x=xa.a.useForm(),v=Object(ha.a)(x,1)[0],g=u.visibleModalUpdate?u.visibleModalUpdate:[],y=Object(ha.a)(g,2),V=y[0],N=y[1],w=u.visibleModalUpdate2?u.visibleModalUpdate2:[],k=Object(ha.a)(w,2),C=k[0],S=k[1],T=u.visibleModalUpdate3?u.visibleModalUpdate3:[],I=Object(ha.a)(T,2),E=I[0],P=I[1],F=u.visibleModalUpdate4?u.visibleModalUpdate4:[],R=Object(ha.a)(F,2),D=R[0],L=R[1],U=u.visibleModalUpdate5?u.visibleModalUpdate5:[],$=Object(ha.a)(U,2),M=$[0],J=$[1],z=Object(vs.useState)(!0),K=Object(ha.a)(z,2),q=K[0],A=K[1],H=Object(Xs.j)(),B=function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)},G=function(){A(!1)};Ja.a.confirm;var Q={};Q[t.table]=t.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var W={};W[n.table]=n.table?{global:{id:"= ".concat(u.selectedRowKeys[0])}}:{};var Y={};Y[(null===s||void 0===s?void 0:s.table)?s.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var X={};X[(null===a||void 0===a?void 0:a.table)?a.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var Z={};Z[(null===i||void 0===i?void 0:i.table)?i.table:{}]={global:{id:"= ".concat(u.selectedRowKeys[0])}};var ee=Object(Xs.h)(t,"one",{variables1:Q})(),te=(ee.loading,ee.data),ne=ee.refetch,se=Object(Xs.h)(n,"one",{variables2:W})(),ae=(se.loading,se.data),ie=se.refetch,ce=Object(Xs.h)(s,"one",{variables3:Y})(),oe=(ce.loading,ce.data),le=ce.refetch,re=Object(Xs.h)(a,"one",{variables4:X})(),de=(re.loading,re.data),ue=re.refetch,me=Object(Xs.h)(i,"one",{variables5:Z})(),je=(me.loading,me.data),be=me.refetch;Object(vs.useEffect)((function(){te&&j.resetFields()}),[te]),Object(vs.useEffect)((function(){ae&&p.resetFields()}),[ae]),Object(vs.useEffect)((function(){oe&&O.resetFields()}),[oe]),Object(vs.useEffect)((function(){de&&f.resetFields()}),[de]),Object(vs.useEffect)((function(){je&&v.resetFields()}),[je]),Object(vs.useEffect)((function(){V&&ne(Q)}),[V]),Object(vs.useEffect)((function(){C&&ie(W)}),[C]),Object(vs.useEffect)((function(){E&&le(Y)}),[E]),Object(vs.useEffect)((function(){D&&ue(X)}),[D]),Object(vs.useEffect)((function(){M&&be(Z)}),[M]);var pe=Object(Xs.g)(Object(Na.a)(t.update),(function(){N(!1),S(!1),P(!1),L(!1),J(!1),A(!0)}))(),_e=Object(ha.a)(pe,2),Oe=_e[0],he=(_e[1].loading,Object(vs.useState)()),fe=Object(ha.a)(he,2),xe=fe[0],ve=fe[1],ge=(null===u||void 0===u?void 0:u.selectedRowKeys[0])?{variables:{document_comments:{global:{document_id:"= ".concat(u.selectedRowKeys[0]),ORDER_BY:["date"]}}}}:{},ye=Object(Yi.a)(ym,ge),Ve=(ye.loading,ye.data),Ne=ye.refetch;Object(vs.useEffect)((function(){V&&Ne(ge)}),[V]);var we=Ve&&null!=Ve[Object.keys(Ve)[0]]?Ve[Object.keys(Ve)[0]].map((function(e){return{id:e.id,key:e.id,comment:e.comment?e.comment:"",position:e.position?e.position:"",document_id:e.document_id?e.document_id:"",user_id:e.user_id?e.user_id:"",username:e.username,fio:e.fio,date:e.date?e.date:""}})):[],ke=Object(Na.a)(fm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),Ce=Object(ha.a)(ke,2),Se=Ce[0],Te=Ce[1],Ie=(Te.loading,Te.error,function(e){Se({variables:{comment:{user_id:H.id,username:H.username,fio:H.fio,document_id:u.selectedRowKeys[0],position:H.position_names[0],comment:xe}}}),Ne(ge),e.resetFields(["comments"])}),Ee=function(e,t){e.target.value.length>0&&ve(e.target.value)},Pe=Object(vs.useState)(),Fe=Object(ha.a)(Pe,2),Re=Fe[0],De=Fe[1],Le=Object(vs.useState)(),Ue=Object(ha.a)(Le,2),$e=Ue[0],Me=Ue[1],Je=Object(vs.useState)(),ze=Object(ha.a)(Je,2),Ke=ze[0],qe=ze[1],Ae=Object(Na.a)(xm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),He=Object(ha.a)(Ae,2),Be=He[0],Ge=He[1],Qe=(Ge.loading,Ge.error,Object(Na.a)(vm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}})),We=Object(ha.a)(Qe,2),Ye=(We[0],We[1]),Xe=(Ye.loading,Ye.error,function(){yc.b.info("\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.",10)}),Ze=function(){Me(7)},et=function(){Me(2)};console.log("route_data",Ke),console.log("data",te);var tt=function(e){console.log("CLIIIICK",e),at({variables:{document_files:{id:e.id}}})},nt=Object(Na.a)(gm,{onCompleted:function(e){return console.log("Data from mutation",e)},onError:function(e){return console.error("Error creating a post",e)}}),st=Object(ha.a)(nt,2),at=st[0],it=st[1];it.loading,it.error;return Object(ua.jsxs)(ua.Fragment,{children:[Object(ua.jsxs)(As.a,{type:"primary",disabled:2!==u.selectedRowKeys.length,onClick:function(){N(!0)},children:[Object(ua.jsx)(Aa.a,{}),"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"]}),Object(ua.jsx)(Ja.a,{title:u.title,visible:V,centered:!0,width:900,onOk:function(){j.submit()},onCancel:function(){N(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(c,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward:function(){var e=te.documents[0].route_data.length,t=te.documents[0].step;if(qe(te.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==te.documents[0].signatures.filter((function(e){return e.document_id==te.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward:function(){var e=te.documents[0].step;qe(te.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove:function(){var e=te.documents[0].step;qe(te.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,HandleDeleteFile:tt,modalCancelHandler:B,modalEnableEditHandler:G,form:j,onFinish:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=10,s[t.exemplar]=e,Oe({variables:s})},initialValues:te,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:C,centered:!0,width:900,onOk:function(){p.submit()},onCancel:function(){S(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(o,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward2:function(){var e=ae.documents[0].route_data.length,t=ae.documents[0].step;if(qe(ae.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==ae.documents[0].signatures.filter((function(e){return e.document_id==ae.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward2:function(){var e=ae.documents[0].step;qe(ae.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},handleRouteReturnToSender:Ze,HandleDeleteFile:tt,handleRouteFromUserEditToApprove2:function(){var e=ae.documents[0].step;qe(ae.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form2:p,onFinish2:function(e){var t,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=24,s[n.exemplar]=e,Oe({variables:s})},initialValues2:ae,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:E,centered:!0,width:900,onOk:function(){O.submit()},onCancel:function(){P(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(l,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward3:function(){var e=oe.documents[0].route_data.length,t=oe.documents[0].step;if(qe(oe.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==oe.documents[0].signatures.filter((function(e){return e.document_id==oe.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward3:function(){var e=oe.documents[0].step;qe(oe.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove3:function(){var e=oe.documents[0].step;qe(oe.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form3:O,onFinish3:function(e){var t,n={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(t=Ke[0])||void 0===t?void 0:t.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=26,n[s.exemplar]=e,Oe({variables:n})},initialValues3:oe,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:D,centered:!0,width:900,onOk:function(){f.submit()},onCancel:function(){L(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(r,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward4:function(){var e=de.documents[0].route_data.length,t=de.documents[0].step;if(qe(de.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==de.documents[0].signatures.filter((function(e){return e.document_id==de.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward4:function(){var e=de.documents[0].step;qe(de.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&(De(e),Xe())},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove4:function(){var e=de.documents[0].step;qe(de.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form4:f,onFinish4:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=27,s[t.exemplar]=e,Oe({variables:s})},initialValues4:de,disabled:q})}),Object(ua.jsx)(Ja.a,{title:u.title,visible:M,centered:!0,width:900,onOk:function(){v.submit()},onCancel:function(){J(!1),A(!0)},maskClosable:!1,destroyOnClose:!0,footer:null,children:Object(ua.jsx)(d,{commentsList:we,HandleComment:Ie,HandleCommentOnChange:Ee,handleRouteForward5:function(){var e=je.documents[0].route_data.length,t=je.documents[0].step;if(qe(je.documents[0].route_data.filter((function(e){return e.step==t+1}))),t<e)De(t+1),5!=$e&&Me(5),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}});else if(t=e){De(t),Me(4),0==je.documents[0].signatures.filter((function(e){return e.document_id==je.documents[0].id&&e.user_id==H.id})).filter((function(e){return e.user_id==H.id})).length&&Be({variables:{signature:{user_id:H.id,username:H.username,position:H.position_names[0],fio:H.fio,document_id:u.selectedRowKeys[0]}}})}},handleRouteBackward5:function(){var e=je.documents[0].step;qe(je.documents[0].route_data.filter((function(t){return t.step==e-1}))),e>1?De(e-1):(e=1)&&De(e)},HandleDeleteFile:tt,handleRouteReturnToSender:Ze,handleRouteFromUserEditToApprove5:function(){var e=je.documents[0].step;qe(je.documents[0].route_data.filter((function(t){return t.step==e}))),Me(5)},handleStatusCancelled:et,modalCancelHandler:B,modalEnableEditHandler:G,form5:v,onFinish5:function(e){var n,s={};console.log("values on finish",e),Re&&(e.step=Re),$e&&(e.status_id=$e),e.is_read=!1,Ke&&(null===(n=Ke[0])||void 0===n?void 0:n.positionId)&&(e.positionId=Ke[0].positionId),e.route_id=29,s[t.exemplar]=e,Oe({variables:s})},initialValues5:je,disabled:q})})]})})),Nm=gs.a.memo((function(e){var t=Object(vs.useState)([]),n=Object(ha.a)(t,2),s=n[0],a=n[1],i=[];return e.loading||(i=e.data.records.map((function(e){return e.id}))),Object(vs.useEffect)((function(){a(s.filter((function(e){for(var t=0;t<i.length;t++)if(i[t]==e)return!0;return!1})))}),[e.data]),Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsx)(Xa.a,{className:"sd-tables-row-hover",loading:e.loading,style:{minHeight:168},columns:e.data.dict,dataSource:e.data.records,scroll:{y:"calc(100vh - 231px)",minX:500},size:"small",title:e.title?function(){return e.title({selectedRowKeys:s})}:null,bordered:e.bordered,onChange:e.onChange,onRow:function(t,n){return{onClick:function(e){a([t.key,t.route_id]),console.log("SelectedRowKeys",s)},onDoubleClick:function(n){10==t.route_id&&e.visibleModalUpdate[1](!0),24==t.route_id&&e.visibleModalUpdate2[1](!0),26==t.route_id&&e.visibleModalUpdate3[1](!0),27==t.route_id&&e.visibleModalUpdate4[1](!0),29==t.route_id&&e.visibleModalUpdate5[1](!0)}}},pagination:{pageSize:50,showSizeChanger:!1},rowClassName:function(e,t){var n="";return 0==e.is_read&&(n+="is_read_false"),e.key===s[0]?"ant-table-row ant-table-row-level-0 statusSelected":n}})})})),wm=function(e,t){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a="",i="",c=function(e,t,n){t(),a=e[0],i=n},o=function(e){e(),a=""};return{filterDropdown:function(s){var a=s.setSelectedKeys,i=s.selectedKeys,l=s.confirm,r=s.clearFilters;return Object(ua.jsxs)("div",{style:{padding:8},children:[Object(ua.jsx)(va.a,{ref:function(e){n=e},placeholder:t,value:i[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c(i,l,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(ua.jsxs)(la.b,{children:[Object(ua.jsx)(As.a,{type:"primary",onClick:function(){return c(i,l,e)},icon:Object(ua.jsx)(ti.a,{}),size:"small",style:{width:90},children:"\u041d\u0430\u0439\u0442\u0438"}),Object(ua.jsx)(As.a,{onClick:function(){return o(r)},size:"small",style:{width:90},children:"\u0421\u0431\u0440\u043e\u0441"})]})]})},filterIcon:function(e){return Object(ua.jsx)(ti.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return n.select()}),100)},render:function(t,n){return s(i===e?Object(ua.jsx)(si.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a],autoEscape:!0,textToHighlight:t?t.toString():""}):t,n)}}},km=["title","dataIndex","width","render","filters","onFilter","type","tooltip","children"],Cm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ua.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})}},Sm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return Object(ua.jsx)(qs.a,{title:t,color:"grey",children:Object(ua.jsx)("div",{style:{whiteSpace:"pre",overflow:"hidden",minWidth:e-16,textOverflow:"ellipsis"},children:t})})}},Tm=function(e){return e.map((function(e){return function(e){var t=e.title,n=e.dataIndex,s=e.width,a=e.render,i=void 0===a?function(e){return e}:a,c=e.filters,o=e.onFilter,l=e.type,r=e.tooltip,d=e.children,u=Object(Zs.a)(e,km);if(d)return Object(xs.a)({title:t,dataIndex:n,width:s,render:i,filters:c,onFilter:o,type:l,tooltip:r,children:d},u);var m=Cm;return r&&(m=Sm),Object(xs.a)(Object(xs.a)({title:Cm(s)(t),dataIndex:n,width:s,filters:c,onFilter:o},u),function(e){switch(e){case"search":return wm(n,t,(function(e,t){return m(s)(i(e,t))}));case"filter":return{};default:return{render:function(e,t){return m(s)(i(e,t))}}}}(l))}(e)}))},Im=(n(94),n(237)),Em={exemplar:"document",table:"documents",options:{all:{variables:{},fetchPolicy:"cache-only"},one:{fetchPolicy:"standby"}},select:{all:Object(Va.a)(bs||(bs=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                step\n                route_data\n            }\n        }"]))),one:Object(Va.a)(ps||(ps=Object(fa.a)(["\n        query documents ($documents: JSON) {\n            documents(documents:$documents) {\n                id\n                title\n                user_id\n                username\n                position\n                fio\n                price\n                supllier\n                subject\n                date_created\n                date_modified\n                status_id\n                reason\n                data_one{\n                    id\n                    document_id\n                    price\n                    subject\n                    supllier\n                }\n                data_custom{\n                    id\n                    document_id\n                    subject\n                    remark\n                }\n                data_agreement_list{\n                    id\n                    document_id\n                    price\n                    subject\n\n                    currency_price\n                    executor_name_division\n                    sider_signatures_date\n                    received_from_counteragent_date\n                }\n                data_agreement_list_production{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                data_agreement_list_internal_needs{\n                    id\n                    document_id\n                    price\n                    subject\n                    currency\n                    executor_name_division\n                    executor_phone_number\n                    counteragent_contacts\n                }\n                document_logs{\n                    id\n                    document_id\n                    is_read\n                    user_id\n                }\n                document_statuses{\n                    id\n                    name\n                }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                files{\n                    id\n                    filename\n                }\n                signatures{\n                    id\n                    document_id\n                    user_id\n                    username\n                    date_signature\n                    position\n                    fio\n                }\n                step\n                route_data\n            }\n        }\n        "])))},subscription:{all:[Object(Va.a)(_s||(_s=Object(fa.a)(["\n        subscription documents ($documents: JSON){\n            documents(documents: $documents){\n                id\n                title\n                user_id\n                username\n                fio\n                position\n                date_created\n                reason\n                date_modified\n                status_id\n                document_statuses{\n                        id\n                        name\n                    }\n                route_id{\n                    id\n                    name\n                    routes\n                    status_in_process\n                    status_cancelled\n                    status_finished\n                }\n                signatures{\n                        id\n                        document_id\n                        user_id\n                        username\n                        date_signature\n                        position\n                    }\n                step\n                route_data\n            }\n        }"])))]},insert:Object(Va.a)(Os||(Os=Object(fa.a)(["\n       mutation insertDocument($document: JSON) {\n        insertDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),update:Object(Va.a)(hs||(hs=Object(fa.a)(["\n        mutation updateDocument($document: JSON) {\n        updateDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "]))),delete:Object(Va.a)(fs||(fs=Object(fa.a)(["\n        mutation deleteDocument($document: JSON) {\n        deleteDocument(document: $document) {\n            type\n            message\n        }\n    }\n    "])))},Pm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j,b=Object(Xs.j)(),p=(co.a.Title,co.a.Link),_=_c.a.Step,O=Object(vs.useState)({log_username:b.username}),h=Object(ha.a)(O,2),f=h[0],x=h[1],v=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(b.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form.setFieldsValue(f)}),[f]);var g=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),y=Object(ha.a)(g,2),V=y[0],N=y[1],w=Object(vs.useState)({step:"0"}),k=Object(ha.a)(w,2),C=k[0],S=k[1];console.log("PROPS UPDATE DOC",e),Object(vs.useEffect)((function(){e.initialValues&&(x({id:e.initialValues.documents[0].id,title:e.initialValues.documents[0].title,position:e.initialValues.documents[0].position,username:e.initialValues.documents[0].username,fio:e.initialValues.documents[0].fio,price:e.initialValues.documents[0].data_one[0].price,supllier:e.initialValues.documents[0].data_one[0].supllier,subject:e.initialValues.documents[0].data_one[0].subject,date_created:e.initialValues.documents[0].date_created,date_modified:e.initialValues.documents[0].date_modified,route_id:e.initialValues.documents[0].route_id.id,status_in_process:e.initialValues.documents[0].route_id.status_in_process,status_cancelled:e.initialValues.documents[0].route_id.status_cancelled,status_finished:e.initialValues.documents[0].route_id.status_finished,status_id:e.initialValues.documents[0].status_id,reason:e.initialValues.documents[0].reason,route:e.initialValues.documents[0].route_data,step:e.initialValues.documents[0].step,comments:e.initialValues.documents[0].comments,signatures:e.initialValues.documents[0].signatures,files:e.initialValues.documents[0].files,document_logs:e.initialValues.documents[0].document_logs,log_username:f.log_username}),console.log("props.initialValues",e.initialValues),S({step:e.initialValues.documents[0].step}),N(e.initialValues.documents[0].route_data))}),[e.initialValues]);var T=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),E=Object(ha.a)(I,2);E[0],E[1];return Object(ua.jsxs)(xa.a,{form:e.form,name:"DocumentsForm",onFinish:function(t){e.onFinish(f),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){x(Object.assign({},f,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(s=e.initialValues)||void 0===s?void 0:s.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(a=e.initialValues)||void 0===a?void 0:a.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u0422\u0420\u0423: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.supllier})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: "})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:f.price})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(i=e.initialValues)||void 0===i||null===(c=i.documents[0])||void 0===c||null===(o=c.files)||void 0===o?void 0:o.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(p,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:T,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){v(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(l=e.initialValues)||void 0===l||null===(r=l.documents[0])||void 0===r||null===(d=r.signatures)||void 0===d?void 0:d.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:C.step-1,className:"steps-form-update",children:V.map((function(e){return Object(ua.jsx)(_,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(Sa.a,{type:"horizontal"})}),Object(ua.jsx)(Ks.a,{span:24,className:"marginTop",children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(u=e.initialValues)||void 0===u||null===(m=u.documents[0])||void 0===m||null===(j=m.reason)||void 0===j?void 0:j.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Fm=Pm,Rm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=_c.a.Step,_=Object(vs.useState)({log_username:j.username}),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form2.setFieldsValue(h)}),[h]);var v=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ha.a)(v,2),y=g[0],V=g[1],N=Object(vs.useState)({step:"0"}),w=Object(ha.a)(N,2),k=w[0],C=w[1];Object(vs.useEffect)((function(){e.initialValues2&&(f({id:e.initialValues2.documents[0].id,title:e.initialValues2.documents[0].title,position:e.initialValues2.documents[0].position,username:e.initialValues2.documents[0].username,fio:e.initialValues2.documents[0].fio,price:e.initialValues2.documents[0].data_agreement_list[0].price,subject:e.initialValues2.documents[0].data_agreement_list[0].subject,currency_price:e.initialValues2.documents[0].data_agreement_list[0].currency_price,executor_name_division:e.initialValues2.documents[0].data_agreement_list[0].executor_name_division,sider_signatures_date:e.initialValues2.documents[0].data_agreement_list[0].sider_signatures_date,received_from_counteragent_date:e.initialValues2.documents[0].data_agreement_list[0].received_from_counteragent_date,reason:e.initialValues2.documents[0].reason,date_created:e.initialValues2.documents[0].date_created,date_modified:e.initialValues2.documents[0].date_modified,route_id:e.initialValues2.documents[0].route_id.id,status_in_process:e.initialValues2.documents[0].route_id.status_in_process,status_cancelled:e.initialValues2.documents[0].route_id.status_cancelled,status_finished:e.initialValues2.documents[0].route_id.status_finished,status_id:e.initialValues2.documents[0].status_id,route:e.initialValues2.documents[0].route_data,step:e.initialValues2.documents[0].step,comments:e.initialValues2.documents[0].comments,signatures:e.initialValues2.documents[0].signatures,files:e.initialValues2.documents[0].files,document_logs:e.initialValues2.documents[0].document_logs,log_username:h.log_username}),C({step:e.initialValues2.documents[0].step}),V(e.initialValues2.documents[0].route_data))}),[e.initialValues2]);var S=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ha.a)(T,2),E=(I[0],I[1],Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues2)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list[0])||void 0===i?void 0:i.subject)),P=Object(ha.a)(E,2);P[0],P[1];return Object(ua.jsxs)(xa.a,{form:e.form2,name:"DocumentsForm2",onFinish:function(t){e.onFinish2(h),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(xs.a)({},t))),console.log("UPDATE2 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues2)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues2)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0446\u0435\u043d\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u0432 \u0442\u0435\u043d\u0433\u0435, \u043f\u043e \u043a\u0443\u0440\u0441\u0443 \u041d\u0411 \u0420\u041a:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.currency_price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0430\u043c\u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d, \u0434\u0430\u0442\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.sider_signatures_date})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430, \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.received_from_counteragent_date})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues2)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues2)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ua.jsx)(p,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(Sa.a,{type:"horizontal"})}),Object(ua.jsx)(Ks.a,{span:24,className:"marginTop",children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues2)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Dm=Rm,Lm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Object(vs.useState)({log_username:j.username})),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form3.setFieldsValue(O),console.log("state3 form",O)}),[O]);var x=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ha.a)(x,2),g=(v[0],v[1]),y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=(V[0],V[1]);Object(vs.useEffect)((function(){e.initialValues3&&(h({id:e.initialValues3.documents[0].id,title:e.initialValues3.documents[0].title,position:e.initialValues3.documents[0].position,username:e.initialValues3.documents[0].username,fio:e.initialValues3.documents[0].fio,price:e.initialValues3.documents[0].data_agreement_list_production[0].price,subject:e.initialValues3.documents[0].data_agreement_list_production[0].subject,currency:e.initialValues3.documents[0].data_agreement_list_production[0].currency,executor_name_division:e.initialValues3.documents[0].data_agreement_list_production[0].executor_name_division,executor_phone_number:e.initialValues3.documents[0].data_agreement_list_production[0].executor_phone_number,counteragent_contacts:e.initialValues3.documents[0].data_agreement_list_production[0].counteragent_contacts,date_created:e.initialValues3.documents[0].date_created,date_modified:e.initialValues3.documents[0].date_modified,route_id:e.initialValues3.documents[0].route_id.id,status_in_process:e.initialValues3.documents[0].route_id.status_in_process,status_cancelled:e.initialValues3.documents[0].route_id.status_cancelled,status_finished:e.initialValues3.documents[0].route_id.status_finished,status_id:e.initialValues3.documents[0].status_id,route:e.initialValues3.documents[0].route_data,step:e.initialValues3.documents[0].step,comments:e.initialValues3.documents[0].comments,signatures:e.initialValues3.documents[0].signatures,files:e.initialValues3.documents[0].files,log_username:O.log_username}),N({step:e.initialValues3.documents[0].step}),g(e.initialValues3.documents[0].route_data))}),[e.initialValues3]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues3)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=(C[0],C[1],Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues3)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_production[0])||void 0===i?void 0:i.subject)),T=Object(ha.a)(S,2);T[0],T[1];return Object(ua.jsxs)(xa.a,{form:e.form3,name:"DocumentsForm3",onFinish:function(t){e.onFinish3(O),console.log("+++++++++++++++++++++++",t)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(xs.a)({},t))),console.log("UPDATE3 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues3)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues3)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues3)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues3)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(Sa.a,{type:"horizontal"})}),Object(ua.jsx)(Ks.a,{span:24,className:"marginTop",children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues3)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Um=Lm,$m=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=(_c.a.Step,Object(vs.useState)({log_username:j.username})),_=Object(ha.a)(p,2),O=_[0],h=_[1],f=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form4.setFieldsValue(O)}),[O]);var x=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),v=Object(ha.a)(x,2),g=(v[0],v[1]),y=Object(vs.useState)({step:"0"}),V=Object(ha.a)(y,2),N=(V[0],V[1]);Object(vs.useEffect)((function(){e.initialValues4&&(h({id:e.initialValues4.documents[0].id,title:e.initialValues4.documents[0].title,position:e.initialValues4.documents[0].position,username:e.initialValues4.documents[0].username,fio:e.initialValues4.documents[0].fio,price:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].price,subject:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].subject,currency:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].currency,executor_name_division:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_name_division,executor_phone_number:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].executor_phone_number,counteragent_contacts:e.initialValues4.documents[0].data_agreement_list_internal_needs[0].counteragent_contacts,date_created:e.initialValues4.documents[0].date_created,date_modified:e.initialValues4.documents[0].date_modified,route_id:e.initialValues4.documents[0].route_id.id,status_in_process:e.initialValues4.documents[0].route_id.status_in_process,status_cancelled:e.initialValues4.documents[0].route_id.status_cancelled,status_finished:e.initialValues4.documents[0].route_id.status_finished,status_id:e.initialValues4.documents[0].status_id,route:e.initialValues4.documents[0].route_data,step:e.initialValues4.documents[0].step,comments:e.initialValues4.documents[0].comments,signatures:e.initialValues4.documents[0].signatures,files:e.initialValues4.documents[0].files,log_username:O.log_username}),N({step:e.initialValues4.documents[0].step}),g(e.initialValues4.documents[0].route_data))}),[e.initialValues4]);var w=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues4)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),C=Object(ha.a)(k,2),S=(C[0],C[1],Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues4)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_agreement_list_internal_needs[0])||void 0===i?void 0:i.subject)),T=Object(ha.a)(S,2);T[0],T[1];return Object(ua.jsxs)(xa.a,{form:e.form4,name:"DocumentsForm4",onFinish:function(t){e.onFinish4(O)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){h(Object.assign({},O,Object(xs.a)({},t))),console.log("UPDATE4 values",t)},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues4)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues4)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.subject})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.price})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0412\u0430\u043b\u044e\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.currency})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_name_division})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.executor_phone_number})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:O.counteragent_contacts})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues4)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:w,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){f(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:null===e||void 0===e||null===(r=e.initialValues4)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})}))}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(Sa.a,{type:"horizontal"})}),Object(ua.jsx)(Ks.a,{span:24,className:"marginTop",children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues4)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),Mm=$m,Jm=gs.a.memo((function(e){var t,n,s,a,i,c,o,l,r,d,u,m,j=Object(Xs.j)(),b=(co.a.Title,co.a.Link),p=_c.a.Step,_=Object(vs.useState)({log_username:j.username}),O=Object(ha.a)(_,2),h=O[0],f=O[1],x=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PROPS",t.id),e.next=3,fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Number(j.id),item:t.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:void 0!=(s=e.sent)&&console.log("RESULT",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(vs.useEffect)((function(){e.form5.setFieldsValue(h)}),[h]);var v=Object(vs.useState)([{positionName:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d."}]),g=Object(ha.a)(v,2),y=g[0],V=g[1],N=Object(vs.useState)({step:"0"}),w=Object(ha.a)(N,2),k=w[0],C=w[1];Object(vs.useEffect)((function(){e.initialValues5&&(f({id:e.initialValues5.documents[0].id,title:e.initialValues5.documents[0].title,position:e.initialValues5.documents[0].position,username:e.initialValues5.documents[0].username,fio:e.initialValues5.documents[0].fio,subject:e.initialValues5.documents[0].data_custom[0].subject,remark:e.initialValues5.documents[0].data_custom[0].remark,date_created:e.initialValues5.documents[0].date_created,date_modified:e.initialValues5.documents[0].date_modified,route_id:e.initialValues5.documents[0].route_id.id,status_in_process:e.initialValues5.documents[0].route_id.status_in_process,status_cancelled:e.initialValues5.documents[0].route_id.status_cancelled,status_finished:e.initialValues5.documents[0].route_id.status_finished,status_id:e.initialValues5.documents[0].status_id,route:e.initialValues5.documents[0].route_data,step:e.initialValues5.documents[0].step,comments:e.initialValues5.documents[0].comments,signatures:e.initialValues5.documents[0].signatures,files:e.initialValues5.documents[0].files,log_username:h.log_username}),C({step:e.initialValues5.documents[0].step}),V(e.initialValues5.documents[0].route_data),console.log("----------------------------------",e))}),[e.initialValues5]);var S=function(){var e=Object(pc.a)(bc.a.mark((function e(t){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.dataset.fileid,e.next=3,fetch("/get-file",{method:"POST",body:JSON.stringify({id:t.target.dataset.fileid}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.result,n=document.createElement("a");n.href=t.data_file,n.download=t.filename,n.click()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(vs.useState)(null===e||void 0===e||null===(t=e.initialValues5)||void 0===t||null===(n=t.documents[0])||void 0===n?void 0:n.reason),I=Object(ha.a)(T,2),E=(I[0],I[1],Object(vs.useState)(null===e||void 0===e||null===(s=e.initialValues5)||void 0===s||null===(a=s.documents[0])||void 0===a||null===(i=a.data_custom[0])||void 0===i?void 0:i.subject)),P=Object(ha.a)(E,2);P[0],P[1];return Object(ua.jsxs)(xa.a,{form:e.form5,name:"DocumentsForm5",onFinish:function(t){e.onFinish5(h)},scrollToFirstError:!0,autoComplete:"off",onValuesChange:function(e,t){f(Object.assign({},h,Object(xs.a)({},t)))},children:[Object(ua.jsx)("b",{children:"\u041e\u0442:"})," ",null===e||void 0===e||null===(c=e.initialValues5)||void 0===c?void 0:c.documents[0].fio," ",Object(ua.jsx)("br",{}),Object(ua.jsx)("b",{children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:"})," ",null===e||void 0===e||null===(o=e.initialValues5)||void 0===o?void 0:o.documents[0].position,Object(ua.jsxs)("h4",{children:[Object(ua.jsx)("b",{children:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:"})," \u0414\u0440\u0443\u0433\u043e\u0439"]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.title})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.remark})]})}),Object(ua.jsx)("div",{className:"form-item-wrap",children:Object(ua.jsxs)(Hs.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(ua.jsx)(Ks.a,{span:12,children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"})," ",Object(ua.jsx)(Ks.a,{span:12,children:h.subject})]})}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{name:"files",className:"font-form-header",label:"\u0424\u0430\u0439\u043b\u044b",labelCol:{span:24},children:null===e||void 0===e||null===(l=e.initialValues5)||void 0===l?void 0:l.documents[0].files.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"document-view-wrap",children:[Object(ua.jsx)(b,{children:Object(ua.jsx)("a",{"data-fileid":e.id,onClick:S,children:e.filename})})," ",Object(ua.jsx)(As.a,{onClick:function(){x(e)},shape:"circle",icon:Object(ua.jsx)(Aa.a,{})})," ",Object(ua.jsx)("br",{})]})})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsxs)(xa.a.Item,{className:"font-form-header",name:"signatures",label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0438",labelCol:{span:24},children:[null===e||void 0===e||null===(r=e.initialValues5)||void 0===r?void 0:r.documents[0].signatures.map((function(e){return Object(ua.jsx)(ua.Fragment,{children:Object(ua.jsxs)("div",{className:"signature-view-wrap",children:[Object(ua.jsx)("span",{className:"signature-view-position",children:e.position}),Object(ua.jsx)("span",{className:"signature-view-username",children:e.fio}),Object(ua.jsx)("span",{className:"signature-view-date",children:Object(Xs.c)(e.date_signature)})]})})})),Object(ua.jsx)(_c.a,{labelPlacement:"vertical",size:"small",current:k.step-1,className:"steps-form-update",children:y.map((function(e){return Object(ua.jsx)(p,{title:e.positionName})}))})]}),Object(ua.jsxs)(Hs.a,{children:[Object(ua.jsx)(Ks.a,{span:24,children:Object(ua.jsx)(Sa.a,{type:"horizontal"})}),Object(ua.jsx)(Ks.a,{span:24,className:"marginTop",children:Object(ua.jsx)(As.a,{onClick:e.modalCancelHandler,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"reason",label:"\u0417\u0430\u043c\u0435\u0447\u0430\u043d\u0438\u0435",labelCol:{span:24}}),Object(ua.jsx)("div",{children:null===e||void 0===e||null===(d=e.initialValues5)||void 0===d||null===(u=d.documents[0])||void 0===u||null===(m=u.reason)||void 0===m?void 0:m.map((function(e){return Object(ua.jsxs)("span",{children:[Object(ua.jsx)("span",{children:e.text+"-"+e.userPosition}),Object(ua.jsx)("br",{})]})}))}),Object(ua.jsx)(Sa.a,{type:"horizontal"}),Object(ua.jsx)(xa.a.Item,{className:"font-form-header",name:"comments",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",labelCol:{span:24},children:e.commentsList.map((function(e){return Object(ua.jsx)("div",{className:"comments",children:Object(ua.jsxs)("li",{className:"comment-item",children:[Object(ua.jsx)("span",{className:"user-position-comment",children:e.position}),Object(ua.jsxs)("span",{className:"user-name-comment",children:[" (",e.fio,") "]}),Object(ua.jsx)("span",{className:"user-date-time-comment",children:e.date}),Object(ua.jsx)("br",{}),Object(ua.jsx)("span",{className:"comment",children:e.comment})]})})}))}),Object(ua.jsx)(xa.a.Item,{name:"date_created",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"route_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"status_id",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"step",hidden:!0}),Object(ua.jsx)(xa.a.Item,{name:"log_username",hidden:!0})]})})),zm=Jm,Km=gi.a.Option,qm=gs.a.memo((function(e){var t=Object(Xs.j)().positions.toString(),n=(ar.a.RangePicker,xa.a.useForm(),Object(vs.useState)(!1)),s=Object(vs.useState)(!1),a=Object(vs.useState)(!1),i=Object(vs.useState)(!1),c=Object(vs.useState)(!1),o=Object(vs.useState)(),l=Object(ha.a)(o,2),r=l[0],d=l[1],u=Object(vs.useState)([]),m=Object(ha.a)(u,2),j=(m[0],m[1]),b=Object(vs.useState)(),p=Object(ha.a)(b,2),_=p[0],O=p[1],h=Object(Xs.h)(Em,"all",{variables:r})(),f=h.loading,x=h.data,v=h.refetch,g=x&&null!=x[Object.keys(x)[0]]?x[Object.keys(x)[0]].map((function(e){var n,s,a,i,c=0,o="-",l="-";return 0!=e.data_one.length&&(c=e.data_one[0].price,o=e.title,l=e.data_one[0].supllier),0!=e.data_agreement_list.length&&(c=e.data_agreement_list[0].price,l=e.title),0!=e.data_agreement_list_production.length&&(c=e.data_agreement_list_production[0].price,l=e.title),0!=e.data_agreement_list_internal_needs.length&&(c=e.data_agreement_list_internal_needs[0].price,l=e.title),0!=e.data_custom.length&&(o=e.title),{id:e.id,key:e.id,title:o,user_info:e.fio+" "+e.position,date_created:e.date_created,date_modified:e.date_modified,status_id:e.status_id,status:(null===(n=e.document_statuses)||void 0===n?void 0:n.name)?e.document_statuses.name:"\u0411\u0435\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430",route:(null===(s=e.route_id)||void 0===s?void 0:s.name)?e.route_id.name:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d",route_data:e.route_data,route_step:e.route_data?e.route_data.findIndex((function(e){return e.positionId==t}))+1:[],step:e.step,route_id:e.route_id.id,step_count:e.step+" \u0438\u0437 "+(null===(a=e.route_data)||void 0===a?void 0:a.length),step_name:(null===(i=e.route_data)||void 0===i?void 0:i.length)>0?e.route_data[e.step-1].positionName:"",price:c,counteragent_name:l}})):[],y=Object(vs.useState)(),V=Object(ha.a)(y,2),N=V[0],w=V[1],k=function(){var e=Object(pc.a)(bc.a.mark((function e(t){var n,s;return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("values",t),void 0==t.dateFrom&&void 0==t.dateTo?console.log("undefined"):void 0!=t.dateFrom&&void 0!=t.dateTo&&(n=t.dateFrom._d,s=t.dateTo._d,d({documents:{global:{date_created:"::date<= date'".concat(Object(Im.a)(s,"dd-MM-yyyy"),"' and date_created::date>=date'").concat(Object(Im.a)(n,"dd-MM-yyyy"),"'"),ORDER_BY:["date_created desc"]}}})),v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Tm([{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"title",width:"134px",type:"search",tooltip:!0,sorter:function(e,t){return e.title.localeCompare(t.title)},sortDirections:["ascend","descend"]},{title:"\u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0440\u0430\u0433\u0435\u043d\u0442\u0430",dataIndex:"counteragent_name",width:"130px",type:"search",tooltip:!0,sorter:function(e,t){return e.counteragent_name.localeCompare(t.counteragent_name)},sortDirections:["ascend","descend"]},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",width:"55px",tooltip:!0,sorter:function(e,t){return e.price-t.price},sortDirections:["ascend","descend"]},Object(Ia.a)({title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",dataIndex:"date_created",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_created)-new Date(t.date_created)})),Object(Ia.a)({title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",dataIndex:"date_modified",width:"114px",type:"search",tooltip:!0,sorter:!0},"sorter",(function(e,t){return new Date(e.date_modified)-new Date(t.date_modified)})),{title:"\u0422\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",dataIndex:"route",width:"114px",type:"search",tooltip:!0,sorter:function(e,t){return e.route.localeCompare(t.route)},sortDirections:["ascend","descend"]},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"80px",tooltip:!0,sorter:function(e,t){return e.status.localeCompare(t.status)},sortDirections:["ascend","descend"]},{title:"\u041d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",dataIndex:"step_name",width:"114px"},{title:"\u042d\u0442\u0430\u043f",dataIndex:"step_count",width:"55px"}]),S=function(){console.log("currentTableData Excel //////////",_),fetch("/api/tabledata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentTableData:_})}),Object(pc.a)(bc.a.mark((function e(){return bc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xs.b)("/api/tabledata","\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432 "+Object(Xs.d)(new Date)+".xlsx");case 2:case"end":return e.stop()}}),e)})))()},T="YYYY-MM-DD HH:mm:ss";return Object(ua.jsxs)("span",{children:[Object(ua.jsx)(xa.a,{onFinish:k,name:"filterForm",onValuesChange:function(e,t){w(Object.assign({},N,Object(xs.a)({},t)))},children:Object(ua.jsxs)(Hs.a,{style:{paddingLeft:"10px",paddingRight:"10px",marginBottom:"15px",marginTop:"15px"},children:[Object(ua.jsxs)(Ks.a,{span:2,style:{marginRight:"25px"},children:["\u041e\u0442:",Object(ua.jsx)(xa.a.Item,{name:"dateFrom",children:Object(ua.jsx)(ar.a,{format:T,locale:cr.a,style:{width:"100%"}})})]}),Object(ua.jsxs)(Ks.a,{span:2,style:{marginRight:"25px"},children:["\u0414\u043e:",Object(ua.jsx)(xa.a.Item,{name:"dateTo",children:Object(ua.jsx)(ar.a,{format:T,locale:cr.a,style:{width:"100%"}})})]}),Object(ua.jsxs)(Ks.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(ua.jsx)(xa.a.Item,{name:"documentType",children:Object(ua.jsxs)(gi.a,{style:{width:"100%"},children:[Object(ua.jsx)(Km,{value:10,children:"\u0417\u0430\u043a\u0443\u043f \u0422\u0420\u0423"}),Object(ua.jsx)(Km,{value:24,children:"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(ua.jsx)(Km,{value:26,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"}),Object(ua.jsx)(Km,{value:27,children:"\u041b\u0438\u0441\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0437\u0430\u043a\u0443\u043f \u0422\u0420\u0423 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0438\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0438\u0445 \u043d\u0443\u0436\u0434 \u0438 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0437\u0430\u0442\u0440\u0430\u0442"}),Object(ua.jsx)(Km,{value:29,children:"\u0414\u0440\u0443\u0433\u043e\u0439"}),Object(ua.jsx)(Km,{value:void 0})]})})]}),Object(ua.jsxs)(Ks.a,{span:4,style:{marginRight:"25px"},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430:",Object(ua.jsx)(xa.a.Item,{name:"documentStatus",children:Object(ua.jsxs)(gi.a,{style:{width:"100%"},children:[Object(ua.jsx)(Km,{value:5,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(ua.jsx)(Km,{value:4,children:"\u0423\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d"}),Object(ua.jsx)(Km,{value:2,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0451\u043d"}),Object(ua.jsx)(Km,{value:7,children:"\u041d\u0430 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0435"}),Object(ua.jsx)(Km,{value:void 0})]})})]}),Object(ua.jsxs)(Ks.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u043e\u0442:",Object(ua.jsx)(xa.a.Item,{name:"priceFrom",children:Object(ua.jsx)(va.a,{})})]}),Object(ua.jsxs)(Ks.a,{span:2,style:{marginRight:"25px"},children:["\u0426\u0435\u043d\u0430 \u0434\u043e:",Object(ua.jsx)(xa.a.Item,{name:"priceTo",children:Object(ua.jsx)(va.a,{})})]}),Object(ua.jsx)(Ks.a,{span:2,style:{marginRight:"25px",marginTop:"20px"},children:Object(ua.jsx)(As.a,{type:"primary",htmlType:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})})]})}),Object(ua.jsx)(Nm,{data:{dict:C,records:g},loading:f||!1,title:function(e){return Object(ua.jsx)(Ya,{buttons:[Object(ua.jsx)(As.a,{onClick:S,children:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0432 Excel"}),Object(ua.jsx)(Vm,{visibleModalUpdate:n,GQL:Em,UpdateForm:Fm,visibleModalUpdate2:s,GQL2:Em,UpdateForm2:Dm,visibleModalUpdate3:a,GQL3:Em,UpdateForm3:Um,visibleModalUpdate4:i,GQL4:Em,UpdateForm4:Mm,visibleModalUpdate5:c,GQL5:Em,UpdateForm5:zm,title:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",selectedRowKeys:e.selectedRowKeys,update:!0,width:750})],selectedRowKeys:e.selectedRowKeys})},onChange:function(e,t,n,s){O(s.currentDataSource),j(t)},visibleModalUpdate:n,visibleModalUpdate2:s,visibleModalUpdate3:a,visibleModalUpdate4:i,visibleModalUpdate5:c})]})})),Am=qm,Hm=(Js.a.Header,Js.a.Content),Bm=gs.a.memo((function(e){var t=Object(Xs.j)(),n=Object(Ys.useLocation)().pathname,s=Object(vs.useState)("\u041f\u043e\u0438\u0441\u043a"),a=Object(ha.a)(s,2),i=a[0];a[1];return"/document-search/"!==n&&"/document-search"!==n||!t.documentSearch.search.select?Object(ua.jsxs)(Js.a,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:[Object(ua.jsx)(Om,{title:i,user:t}),Object(ua.jsx)(Js.a,{children:Object(ua.jsx)(Js.a,{className:"content-layout",children:Object(ua.jsx)(Hm,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(ua.jsx)(Ys.Route,{path:"/document-search/search",component:Object(Xs.a)(Am)})})})})]}):Object(ua.jsx)(Ys.Redirect,{to:"/document-search/search"})})),Gm=Object(Ys.withRouter)(Bm),Qm=ws.port,Wm=ws.graphql;console.log("Starting SD Client. Host is "+window.SERVER_DATA);var Ym=new Ds.a({uri:"https://"+window.SERVER_DATA+":".concat(Qm).concat(Wm.path)}),Xm=new $s.a({uri:"wss://"+window.SERVER_DATA+":".concat(Qm).concat(Wm.path),options:{reconnect:!0}}),Zm=(Js.a.Header,Js.a.Content),ej=(Js.a.Sider,Object(Rs.a)((function(e){var t=e.graphQLErrors,n=e.networkError,s=e.operation;e.response;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(JSON.stringify(n),", Path: ").concat(a,". \n"),"[Details]: operation: ".concat(JSON.stringify(s.variables),". \n"),"[Details]: operationName: ".concat(JSON.stringify(s.operationName),". \n"))})),n&&(console.log("[Network error]: ".concat(JSON.stringify(n))),zs.a.info({message:Object(ua.jsxs)("div",{id:"ant_notification",children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c ZiK-\u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430.",Object(ua.jsx)("br",{}),"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u043d\u0438\u043b\u0430\u0441\u044c \u0447\u0435\u0440\u0435\u0437 5 \u043c\u0438\u043d\u0443\u0442, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0432\u0430\u0448\u0435\u0439 \u0441\u043b\u0443\u0436\u0431\u043e\u0439 IT."]}),duration:10,placement:"bottomRight"}))}))),tj=Object(Ms.a)((function(e,t){var n=t.headers,s=localStorage.getItem("token");return{headers:Object(xs.a)(Object(xs.a)({},n),{},{authorization:s?"Bearer ".concat(s):""})}})),nj=Object(Ls.a)((function(e){var t=e.query,n=Object(Us.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Xm,tj.concat(Ym)),sj=new Cs.a({link:Fs.a.from([ej,nj]),cache:new Ss.a}),aj=Object(ua.jsx)(Ks.a,{className:"main-menu-col",children:Object(ua.jsx)(qs.a,{placement:"rightTop",title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0431\u043e\u0440\u043e\u0442",children:Object(ua.jsx)(As.a,{type:"solid",className:"main-menu-button",children:Object(ua.jsxs)(Ws.c,{to:"document-control",style:{fontSize:"25px"},children:[" ",Object(ua.jsx)(Ts.a,{style:{marginRight:7}})," \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u0430 ",Object(ua.jsx)("p",{className:"page-desc",children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0435\u0442 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"})]})})})}),ij=Object(ua.jsx)(Ks.a,{className:"main-menu-col",children:Object(ua.jsx)(qs.a,{placement:"rightTop",title:"\u041e\u0442\u0447\u0435\u0442\u044b",children:Object(ua.jsx)(As.a,{type:"solid",className:"main-menu-button",children:Object(ua.jsxs)(Ws.c,{to:"document-report",style:{fontSize:"25px"},children:[" ",Object(ua.jsx)(Is.a,{style:{marginRight:7}})," \u041e\u0442\u0447\u0435\u0442\u044b ",Object(ua.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c"})]})})})}),cj=Object(ua.jsx)(Ks.a,{className:"main-menu-col",children:Object(ua.jsx)(qs.a,{placement:"rightTop",title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438",children:Object(ua.jsx)(As.a,{type:"solid",className:"main-menu-button",children:Object(ua.jsxs)(Ws.c,{to:"document-history",style:{fontSize:"25px"},children:[" ",Object(ua.jsx)(Es.a,{style:{marginRight:7}}),"  \u0418\u0441\u0442\u043e\u0440\u0438\u044f ",Object(ua.jsx)("p",{className:"page-desc",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})]})})})}),oj=Object(ua.jsx)(Ks.a,{className:"main-menu-col",children:Object(ua.jsx)(qs.a,{placement:"rightTop",title:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c",children:Object(ua.jsx)(As.a,{type:"solid",className:"main-menu-button",children:Object(ua.jsxs)(Ws.c,{to:"document-search",style:{fontSize:"25px"},children:[Object(ua.jsx)(Ps.a,{style:{marginRight:7}})," \u041f\u043e\u0438\u0441\u043a ",Object(ua.jsx)("p",{className:"page-desc",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c"})]})})})}),lj=gs.a.memo((function(){Object(Ys.useLocation)().pathname;var e=Object(Xs.j)();return console.log("user",e),Object(ua.jsxs)(Js.a,{children:[Object(ua.jsx)(_a,{title:"",user:e}),Object(ua.jsx)(Js.a,{children:Object(ua.jsx)(Js.a,{className:"content-layout",children:Object(ua.jsx)(Zm,{className:"site-layout-background",style:{padding:0,margin:0,minHeight:280},children:Object(ua.jsx)("div",{style:{paddingTop:50},children:Object(ua.jsxs)(Hs.a,{justify:"center",style:{margin:"0",top:"50%",transform:"translate(0,-50%)",position:"absolute",width:"99%"},children:[e.documentControl.select?aj:null,e.documentReport.select?ij:null,e.documentHistory.select?cj:null,e.documentSearch.select?oj:null]})})})})})]})})),rj=function(){return Object(ua.jsxs)(Ys.Switch,{children:[Object(ua.jsx)(Ys.Route,{path:"/login",component:ka}),Object(ua.jsx)(Ys.Route,{path:"/logout",component:function(){return Object(ua.jsx)(ua.Fragment,{})}}),Object(ua.jsx)(Ys.Route,{path:"/",exact:!0,component:lj}),Object(ua.jsx)(Ys.Route,{path:"/document-control",component:Object(Xs.a)(jm)}),Object(ua.jsx)(Ys.Route,{path:"/document-search",component:Object(Xs.a)(Gm)}),Object(ua.jsx)(Ys.Route,{path:"/admin",component:Object(Xs.a)(Wi)}),Object(ua.jsx)(Ys.Route,{path:"/account",component:Object(Xs.a)(ac)}),Object(ua.jsx)(Ys.Route,{component:Oa.a})]})};Vs.a.render(Object(ua.jsx)(Ws.a,{children:Object(ua.jsx)(ks.a,{client:sj,children:Object(ua.jsx)(Bs.b,{locale:Qs.a,children:Object(ua.jsx)(rj,{})})})}),document.getElementById("root"))},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return handlerQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return handlerMutation})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useUser})),__webpack_require__.d(__webpack_exports__,"a",(function(){return accessRedirect})),__webpack_require__.d(__webpack_exports__,"b",(function(){return download})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getDDMMYYY})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDDMMYYYHHmm})),__webpack_require__.d(__webpack_exports__,"c",(function(){return formatDate})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDiffHours})),__webpack_require__.d(__webpack_exports__,"i",(function(){return notifyMe}));var G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(151),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_apollo_client__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(299),_apollo_client__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(240),react_router_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(36),_modules_Error404__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(178),_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(232),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__),_templateObject,_templateObject2,_templateObject3,MergeRecursive=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var s in n)try{n[s].constructor===Object?t[s]=e(t[s],n[s]):t[s]=n[s]}catch(a){t[s]=n[s]}return t},checkObject=function checkObject(object,data){var request="";try{request=eval("object.".concat(data))}catch(e){return request}return void 0===request?"":request},handlerQuery=function(e,t,n,s){return function(){var a=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),i=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(a,2),c=i[0],o=i[1],l=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(e.select[t],Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)));return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){l.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:l.error.message,duration:0,placement:"bottomRight"})}),[l.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(e.subscription[t]&&l.data&&!c){if(e.subscription[t][0])for(var a in e.subscription[t])l.subscribeToMore({document:e.subscription[t][a],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});else l.subscribeToMore({document:e.subscription[t],variables:Object.assign({},MergeRecursive(e.options&&e.options[t]?e.options[t]:{},n)).variables,updateQuery:function(e,t){var n=t.subscriptionData;return s?(l.refetch(),e):n.data?Object.assign({},e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},e),n.data)):e}});o(!0)}}),[l.data]),l}},handlerMutation=function(e){var t=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(e,2),n=t[0],s=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){return Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){s.loading||s.error&&antd__WEBPACK_IMPORTED_MODULE_5__.a.error({message:s.error.message,duration:0,placement:"bottomRight"})}),[s.error]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(s.data){var e=s.data[Object.keys(s.data)[0]];"warning"==e.type?antd__WEBPACK_IMPORTED_MODULE_5__.a.warning({message:e.message,duration:0,placement:"bottomRight"}):antd__WEBPACK_IMPORTED_MODULE_5__.a.success({message:e.message,duration:10,placement:"bottomRight"}),a()}}),[s.data]),[n,s]}},isAccessed=function(e,t){return!!e.admin||t.some((function(t){return e.accesses.includes(t)}))},authMe={options:{},select:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject||(_templateObject=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                    position_accesses\n                }\n            }\n        "])))},subscription:{one:Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject2||(_templateObject2=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            subscription authMe($test: JSON) {\n                authMe(test: $test) {\n\t\t\t\t\tid\n                    username\n                    admin\n                    accesses\n                    positions\n                    domain_username\n                    fio\n                    email\n                    position_names\n                }\n            }\n\n        "])))}},positions=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_templateObject3||(_templateObject3=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__.a)(["\n            query positions ($positions: JSON) {\n                positions (positions: $positions) {\n                    id\n                    name\n                    accesses\n                }\n            }\n        "]))),useUser=function(){var e=handlerQuery(authMe,"one",{variables:{}},"auth")(),t=Object(_apollo_client__WEBPACK_IMPORTED_MODULE_7__.a)(positions),n=(t.loading,t.data),s=(t.refetch,e.data?e.data.authMe[0]:void 0),a=s?e.data.authMe[0].position_names:[],i=(s&&s.positions&&(null===n||void 0===n||n.positions.filter((function(e){return e.id==s.positions[0]}))),s?e.data.authMe[0].position_accesses:[]),c=s?s.admin:void 0;return{query:e,id:s?s.id:void 0,username:s?s.username:void 0,domain_username:s?s.domain_username:void 0,fio:s?s.fio:void 0,email:s?s.email:void 0,admin:s?s.admin:void 0,role_id:s?s.role_id:void 0,positions:c?[1,2,3,4,5,6]:null===s||void 0===s?void 0:s.positions,position_names:a,documentControl:{select:!!c||i.includes("/document-control-p/select"),insert:!!c||i.includes("/document-control-p/insert"),update:!!c||i.includes("/document-control-p/update"),delete:!!c||i.includes("/document-control-p/delete"),orders:{select:!!c||i.includes("/document-control-p/orders-p/select")},revisedUser:{select:!!c||i.includes("/document-control-p/reviseduser-p/select")},approvedUser:{select:!!c||i.includes("/document-control-p/approveduser-p/select")},rejectedUser:{select:!!c||i.includes("/document-control-p/rejecteduser-p/select")},onApproval:{select:!!c||i.includes("/document-control-p/on-approval-p/select")},onApprovalList:{select:!!c||i.includes("/document-control-p/on-approval-list-p/select")},forExecutionInbox:{select:!!c||i.includes("/document-control-p/for-execution-inbox-p/select")},approved:{select:!!c||i.includes("/document-control-p/approved-p/select")},rejected:{select:!!c||i.includes("/document-control-p/rejected-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-control-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-control-p/item-status-change")},documentReport:{select:!!c||i.includes("/document-report-p/select"),insert:!!c||i.includes("/document-report-p/insert"),update:!!c||i.includes("/document-report-p/update"),delete:!!c||i.includes("/document-report-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-report-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-report-p/item-status-change")},documentHistory:{select:!!c||i.includes("/document-history-p/select"),insert:!!c||i.includes("/document-history-p/insert"),update:!!c||i.includes("/document-history-p/update"),delete:!!c||i.includes("/document-history-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/document-history-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-history-p/item-status-change")},documentSearch:{select:!!c||i.includes("/document-search-p/select"),insert:!!c||i.includes("/document-search-p/insert"),update:!!c||i.includes("/document-search-p/update"),delete:!!c||i.includes("/document-search-p/delete"),search:{select:!!c||i.includes("/document-search-p/search-p/select")},isDocumentStatusChangeAllowed:!!c||i.includes("/document-search-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/document-search-p/item-status-change")},adminDepartment:{select:!!c||i.includes("/admin-p/select"),insert:!!c||i.includes("/admin-p/insert"),update:!!c||i.includes("/admin-p/update"),delete:!!c||i.includes("/admin-p/delete"),isDocumentStatusChangeAllowed:!!c||i.includes("/admin-p/document-status-change"),isItemStatusChangeAllowed:!!c||i.includes("/admin-p/item-status-change")}}},accessRedirect=function(e){var t=function(t){var n=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useLocation)().pathname,s=useUser();n.split("/");if(s.query.loading)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:"Loading..."});switch(n){case"/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/login"});break;case"/login":case"/login/":if(s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/logout":case"/logout/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/"});break;case"/account":case"/account/":if(!s.username)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{to:"/account"});break;case"/admin":case"/admin/":case"/graphql":case"/graphql/":case"/admin/registration":case"/admin/registration/":case"/admin/positions-page":case"/admin/positions-page/":case"/admin/document-statuses-page":case"/admin/document-statuses-page/":case"/admin/document-routes-page":case"/admin/document-routes-page/":case"/admin/forms-settings-page":case"/admin/forms-settings-page/":if(!s.admin)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control":case"/document-control/":if(!s.documentControl.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/orders":case"/document-control/orders/":if(!s.documentControl.orders.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/reviseduser":case"/document-control/reviseduser/":case"/document-control/approveduser":case"/document-control/approveduser/":if(!s.documentControl.approvedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejecteduser":case"/document-control/rejecteduser/":if(!s.documentControl.rejectedUser.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval":case"/document-control/on-approval/":if(!s.documentControl.onApproval.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/on-approval-list":case"/document-control/on-approval-list/":if(!s.documentControl.onApprovalList.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/for-execution-inbox":case"/document-control/for-execution-inbox/":if(!s.documentControl.forExecutionInbox.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/approved":case"/document-control/approved/":if(!s.documentControl.approved.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-control/rejected":case"/document-control/rejected/":if(!s.documentControl.rejected.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-report":case"/document-report/":if(!s.documentReport.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-history":case"/document-history/":if(!s.documentHistory.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search":case"/document-search/":if(!s.documentSearch.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;case"/document-search/search":case"/document-search/search/":if(!s.documentSearch.search.select)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(react_router_dom__WEBPACK_IMPORTED_MODULE_9__.Redirect,{});break;default:return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_modules_Error404__WEBPACK_IMPORTED_MODULE_10__.a,{})}return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(e,Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},t))};return t},download=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t,n){var s,a,i;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"no-cors"});case 2:return s=e.sent,e.prev=3,e.next=6,s.blob();case 6:a=e.sent,(i=document.createElement("a")).href=URL.createObjectURL(a),i.setAttribute("download",n),i.click(),i.remove(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),getDDMMYYY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear();return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a},getDDMMYYYHHmm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=t.getDate(),s=t.getMonth()+1,a=t.getFullYear(),i=t.getHours(),c=t.getMinutes();function o(e){return String(e).padStart(2,"0")}return n<10&&(n="0"+n),s<10&&(s="0"+s),t=n+"-"+s+"-"+a+" "+o(i)+":"+o(c)},getFirstMonthDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e),n=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3),s=n;return s.setHours(0,0,0,0),s.setMonth(s.getMonth()+1,0),s.setDate(1),s},formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.split(/[^\d]+/);return t=t[2]+"-"+t[1]+"-"+t[0]+" "+t[3]+":"+t[4]+":"+t[5]},getDiffHours=function(e,t){var n=(t.getTime()-e.getTime())/1e3;return n/=3600,console.log("diff",n),n<1?"\u043c\u0435\u043d\u0435\u0435 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434":n<12&&n>=1?Math.abs(Math.round(n))+" \u0447. \u043d\u0430\u0437\u0430\u0434":n>12&&n<24?"\u0412\u0447\u0435\u0440\u0430":n>24?Math.abs(Math.round(n/24))+" \u0434. \u043d\u0430\u0437\u0430\u0434":void 0},notifyMe=function(e){if(window.Notification){if(e)if("granted"===Notification.permission){var t=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){t.close()}),3e3)}else Notification.requestPermission().then((function(t){if("granted"===t){var n=new Notification("\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432",{title:"\u0422\u0435\u0441\u0442",body:e,icon:_images_duck_jpg__WEBPACK_IMPORTED_MODULE_11__.a,requireInteraction:!1});setTimeout((function(){n.close()}),3e3)}else console.log("User blocked notifications.")})).catch((function(e){console.error(e)}))}else console.log("Browser does not support notifications.")},sendAgentNotification=function(){var e=Object(G_projects_sd_sd27May22_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(t){var n;return G_projects_sd_sd27May22_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},[[421,1,2]]]);
//# sourceMappingURL=main.7611224c.chunk.js.map